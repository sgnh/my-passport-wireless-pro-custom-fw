/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a, b) {
    function cy(a) {
        return f.isWindow(a) ? a : a.nodeType === 9 ? a.defaultView || a.parentWindow : !1;
    }
    function cu(a) {
        if (!cj[a]) {
            var b = c.body
              , d = f("<" + a + ">").appendTo(b)
              , e = d.css("display");
            d.remove();
            if (e === "none" || e === "") {
                ck || (ck = c.createElement("iframe"),
                ck.frameBorder = ck.width = ck.height = 0),
                b.appendChild(ck);
                if (!cl || !ck.createElement) {
                    cl = (ck.contentWindow || ck.contentDocument).document,
                    cl.write((f.support.boxModel ? "<!doctype html>" : "") + "<html><body>"),
                    cl.close();
                }
                d = cl.createElement(a),
                cl.body.appendChild(d),
                e = f.css(d, "display"),
                b.removeChild(ck);
            }
            cj[a] = e;
        }
        return cj[a];
    }
    function ct(a, b) {
        var c = {};
        f.each(cp.concat.apply([], cp.slice(0, b)), function() {
            c[this] = a;
        });
        return c;
    }
    function cs() {
        cq = b;
    }
    function cr() {
        setTimeout(cs, 0);
        return cq = f.now();
    }
    function ci() {
        try {
            return new a.ActiveXObject("Microsoft.XMLHTTP");
        } catch (b) {}
    }
    function ch() {
        try {
            return new a.XMLHttpRequest;
        } catch (b) {}
    }
    function cb(a, c) {
        a.dataFilter && (c = a.dataFilter(c, a.dataType));
        var d = a.dataTypes, e = {}, g, h, i = d.length, j, k = d[0], l, m, n, o, p;
        for (g = 1; g < i; g++) {
            if (g === 1) {
                for (h in a.converters) {
                    typeof h == "string" && (e[h.toLowerCase()] = a.converters[h]);
                }
            }
            l = k,
            k = d[g];
            if (k === "*") {
                k = l;
            } else {
                if (l !== "*" && l !== k) {
                    m = l + " " + k,
                    n = e[m] || e["* " + k];
                    if (!n) {
                        p = b;
                        for (o in e) {
                            j = o.split(" ");
                            if (j[0] === l || j[0] === "*") {
                                p = e[j[1] + " " + k];
                                if (p) {
                                    o = e[o],
                                    o === !0 ? n = p : p === !0 && (n = o);
                                    break;
                                }
                            }
                        }
                    }
                    !n && !p && f.error("No conversion from " + m.replace(" ", " to ")),
                    n !== !0 && (c = n ? n(c) : p(o(c)));
                }
            }
        }
        return c;
    }
    function ca(a, c, d) {
        var e = a.contents, f = a.dataTypes, g = a.responseFields, h, i, j, k;
        for (i in g) {
            i in d && (c[g[i]] = d[i]);
        }
        while (f[0] === "*") {
            f.shift(),
            h === b && (h = a.mimeType || c.getResponseHeader("content-type"));
        }
        if (h) {
            for (i in e) {
                if (e[i] && e[i].test(h)) {
                    f.unshift(i);
                    break;
                }
            }
        }
        if (f[0] in d) {
            j = f[0];
        } else {
            for (i in d) {
                if (!f[0] || a.converters[i + " " + f[0]]) {
                    j = i;
                    break;
                }
                k || (k = i);
            }
            j = j || k;
        }
        if (j) {
            j !== f[0] && f.unshift(j);
            return d[j];
        }
    }
    function b_(a, b, c, d) {
        if (f.isArray(b)) {
            f.each(b, function(b, e) {
                c || bD.test(a) ? d(a, e) : b_(a + "[" + (typeof e == "object" ? b : "") + "]", e, c, d);
            });
        } else {
            if (!c && f.type(b) === "object") {
                for (var e in b) {
                    b_(a + "[" + e + "]", b[e], c, d);
                }
            } else {
                d(a, b);
            }
        }
    }
    function b$(a, c) {
        var d, e, g = f.ajaxSettings.flatOptions || {};
        for (d in c) {
            c[d] !== b && ((g[d] ? a : e || (e = {}))[d] = c[d]);
        }
        e && f.extend(!0, a, e);
    }
    function bZ(a, c, d, e, f, g) {
        f = f || c.dataTypes[0],
        g = g || {},
        g[f] = !0;
        var h = a[f], i = 0, j = h ? h.length : 0, k = a === bS, l;
        for (; i < j && (k || !l); i++) {
            l = h[i](c, d, e),
            typeof l == "string" && (!k || g[l] ? l = b : (c.dataTypes.unshift(l),
            l = bZ(a, c, d, e, l, g)));
        }
        (k || !l) && !g["*"] && (l = bZ(a, c, d, e, "*", g));
        return l;
    }
    function bY(a) {
        return function(b, c) {
            typeof b != "string" && (c = b,
            b = "*");
            if (f.isFunction(c)) {
                var d = b.toLowerCase().split(bO), e = 0, g = d.length, h, i, j;
                for (; e < g; e++) {
                    h = d[e],
                    j = /^\+/.test(h),
                    j && (h = h.substr(1) || "*"),
                    i = a[h] = a[h] || [],
                    i[j ? "unshift" : "push"](c);
                }
            }
        }
        ;
    }
    function bB(a, b, c) {
        var d = b === "width" ? a.offsetWidth : a.offsetHeight
          , e = b === "width" ? 1 : 0
          , g = 4;
        if (d > 0) {
            if (c !== "border") {
                for (; e < g; e += 2) {
                    c || (d -= parseFloat(f.css(a, "padding" + bx[e])) || 0),
                    c === "margin" ? d += parseFloat(f.css(a, c + bx[e])) || 0 : d -= parseFloat(f.css(a, "border" + bx[e] + "Width")) || 0;
                }
            }
            return d + "px";
        }
        d = by(a, b);
        if (d < 0 || d == null ) {
            d = a.style[b];
        }
        if (bt.test(d)) {
            return d;
        }
        d = parseFloat(d) || 0;
        if (c) {
            for (; e < g; e += 2) {
                d += parseFloat(f.css(a, "padding" + bx[e])) || 0,
                c !== "padding" && (d += parseFloat(f.css(a, "border" + bx[e] + "Width")) || 0),
                c === "margin" && (d += parseFloat(f.css(a, c + bx[e])) || 0);
            }
        }
        return d + "px";
    }
    function bo(a) {
        var b = c.createElement("div");
        bh.appendChild(b),
        b.innerHTML = a.outerHTML;
        return b.firstChild;
    }
    function bn(a) {
        var b = (a.nodeName || "").toLowerCase();
        b === "input" ? bm(a) : b !== "script" && typeof a.getElementsByTagName != "undefined" && f.grep(a.getElementsByTagName("input"), bm);
    }
    function bm(a) {
        if (a.type === "checkbox" || a.type === "radio") {
            a.defaultChecked = a.checked;
        }
    }
    function bl(a) {
        return typeof a.getElementsByTagName != "undefined" ? a.getElementsByTagName("*") : typeof a.querySelectorAll != "undefined" ? a.querySelectorAll("*") : [];
    }
    function bk(a, b) {
        var c;
        b.nodeType === 1 && (b.clearAttributes && b.clearAttributes(),
        b.mergeAttributes && b.mergeAttributes(a),
        c = b.nodeName.toLowerCase(),
        c === "object" ? b.outerHTML = a.outerHTML : c !== "input" || a.type !== "checkbox" && a.type !== "radio" ? c === "option" ? b.selected = a.defaultSelected : c === "input" || c === "textarea" ? b.defaultValue = a.defaultValue : c === "script" && b.text !== a.text && (b.text = a.text) : (a.checked && (b.defaultChecked = b.checked = a.checked),
        b.value !== a.value && (b.value = a.value)),
        b.removeAttribute(f.expando),
        b.removeAttribute("_submit_attached"),
        b.removeAttribute("_change_attached"));
    }
    function bj(a, b) {
        if (b.nodeType === 1 && !!f.hasData(a)) {
            var c, d, e, g = f._data(a), h = f._data(b, g), i = g.events;
            if (i) {
                delete h.handle,
                h.events = {};
                for (c in i) {
                    for (d = 0,
                    e = i[c].length; d < e; d++) {
                        f.event.add(b, c, i[c][d]);
                    }
                }
            }
            h.data && (h.data = f.extend({}, h.data));
        }
    }
    function bi(a, b) {
        return f.nodeName(a, "table") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a;
    }
    function U(a) {
        var b = V.split("|")
          , c = a.createDocumentFragment();
        if (c.createElement) {
            while (b.length) {
                c.createElement(b.pop());
            }
        }
        return c;
    }
    function T(a, b, c) {
        b = b || 0;
        if (f.isFunction(b)) {
            return f.grep(a, function(a, d) {
                var e = !!b.call(a, d, a);
                return e === c;
            });
        }
        if (b.nodeType) {
            return f.grep(a, function(a, d) {
                return a === b === c;
            });
        }
        if (typeof b == "string") {
            var d = f.grep(a, function(a) {
                return a.nodeType === 1;
            });
            if (O.test(b)) {
                return f.filter(b, d, !c);
            }
            b = f.filter(b, d);
        }
        return f.grep(a, function(a, d) {
            return f.inArray(a, b) >= 0 === c;
        });
    }
    function S(a) {
        return !a || !a.parentNode || a.parentNode.nodeType === 11;
    }
    function K() {
        return !0;
    }
    function J() {
        return !1;
    }
    function n(a, b, c) {
        var d = b + "defer"
          , e = b + "queue"
          , g = b + "mark"
          , h = f._data(a, d);
        h && (c === "queue" || !f._data(a, e)) && (c === "mark" || !f._data(a, g)) && setTimeout(function() {
            !f._data(a, e) && !f._data(a, g) && (f.removeData(a, d, !0),
            h.fire());
        }, 0);
    }
    function m(a) {
        for (var b in a) {
            if (b === "data" && f.isEmptyObject(a[b])) {
                continue;
            }
            if (b !== "toJSON") {
                return !1;
            }
        }
        return !0;
    }
    function l(a, c, d) {
        if (d === b && a.nodeType === 1) {
            var e = "data-" + c.replace(k, "-$1").toLowerCase();
            d = a.getAttribute(e);
            if (typeof d == "string") {
                try {
                    d = d === "true" ? !0 : d === "false" ? !1 : d === "null" ? null  : f.isNumeric(d) ? +d : j.test(d) ? f.parseJSON(d) : d;
                } catch (g) {}
                f.data(a, c, d);
            } else {
                d = b;
            }
        }
        return d;
    }
    function h(a) {
        var b = g[a] = {}, c, d;
        a = a.split(/\s+/);
        for (c = 0,
        d = a.length; c < d; c++) {
            b[a[c]] = !0;
        }
        return b;
    }
    var c = a.document
      , d = a.navigator
      , e = a.location
      , f = function() {
        function J() {
            if (!e.isReady) {
                try {
                    c.documentElement.doScroll("left");
                } catch (a) {
                    setTimeout(J, 1);
                    return;
                }
                e.ready();
            }
        }
        var e = function(a, b) {
            return new e.fn.init(a,b,h);
        }
        , f = a.jQuery, g = a.$, h, i = /^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/, j = /\S/, k = /^\s+/, l = /\s+$/, m = /^<(\w+)\s*\/?>(?:<\/\1>)?$/, n = /^[\],:{}\s]*$/, o = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, p = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, q = /(?:^|:|,)(?:\s*\[)+/g, r = /(webkit)[ \/]([\w.]+)/, s = /(opera)(?:.*version)?[ \/]([\w.]+)/, t = /(msie) ([\w.]+)/, u = /(mozilla)(?:.*? rv:([\w.]+))?/, v = /-([a-z]|[0-9])/ig, w = /^-ms-/, x = function(a, b) {
            return (b + "").toUpperCase();
        }
        , y = d.userAgent, z, A, B, C = Object.prototype.toString, D = Object.prototype.hasOwnProperty, E = Array.prototype.push, F = Array.prototype.slice, G = String.prototype.trim, H = Array.prototype.indexOf, I = {};
        e.fn = e.prototype = {
            constructor: e,
            init: function(a, d, f) {
                var g, h, j, k;
                if (!a) {
                    return this;
                }
                if (a.nodeType) {
                    this.context = this[0] = a,
                    this.length = 1;
                    return this;
                }
                if (a === "body" && !d && c.body) {
                    this.context = c,
                    this[0] = c.body,
                    this.selector = a,
                    this.length = 1;
                    return this;
                }
                if (typeof a == "string") {
                    a.charAt(0) !== "<" || a.charAt(a.length - 1) !== ">" || a.length < 3 ? g = i.exec(a) : g = [null , a, null ];
                    if (g && (g[1] || !d)) {
                        if (g[1]) {
                            d = d instanceof e ? d[0] : d,
                            k = d ? d.ownerDocument || d : c,
                            j = m.exec(a),
                            j ? e.isPlainObject(d) ? (a = [c.createElement(j[1])],
                            e.fn.attr.call(a, d, !0)) : a = [k.createElement(j[1])] : (j = e.buildFragment([g[1]], [k]),
                            a = (j.cacheable ? e.clone(j.fragment) : j.fragment).childNodes);
                            return e.merge(this, a);
                        }
                        h = c.getElementById(g[2]);
                        if (h && h.parentNode) {
                            if (h.id !== g[2]) {
                                return f.find(a);
                            }
                            this.length = 1,
                            this[0] = h;
                        }
                        this.context = c,
                        this.selector = a;
                        return this;
                    }
                    return !d || d.jquery ? (d || f).find(a) : this.constructor(d).find(a);
                }
                if (e.isFunction(a)) {
                    return f.ready(a);
                }
                a.selector !== b && (this.selector = a.selector,
                this.context = a.context);
                return e.makeArray(a, this);
            },
            selector: "",
            jquery: "1.7.2",
            length: 0,
            size: function() {
                return this.length;
            },
            toArray: function() {
                return F.call(this, 0);
            },
            get: function(a) {
                return a == null  ? this.toArray() : a < 0 ? this[this.length + a] : this[a];
            },
            pushStack: function(a, b, c) {
                var d = this.constructor();
                e.isArray(a) ? E.apply(d, a) : e.merge(d, a),
                d.prevObject = this,
                d.context = this.context,
                b === "find" ? d.selector = this.selector + (this.selector ? " " : "") + c : b && (d.selector = this.selector + "." + b + "(" + c + ")");
                return d;
            },
            each: function(a, b) {
                return e.each(this, a, b);
            },
            ready: function(a) {
                e.bindReady(),
                A.add(a);
                return this;
            },
            eq: function(a) {
                a = +a;
                return a === -1 ? this.slice(a) : this.slice(a, a + 1);
            },
            first: function() {
                return this.eq(0);
            },
            last: function() {
                return this.eq(-1);
            },
            slice: function() {
                return this.pushStack(F.apply(this, arguments), "slice", F.call(arguments).join(","));
            },
            map: function(a) {
                return this.pushStack(e.map(this, function(b, c) {
                    return a.call(b, c, b);
                }));
            },
            end: function() {
                return this.prevObject || this.constructor(null );
            },
            push: E,
            sort: [].sort,
            splice: [].splice
        },
        e.fn.init.prototype = e.fn,
        e.extend = e.fn.extend = function() {
            var a, c, d, f, g, h, i = arguments[0] || {}, j = 1, k = arguments.length, l = !1;
            typeof i == "boolean" && (l = i,
            i = arguments[1] || {},
            j = 2),
            typeof i != "object" && !e.isFunction(i) && (i = {}),
            k === j && (i = this,
            --j);
            for (; j < k; j++) {
                if ((a = arguments[j]) != null ) {
                    for (c in a) {
                        d = i[c],
                        f = a[c];
                        if (i === f) {
                            continue;
                        }
                        l && f && (e.isPlainObject(f) || (g = e.isArray(f))) ? (g ? (g = !1,
                        h = d && e.isArray(d) ? d : []) : h = d && e.isPlainObject(d) ? d : {},
                        i[c] = e.extend(l, h, f)) : f !== b && (i[c] = f);
                    }
                }
            }
            return i;
        }
        ,
        e.extend({
            noConflict: function(b) {
                a.$ === e && (a.$ = g),
                b && a.jQuery === e && (a.jQuery = f);
                return e;
            },
            isReady: !1,
            readyWait: 1,
            holdReady: function(a) {
                a ? e.readyWait++ : e.ready(!0);
            },
            ready: function(a) {
                if (a === !0 && !--e.readyWait || a !== !0 && !e.isReady) {
                    if (!c.body) {
                        return setTimeout(e.ready, 1);
                    }
                    e.isReady = !0;
                    if (a !== !0 && --e.readyWait > 0) {
                        return;
                    }
                    A.fireWith(c, [e]),
                    e.fn.trigger && e(c).trigger("ready").off("ready");
                }
            },
            bindReady: function() {
                if (!A) {
                    A = e.Callbacks("once memory");
                    if (c.readyState === "complete") {
                        return setTimeout(e.ready, 1);
                    }
                    if (c.addEventListener) {
                        c.addEventListener("DOMContentLoaded", B, !1),
                        a.addEventListener("load", e.ready, !1);
                    } else {
                        if (c.attachEvent) {
                            c.attachEvent("onreadystatechange", B),
                            a.attachEvent("onload", e.ready);
                            var b = !1;
                            try {
                                b = a.frameElement == null ;
                            } catch (d) {}
                            c.documentElement.doScroll && b && J();
                        }
                    }
                }
            },
            isFunction: function(a) {
                return e.type(a) === "function";
            },
            isArray: Array.isArray || function(a) {
                return e.type(a) === "array";
            }
            ,
            isWindow: function(a) {
                return a != null  && a == a.window;
            },
            isNumeric: function(a) {
                return !isNaN(parseFloat(a)) && isFinite(a);
            },
            type: function(a) {
                return a == null  ? String(a) : I[C.call(a)] || "object";
            },
            isPlainObject: function(a) {
                if (!a || e.type(a) !== "object" || a.nodeType || e.isWindow(a)) {
                    return !1;
                }
                try {
                    if (a.constructor && !D.call(a, "constructor") && !D.call(a.constructor.prototype, "isPrototypeOf")) {
                        return !1;
                    }
                } catch (c) {
                    return !1;
                }
                var d;
                for (d in a) {}
                return d === b || D.call(a, d);
            },
            isEmptyObject: function(a) {
                for (var b in a) {
                    return !1;
                }
                return !0;
            },
            error: function(a) {
                throw new Error(a);
            },
            parseJSON: function(b) {
                if (typeof b != "string" || !b) {
                    return null ;
                }
                b = e.trim(b);
                if (a.JSON && a.JSON.parse) {
                    return a.JSON.parse(b);
                }
                if (n.test(b.replace(o, "@").replace(p, "]").replace(q, ""))) {
                    return (new Function("return " + b))();
                }
                e.error("Invalid JSON: " + b);
            },
            parseXML: function(c) {
                if (typeof c != "string" || !c) {
                    return null ;
                }
                var d, f;
                try {
                    a.DOMParser ? (f = new DOMParser,
                    d = f.parseFromString(c, "text/xml")) : (d = new ActiveXObject("Microsoft.XMLDOM"),
                    d.async = "false",
                    d.loadXML(c));
                } catch (g) {
                    d = b;
                }
                (!d || !d.documentElement || d.getElementsByTagName("parsererror").length) && e.error("Invalid XML: " + c);
                return d;
            },
            noop: function() {},
            globalEval: function(b) {
                b && j.test(b) && (a.execScript || function(b) {
                    a.eval.call(a, b);
                }
                )(b);
            },
            camelCase: function(a) {
                return a.replace(w, "ms-").replace(v, x);
            },
            nodeName: function(a, b) {
                return a.nodeName && a.nodeName.toUpperCase() === b.toUpperCase();
            },
            each: function(a, c, d) {
                var f, g = 0, h = a.length, i = h === b || e.isFunction(a);
                if (d) {
                    if (i) {
                        for (f in a) {
                            if (c.apply(a[f], d) === !1) {
                                break;
                            }
                        }
                    } else {
                        for (; g < h; ) {
                            if (c.apply(a[g++], d) === !1) {
                                break;
                            }
                        }
                    }
                } else {
                    if (i) {
                        for (f in a) {
                            if (c.call(a[f], f, a[f]) === !1) {
                                break;
                            }
                        }
                    } else {
                        for (; g < h; ) {
                            if (c.call(a[g], g, a[g++]) === !1) {
                                break;
                            }
                        }
                    }
                }
                return a;
            },
            trim: G ? function(a) {
                return a == null  ? "" : G.call(a);
            }
             : function(a) {
                return a == null  ? "" : (a + "").replace(k, "").replace(l, "");
            }
            ,
            makeArray: function(a, b) {
                var c = b || [];
                if (a != null ) {
                    var d = e.type(a);
                    a.length == null  || d === "string" || d === "function" || d === "regexp" || e.isWindow(a) ? E.call(c, a) : e.merge(c, a);
                }
                return c;
            },
            inArray: function(a, b, c) {
                var d;
                if (b) {
                    if (H) {
                        return H.call(b, a, c);
                    }
                    d = b.length,
                    c = c ? c < 0 ? Math.max(0, d + c) : c : 0;
                    for (; c < d; c++) {
                        if (c in b && b[c] === a) {
                            return c;
                        }
                    }
                }
                return -1;
            },
            merge: function(a, c) {
                var d = a.length
                  , e = 0;
                if (typeof c.length == "number") {
                    for (var f = c.length; e < f; e++) {
                        a[d++] = c[e];
                    }
                } else {
                    while (c[e] !== b) {
                        a[d++] = c[e++];
                    }
                }
                a.length = d;
                return a;
            },
            grep: function(a, b, c) {
                var d = [], e;
                c = !!c;
                for (var f = 0, g = a.length; f < g; f++) {
                    e = !!b(a[f], f),
                    c !== e && d.push(a[f]);
                }
                return d;
            },
            map: function(a, c, d) {
                var f, g, h = [], i = 0, j = a.length, k = a instanceof e || j !== b && typeof j == "number" && (j > 0 && a[0] && a[j - 1] || j === 0 || e.isArray(a));
                if (k) {
                    for (; i < j; i++) {
                        f = c(a[i], i, d),
                        f != null  && (h[h.length] = f);
                    }
                } else {
                    for (g in a) {
                        f = c(a[g], g, d),
                        f != null  && (h[h.length] = f);
                    }
                }
                return h.concat.apply([], h);
            },
            guid: 1,
            proxy: function(a, c) {
                if (typeof c == "string") {
                    var d = a[c];
                    c = a,
                    a = d;
                }
                if (!e.isFunction(a)) {
                    return b;
                }
                var f = F.call(arguments, 2)
                  , g = function() {
                    return a.apply(c, f.concat(F.call(arguments)));
                }
                ;
                g.guid = a.guid = a.guid || g.guid || e.guid++;
                return g;
            },
            access: function(a, c, d, f, g, h, i) {
                var j, k = d == null , l = 0, m = a.length;
                if (d && typeof d == "object") {
                    for (l in d) {
                        e.access(a, c, l, d[l], 1, h, f);
                    }
                    g = 1;
                } else {
                    if (f !== b) {
                        j = i === b && e.isFunction(f),
                        k && (j ? (j = c,
                        c = function(a, b, c) {
                            return j.call(e(a), c);
                        }
                        ) : (c.call(a, f),
                        c = null ));
                        if (c) {
                            for (; l < m; l++) {
                                c(a[l], d, j ? f.call(a[l], l, c(a[l], d)) : f, i);
                            }
                        }
                        g = 1;
                    }
                }
                return g ? a : k ? c.call(a) : m ? c(a[0], d) : h;
            },
            now: function() {
                return (new Date).getTime();
            },
            uaMatch: function(a) {
                a = a.toLowerCase();
                var b = r.exec(a) || s.exec(a) || t.exec(a) || a.indexOf("compatible") < 0 && u.exec(a) || [];
                return {
                    browser: b[1] || "",
                    version: b[2] || "0"
                };
            },
            sub: function() {
                function a(b, c) {
                    return new a.fn.init(b,c);
                }
                e.extend(!0, a, this),
                a.superclass = this,
                a.fn = a.prototype = this(),
                a.fn.constructor = a,
                a.sub = this.sub,
                a.fn.init = function(d, f) {
                    f && f instanceof e && !(f instanceof a) && (f = a(f));
                    return e.fn.init.call(this, d, f, b);
                }
                ,
                a.fn.init.prototype = a.fn;
                var b = a(c);
                return a;
            },
            browser: {}
        }),
        e.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(a, b) {
            I["[object " + b + "]"] = b.toLowerCase();
        }),
        z = e.uaMatch(y),
        z.browser && (e.browser[z.browser] = !0,
        e.browser.version = z.version),
        e.browser.webkit && (e.browser.safari = !0),
        j.test("?") && (k = /^[\s\xA0]+/,
        l = /[\s\xA0]+$/),
        h = e(c),
        c.addEventListener ? B = function() {
            c.removeEventListener("DOMContentLoaded", B, !1),
            e.ready();
        }
         : c.attachEvent && (B = function() {
            c.readyState === "complete" && (c.detachEvent("onreadystatechange", B),
            e.ready());
        }
        );
        return e;
    }()
      , g = {};
    f.Callbacks = function(a) {
        a = a ? g[a] || h(a) : {};
        var c = [], d = [], e, i, j, k, l, m, n = function(b) {
            var d, e, g, h, i;
            for (d = 0,
            e = b.length; d < e; d++) {
                g = b[d],
                h = f.type(g),
                h === "array" ? n(g) : h === "function" && (!a.unique || !p.has(g)) && c.push(g);
            }
        }
        , o = function(b, f) {
            f = f || [],
            e = !a.memory || [b, f],
            i = !0,
            j = !0,
            m = k || 0,
            k = 0,
            l = c.length;
            for (; c && m < l; m++) {
                if (c[m].apply(b, f) === !1 && a.stopOnFalse) {
                    e = !0;
                    break;
                }
            }
            j = !1,
            c && (a.once ? e === !0 ? p.disable() : c = [] : d && d.length && (e = d.shift(),
            p.fireWith(e[0], e[1])));
        }
        , p = {
            add: function() {
                if (c) {
                    var a = c.length;
                    n(arguments),
                    j ? l = c.length : e && e !== !0 && (k = a,
                    o(e[0], e[1]));
                }
                return this;
            },
            remove: function() {
                if (c) {
                    var b = arguments
                      , d = 0
                      , e = b.length;
                    for (; d < e; d++) {
                        for (var f = 0; f < c.length; f++) {
                            if (b[d] === c[f]) {
                                j && f <= l && (l--,
                                f <= m && m--),
                                c.splice(f--, 1);
                                if (a.unique) {
                                    break;
                                }
                            }
                        }
                    }
                }
                return this;
            },
            has: function(a) {
                if (c) {
                    var b = 0
                      , d = c.length;
                    for (; b < d; b++) {
                        if (a === c[b]) {
                            return !0;
                        }
                    }
                }
                return !1;
            },
            empty: function() {
                c = [];
                return this;
            },
            disable: function() {
                c = d = e = b;
                return this;
            },
            disabled: function() {
                return !c;
            },
            lock: function() {
                d = b,
                (!e || e === !0) && p.disable();
                return this;
            },
            locked: function() {
                return !d;
            },
            fireWith: function(b, c) {
                d && (j ? a.once || d.push([b, c]) : (!a.once || !e) && o(b, c));
                return this;
            },
            fire: function() {
                p.fireWith(this, arguments);
                return this;
            },
            fired: function() {
                return !!i;
            }
        };
        return p;
    }
    ;
    var i = [].slice;
    f.extend({
        Deferred: function(a) {
            var b = f.Callbacks("once memory"), c = f.Callbacks("once memory"), d = f.Callbacks("memory"), e = "pending", g = {
                resolve: b,
                reject: c,
                notify: d
            }, h = {
                done: b.add,
                fail: c.add,
                progress: d.add,
                state: function() {
                    return e;
                },
                isResolved: b.fired,
                isRejected: c.fired,
                then: function(a, b, c) {
                    i.done(a).fail(b).progress(c);
                    return this;
                },
                always: function() {
                    i.done.apply(i, arguments).fail.apply(i, arguments);
                    return this;
                },
                pipe: function(a, b, c) {
                    return f.Deferred(function(d) {
                        f.each({
                            done: [a, "resolve"],
                            fail: [b, "reject"],
                            progress: [c, "notify"]
                        }, function(a, b) {
                            var c = b[0], e = b[1], g;
                            f.isFunction(c) ? i[a](function() {
                                g = c.apply(this, arguments),
                                g && f.isFunction(g.promise) ? g.promise().then(d.resolve, d.reject, d.notify) : d[e + "With"](this === i ? d : this, [g]);
                            }) : i[a](d[e]);
                        });
                    }).promise();
                },
                promise: function(a) {
                    if (a == null ) {
                        a = h;
                    } else {
                        for (var b in h) {
                            a[b] = h[b];
                        }
                    }
                    return a;
                }
            }, i = h.promise({}), j;
            for (j in g) {
                i[j] = g[j].fire,
                i[j + "With"] = g[j].fireWith;
            }
            i.done(function() {
                e = "resolved";
            }, c.disable, d.lock).fail(function() {
                e = "rejected";
            }, b.disable, d.lock),
            a && a.call(i, i);
            return i;
        },
        when: function(a) {
            function m(a) {
                return function(b) {
                    e[a] = arguments.length > 1 ? i.call(arguments, 0) : b,
                    j.notifyWith(k, e);
                }
                ;
            }
            function l(a) {
                return function(c) {
                    b[a] = arguments.length > 1 ? i.call(arguments, 0) : c,
                    --g || j.resolveWith(j, b);
                }
                ;
            }
            var b = i.call(arguments, 0)
              , c = 0
              , d = b.length
              , e = Array(d)
              , g = d
              , h = d
              , j = d <= 1 && a && f.isFunction(a.promise) ? a : f.Deferred()
              , k = j.promise();
            if (d > 1) {
                for (; c < d; c++) {
                    b[c] && b[c].promise && f.isFunction(b[c].promise) ? b[c].promise().then(l(c), j.reject, m(c)) : --g;
                }
                g || j.resolveWith(j, b);
            } else {
                j !== a && j.resolveWith(j, d ? [a] : []);
            }
            return k;
        }
    }),
    f.support = function() {
        var b, d, e, g, h, i, j, k, l, m, n, o, p = c.createElement("div"), q = c.documentElement;
        p.setAttribute("className", "t"),
        p.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",
        d = p.getElementsByTagName("*"),
        e = p.getElementsByTagName("a")[0];
        if (!d || !d.length || !e) {
            return {};
        }
        g = c.createElement("select"),
        h = g.appendChild(c.createElement("option")),
        i = p.getElementsByTagName("input")[0],
        b = {
            leadingWhitespace: p.firstChild.nodeType === 3,
            tbody: !p.getElementsByTagName("tbody").length,
            htmlSerialize: !!p.getElementsByTagName("link").length,
            style: /top/.test(e.getAttribute("style")),
            hrefNormalized: e.getAttribute("href") === "/a",
            opacity: /^0.55/.test(e.style.opacity),
            cssFloat: !!e.style.cssFloat,
            checkOn: i.value === "on",
            optSelected: h.selected,
            getSetAttribute: p.className !== "t",
            enctype: !!c.createElement("form").enctype,
            html5Clone: c.createElement("nav").cloneNode(!0).outerHTML !== "<:nav></:nav>",
            submitBubbles: !0,
            changeBubbles: !0,
            focusinBubbles: !1,
            deleteExpando: !0,
            noCloneEvent: !0,
            inlineBlockNeedsLayout: !1,
            shrinkWrapBlocks: !1,
            reliableMarginRight: !0,
            pixelMargin: !0
        },
        f.boxModel = b.boxModel = c.compatMode === "CSS1Compat",
        i.checked = !0,
        b.noCloneChecked = i.cloneNode(!0).checked,
        g.disabled = !0,
        b.optDisabled = !h.disabled;
        try {
            delete p.test;
        } catch (r) {
            b.deleteExpando = !1;
        }
        !p.addEventListener && p.attachEvent && p.fireEvent && (p.attachEvent("onclick", function() {
            b.noCloneEvent = !1;
        }),
        p.cloneNode(!0).fireEvent("onclick")),
        i = c.createElement("input"),
        i.value = "t",
        i.setAttribute("type", "radio"),
        b.radioValue = i.value === "t",
        i.setAttribute("checked", "checked"),
        i.setAttribute("name", "t"),
        p.appendChild(i),
        j = c.createDocumentFragment(),
        j.appendChild(p.lastChild),
        b.checkClone = j.cloneNode(!0).cloneNode(!0).lastChild.checked,
        b.appendChecked = i.checked,
        j.removeChild(i),
        j.appendChild(p);
        if (p.attachEvent) {
            for (n in {
                submit: 1,
                change: 1,
                focusin: 1
            }) {
                m = "on" + n,
                o = m in p,
                o || (p.setAttribute(m, "return;"),
                o = typeof p[m] == "function"),
                b[n + "Bubbles"] = o;
            }
        }
        j.removeChild(p),
        j = g = h = p = i = null ,
        f(function() {
            var d, e, g, h, i, j, l, m, n, q, r, s, t, u = c.getElementsByTagName("body")[0];
            !u || (m = 1,
            t = "padding:0;margin:0;border:",
            r = "position:absolute;top:0;left:0;width:1px;height:1px;",
            s = t + "0;visibility:hidden;",
            n = "style='" + r + t + "5px solid #000;",
            q = "<div " + n + "display:block;'><div style='" + t + "0;display:block;overflow:hidden;'></div></div>" + "<table " + n + "' cellpadding='0' cellspacing='0'>" + "<tr><td></td></tr></table>",
            d = c.createElement("div"),
            d.style.cssText = s + "width:0;height:0;position:static;top:0;margin-top:" + m + "px",
            u.insertBefore(d, u.firstChild),
            p = c.createElement("div"),
            d.appendChild(p),
            p.innerHTML = "<table><tr><td style='" + t + "0;display:none'></td><td>t</td></tr></table>",
            k = p.getElementsByTagName("td"),
            o = k[0].offsetHeight === 0,
            k[0].style.display = "",
            k[1].style.display = "none",
            b.reliableHiddenOffsets = o && k[0].offsetHeight === 0,
            a.getComputedStyle && (p.innerHTML = "",
            l = c.createElement("div"),
            l.style.width = "0",
            l.style.marginRight = "0",
            p.style.width = "2px",
            p.appendChild(l),
            b.reliableMarginRight = (parseInt((a.getComputedStyle(l, null ) || {
                marginRight: 0
            }).marginRight, 10) || 0) === 0),
            typeof p.style.zoom != "undefined" && (p.innerHTML = "",
            p.style.width = p.style.padding = "1px",
            p.style.border = 0,
            p.style.overflow = "hidden",
            p.style.display = "inline",
            p.style.zoom = 1,
            b.inlineBlockNeedsLayout = p.offsetWidth === 3,
            p.style.display = "block",
            p.style.overflow = "visible",
            p.innerHTML = "<div style='width:5px;'></div>",
            b.shrinkWrapBlocks = p.offsetWidth !== 3),
            p.style.cssText = r + s,
            p.innerHTML = q,
            e = p.firstChild,
            g = e.firstChild,
            i = e.nextSibling.firstChild.firstChild,
            j = {
                doesNotAddBorder: g.offsetTop !== 5,
                doesAddBorderForTableAndCells: i.offsetTop === 5
            },
            g.style.position = "fixed",
            g.style.top = "20px",
            j.fixedPosition = g.offsetTop === 20 || g.offsetTop === 15,
            g.style.position = g.style.top = "",
            e.style.overflow = "hidden",
            e.style.position = "relative",
            j.subtractsBorderForOverflowNotVisible = g.offsetTop === -5,
            j.doesNotIncludeMarginInBodyOffset = u.offsetTop !== m,
            a.getComputedStyle && (p.style.marginTop = "1%",
            b.pixelMargin = (a.getComputedStyle(p, null ) || {
                marginTop: 0
            }).marginTop !== "1%"),
            typeof d.style.zoom != "undefined" && (d.style.zoom = 1),
            u.removeChild(d),
            l = p = d = null ,
            f.extend(b, j));
        });
        return b;
    }();
    var j = /^(?:\{.*\}|\[.*\])$/
      , k = /([A-Z])/g;
    f.extend({
        cache: {},
        uuid: 0,
        expando: "jQuery" + (f.fn.jquery + Math.random()).replace(/\D/g, ""),
        noData: {
            embed: !0,
            object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
            applet: !0
        },
        hasData: function(a) {
            a = a.nodeType ? f.cache[a[f.expando]] : a[f.expando];
            return !!a && !m(a);
        },
        data: function(a, c, d, e) {
            if (!!f.acceptData(a)) {
                var g, h, i, j = f.expando, k = typeof c == "string", l = a.nodeType, m = l ? f.cache : a, n = l ? a[j] : a[j] && j, o = c === "events";
                if ((!n || !m[n] || !o && !e && !m[n].data) && k && d === b) {
                    return;
                }
                n || (l ? a[j] = n = ++f.uuid : n = j),
                m[n] || (m[n] = {},
                l || (m[n].toJSON = f.noop));
                if (typeof c == "object" || typeof c == "function") {
                    e ? m[n] = f.extend(m[n], c) : m[n].data = f.extend(m[n].data, c);
                }
                g = h = m[n],
                e || (h.data || (h.data = {}),
                h = h.data),
                d !== b && (h[f.camelCase(c)] = d);
                if (o && !h[c]) {
                    return g.events;
                }
                k ? (i = h[c],
                i == null  && (i = h[f.camelCase(c)])) : i = h;
                return i;
            }
        },
        removeData: function(a, b, c) {
            if (!!f.acceptData(a)) {
                var d, e, g, h = f.expando, i = a.nodeType, j = i ? f.cache : a, k = i ? a[h] : h;
                if (!j[k]) {
                    return;
                }
                if (b) {
                    d = c ? j[k] : j[k].data;
                    if (d) {
                        f.isArray(b) || (b in d ? b = [b] : (b = f.camelCase(b),
                        b in d ? b = [b] : b = b.split(" ")));
                        for (e = 0,
                        g = b.length; e < g; e++) {
                            delete d[b[e]];
                        }
                        if (!(c ? m : f.isEmptyObject)(d)) {
                            return;
                        }
                    }
                }
                if (!c) {
                    delete j[k].data;
                    if (!m(j[k])) {
                        return;
                    }
                }
                f.support.deleteExpando || !j.setInterval ? delete j[k] : j[k] = null ,
                i && (f.support.deleteExpando ? delete a[h] : a.removeAttribute ? a.removeAttribute(h) : a[h] = null );
            }
        },
        _data: function(a, b, c) {
            return f.data(a, b, c, !0);
        },
        acceptData: function(a) {
            if (a.nodeName) {
                var b = f.noData[a.nodeName.toLowerCase()];
                if (b) {
                    return b !== !0 && a.getAttribute("classid") === b;
                }
            }
            return !0;
        }
    }),
    f.fn.extend({
        data: function(a, c) {
            var d, e, g, h, i, j = this[0], k = 0, m = null ;
            if (a === b) {
                if (this.length) {
                    m = f.data(j);
                    if (j.nodeType === 1 && !f._data(j, "parsedAttrs")) {
                        g = j.attributes;
                        for (i = g.length; k < i; k++) {
                            h = g[k].name,
                            h.indexOf("data-") === 0 && (h = f.camelCase(h.substring(5)),
                            l(j, h, m[h]));
                        }
                        f._data(j, "parsedAttrs", !0);
                    }
                }
                return m;
            }
            if (typeof a == "object") {
                return this.each(function() {
                    f.data(this, a);
                });
            }
            d = a.split(".", 2),
            d[1] = d[1] ? "." + d[1] : "",
            e = d[1] + "!";
            return f.access(this, function(c) {
                if (c === b) {
                    m = this.triggerHandler("getData" + e, [d[0]]),
                    m === b && j && (m = f.data(j, a),
                    m = l(j, a, m));
                    return m === b && d[1] ? this.data(d[0]) : m;
                }
                d[1] = c,
                this.each(function() {
                    var b = f(this);
                    b.triggerHandler("setData" + e, d),
                    f.data(this, a, c),
                    b.triggerHandler("changeData" + e, d);
                });
            }, null , c, arguments.length > 1, null , !1);
        },
        removeData: function(a) {
            return this.each(function() {
                f.removeData(this, a);
            });
        }
    }),
    f.extend({
        _mark: function(a, b) {
            a && (b = (b || "fx") + "mark",
            f._data(a, b, (f._data(a, b) || 0) + 1));
        },
        _unmark: function(a, b, c) {
            a !== !0 && (c = b,
            b = a,
            a = !1);
            if (b) {
                c = c || "fx";
                var d = c + "mark"
                  , e = a ? 0 : (f._data(b, d) || 1) - 1;
                e ? f._data(b, d, e) : (f.removeData(b, d, !0),
                n(b, c, "mark"));
            }
        },
        queue: function(a, b, c) {
            var d;
            if (a) {
                b = (b || "fx") + "queue",
                d = f._data(a, b),
                c && (!d || f.isArray(c) ? d = f._data(a, b, f.makeArray(c)) : d.push(c));
                return d || [];
            }
        },
        dequeue: function(a, b) {
            b = b || "fx";
            var c = f.queue(a, b)
              , d = c.shift()
              , e = {};
            d === "inprogress" && (d = c.shift()),
            d && (b === "fx" && c.unshift("inprogress"),
            f._data(a, b + ".run", e),
            d.call(a, function() {
                f.dequeue(a, b);
            }, e)),
            c.length || (f.removeData(a, b + "queue " + b + ".run", !0),
            n(a, b, "queue"));
        }
    }),
    f.fn.extend({
        queue: function(a, c) {
            var d = 2;
            typeof a != "string" && (c = a,
            a = "fx",
            d--);
            if (arguments.length < d) {
                return f.queue(this[0], a);
            }
            return c === b ? this : this.each(function() {
                var b = f.queue(this, a, c);
                a === "fx" && b[0] !== "inprogress" && f.dequeue(this, a);
            });
        },
        dequeue: function(a) {
            return this.each(function() {
                f.dequeue(this, a);
            });
        },
        delay: function(a, b) {
            a = f.fx ? f.fx.speeds[a] || a : a,
            b = b || "fx";
            return this.queue(b, function(b, c) {
                var d = setTimeout(b, a);
                c.stop = function() {
                    clearTimeout(d);
                }
                ;
            });
        },
        clearQueue: function(a) {
            return this.queue(a || "fx", []);
        },
        promise: function(a, c) {
            function m() {
                --h || d.resolveWith(e, [e]);
            }
            typeof a != "string" && (c = a,
            a = b),
            a = a || "fx";
            var d = f.Deferred(), e = this, g = e.length, h = 1, i = a + "defer", j = a + "queue", k = a + "mark", l;
            while (g--) {
                if (l = f.data(e[g], i, b, !0) || (f.data(e[g], j, b, !0) || f.data(e[g], k, b, !0)) && f.data(e[g], i, f.Callbacks("once memory"), !0)) {
                    h++,
                    l.add(m);
                }
            }
            m();
            return d.promise(c);
        }
    });
    var o = /[\n\t\r]/g, p = /\s+/, q = /\r/g, r = /^(?:button|input)$/i, s = /^(?:button|input|object|select|textarea)$/i, t = /^a(?:rea)?$/i, u = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i, v = f.support.getSetAttribute, w, x, y;
    f.fn.extend({
        attr: function(a, b) {
            return f.access(this, f.attr, a, b, arguments.length > 1);
        },
        removeAttr: function(a) {
            return this.each(function() {
                f.removeAttr(this, a);
            });
        },
        prop: function(a, b) {
            return f.access(this, f.prop, a, b, arguments.length > 1);
        },
        removeProp: function(a) {
            a = f.propFix[a] || a;
            return this.each(function() {
                try {
                    this[a] = b,
                    delete this[a];
                } catch (c) {}
            });
        },
        addClass: function(a) {
            var b, c, d, e, g, h, i;
            if (f.isFunction(a)) {
                return this.each(function(b) {
                    f(this).addClass(a.call(this, b, this.className));
                });
            }
            if (a && typeof a == "string") {
                b = a.split(p);
                for (c = 0,
                d = this.length; c < d; c++) {
                    e = this[c];
                    if (e.nodeType === 1) {
                        if (!e.className && b.length === 1) {
                            e.className = a;
                        } else {
                            g = " " + e.className + " ";
                            for (h = 0,
                            i = b.length; h < i; h++) {
                                ~g.indexOf(" " + b[h] + " ") || (g += b[h] + " ");
                            }
                            e.className = f.trim(g);
                        }
                    }
                }
            }
            return this;
        },
        removeClass: function(a) {
            var c, d, e, g, h, i, j;
            if (f.isFunction(a)) {
                return this.each(function(b) {
                    f(this).removeClass(a.call(this, b, this.className));
                });
            }
            if (a && typeof a == "string" || a === b) {
                c = (a || "").split(p);
                for (d = 0,
                e = this.length; d < e; d++) {
                    g = this[d];
                    if (g.nodeType === 1 && g.className) {
                        if (a) {
                            h = (" " + g.className + " ").replace(o, " ");
                            for (i = 0,
                            j = c.length; i < j; i++) {
                                h = h.replace(" " + c[i] + " ", " ");
                            }
                            g.className = f.trim(h);
                        } else {
                            g.className = "";
                        }
                    }
                }
            }
            return this;
        },
        toggleClass: function(a, b) {
            var c = typeof a
              , d = typeof b == "boolean";
            if (f.isFunction(a)) {
                return this.each(function(c) {
                    f(this).toggleClass(a.call(this, c, this.className, b), b);
                });
            }
            return this.each(function() {
                if (c === "string") {
                    var e, g = 0, h = f(this), i = b, j = a.split(p);
                    while (e = j[g++]) {
                        i = d ? i : !h.hasClass(e),
                        h[i ? "addClass" : "removeClass"](e);
                    }
                } else {
                    if (c === "undefined" || c === "boolean") {
                        this.className && f._data(this, "__className__", this.className),
                        this.className = this.className || a === !1 ? "" : f._data(this, "__className__") || "";
                    }
                }
            });
        },
        hasClass: function(a) {
            var b = " " + a + " "
              , c = 0
              , d = this.length;
            for (; c < d; c++) {
                if (this[c].nodeType === 1 && (" " + this[c].className + " ").replace(o, " ").indexOf(b) > -1) {
                    return !0;
                }
            }
            return !1;
        },
        val: function(a) {
            var c, d, e, g = this[0];
            if (!!arguments.length) {
                e = f.isFunction(a);
                return this.each(function(d) {
                    var g = f(this), h;
                    if (this.nodeType === 1) {
                        e ? h = a.call(this, d, g.val()) : h = a,
                        h == null  ? h = "" : typeof h == "number" ? h += "" : f.isArray(h) && (h = f.map(h, function(a) {
                            return a == null  ? "" : a + "";
                        })),
                        c = f.valHooks[this.type] || f.valHooks[this.nodeName.toLowerCase()];
                        if (!c || !("set" in c) || c.set(this, h, "value") === b) {
                            this.value = h;
                        }
                    }
                });
            }
            if (g) {
                c = f.valHooks[g.type] || f.valHooks[g.nodeName.toLowerCase()];
                if (c && "get" in c && (d = c.get(g, "value")) !== b) {
                    return d;
                }
                d = g.value;
                return typeof d == "string" ? d.replace(q, "") : d == null  ? "" : d;
            }
        }
    }),
    f.extend({
        valHooks: {
            option: {
                get: function(a) {
                    var b = a.attributes.value;
                    return !b || b.specified ? a.value : a.text;
                }
            },
            select: {
                get: function(a) {
                    var b, c, d, e, g = a.selectedIndex, h = [], i = a.options, j = a.type === "select-one";
                    if (g < 0) {
                        return null ;
                    }
                    c = j ? g : 0,
                    d = j ? g + 1 : i.length;
                    for (; c < d; c++) {
                        e = i[c];
                        if (e.selected && (f.support.optDisabled ? !e.disabled : e.getAttribute("disabled") === null ) && (!e.parentNode.disabled || !f.nodeName(e.parentNode, "optgroup"))) {
                            b = f(e).val();
                            if (j) {
                                return b;
                            }
                            h.push(b);
                        }
                    }
                    if (j && !h.length && i.length) {
                        return f(i[g]).val();
                    }
                    return h;
                },
                set: function(a, b) {
                    var c = f.makeArray(b);
                    f(a).find("option").each(function() {
                        this.selected = f.inArray(f(this).val(), c) >= 0;
                    }),
                    c.length || (a.selectedIndex = -1);
                    return c;
                }
            }
        },
        attrFn: {
            val: !0,
            css: !0,
            html: !0,
            text: !0,
            data: !0,
            width: !0,
            height: !0,
            offset: !0
        },
        attr: function(a, c, d, e) {
            var g, h, i, j = a.nodeType;
            if (!!a && j !== 3 && j !== 8 && j !== 2) {
                if (e && c in f.attrFn) {
                    return f(a)[c](d);
                }
                if (typeof a.getAttribute == "undefined") {
                    return f.prop(a, c, d);
                }
                i = j !== 1 || !f.isXMLDoc(a),
                i && (c = c.toLowerCase(),
                h = f.attrHooks[c] || (u.test(c) ? x : w));
                if (d !== b) {
                    if (d === null ) {
                        f.removeAttr(a, c);
                        return;
                    }
                    if (h && "set" in h && i && (g = h.set(a, d, c)) !== b) {
                        return g;
                    }
                    a.setAttribute(c, "" + d);
                    return d;
                }
                if (h && "get" in h && i && (g = h.get(a, c)) !== null ) {
                    return g;
                }
                g = a.getAttribute(c);
                return g === null  ? b : g;
            }
        },
        removeAttr: function(a, b) {
            var c, d, e, g, h, i = 0;
            if (b && a.nodeType === 1) {
                d = b.toLowerCase().split(p),
                g = d.length;
                for (; i < g; i++) {
                    e = d[i],
                    e && (c = f.propFix[e] || e,
                    h = u.test(e),
                    h || f.attr(a, e, ""),
                    a.removeAttribute(v ? e : c),
                    h && c in a && (a[c] = !1));
                }
            }
        },
        attrHooks: {
            type: {
                set: function(a, b) {
                    if (r.test(a.nodeName) && a.parentNode) {
                        f.error("type property can't be changed");
                    } else {
                        if (!f.support.radioValue && b === "radio" && f.nodeName(a, "input")) {
                            var c = a.value;
                            a.setAttribute("type", b),
                            c && (a.value = c);
                            return b;
                        }
                    }
                }
            },
            value: {
                get: function(a, b) {
                    if (w && f.nodeName(a, "button")) {
                        return w.get(a, b);
                    }
                    return b in a ? a.value : null ;
                },
                set: function(a, b, c) {
                    if (w && f.nodeName(a, "button")) {
                        return w.set(a, b, c);
                    }
                    a.value = b;
                }
            }
        },
        propFix: {
            tabindex: "tabIndex",
            readonly: "readOnly",
            "for": "htmlFor",
            "class": "className",
            maxlength: "maxLength",
            cellspacing: "cellSpacing",
            cellpadding: "cellPadding",
            rowspan: "rowSpan",
            colspan: "colSpan",
            usemap: "useMap",
            frameborder: "frameBorder",
            contenteditable: "contentEditable"
        },
        prop: function(a, c, d) {
            var e, g, h, i = a.nodeType;
            if (!!a && i !== 3 && i !== 8 && i !== 2) {
                h = i !== 1 || !f.isXMLDoc(a),
                h && (c = f.propFix[c] || c,
                g = f.propHooks[c]);
                return d !== b ? g && "set" in g && (e = g.set(a, d, c)) !== b ? e : a[c] = d : g && "get" in g && (e = g.get(a, c)) !== null  ? e : a[c];
            }
        },
        propHooks: {
            tabIndex: {
                get: function(a) {
                    var c = a.getAttributeNode("tabindex");
                    return c && c.specified ? parseInt(c.value, 10) : s.test(a.nodeName) || t.test(a.nodeName) && a.href ? 0 : b;
                }
            }
        }
    }),
    f.attrHooks.tabindex = f.propHooks.tabIndex,
    x = {
        get: function(a, c) {
            var d, e = f.prop(a, c);
            return e === !0 || typeof e != "boolean" && (d = a.getAttributeNode(c)) && d.nodeValue !== !1 ? c.toLowerCase() : b;
        },
        set: function(a, b, c) {
            var d;
            b === !1 ? f.removeAttr(a, c) : (d = f.propFix[c] || c,
            d in a && (a[d] = !0),
            a.setAttribute(c, c.toLowerCase()));
            return c;
        }
    },
    v || (y = {
        name: !0,
        id: !0,
        coords: !0
    },
    w = f.valHooks.button = {
        get: function(a, c) {
            var d;
            d = a.getAttributeNode(c);
            return d && (y[c] ? d.nodeValue !== "" : d.specified) ? d.nodeValue : b;
        },
        set: function(a, b, d) {
            var e = a.getAttributeNode(d);
            e || (e = c.createAttribute(d),
            a.setAttributeNode(e));
            return e.nodeValue = b + "";
        }
    },
    f.attrHooks.tabindex.set = w.set,
    f.each(["width", "height"], function(a, b) {
        f.attrHooks[b] = f.extend(f.attrHooks[b], {
            set: function(a, c) {
                if (c === "") {
                    a.setAttribute(b, "auto");
                    return c;
                }
            }
        });
    }),
    f.attrHooks.contenteditable = {
        get: w.get,
        set: function(a, b, c) {
            b === "" && (b = "false"),
            w.set(a, b, c);
        }
    }),
    f.support.hrefNormalized || f.each(["href", "src", "width", "height"], function(a, c) {
        f.attrHooks[c] = f.extend(f.attrHooks[c], {
            get: function(a) {
                var d = a.getAttribute(c, 2);
                return d === null  ? b : d;
            }
        });
    }),
    f.support.style || (f.attrHooks.style = {
        get: function(a) {
            return a.style.cssText.toLowerCase() || b;
        },
        set: function(a, b) {
            return a.style.cssText = "" + b;
        }
    }),
    f.support.optSelected || (f.propHooks.selected = f.extend(f.propHooks.selected, {
        get: function(a) {
            var b = a.parentNode;
            b && (b.selectedIndex,
            b.parentNode && b.parentNode.selectedIndex);
            return null ;
        }
    })),
    f.support.enctype || (f.propFix.enctype = "encoding"),
    f.support.checkOn || f.each(["radio", "checkbox"], function() {
        f.valHooks[this] = {
            get: function(a) {
                return a.getAttribute("value") === null  ? "on" : a.value;
            }
        };
    }),
    f.each(["radio", "checkbox"], function() {
        f.valHooks[this] = f.extend(f.valHooks[this], {
            set: function(a, b) {
                if (f.isArray(b)) {
                    return a.checked = f.inArray(f(a).val(), b) >= 0;
                }
            }
        });
    });
    var z = /^(?:textarea|input|select)$/i
      , A = /^([^\.]*)?(?:\.(.+))?$/
      , B = /(?:^|\s)hover(\.\S+)?\b/
      , C = /^key/
      , D = /^(?:mouse|contextmenu)|click/
      , E = /^(?:focusinfocus|focusoutblur)$/
      , F = /^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/
      , G = function(a) {
        var b = F.exec(a);
        b && (b[1] = (b[1] || "").toLowerCase(),
        b[3] = b[3] && new RegExp("(?:^|\\s)" + b[3] + "(?:\\s|$)"));
        return b;
    }
      , H = function(a, b) {
        var c = a.attributes || {};
        return (!b[1] || a.nodeName.toLowerCase() === b[1]) && (!b[2] || (c.id || {}).value === b[2]) && (!b[3] || b[3].test((c["class"] || {}).value));
    }
      , I = function(a) {
        return f.event.special.hover ? a : a.replace(B, "mouseenter$1 mouseleave$1");
    }
    ;
    f.event = {
        add: function(a, c, d, e, g) {
            var h, i, j, k, l, m, n, o, p, q, r, s;
            if (!(a.nodeType === 3 || a.nodeType === 8 || !c || !d || !(h = f._data(a)))) {
                d.handler && (p = d,
                d = p.handler,
                g = p.selector),
                d.guid || (d.guid = f.guid++),
                j = h.events,
                j || (h.events = j = {}),
                i = h.handle,
                i || (h.handle = i = function(a) {
                    return typeof f != "undefined" && (!a || f.event.triggered !== a.type) ? f.event.dispatch.apply(i.elem, arguments) : b;
                }
                ,
                i.elem = a),
                c = f.trim(I(c)).split(" ");
                for (k = 0; k < c.length; k++) {
                    l = A.exec(c[k]) || [],
                    m = l[1],
                    n = (l[2] || "").split(".").sort(),
                    s = f.event.special[m] || {},
                    m = (g ? s.delegateType : s.bindType) || m,
                    s = f.event.special[m] || {},
                    o = f.extend({
                        type: m,
                        origType: l[1],
                        data: e,
                        handler: d,
                        guid: d.guid,
                        selector: g,
                        quick: g && G(g),
                        namespace: n.join(".")
                    }, p),
                    r = j[m];
                    if (!r) {
                        r = j[m] = [],
                        r.delegateCount = 0;
                        if (!s.setup || s.setup.call(a, e, n, i) === !1) {
                            a.addEventListener ? a.addEventListener(m, i, !1) : a.attachEvent && a.attachEvent("on" + m, i);
                        }
                    }
                    s.add && (s.add.call(a, o),
                    o.handler.guid || (o.handler.guid = d.guid)),
                    g ? r.splice(r.delegateCount++, 0, o) : r.push(o),
                    f.event.global[m] = !0;
                }
                a = null ;
            }
        },
        global: {},
        remove: function(a, b, c, d, e) {
            var g = f.hasData(a) && f._data(a), h, i, j, k, l, m, n, o, p, q, r, s;
            if (!!g && !!(o = g.events)) {
                b = f.trim(I(b || "")).split(" ");
                for (h = 0; h < b.length; h++) {
                    i = A.exec(b[h]) || [],
                    j = k = i[1],
                    l = i[2];
                    if (!j) {
                        for (j in o) {
                            f.event.remove(a, j + b[h], c, d, !0);
                        }
                        continue;
                    }
                    p = f.event.special[j] || {},
                    j = (d ? p.delegateType : p.bindType) || j,
                    r = o[j] || [],
                    m = r.length,
                    l = l ? new RegExp("(^|\\.)" + l.split(".").sort().join("\\.(?:.*\\.)?") + "(\\.|$)") : null ;
                    for (n = 0; n < r.length; n++) {
                        s = r[n],
                        (e || k === s.origType) && (!c || c.guid === s.guid) && (!l || l.test(s.namespace)) && (!d || d === s.selector || d === "**" && s.selector) && (r.splice(n--, 1),
                        s.selector && r.delegateCount--,
                        p.remove && p.remove.call(a, s));
                    }
                    r.length === 0 && m !== r.length && ((!p.teardown || p.teardown.call(a, l) === !1) && f.removeEvent(a, j, g.handle),
                    delete o[j]);
                }
                f.isEmptyObject(o) && (q = g.handle,
                q && (q.elem = null ),
                f.removeData(a, ["events", "handle"], !0));
            }
        },
        customEvent: {
            getData: !0,
            setData: !0,
            changeData: !0
        },
        trigger: function(c, d, e, g) {
            if (!e || e.nodeType !== 3 && e.nodeType !== 8) {
                var h = c.type || c, i = [], j, k, l, m, n, o, p, q, r, s;
                if (E.test(h + f.event.triggered)) {
                    return;
                }
                h.indexOf("!") >= 0 && (h = h.slice(0, -1),
                k = !0),
                h.indexOf(".") >= 0 && (i = h.split("."),
                h = i.shift(),
                i.sort());
                if ((!e || f.event.customEvent[h]) && !f.event.global[h]) {
                    return;
                }
                c = typeof c == "object" ? c[f.expando] ? c : new f.Event(h,c) : new f.Event(h),
                c.type = h,
                c.isTrigger = !0,
                c.exclusive = k,
                c.namespace = i.join("."),
                c.namespace_re = c.namespace ? new RegExp("(^|\\.)" + i.join("\\.(?:.*\\.)?") + "(\\.|$)") : null ,
                o = h.indexOf(":") < 0 ? "on" + h : "";
                if (!e) {
                    j = f.cache;
                    for (l in j) {
                        j[l].events && j[l].events[h] && f.event.trigger(c, d, j[l].handle.elem, !0);
                    }
                    return;
                }
                c.result = b,
                c.target || (c.target = e),
                d = d != null  ? f.makeArray(d) : [],
                d.unshift(c),
                p = f.event.special[h] || {};
                if (p.trigger && p.trigger.apply(e, d) === !1) {
                    return;
                }
                r = [[e, p.bindType || h]];
                if (!g && !p.noBubble && !f.isWindow(e)) {
                    s = p.delegateType || h,
                    m = E.test(s + h) ? e : e.parentNode,
                    n = null ;
                    for (; m; m = m.parentNode) {
                        r.push([m, s]),
                        n = m;
                    }
                    n && n === e.ownerDocument && r.push([n.defaultView || n.parentWindow || a, s]);
                }
                for (l = 0; l < r.length && !c.isPropagationStopped(); l++) {
                    m = r[l][0],
                    c.type = r[l][1],
                    q = (f._data(m, "events") || {})[c.type] && f._data(m, "handle"),
                    q && q.apply(m, d),
                    q = o && m[o],
                    q && f.acceptData(m) && q.apply(m, d) === !1 && c.preventDefault();
                }
                c.type = h,
                !g && !c.isDefaultPrevented() && (!p._default || p._default.apply(e.ownerDocument, d) === !1) && (h !== "click" || !f.nodeName(e, "a")) && f.acceptData(e) && o && e[h] && (h !== "focus" && h !== "blur" || c.target.offsetWidth !== 0) && !f.isWindow(e) && (n = e[o],
                n && (e[o] = null ),
                f.event.triggered = h,
                e[h](),
                f.event.triggered = b,
                n && (e[o] = n));
                return c.result;
            }
        },
        dispatch: function(c) {
            c = f.event.fix(c || a.event);
            var d = (f._data(this, "events") || {})[c.type] || [], e = d.delegateCount, g = [].slice.call(arguments, 0), h = !c.exclusive && !c.namespace, i = f.event.special[c.type] || {}, j = [], k, l, m, n, o, p, q, r, s, t, u;
            g[0] = c,
            c.delegateTarget = this;
            if (!i.preDispatch || i.preDispatch.call(this, c) !== !1) {
                if (e && (!c.button || c.type !== "click")) {
                    n = f(this),
                    n.context = this.ownerDocument || this;
                    for (m = c.target; m != this; m = m.parentNode || this) {
                        if (m.disabled !== !0) {
                            p = {},
                            r = [],
                            n[0] = m;
                            for (k = 0; k < e; k++) {
                                s = d[k],
                                t = s.selector,
                                p[t] === b && (p[t] = s.quick ? H(m, s.quick) : n.is(t)),
                                p[t] && r.push(s);
                            }
                            r.length && j.push({
                                elem: m,
                                matches: r
                            });
                        }
                    }
                }
                d.length > e && j.push({
                    elem: this,
                    matches: d.slice(e)
                });
                for (k = 0; k < j.length && !c.isPropagationStopped(); k++) {
                    q = j[k],
                    c.currentTarget = q.elem;
                    for (l = 0; l < q.matches.length && !c.isImmediatePropagationStopped(); l++) {
                        s = q.matches[l];
                        if (h || !c.namespace && !s.namespace || c.namespace_re && c.namespace_re.test(s.namespace)) {
                            c.data = s.data,
                            c.handleObj = s,
                            o = ((f.event.special[s.origType] || {}).handle || s.handler).apply(q.elem, g),
                            o !== b && (c.result = o,
                            o === !1 && (c.preventDefault(),
                            c.stopPropagation()));
                        }
                    }
                }
                i.postDispatch && i.postDispatch.call(this, c);
                return c.result;
            }
        },
        props: "attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(a, b) {
                a.which == null  && (a.which = b.charCode != null  ? b.charCode : b.keyCode);
                return a;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(a, d) {
                var e, f, g, h = d.button, i = d.fromElement;
                a.pageX == null  && d.clientX != null  && (e = a.target.ownerDocument || c,
                f = e.documentElement,
                g = e.body,
                a.pageX = d.clientX + (f && f.scrollLeft || g && g.scrollLeft || 0) - (f && f.clientLeft || g && g.clientLeft || 0),
                a.pageY = d.clientY + (f && f.scrollTop || g && g.scrollTop || 0) - (f && f.clientTop || g && g.clientTop || 0)),
                !a.relatedTarget && i && (a.relatedTarget = i === a.target ? d.toElement : i),
                !a.which && h !== b && (a.which = h & 1 ? 1 : h & 2 ? 3 : h & 4 ? 2 : 0);
                return a;
            }
        },
        fix: function(a) {
            if (a[f.expando]) {
                return a;
            }
            var d, e, g = a, h = f.event.fixHooks[a.type] || {}, i = h.props ? this.props.concat(h.props) : this.props;
            a = f.Event(g);
            for (d = i.length; d; ) {
                e = i[--d],
                a[e] = g[e];
            }
            a.target || (a.target = g.srcElement || c),
            a.target.nodeType === 3 && (a.target = a.target.parentNode),
            a.metaKey === b && (a.metaKey = a.ctrlKey);
            return h.filter ? h.filter(a, g) : a;
        },
        special: {
            ready: {
                setup: f.bindReady
            },
            load: {
                noBubble: !0
            },
            focus: {
                delegateType: "focusin"
            },
            blur: {
                delegateType: "focusout"
            },
            beforeunload: {
                setup: function(a, b, c) {
                    f.isWindow(this) && (this.onbeforeunload = c);
                },
                teardown: function(a, b) {
                    this.onbeforeunload === b && (this.onbeforeunload = null );
                }
            }
        },
        simulate: function(a, b, c, d) {
            var e = f.extend(new f.Event, c, {
                type: a,
                isSimulated: !0,
                originalEvent: {}
            });
            d ? f.event.trigger(e, null , b) : f.event.dispatch.call(b, e),
            e.isDefaultPrevented() && c.preventDefault();
        }
    },
    f.event.handle = f.event.dispatch,
    f.removeEvent = c.removeEventListener ? function(a, b, c) {
        a.removeEventListener && a.removeEventListener(b, c, !1);
    }
     : function(a, b, c) {
        a.detachEvent && a.detachEvent("on" + b, c);
    }
    ,
    f.Event = function(a, b) {
        if (!(this instanceof f.Event)) {
            return new f.Event(a,b);
        }
        a && a.type ? (this.originalEvent = a,
        this.type = a.type,
        this.isDefaultPrevented = a.defaultPrevented || a.returnValue === !1 || a.getPreventDefault && a.getPreventDefault() ? K : J) : this.type = a,
        b && f.extend(this, b),
        this.timeStamp = a && a.timeStamp || f.now(),
        this[f.expando] = !0;
    }
    ,
    f.Event.prototype = {
        preventDefault: function() {
            this.isDefaultPrevented = K;
            var a = this.originalEvent;
            !a || (a.preventDefault ? a.preventDefault() : a.returnValue = !1);
        },
        stopPropagation: function() {
            this.isPropagationStopped = K;
            var a = this.originalEvent;
            !a || (a.stopPropagation && a.stopPropagation(),
            a.cancelBubble = !0);
        },
        stopImmediatePropagation: function() {
            this.isImmediatePropagationStopped = K,
            this.stopPropagation();
        },
        isDefaultPrevented: J,
        isPropagationStopped: J,
        isImmediatePropagationStopped: J
    },
    f.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout"
    }, function(a, b) {
        f.event.special[a] = {
            delegateType: b,
            bindType: b,
            handle: function(a) {
                var c = this, d = a.relatedTarget, e = a.handleObj, g = e.selector, h;
                if (!d || d !== c && !f.contains(c, d)) {
                    a.type = e.origType,
                    h = e.handler.apply(this, arguments),
                    a.type = b;
                }
                return h;
            }
        };
    }),
    f.support.submitBubbles || (f.event.special.submit = {
        setup: function() {
            if (f.nodeName(this, "form")) {
                return !1;
            }
            f.event.add(this, "click._submit keypress._submit", function(a) {
                var c = a.target
                  , d = f.nodeName(c, "input") || f.nodeName(c, "button") ? c.form : b;
                d && !d._submit_attached && (f.event.add(d, "submit._submit", function(a) {
                    a._submit_bubble = !0;
                }),
                d._submit_attached = !0);
            });
        },
        postDispatch: function(a) {
            a._submit_bubble && (delete a._submit_bubble,
            this.parentNode && !a.isTrigger && f.event.simulate("submit", this.parentNode, a, !0));
        },
        teardown: function() {
            if (f.nodeName(this, "form")) {
                return !1;
            }
            f.event.remove(this, "._submit");
        }
    }),
    f.support.changeBubbles || (f.event.special.change = {
        setup: function() {
            if (z.test(this.nodeName)) {
                if (this.type === "checkbox" || this.type === "radio") {
                    f.event.add(this, "propertychange._change", function(a) {
                        a.originalEvent.propertyName === "checked" && (this._just_changed = !0);
                    }),
                    f.event.add(this, "click._change", function(a) {
                        this._just_changed && !a.isTrigger && (this._just_changed = !1,
                        f.event.simulate("change", this, a, !0));
                    });
                }
                return !1;
            }
            f.event.add(this, "beforeactivate._change", function(a) {
                var b = a.target;
                z.test(b.nodeName) && !b._change_attached && (f.event.add(b, "change._change", function(a) {
                    this.parentNode && !a.isSimulated && !a.isTrigger && f.event.simulate("change", this.parentNode, a, !0);
                }),
                b._change_attached = !0);
            });
        },
        handle: function(a) {
            var b = a.target;
            if (this !== b || a.isSimulated || a.isTrigger || b.type !== "radio" && b.type !== "checkbox") {
                return a.handleObj.handler.apply(this, arguments);
            }
        },
        teardown: function() {
            f.event.remove(this, "._change");
            return z.test(this.nodeName);
        }
    }),
    f.support.focusinBubbles || f.each({
        focus: "focusin",
        blur: "focusout"
    }, function(a, b) {
        var d = 0
          , e = function(a) {
            f.event.simulate(b, a.target, f.event.fix(a), !0);
        }
        ;
        f.event.special[b] = {
            setup: function() {
                d++ === 0 && c.addEventListener(a, e, !0);
            },
            teardown: function() {
                --d === 0 && c.removeEventListener(a, e, !0);
            }
        };
    }),
    f.fn.extend({
        on: function(a, c, d, e, g) {
            var h, i;
            if (typeof a == "object") {
                typeof c != "string" && (d = d || c,
                c = b);
                for (i in a) {
                    this.on(i, c, d, a[i], g);
                }
                return this;
            }
            d == null  && e == null  ? (e = c,
            d = c = b) : e == null  && (typeof c == "string" ? (e = d,
            d = b) : (e = d,
            d = c,
            c = b));
            if (e === !1) {
                e = J;
            } else {
                if (!e) {
                    return this;
                }
            }
            g === 1 && (h = e,
            e = function(a) {
                f().off(a);
                return h.apply(this, arguments);
            }
            ,
            e.guid = h.guid || (h.guid = f.guid++));
            return this.each(function() {
                f.event.add(this, a, e, d, c);
            });
        },
        one: function(a, b, c, d) {
            return this.on(a, b, c, d, 1);
        },
        off: function(a, c, d) {
            if (a && a.preventDefault && a.handleObj) {
                var e = a.handleObj;
                f(a.delegateTarget).off(e.namespace ? e.origType + "." + e.namespace : e.origType, e.selector, e.handler);
                return this;
            }
            if (typeof a == "object") {
                for (var g in a) {
                    this.off(g, c, a[g]);
                }
                return this;
            }
            if (c === !1 || typeof c == "function") {
                d = c,
                c = b;
            }
            d === !1 && (d = J);
            return this.each(function() {
                f.event.remove(this, a, d, c);
            });
        },
        bind: function(a, b, c) {
            return this.on(a, null , b, c);
        },
        unbind: function(a, b) {
            return this.off(a, null , b);
        },
        live: function(a, b, c) {
            f(this.context).on(a, this.selector, b, c);
            return this;
        },
        die: function(a, b) {
            f(this.context).off(a, this.selector || "**", b);
            return this;
        },
        delegate: function(a, b, c, d) {
            return this.on(b, a, c, d);
        },
        undelegate: function(a, b, c) {
            return arguments.length == 1 ? this.off(a, "**") : this.off(b, a, c);
        },
        trigger: function(a, b) {
            return this.each(function() {
                f.event.trigger(a, b, this);
            });
        },
        triggerHandler: function(a, b) {
            if (this[0]) {
                return f.event.trigger(a, b, this[0], !0);
            }
        },
        toggle: function(a) {
            var b = arguments
              , c = a.guid || f.guid++
              , d = 0
              , e = function(c) {
                var e = (f._data(this, "lastToggle" + a.guid) || 0) % d;
                f._data(this, "lastToggle" + a.guid, e + 1),
                c.preventDefault();
                return b[e].apply(this, arguments) || !1;
            }
            ;
            e.guid = c;
            while (d < b.length) {
                b[d++].guid = c;
            }
            return this.click(e);
        },
        hover: function(a, b) {
            return this.mouseenter(a).mouseleave(b || a);
        }
    }),
    f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
        f.fn[b] = function(a, c) {
            c == null  && (c = a,
            a = null );
            return arguments.length > 0 ? this.on(b, null , a, c) : this.trigger(b);
        }
        ,
        f.attrFn && (f.attrFn[b] = !0),
        C.test(b) && (f.event.fixHooks[b] = f.event.keyHooks),
        D.test(b) && (f.event.fixHooks[b] = f.event.mouseHooks);
    }),
    function() {
        function x(a, b, c, e, f, g) {
            for (var h = 0, i = e.length; h < i; h++) {
                var j = e[h];
                if (j) {
                    var k = !1;
                    j = j[a];
                    while (j) {
                        if (j[d] === c) {
                            k = e[j.sizset];
                            break;
                        }
                        if (j.nodeType === 1) {
                            g || (j[d] = c,
                            j.sizset = h);
                            if (typeof b != "string") {
                                if (j === b) {
                                    k = !0;
                                    break;
                                }
                            } else {
                                if (m.filter(b, [j]).length > 0) {
                                    k = j;
                                    break;
                                }
                            }
                        }
                        j = j[a];
                    }
                    e[h] = k;
                }
            }
        }
        function w(a, b, c, e, f, g) {
            for (var h = 0, i = e.length; h < i; h++) {
                var j = e[h];
                if (j) {
                    var k = !1;
                    j = j[a];
                    while (j) {
                        if (j[d] === c) {
                            k = e[j.sizset];
                            break;
                        }
                        j.nodeType === 1 && !g && (j[d] = c,
                        j.sizset = h);
                        if (j.nodeName.toLowerCase() === b) {
                            k = j;
                            break;
                        }
                        j = j[a];
                    }
                    e[h] = k;
                }
            }
        }
        var a = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g
          , d = "sizcache" + (Math.random() + "").replace(".", "")
          , e = 0
          , g = Object.prototype.toString
          , h = !1
          , i = !0
          , j = /\\/g
          , k = /\r\n/g
          , l = /\W/;
        [0, 0].sort(function() {
            i = !1;
            return 0;
        });
        var m = function(b, d, e, f) {
            e = e || [],
            d = d || c;
            var h = d;
            if (d.nodeType !== 1 && d.nodeType !== 9) {
                return [];
            }
            if (!b || typeof b != "string") {
                return e;
            }
            var i, j, k, l, n, q, r, t, u = !0, v = m.isXML(d), w = [], x = b;
            do {
                a.exec(""),
                i = a.exec(x);
                if (i) {
                    x = i[3],
                    w.push(i[1]);
                    if (i[2]) {
                        l = i[3];
                        break;
                    }
                }
            } while (i);if (w.length > 1 && p.exec(b)) {
                if (w.length === 2 && o.relative[w[0]]) {
                    j = y(w[0] + w[1], d, f);
                } else {
                    j = o.relative[w[0]] ? [d] : m(w.shift(), d);
                    while (w.length) {
                        b = w.shift(),
                        o.relative[b] && (b += w.shift()),
                        j = y(b, j, f);
                    }
                }
            } else {
                !f && w.length > 1 && d.nodeType === 9 && !v && o.match.ID.test(w[0]) && !o.match.ID.test(w[w.length - 1]) && (n = m.find(w.shift(), d, v),
                d = n.expr ? m.filter(n.expr, n.set)[0] : n.set[0]);
                if (d) {
                    n = f ? {
                        expr: w.pop(),
                        set: s(f)
                    } : m.find(w.pop(), w.length === 1 && (w[0] === "~" || w[0] === "+") && d.parentNode ? d.parentNode : d, v),
                    j = n.expr ? m.filter(n.expr, n.set) : n.set,
                    w.length > 0 ? k = s(j) : u = !1;
                    while (w.length) {
                        q = w.pop(),
                        r = q,
                        o.relative[q] ? r = w.pop() : q = "",
                        r == null  && (r = d),
                        o.relative[q](k, r, v);
                    }
                } else {
                    k = w = [];
                }
            }
            k || (k = j),
            k || m.error(q || b);
            if (g.call(k) === "[object Array]") {
                if (!u) {
                    e.push.apply(e, k);
                } else {
                    if (d && d.nodeType === 1) {
                        for (t = 0; k[t] != null ; t++) {
                            k[t] && (k[t] === !0 || k[t].nodeType === 1 && m.contains(d, k[t])) && e.push(j[t]);
                        }
                    } else {
                        for (t = 0; k[t] != null ; t++) {
                            k[t] && k[t].nodeType === 1 && e.push(j[t]);
                        }
                    }
                }
            } else {
                s(k, e);
            }
            l && (m(l, h, e, f),
            m.uniqueSort(e));
            return e;
        }
        ;
        m.uniqueSort = function(a) {
            if (u) {
                h = i,
                a.sort(u);
                if (h) {
                    for (var b = 1; b < a.length; b++) {
                        a[b] === a[b - 1] && a.splice(b--, 1);
                    }
                }
            }
            return a;
        }
        ,
        m.matches = function(a, b) {
            return m(a, null , null , b);
        }
        ,
        m.matchesSelector = function(a, b) {
            return m(b, null , null , [a]).length > 0;
        }
        ,
        m.find = function(a, b, c) {
            var d, e, f, g, h, i;
            if (!a) {
                return [];
            }
            for (e = 0,
            f = o.order.length; e < f; e++) {
                h = o.order[e];
                if (g = o.leftMatch[h].exec(a)) {
                    i = g[1],
                    g.splice(1, 1);
                    if (i.substr(i.length - 1) !== "\\") {
                        g[1] = (g[1] || "").replace(j, ""),
                        d = o.find[h](g, b, c);
                        if (d != null ) {
                            a = a.replace(o.match[h], "");
                            break;
                        }
                    }
                }
            }
            d || (d = typeof b.getElementsByTagName != "undefined" ? b.getElementsByTagName("*") : []);
            return {
                set: d,
                expr: a
            };
        }
        ,
        m.filter = function(a, c, d, e) {
            var f, g, h, i, j, k, l, n, p, q = a, r = [], s = c, t = c && c[0] && m.isXML(c[0]);
            while (a && c.length) {
                for (h in o.filter) {
                    if ((f = o.leftMatch[h].exec(a)) != null  && f[2]) {
                        k = o.filter[h],
                        l = f[1],
                        g = !1,
                        f.splice(1, 1);
                        if (l.substr(l.length - 1) === "\\") {
                            continue;
                        }
                        s === r && (r = []);
                        if (o.preFilter[h]) {
                            f = o.preFilter[h](f, s, d, r, e, t);
                            if (!f) {
                                g = i = !0;
                            } else {
                                if (f === !0) {
                                    continue;
                                }
                            }
                        }
                        if (f) {
                            for (n = 0; (j = s[n]) != null ; n++) {
                                j && (i = k(j, f, n, s),
                                p = e ^ i,
                                d && i != null  ? p ? g = !0 : s[n] = !1 : p && (r.push(j),
                                g = !0));
                            }
                        }
                        if (i !== b) {
                            d || (s = r),
                            a = a.replace(o.match[h], "");
                            if (!g) {
                                return [];
                            }
                            break;
                        }
                    }
                }
                if (a === q) {
                    if (g == null ) {
                        m.error(a);
                    } else {
                        break;
                    }
                }
                q = a;
            }
            return s;
        }
        ,
        m.error = function(a) {
            throw new Error("Syntax error, unrecognized expression: " + a);
        }
        ;
        var n = m.getText = function(a) {
            var b, c, d = a.nodeType, e = "";
            if (d) {
                if (d === 1 || d === 9 || d === 11) {
                    if (typeof a.textContent == "string") {
                        return a.textContent;
                    }
                    if (typeof a.innerText == "string") {
                        return a.innerText.replace(k, "");
                    }
                    for (a = a.firstChild; a; a = a.nextSibling) {
                        e += n(a);
                    }
                } else {
                    if (d === 3 || d === 4) {
                        return a.nodeValue;
                    }
                }
            } else {
                for (b = 0; c = a[b]; b++) {
                    c.nodeType !== 8 && (e += n(c));
                }
            }
            return e;
        }
          , o = m.selectors = {
            order: ["ID", "NAME", "TAG"],
            match: {
                ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
                NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
                ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
                TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
                CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
                POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
                PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
            },
            leftMatch: {},
            attrMap: {
                "class": "className",
                "for": "htmlFor"
            },
            attrHandle: {
                href: function(a) {
                    return a.getAttribute("href");
                },
                type: function(a) {
                    return a.getAttribute("type");
                }
            },
            relative: {
                "+": function(a, b) {
                    var c = typeof b == "string"
                      , d = c && !l.test(b)
                      , e = c && !d;
                    d && (b = b.toLowerCase());
                    for (var f = 0, g = a.length, h; f < g; f++) {
                        if (h = a[f]) {
                            while ((h = h.previousSibling) && h.nodeType !== 1) {}
                            a[f] = e || h && h.nodeName.toLowerCase() === b ? h || !1 : h === b;
                        }
                    }
                    e && m.filter(b, a, !0);
                },
                ">": function(a, b) {
                    var c, d = typeof b == "string", e = 0, f = a.length;
                    if (d && !l.test(b)) {
                        b = b.toLowerCase();
                        for (; e < f; e++) {
                            c = a[e];
                            if (c) {
                                var g = c.parentNode;
                                a[e] = g.nodeName.toLowerCase() === b ? g : !1;
                            }
                        }
                    } else {
                        for (; e < f; e++) {
                            c = a[e],
                            c && (a[e] = d ? c.parentNode : c.parentNode === b);
                        }
                        d && m.filter(b, a, !0);
                    }
                },
                "": function(a, b, c) {
                    var d, f = e++, g = x;
                    typeof b == "string" && !l.test(b) && (b = b.toLowerCase(),
                    d = b,
                    g = w),
                    g("parentNode", b, f, a, d, c);
                },
                "~": function(a, b, c) {
                    var d, f = e++, g = x;
                    typeof b == "string" && !l.test(b) && (b = b.toLowerCase(),
                    d = b,
                    g = w),
                    g("previousSibling", b, f, a, d, c);
                }
            },
            find: {
                ID: function(a, b, c) {
                    if (typeof b.getElementById != "undefined" && !c) {
                        var d = b.getElementById(a[1]);
                        return d && d.parentNode ? [d] : [];
                    }
                },
                NAME: function(a, b) {
                    if (typeof b.getElementsByName != "undefined") {
                        var c = []
                          , d = b.getElementsByName(a[1]);
                        for (var e = 0, f = d.length; e < f; e++) {
                            d[e].getAttribute("name") === a[1] && c.push(d[e]);
                        }
                        return c.length === 0 ? null  : c;
                    }
                },
                TAG: function(a, b) {
                    if (typeof b.getElementsByTagName != "undefined") {
                        return b.getElementsByTagName(a[1]);
                    }
                }
            },
            preFilter: {
                CLASS: function(a, b, c, d, e, f) {
                    a = " " + a[1].replace(j, "") + " ";
                    if (f) {
                        return a;
                    }
                    for (var g = 0, h; (h = b[g]) != null ; g++) {
                        h && (e ^ (h.className && (" " + h.className + " ").replace(/[\t\n\r]/g, " ").indexOf(a) >= 0) ? c || d.push(h) : c && (b[g] = !1));
                    }
                    return !1;
                },
                ID: function(a) {
                    return a[1].replace(j, "");
                },
                TAG: function(a, b) {
                    return a[1].replace(j, "").toLowerCase();
                },
                CHILD: function(a) {
                    if (a[1] === "nth") {
                        a[2] || m.error(a[0]),
                        a[2] = a[2].replace(/^\+|\s*/g, "");
                        var b = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2] === "even" && "2n" || a[2] === "odd" && "2n+1" || !/\D/.test(a[2]) && "0n+" + a[2] || a[2]);
                        a[2] = b[1] + (b[2] || 1) - 0,
                        a[3] = b[3] - 0;
                    } else {
                        a[2] && m.error(a[0]);
                    }
                    a[0] = e++;
                    return a;
                },
                ATTR: function(a, b, c, d, e, f) {
                    var g = a[1] = a[1].replace(j, "");
                    !f && o.attrMap[g] && (a[1] = o.attrMap[g]),
                    a[4] = (a[4] || a[5] || "").replace(j, ""),
                    a[2] === "~=" && (a[4] = " " + a[4] + " ");
                    return a;
                },
                PSEUDO: function(b, c, d, e, f) {
                    if (b[1] === "not") {
                        if ((a.exec(b[3]) || "").length > 1 || /^\w/.test(b[3])) {
                            b[3] = m(b[3], null , null , c);
                        } else {
                            var g = m.filter(b[3], c, d, !0 ^ f);
                            d || e.push.apply(e, g);
                            return !1;
                        }
                    } else {
                        if (o.match.POS.test(b[0]) || o.match.CHILD.test(b[0])) {
                            return !0;
                        }
                    }
                    return b;
                },
                POS: function(a) {
                    a.unshift(!0);
                    return a;
                }
            },
            filters: {
                enabled: function(a) {
                    return a.disabled === !1 && a.type !== "hidden";
                },
                disabled: function(a) {
                    return a.disabled === !0;
                },
                checked: function(a) {
                    return a.checked === !0;
                },
                selected: function(a) {
                    a.parentNode && a.parentNode.selectedIndex;
                    return a.selected === !0;
                },
                parent: function(a) {
                    return !!a.firstChild;
                },
                empty: function(a) {
                    return !a.firstChild;
                },
                has: function(a, b, c) {
                    return !!m(c[3], a).length;
                },
                header: function(a) {
                    return /h\d/i.test(a.nodeName);
                },
                text: function(a) {
                    var b = a.getAttribute("type")
                      , c = a.type;
                    return a.nodeName.toLowerCase() === "input" && "text" === c && (b === c || b === null );
                },
                radio: function(a) {
                    return a.nodeName.toLowerCase() === "input" && "radio" === a.type;
                },
                checkbox: function(a) {
                    return a.nodeName.toLowerCase() === "input" && "checkbox" === a.type;
                },
                file: function(a) {
                    return a.nodeName.toLowerCase() === "input" && "file" === a.type;
                },
                password: function(a) {
                    return a.nodeName.toLowerCase() === "input" && "password" === a.type;
                },
                submit: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return (b === "input" || b === "button") && "submit" === a.type;
                },
                image: function(a) {
                    return a.nodeName.toLowerCase() === "input" && "image" === a.type;
                },
                reset: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return (b === "input" || b === "button") && "reset" === a.type;
                },
                button: function(a) {
                    var b = a.nodeName.toLowerCase();
                    return b === "input" && "button" === a.type || b === "button";
                },
                input: function(a) {
                    return /input|select|textarea|button/i.test(a.nodeName);
                },
                focus: function(a) {
                    return a === a.ownerDocument.activeElement;
                }
            },
            setFilters: {
                first: function(a, b) {
                    return b === 0;
                },
                last: function(a, b, c, d) {
                    return b === d.length - 1;
                },
                even: function(a, b) {
                    return b % 2 === 0;
                },
                odd: function(a, b) {
                    return b % 2 === 1;
                },
                lt: function(a, b, c) {
                    return b < c[3] - 0;
                },
                gt: function(a, b, c) {
                    return b > c[3] - 0;
                },
                nth: function(a, b, c) {
                    return c[3] - 0 === b;
                },
                eq: function(a, b, c) {
                    return c[3] - 0 === b;
                }
            },
            filter: {
                PSEUDO: function(a, b, c, d) {
                    var e = b[1]
                      , f = o.filters[e];
                    if (f) {
                        return f(a, c, b, d);
                    }
                    if (e === "contains") {
                        return (a.textContent || a.innerText || n([a]) || "").indexOf(b[3]) >= 0;
                    }
                    if (e === "not") {
                        var g = b[3];
                        for (var h = 0, i = g.length; h < i; h++) {
                            if (g[h] === a) {
                                return !1;
                            }
                        }
                        return !0;
                    }
                    m.error(e);
                },
                CHILD: function(a, b) {
                    var c, e, f, g, h, i, j, k = b[1], l = a;
                    switch (k) {
                    case "only":
                    case "first":
                        while (l = l.previousSibling) {
                            if (l.nodeType === 1) {
                                return !1;
                            }
                        }
                        if (k === "first") {
                            return !0;
                        }
                        l = a;
                    case "last":
                        while (l = l.nextSibling) {
                            if (l.nodeType === 1) {
                                return !1;
                            }
                        }
                        return !0;
                    case "nth":
                        c = b[2],
                        e = b[3];
                        if (c === 1 && e === 0) {
                            return !0;
                        }
                        f = b[0],
                        g = a.parentNode;
                        if (g && (g[d] !== f || !a.nodeIndex)) {
                            i = 0;
                            for (l = g.firstChild; l; l = l.nextSibling) {
                                l.nodeType === 1 && (l.nodeIndex = ++i);
                            }
                            g[d] = f;
                        }
                        j = a.nodeIndex - e;
                        return c === 0 ? j === 0 : j % c === 0 && j / c >= 0;
                    }
                },
                ID: function(a, b) {
                    return a.nodeType === 1 && a.getAttribute("id") === b;
                },
                TAG: function(a, b) {
                    return b === "*" && a.nodeType === 1 || !!a.nodeName && a.nodeName.toLowerCase() === b;
                },
                CLASS: function(a, b) {
                    return (" " + (a.className || a.getAttribute("class")) + " ").indexOf(b) > -1;
                },
                ATTR: function(a, b) {
                    var c = b[1]
                      , d = m.attr ? m.attr(a, c) : o.attrHandle[c] ? o.attrHandle[c](a) : a[c] != null  ? a[c] : a.getAttribute(c)
                      , e = d + ""
                      , f = b[2]
                      , g = b[4];
                    return d == null  ? f === "!=" : !f && m.attr ? d != null  : f === "=" ? e === g : f === "*=" ? e.indexOf(g) >= 0 : f === "~=" ? (" " + e + " ").indexOf(g) >= 0 : g ? f === "!=" ? e !== g : f === "^=" ? e.indexOf(g) === 0 : f === "$=" ? e.substr(e.length - g.length) === g : f === "|=" ? e === g || e.substr(0, g.length + 1) === g + "-" : !1 : e && d !== !1;
                },
                POS: function(a, b, c, d) {
                    var e = b[2]
                      , f = o.setFilters[e];
                    if (f) {
                        return f(a, c, b, d);
                    }
                }
            }
        }
          , p = o.match.POS
          , q = function(a, b) {
            return "\\" + (b - 0 + 1);
        }
        ;
        for (var r in o.match) {
            o.match[r] = new RegExp(o.match[r].source + /(?![^\[]*\])(?![^\(]*\))/.source),
            o.leftMatch[r] = new RegExp(/(^(?:.|\r|\n)*?)/.source + o.match[r].source.replace(/\\(\d+)/g, q));
        }
        o.match.globalPOS = p;
        var s = function(a, b) {
            a = Array.prototype.slice.call(a, 0);
            if (b) {
                b.push.apply(b, a);
                return b;
            }
            return a;
        }
        ;
        try {
            Array.prototype.slice.call(c.documentElement.childNodes, 0)[0].nodeType;
        } catch (t) {
            s = function(a, b) {
                var c = 0
                  , d = b || [];
                if (g.call(a) === "[object Array]") {
                    Array.prototype.push.apply(d, a);
                } else {
                    if (typeof a.length == "number") {
                        for (var e = a.length; c < e; c++) {
                            d.push(a[c]);
                        }
                    } else {
                        for (; a[c]; c++) {
                            d.push(a[c]);
                        }
                    }
                }
                return d;
            }
            ;
        }
        var u, v;
        c.documentElement.compareDocumentPosition ? u = function(a, b) {
            if (a === b) {
                h = !0;
                return 0;
            }
            if (!a.compareDocumentPosition || !b.compareDocumentPosition) {
                return a.compareDocumentPosition ? -1 : 1;
            }
            return a.compareDocumentPosition(b) & 4 ? -1 : 1;
        }
         : (u = function(a, b) {
            if (a === b) {
                h = !0;
                return 0;
            }
            if (a.sourceIndex && b.sourceIndex) {
                return a.sourceIndex - b.sourceIndex;
            }
            var c, d, e = [], f = [], g = a.parentNode, i = b.parentNode, j = g;
            if (g === i) {
                return v(a, b);
            }
            if (!g) {
                return -1;
            }
            if (!i) {
                return 1;
            }
            while (j) {
                e.unshift(j),
                j = j.parentNode;
            }
            j = i;
            while (j) {
                f.unshift(j),
                j = j.parentNode;
            }
            c = e.length,
            d = f.length;
            for (var k = 0; k < c && k < d; k++) {
                if (e[k] !== f[k]) {
                    return v(e[k], f[k]);
                }
            }
            return k === c ? v(a, f[k], -1) : v(e[k], b, 1);
        }
        ,
        v = function(a, b, c) {
            if (a === b) {
                return c;
            }
            var d = a.nextSibling;
            while (d) {
                if (d === b) {
                    return -1;
                }
                d = d.nextSibling;
            }
            return 1;
        }
        ),
        function() {
            var a = c.createElement("div")
              , d = "script" + (new Date).getTime()
              , e = c.documentElement;
            a.innerHTML = "<a name='" + d + "'/>",
            e.insertBefore(a, e.firstChild),
            c.getElementById(d) && (o.find.ID = function(a, c, d) {
                if (typeof c.getElementById != "undefined" && !d) {
                    var e = c.getElementById(a[1]);
                    return e ? e.id === a[1] || typeof e.getAttributeNode != "undefined" && e.getAttributeNode("id").nodeValue === a[1] ? [e] : b : [];
                }
            }
            ,
            o.filter.ID = function(a, b) {
                var c = typeof a.getAttributeNode != "undefined" && a.getAttributeNode("id");
                return a.nodeType === 1 && c && c.nodeValue === b;
            }
            ),
            e.removeChild(a),
            e = a = null ;
        }(),
        function() {
            var a = c.createElement("div");
            a.appendChild(c.createComment("")),
            a.getElementsByTagName("*").length > 0 && (o.find.TAG = function(a, b) {
                var c = b.getElementsByTagName(a[1]);
                if (a[1] === "*") {
                    var d = [];
                    for (var e = 0; c[e]; e++) {
                        c[e].nodeType === 1 && d.push(c[e]);
                    }
                    c = d;
                }
                return c;
            }
            ),
            a.innerHTML = "<a href='#'></a>",
            a.firstChild && typeof a.firstChild.getAttribute != "undefined" && a.firstChild.getAttribute("href") !== "#" && (o.attrHandle.href = function(a) {
                return a.getAttribute("href", 2);
            }
            ),
            a = null ;
        }(),
        c.querySelectorAll && function() {
            var a = m
              , b = c.createElement("div")
              , d = "__sizzle__";
            b.innerHTML = "<p class='TEST'></p>";
            if (!b.querySelectorAll || b.querySelectorAll(".TEST").length !== 0) {
                m = function(b, e, f, g) {
                    e = e || c;
                    if (!g && !m.isXML(e)) {
                        var h = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);
                        if (h && (e.nodeType === 1 || e.nodeType === 9)) {
                            if (h[1]) {
                                return s(e.getElementsByTagName(b), f);
                            }
                            if (h[2] && o.find.CLASS && e.getElementsByClassName) {
                                return s(e.getElementsByClassName(h[2]), f);
                            }
                        }
                        if (e.nodeType === 9) {
                            if (b === "body" && e.body) {
                                return s([e.body], f);
                            }
                            if (h && h[3]) {
                                var i = e.getElementById(h[3]);
                                if (!i || !i.parentNode) {
                                    return s([], f);
                                }
                                if (i.id === h[3]) {
                                    return s([i], f);
                                }
                            }
                            try {
                                return s(e.querySelectorAll(b), f);
                            } catch (j) {}
                        } else {
                            if (e.nodeType === 1 && e.nodeName.toLowerCase() !== "object") {
                                var k = e
                                  , l = e.getAttribute("id")
                                  , n = l || d
                                  , p = e.parentNode
                                  , q = /^\s*[+~]/.test(b);
                                l ? n = n.replace(/'/g, "\\$&") : e.setAttribute("id", n),
                                q && p && (e = e.parentNode);
                                try {
                                    if (!q || p) {
                                        return s(e.querySelectorAll("[id='" + n + "'] " + b), f);
                                    }
                                } catch (r) {} finally {
                                    l || k.removeAttribute("id");
                                }
                            }
                        }
                    }
                    return a(b, e, f, g);
                }
                ;
                for (var e in a) {
                    m[e] = a[e];
                }
                b = null ;
            }
        }(),
        function() {
            var a = c.documentElement
              , b = a.matchesSelector || a.mozMatchesSelector || a.webkitMatchesSelector || a.msMatchesSelector;
            if (b) {
                var d = !b.call(c.createElement("div"), "div")
                  , e = !1;
                try {
                    b.call(c.documentElement, "[test!='']:sizzle");
                } catch (f) {
                    e = !0;
                }
                m.matchesSelector = function(a, c) {
                    c = c.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");
                    if (!m.isXML(a)) {
                        try {
                            if (e || !o.match.PSEUDO.test(c) && !/!=/.test(c)) {
                                var f = b.call(a, c);
                                if (f || !d || a.document && a.document.nodeType !== 11) {
                                    return f;
                                }
                            }
                        } catch (g) {}
                    }
                    return m(c, null , null , [a]).length > 0;
                }
                ;
            }
        }(),
        function() {
            var a = c.createElement("div");
            a.innerHTML = "<div class='test e'></div><div class='test'></div>";
            if (!!a.getElementsByClassName && a.getElementsByClassName("e").length !== 0) {
                a.lastChild.className = "e";
                if (a.getElementsByClassName("e").length === 1) {
                    return;
                }
                o.order.splice(1, 0, "CLASS"),
                o.find.CLASS = function(a, b, c) {
                    if (typeof b.getElementsByClassName != "undefined" && !c) {
                        return b.getElementsByClassName(a[1]);
                    }
                }
                ,
                a = null ;
            }
        }(),
        c.documentElement.contains ? m.contains = function(a, b) {
            return a !== b && (a.contains ? a.contains(b) : !0);
        }
         : c.documentElement.compareDocumentPosition ? m.contains = function(a, b) {
            return !!(a.compareDocumentPosition(b) & 16);
        }
         : m.contains = function() {
            return !1;
        }
        ,
        m.isXML = function(a) {
            var b = (a ? a.ownerDocument || a : 0).documentElement;
            return b ? b.nodeName !== "HTML" : !1;
        }
        ;
        var y = function(a, b, c) {
            var d, e = [], f = "", g = b.nodeType ? [b] : b;
            while (d = o.match.PSEUDO.exec(a)) {
                f += d[0],
                a = a.replace(o.match.PSEUDO, "");
            }
            a = o.relative[a] ? a + "*" : a;
            for (var h = 0, i = g.length; h < i; h++) {
                m(a, g[h], e, c);
            }
            return m.filter(f, e);
        }
        ;
        m.attr = f.attr,
        m.selectors.attrMap = {},
        f.find = m,
        f.expr = m.selectors,
        f.expr[":"] = f.expr.filters,
        f.unique = m.uniqueSort,
        f.text = m.getText,
        f.isXMLDoc = m.isXML,
        f.contains = m.contains;
    }();
    var L = /Until$/
      , M = /^(?:parents|prevUntil|prevAll)/
      , N = /,/
      , O = /^.[^:#\[\.,]*$/
      , P = Array.prototype.slice
      , Q = f.expr.match.globalPOS
      , R = {
        children: !0,
        contents: !0,
        next: !0,
        prev: !0
    };
    f.fn.extend({
        find: function(a) {
            var b = this, c, d;
            if (typeof a != "string") {
                return f(a).filter(function() {
                    for (c = 0,
                    d = b.length; c < d; c++) {
                        if (f.contains(b[c], this)) {
                            return !0;
                        }
                    }
                });
            }
            var e = this.pushStack("", "find", a), g, h, i;
            for (c = 0,
            d = this.length; c < d; c++) {
                g = e.length,
                f.find(a, this[c], e);
                if (c > 0) {
                    for (h = g; h < e.length; h++) {
                        for (i = 0; i < g; i++) {
                            if (e[i] === e[h]) {
                                e.splice(h--, 1);
                                break;
                            }
                        }
                    }
                }
            }
            return e;
        },
        has: function(a) {
            var b = f(a);
            return this.filter(function() {
                for (var a = 0, c = b.length; a < c; a++) {
                    if (f.contains(this, b[a])) {
                        return !0;
                    }
                }
            });
        },
        not: function(a) {
            return this.pushStack(T(this, a, !1), "not", a);
        },
        filter: function(a) {
            return this.pushStack(T(this, a, !0), "filter", a);
        },
        is: function(a) {
            return !!a && (typeof a == "string" ? Q.test(a) ? f(a, this.context).index(this[0]) >= 0 : f.filter(a, this).length > 0 : this.filter(a).length > 0);
        },
        closest: function(a, b) {
            var c = [], d, e, g = this[0];
            if (f.isArray(a)) {
                var h = 1;
                while (g && g.ownerDocument && g !== b) {
                    for (d = 0; d < a.length; d++) {
                        f(g).is(a[d]) && c.push({
                            selector: a[d],
                            elem: g,
                            level: h
                        });
                    }
                    g = g.parentNode,
                    h++;
                }
                return c;
            }
            var i = Q.test(a) || typeof a != "string" ? f(a, b || this.context) : 0;
            for (d = 0,
            e = this.length; d < e; d++) {
                g = this[d];
                while (g) {
                    if (i ? i.index(g) > -1 : f.find.matchesSelector(g, a)) {
                        c.push(g);
                        break;
                    }
                    g = g.parentNode;
                    if (!g || !g.ownerDocument || g === b || g.nodeType === 11) {
                        break;
                    }
                }
            }
            c = c.length > 1 ? f.unique(c) : c;
            return this.pushStack(c, "closest", a);
        },
        index: function(a) {
            if (!a) {
                return this[0] && this[0].parentNode ? this.prevAll().length : -1;
            }
            if (typeof a == "string") {
                return f.inArray(this[0], f(a));
            }
            return f.inArray(a.jquery ? a[0] : a, this);
        },
        add: function(a, b) {
            var c = typeof a == "string" ? f(a, b) : f.makeArray(a && a.nodeType ? [a] : a)
              , d = f.merge(this.get(), c);
            return this.pushStack(S(c[0]) || S(d[0]) ? d : f.unique(d));
        },
        andSelf: function() {
            return this.add(this.prevObject);
        }
    }),
    f.each({
        parent: function(a) {
            var b = a.parentNode;
            return b && b.nodeType !== 11 ? b : null ;
        },
        parents: function(a) {
            return f.dir(a, "parentNode");
        },
        parentsUntil: function(a, b, c) {
            return f.dir(a, "parentNode", c);
        },
        next: function(a) {
            return f.nth(a, 2, "nextSibling");
        },
        prev: function(a) {
            return f.nth(a, 2, "previousSibling");
        },
        nextAll: function(a) {
            return f.dir(a, "nextSibling");
        },
        prevAll: function(a) {
            return f.dir(a, "previousSibling");
        },
        nextUntil: function(a, b, c) {
            return f.dir(a, "nextSibling", c);
        },
        prevUntil: function(a, b, c) {
            return f.dir(a, "previousSibling", c);
        },
        siblings: function(a) {
            return f.sibling((a.parentNode || {}).firstChild, a);
        },
        children: function(a) {
            return f.sibling(a.firstChild);
        },
        contents: function(a) {
            return f.nodeName(a, "iframe") ? a.contentDocument || a.contentWindow.document : f.makeArray(a.childNodes);
        }
    }, function(a, b) {
        f.fn[a] = function(c, d) {
            var e = f.map(this, b, c);
            L.test(a) || (d = c),
            d && typeof d == "string" && (e = f.filter(d, e)),
            e = this.length > 1 && !R[a] ? f.unique(e) : e,
            (this.length > 1 || N.test(d)) && M.test(a) && (e = e.reverse());
            return this.pushStack(e, a, P.call(arguments).join(","));
        }
        ;
    }),
    f.extend({
        filter: function(a, b, c) {
            c && (a = ":not(" + a + ")");
            return b.length === 1 ? f.find.matchesSelector(b[0], a) ? [b[0]] : [] : f.find.matches(a, b);
        },
        dir: function(a, c, d) {
            var e = []
              , g = a[c];
            while (g && g.nodeType !== 9 && (d === b || g.nodeType !== 1 || !f(g).is(d))) {
                g.nodeType === 1 && e.push(g),
                g = g[c];
            }
            return e;
        },
        nth: function(a, b, c, d) {
            b = b || 1;
            var e = 0;
            for (; a; a = a[c]) {
                if (a.nodeType === 1 && ++e === b) {
                    break;
                }
            }
            return a;
        },
        sibling: function(a, b) {
            var c = [];
            for (; a; a = a.nextSibling) {
                a.nodeType === 1 && a !== b && c.push(a);
            }
            return c;
        }
    });
    var V = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video"
      , W = / jQuery\d+="(?:\d+|null)"/g
      , X = /^\s+/
      , Y = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig
      , Z = /<([\w:]+)/
      , $ = /<tbody/i
      , _ = /<|&#?\w+;/
      , ba = /<(?:script|style)/i
      , bb = /<(?:script|object|embed|option|style)/i
      , bc = new RegExp("<(?:" + V + ")[\\s/>]","i")
      , bd = /checked\s*(?:[^=]|=\s*.checked.)/i
      , be = /\/(java|ecma)script/i
      , bf = /^\s*<!(?:\[CDATA\[|\-\-)/
      , bg = {
        option: [1, "<select multiple='multiple'>", "</select>"],
        legend: [1, "<fieldset>", "</fieldset>"],
        thead: [1, "<table>", "</table>"],
        tr: [2, "<table><tbody>", "</tbody></table>"],
        td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
        col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
        area: [1, "<map>", "</map>"],
        _default: [0, "", ""]
    }
      , bh = U(c);
    bg.optgroup = bg.option,
    bg.tbody = bg.tfoot = bg.colgroup = bg.caption = bg.thead,
    bg.th = bg.td,
    f.support.htmlSerialize || (bg._default = [1, "div<div>", "</div>"]),
    f.fn.extend({
        text: function(a) {
            return f.access(this, function(a) {
                return a === b ? f.text(this) : this.empty().append((this[0] && this[0].ownerDocument || c).createTextNode(a));
            }, null , a, arguments.length);
        },
        wrapAll: function(a) {
            if (f.isFunction(a)) {
                return this.each(function(b) {
                    f(this).wrapAll(a.call(this, b));
                });
            }
            if (this[0]) {
                var b = f(a, this[0].ownerDocument).eq(0).clone(!0);
                this[0].parentNode && b.insertBefore(this[0]),
                b.map(function() {
                    var a = this;
                    while (a.firstChild && a.firstChild.nodeType === 1) {
                        a = a.firstChild;
                    }
                    return a;
                }).append(this);
            }
            return this;
        },
        wrapInner: function(a) {
            if (f.isFunction(a)) {
                return this.each(function(b) {
                    f(this).wrapInner(a.call(this, b));
                });
            }
            return this.each(function() {
                var b = f(this)
                  , c = b.contents();
                c.length ? c.wrapAll(a) : b.append(a);
            });
        },
        wrap: function(a) {
            var b = f.isFunction(a);
            return this.each(function(c) {
                f(this).wrapAll(b ? a.call(this, c) : a);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                f.nodeName(this, "body") || f(this).replaceWith(this.childNodes);
            }).end();
        },
        append: function() {
            return this.domManip(arguments, !0, function(a) {
                this.nodeType === 1 && this.appendChild(a);
            });
        },
        prepend: function() {
            return this.domManip(arguments, !0, function(a) {
                this.nodeType === 1 && this.insertBefore(a, this.firstChild);
            });
        },
        before: function() {
            if (this[0] && this[0].parentNode) {
                return this.domManip(arguments, !1, function(a) {
                    this.parentNode.insertBefore(a, this);
                });
            }
            if (arguments.length) {
                var a = f.clean(arguments);
                a.push.apply(a, this.toArray());
                return this.pushStack(a, "before", arguments);
            }
        },
        after: function() {
            if (this[0] && this[0].parentNode) {
                return this.domManip(arguments, !1, function(a) {
                    this.parentNode.insertBefore(a, this.nextSibling);
                });
            }
            if (arguments.length) {
                var a = this.pushStack(this, "after", arguments);
                a.push.apply(a, f.clean(arguments));
                return a;
            }
        },
        remove: function(a, b) {
            for (var c = 0, d; (d = this[c]) != null ; c++) {
                if (!a || f.filter(a, [d]).length) {
                    !b && d.nodeType === 1 && (f.cleanData(d.getElementsByTagName("*")),
                    f.cleanData([d])),
                    d.parentNode && d.parentNode.removeChild(d);
                }
            }
            return this;
        },
        empty: function() {
            for (var a = 0, b; (b = this[a]) != null ; a++) {
                b.nodeType === 1 && f.cleanData(b.getElementsByTagName("*"));
                while (b.firstChild) {
                    b.removeChild(b.firstChild);
                }
            }
            return this;
        },
        clone: function(a, b) {
            a = a == null  ? !1 : a,
            b = b == null  ? a : b;
            return this.map(function() {
                return f.clone(this, a, b);
            });
        },
        html: function(a) {
            return f.access(this, function(a) {
                var c = this[0] || {}
                  , d = 0
                  , e = this.length;
                if (a === b) {
                    return c.nodeType === 1 ? c.innerHTML.replace(W, "") : null ;
                }
                if (typeof a == "string" && !ba.test(a) && (f.support.leadingWhitespace || !X.test(a)) && !bg[(Z.exec(a) || ["", ""])[1].toLowerCase()]) {
                    a = a.replace(Y, "<$1></$2>");
                    try {
                        for (; d < e; d++) {
                            c = this[d] || {},
                            c.nodeType === 1 && (f.cleanData(c.getElementsByTagName("*")),
                            c.innerHTML = a);
                        }
                        c = 0;
                    } catch (g) {}
                }
                c && this.empty().append(a);
            }, null , a, arguments.length);
        },
        replaceWith: function(a) {
            if (this[0] && this[0].parentNode) {
                if (f.isFunction(a)) {
                    return this.each(function(b) {
                        var c = f(this)
                          , d = c.html();
                        c.replaceWith(a.call(this, b, d));
                    });
                }
                typeof a != "string" && (a = f(a).detach());
                return this.each(function() {
                    var b = this.nextSibling
                      , c = this.parentNode;
                    f(this).remove(),
                    b ? f(b).before(a) : f(c).append(a);
                });
            }
            return this.length ? this.pushStack(f(f.isFunction(a) ? a() : a), "replaceWith", a) : this;
        },
        detach: function(a) {
            return this.remove(a, !0);
        },
        domManip: function(a, c, d) {
            var e, g, h, i, j = a[0], k = [];
            if (!f.support.checkClone && arguments.length === 3 && typeof j == "string" && bd.test(j)) {
                return this.each(function() {
                    f(this).domManip(a, c, d, !0);
                });
            }
            if (f.isFunction(j)) {
                return this.each(function(e) {
                    var g = f(this);
                    a[0] = j.call(this, e, c ? g.html() : b),
                    g.domManip(a, c, d);
                });
            }
            if (this[0]) {
                i = j && j.parentNode,
                f.support.parentNode && i && i.nodeType === 11 && i.childNodes.length === this.length ? e = {
                    fragment: i
                } : e = f.buildFragment(a, this, k),
                h = e.fragment,
                h.childNodes.length === 1 ? g = h = h.firstChild : g = h.firstChild;
                if (g) {
                    c = c && f.nodeName(g, "tr");
                    for (var l = 0, m = this.length, n = m - 1; l < m; l++) {
                        d.call(c ? bi(this[l], g) : this[l], e.cacheable || m > 1 && l < n ? f.clone(h, !0, !0) : h);
                    }
                }
                k.length && f.each(k, function(a, b) {
                    b.src ? f.ajax({
                        type: "GET",
                        global: !1,
                        url: b.src,
                        async: !1,
                        dataType: "script"
                    }) : f.globalEval((b.text || b.textContent || b.innerHTML || "").replace(bf, "/*$0*/")),
                    b.parentNode && b.parentNode.removeChild(b);
                });
            }
            return this;
        }
    }),
    f.buildFragment = function(a, b, d) {
        var e, g, h, i, j = a[0];
        b && b[0] && (i = b[0].ownerDocument || b[0]),
        i.createDocumentFragment || (i = c),
        a.length === 1 && typeof j == "string" && j.length < 512 && i === c && j.charAt(0) === "<" && !bb.test(j) && (f.support.checkClone || !bd.test(j)) && (f.support.html5Clone || !bc.test(j)) && (g = !0,
        h = f.fragments[j],
        h && h !== 1 && (e = h)),
        e || (e = i.createDocumentFragment(),
        f.clean(a, i, e, d)),
        g && (f.fragments[j] = h ? e : 1);
        return {
            fragment: e,
            cacheable: g
        };
    }
    ,
    f.fragments = {},
    f.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(a, b) {
        f.fn[a] = function(c) {
            var d = []
              , e = f(c)
              , g = this.length === 1 && this[0].parentNode;
            if (g && g.nodeType === 11 && g.childNodes.length === 1 && e.length === 1) {
                e[b](this[0]);
                return this;
            }
            for (var h = 0, i = e.length; h < i; h++) {
                var j = (h > 0 ? this.clone(!0) : this).get();
                f(e[h])[b](j),
                d = d.concat(j);
            }
            return this.pushStack(d, a, e.selector);
        }
        ;
    }),
    f.extend({
        clone: function(a, b, c) {
            var d, e, g, h = f.support.html5Clone || f.isXMLDoc(a) || !bc.test("<" + a.nodeName + ">") ? a.cloneNode(!0) : bo(a);
            if ((!f.support.noCloneEvent || !f.support.noCloneChecked) && (a.nodeType === 1 || a.nodeType === 11) && !f.isXMLDoc(a)) {
                bk(a, h),
                d = bl(a),
                e = bl(h);
                for (g = 0; d[g]; ++g) {
                    e[g] && bk(d[g], e[g]);
                }
            }
            if (b) {
                bj(a, h);
                if (c) {
                    d = bl(a),
                    e = bl(h);
                    for (g = 0; d[g]; ++g) {
                        bj(d[g], e[g]);
                    }
                }
            }
            d = e = null ;
            return h;
        },
        clean: function(a, b, d, e) {
            var g, h, i, j = [];
            b = b || c,
            typeof b.createElement == "undefined" && (b = b.ownerDocument || b[0] && b[0].ownerDocument || c);
            for (var k = 0, l; (l = a[k]) != null ; k++) {
                typeof l == "number" && (l += "");
                if (!l) {
                    continue;
                }
                if (typeof l == "string") {
                    if (!_.test(l)) {
                        l = b.createTextNode(l);
                    } else {
                        l = l.replace(Y, "<$1></$2>");
                        var m = (Z.exec(l) || ["", ""])[1].toLowerCase(), n = bg[m] || bg._default, o = n[0], p = b.createElement("div"), q = bh.childNodes, r;
                        b === c ? bh.appendChild(p) : U(b).appendChild(p),
                        p.innerHTML = n[1] + l + n[2];
                        while (o--) {
                            p = p.lastChild;
                        }
                        if (!f.support.tbody) {
                            var s = $.test(l)
                              , t = m === "table" && !s ? p.firstChild && p.firstChild.childNodes : n[1] === "<table>" && !s ? p.childNodes : [];
                            for (i = t.length - 1; i >= 0; --i) {
                                f.nodeName(t[i], "tbody") && !t[i].childNodes.length && t[i].parentNode.removeChild(t[i]);
                            }
                        }
                        !f.support.leadingWhitespace && X.test(l) && p.insertBefore(b.createTextNode(X.exec(l)[0]), p.firstChild),
                        l = p.childNodes,
                        p && (p.parentNode.removeChild(p),
                        q.length > 0 && (r = q[q.length - 1],
                        r && r.parentNode && r.parentNode.removeChild(r)));
                    }
                }
                var u;
                if (!f.support.appendChecked) {
                    if (l[0] && typeof (u = l.length) == "number") {
                        for (i = 0; i < u; i++) {
                            bn(l[i]);
                        }
                    } else {
                        bn(l);
                    }
                }
                l.nodeType ? j.push(l) : j = f.merge(j, l);
            }
            if (d) {
                g = function(a) {
                    return !a.type || be.test(a.type);
                }
                ;
                for (k = 0; j[k]; k++) {
                    h = j[k];
                    if (e && f.nodeName(h, "script") && (!h.type || be.test(h.type))) {
                        e.push(h.parentNode ? h.parentNode.removeChild(h) : h);
                    } else {
                        if (h.nodeType === 1) {
                            var v = f.grep(h.getElementsByTagName("script"), g);
                            j.splice.apply(j, [k + 1, 0].concat(v));
                        }
                        d.appendChild(h);
                    }
                }
            }
            return j;
        },
        cleanData: function(a) {
            var b, c, d = f.cache, e = f.event.special, g = f.support.deleteExpando;
            for (var h = 0, i; (i = a[h]) != null ; h++) {
                if (i.nodeName && f.noData[i.nodeName.toLowerCase()]) {
                    continue;
                }
                c = i[f.expando];
                if (c) {
                    b = d[c];
                    if (b && b.events) {
                        for (var j in b.events) {
                            e[j] ? f.event.remove(i, j) : f.removeEvent(i, j, b.handle);
                        }
                        b.handle && (b.handle.elem = null );
                    }
                    g ? delete i[f.expando] : i.removeAttribute && i.removeAttribute(f.expando),
                    delete d[c];
                }
            }
        }
    });
    var bp = /alpha\([^)]*\)/i, bq = /opacity=([^)]*)/, br = /([A-Z]|^ms)/g, bs = /^[\-+]?(?:\d*\.)?\d+$/i, bt = /^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i, bu = /^([\-+])=([\-+.\de]+)/, bv = /^margin/, bw = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, bx = ["Top", "Right", "Bottom", "Left"], by, bz, bA;
    f.fn.css = function(a, c) {
        return f.access(this, function(a, c, d) {
            return d !== b ? f.style(a, c, d) : f.css(a, c);
        }, a, c, arguments.length > 1);
    }
    ,
    f.extend({
        cssHooks: {
            opacity: {
                get: function(a, b) {
                    if (b) {
                        var c = by(a, "opacity");
                        return c === "" ? "1" : c;
                    }
                    return a.style.opacity;
                }
            }
        },
        cssNumber: {
            fillOpacity: !0,
            fontWeight: !0,
            lineHeight: !0,
            opacity: !0,
            orphans: !0,
            widows: !0,
            zIndex: !0,
            zoom: !0
        },
        cssProps: {
            "float": f.support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(a, c, d, e) {
            if (!!a && a.nodeType !== 3 && a.nodeType !== 8 && !!a.style) {
                var g, h, i = f.camelCase(c), j = a.style, k = f.cssHooks[i];
                c = f.cssProps[i] || i;
                if (d === b) {
                    if (k && "get" in k && (g = k.get(a, !1, e)) !== b) {
                        return g;
                    }
                    return j[c];
                }
                h = typeof d,
                h === "string" && (g = bu.exec(d)) && (d = +(g[1] + 1) * +g[2] + parseFloat(f.css(a, c)),
                h = "number");
                if (d == null  || h === "number" && isNaN(d)) {
                    return;
                }
                h === "number" && !f.cssNumber[i] && (d += "px");
                if (!k || !("set" in k) || (d = k.set(a, d)) !== b) {
                    try {
                        j[c] = d;
                    } catch (l) {}
                }
            }
        },
        css: function(a, c, d) {
            var e, g;
            c = f.camelCase(c),
            g = f.cssHooks[c],
            c = f.cssProps[c] || c,
            c === "cssFloat" && (c = "float");
            if (g && "get" in g && (e = g.get(a, !0, d)) !== b) {
                return e;
            }
            if (by) {
                return by(a, c);
            }
        },
        swap: function(a, b, c) {
            var d = {}, e, f;
            for (f in b) {
                d[f] = a.style[f],
                a.style[f] = b[f];
            }
            e = c.call(a);
            for (f in b) {
                a.style[f] = d[f];
            }
            return e;
        }
    }),
    f.curCSS = f.css,
    c.defaultView && c.defaultView.getComputedStyle && (bz = function(a, b) {
        var c, d, e, g, h = a.style;
        b = b.replace(br, "-$1").toLowerCase(),
        (d = a.ownerDocument.defaultView) && (e = d.getComputedStyle(a, null )) && (c = e.getPropertyValue(b),
        c === "" && !f.contains(a.ownerDocument.documentElement, a) && (c = f.style(a, b))),
        !f.support.pixelMargin && e && bv.test(b) && bt.test(c) && (g = h.width,
        h.width = c,
        c = e.width,
        h.width = g);
        return c;
    }
    ),
    c.documentElement.currentStyle && (bA = function(a, b) {
        var c, d, e, f = a.currentStyle && a.currentStyle[b], g = a.style;
        f == null  && g && (e = g[b]) && (f = e),
        bt.test(f) && (c = g.left,
        d = a.runtimeStyle && a.runtimeStyle.left,
        d && (a.runtimeStyle.left = a.currentStyle.left),
        g.left = b === "fontSize" ? "1em" : f,
        f = g.pixelLeft + "px",
        g.left = c,
        d && (a.runtimeStyle.left = d));
        return f === "" ? "auto" : f;
    }
    ),
    by = bz || bA,
    f.each(["height", "width"], function(a, b) {
        f.cssHooks[b] = {
            get: function(a, c, d) {
                if (c) {
                    return a.offsetWidth !== 0 ? bB(a, b, d) : f.swap(a, bw, function() {
                        return bB(a, b, d);
                    });
                }
            },
            set: function(a, b) {
                return bs.test(b) ? b + "px" : b;
            }
        };
    }),
    f.support.opacity || (f.cssHooks.opacity = {
        get: function(a, b) {
            return bq.test((b && a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? parseFloat(RegExp.$1) / 100 + "" : b ? "1" : "";
        },
        set: function(a, b) {
            var c = a.style
              , d = a.currentStyle
              , e = f.isNumeric(b) ? "alpha(opacity=" + b * 100 + ")" : ""
              , g = d && d.filter || c.filter || "";
            c.zoom = 1;
            if (b >= 1 && f.trim(g.replace(bp, "")) === "") {
                c.removeAttribute("filter");
                if (d && !d.filter) {
                    return;
                }
            }
            c.filter = bp.test(g) ? g.replace(bp, e) : g + " " + e;
        }
    }),
    f(function() {
        f.support.reliableMarginRight || (f.cssHooks.marginRight = {
            get: function(a, b) {
                return f.swap(a, {
                    display: "inline-block"
                }, function() {
                    return b ? by(a, "margin-right") : a.style.marginRight;
                });
            }
        });
    }),
    f.expr && f.expr.filters && (f.expr.filters.hidden = function(a) {
        var b = a.offsetWidth
          , c = a.offsetHeight;
        return b === 0 && c === 0 || !f.support.reliableHiddenOffsets && (a.style && a.style.display || f.css(a, "display")) === "none";
    }
    ,
    f.expr.filters.visible = function(a) {
        return !f.expr.filters.hidden(a);
    }
    ),
    f.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(a, b) {
        f.cssHooks[a + b] = {
            expand: function(c) {
                var d, e = typeof c == "string" ? c.split(" ") : [c], f = {};
                for (d = 0; d < 4; d++) {
                    f[a + bx[d] + b] = e[d] || e[d - 2] || e[0];
                }
                return f;
            }
        };
    });
    var bC = /%20/g, bD = /\[\]$/, bE = /\r?\n/g, bF = /#.*$/, bG = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, bH = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i, bI = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/, bJ = /^(?:GET|HEAD)$/, bK = /^\/\//, bL = /\?/, bM = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, bN = /^(?:select|textarea)/i, bO = /\s+/, bP = /([?&])_=[^&]*/, bQ = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/, bR = f.fn.load, bS = {}, bT = {}, bU, bV, bW = ["*/"] + ["*"];
    try {
        bU = e.href;
    } catch (bX) {
        bU = c.createElement("a"),
        bU.href = "",
        bU = bU.href;
    }
    bV = bQ.exec(bU.toLowerCase()) || [],
    f.fn.extend({
        load: function(a, c, d) {
            if (typeof a != "string" && bR) {
                return bR.apply(this, arguments);
            }
            if (!this.length) {
                return this;
            }
            var e = a.indexOf(" ");
            if (e >= 0) {
                var g = a.slice(e, a.length);
                a = a.slice(0, e);
            }
            var h = "GET";
            c && (f.isFunction(c) ? (d = c,
            c = b) : typeof c == "object" && (c = f.param(c, f.ajaxSettings.traditional),
            h = "POST"));
            var i = this;
            f.ajax({
                url: a,
                type: h,
                dataType: "html",
                data: c,
                complete: function(a, b, c) {
                    c = a.responseText,
                    a.isResolved() && (a.done(function(a) {
                        c = a;
                    }),
                    i.html(g ? f("<div>").append(c.replace(bM, "")).find(g) : c)),
                    d && i.each(d, [c, b, a]);
                }
            });
            return this;
        },
        serialize: function() {
            return f.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                return this.elements ? f.makeArray(this.elements) : this;
            }).filter(function() {
                return this.name && !this.disabled && (this.checked || bN.test(this.nodeName) || bH.test(this.type));
            }).map(function(a, b) {
                var c = f(this).val();
                return c == null  ? null  : f.isArray(c) ? f.map(c, function(a, c) {
                    return {
                        name: b.name,
                        value: a.replace(bE, "\r\n")
                    };
                }) : {
                    name: b.name,
                    value: c.replace(bE, "\r\n")
                };
            }).get();
        }
    }),
    f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function(a, b) {
        f.fn[b] = function(a) {
            return this.on(b, a);
        }
        ;
    }),
    f.each(["get", "post"], function(a, c) {
        f[c] = function(a, d, e, g) {
            f.isFunction(d) && (g = g || e,
            e = d,
            d = b);
            return f.ajax({
                type: c,
                url: a,
                data: d,
                success: e,
                dataType: g
            });
        }
        ;
    }),
    f.extend({
        getScript: function(a, c) {
            return f.get(a, b, c, "script");
        },
        getJSON: function(a, b, c) {
            return f.get(a, b, c, "json");
        },
        ajaxSetup: function(a, b) {
            b ? b$(a, f.ajaxSettings) : (b = a,
            a = f.ajaxSettings),
            b$(a, b);
            return a;
        },
        ajaxSettings: {
            url: bU,
            isLocal: bI.test(bV[1]),
            global: !0,
            type: "GET",
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            processData: !0,
            async: !0,
            accepts: {
                xml: "application/xml, text/xml",
                html: "text/html",
                text: "text/plain",
                json: "application/json, text/javascript",
                "*": bW
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText"
            },
            converters: {
                "* text": a.String,
                "text html": !0,
                "text json": f.parseJSON,
                "text xml": f.parseXML
            },
            flatOptions: {
                context: !0,
                url: !0
            }
        },
        ajaxPrefilter: bY(bS),
        ajaxTransport: bY(bT),
        ajax: function(a, c) {
            function w(a, c, l, m) {
                if (s !== 2) {
                    s = 2,
                    q && clearTimeout(q),
                    p = b,
                    n = m || "",
                    v.readyState = a > 0 ? 4 : 0;
                    var o, r, u, w = c, x = l ? ca(d, v, l) : b, y, z;
                    if (a >= 200 && a < 300 || a === 304) {
                        if (d.ifModified) {
                            if (y = v.getResponseHeader("Last-Modified")) {
                                f.lastModified[k] = y;
                            }
                            if (z = v.getResponseHeader("Etag")) {
                                f.etag[k] = z;
                            }
                        }
                        if (a === 304) {
                            w = "notmodified",
                            o = !0;
                        } else {
                            try {
                                r = cb(d, x),
                                w = "success",
                                o = !0;
                            } catch (A) {
                                w = "parsererror",
                                u = A;
                            }
                        }
                    } else {
                        u = w;
                        if (!w || a) {
                            w = "error",
                            a < 0 && (a = 0);
                        }
                    }
                    v.status = a,
                    v.statusText = "" + (c || w),
                    o ? h.resolveWith(e, [r, w, v]) : h.rejectWith(e, [v, w, u]),
                    v.statusCode(j),
                    j = b,
                    t && g.trigger("ajax" + (o ? "Success" : "Error"), [v, d, o ? r : u]),
                    i.fireWith(e, [v, w]),
                    t && (g.trigger("ajaxComplete", [v, d]),
                    --f.active || f.event.trigger("ajaxStop"));
                }
            }
            typeof a == "object" && (c = a,
            a = b),
            c = c || {};
            var d = f.ajaxSetup({}, c), e = d.context || d, g = e !== d && (e.nodeType || e instanceof f) ? f(e) : f.event, h = f.Deferred(), i = f.Callbacks("once memory"), j = d.statusCode || {}, k, l = {}, m = {}, n, o, p, q, r, s = 0, t, u, v = {
                readyState: 0,
                setRequestHeader: function(a, b) {
                    if (!s) {
                        var c = a.toLowerCase();
                        a = m[c] = m[c] || a,
                        l[a] = b;
                    }
                    return this;
                },
                getAllResponseHeaders: function() {
                    return s === 2 ? n : null ;
                },
                getResponseHeader: function(a) {
                    var c;
                    if (s === 2) {
                        if (!o) {
                            o = {};
                            while (c = bG.exec(n)) {
                                o[c[1].toLowerCase()] = c[2];
                            }
                        }
                        c = o[a.toLowerCase()];
                    }
                    return c === b ? null  : c;
                },
                overrideMimeType: function(a) {
                    s || (d.mimeType = a);
                    return this;
                },
                abort: function(a) {
                    a = a || "abort",
                    p && p.abort(a),
                    w(0, a);
                    return this;
                }
            };
            h.promise(v),
            v.success = v.done,
            v.error = v.fail,
            v.complete = i.add,
            v.statusCode = function(a) {
                if (a) {
                    var b;
                    if (s < 2) {
                        for (b in a) {
                            j[b] = [j[b], a[b]];
                        }
                    } else {
                        b = a[v.status],
                        v.then(b, b);
                    }
                }
                return this;
            }
            ,
            d.url = ((a || d.url) + "").replace(bF, "").replace(bK, bV[1] + "//"),
            d.dataTypes = f.trim(d.dataType || "*").toLowerCase().split(bO),
            d.crossDomain == null  && (r = bQ.exec(d.url.toLowerCase()),
            d.crossDomain = !(!r || r[1] == bV[1] && r[2] == bV[2] && (r[3] || (r[1] === "http:" ? 80 : 443)) == (bV[3] || (bV[1] === "http:" ? 80 : 443)))),
            d.data && d.processData && typeof d.data != "string" && (d.data = f.param(d.data, d.traditional)),
            bZ(bS, d, c, v);
            if (s === 2) {
                return !1;
            }
            t = d.global,
            d.type = d.type.toUpperCase(),
            d.hasContent = !bJ.test(d.type),
            t && f.active++ === 0 && f.event.trigger("ajaxStart");
            if (!d.hasContent) {
                d.data && (d.url += (bL.test(d.url) ? "&" : "?") + d.data,
                delete d.data),
                k = d.url;
                if (d.cache === !1) {
                    var x = f.now()
                      , y = d.url.replace(bP, "$1_=" + x);
                    d.url = y + (y === d.url ? (bL.test(d.url) ? "&" : "?") + "_=" + x : "");
                }
            }
            (d.data && d.hasContent && d.contentType !== !1 || c.contentType) && v.setRequestHeader("Content-Type", d.contentType),
            d.ifModified && (k = k || d.url,
            f.lastModified[k] && v.setRequestHeader("If-Modified-Since", f.lastModified[k]),
            f.etag[k] && v.setRequestHeader("If-None-Match", f.etag[k])),
            v.setRequestHeader("Accept", d.dataTypes[0] && d.accepts[d.dataTypes[0]] ? d.accepts[d.dataTypes[0]] + (d.dataTypes[0] !== "*" ? ", " + bW + "; q=0.01" : "") : d.accepts["*"]);
            for (u in d.headers) {
                v.setRequestHeader(u, d.headers[u]);
            }
            if (d.beforeSend && (d.beforeSend.call(e, v, d) === !1 || s === 2)) {
                v.abort();
                return !1;
            }
            for (u in {
                success: 1,
                error: 1,
                complete: 1
            }) {
                v[u](d[u]);
            }
            p = bZ(bT, d, c, v);
            if (!p) {
                w(-1, "No Transport");
            } else {
                v.readyState = 1,
                t && g.trigger("ajaxSend", [v, d]),
                d.async && d.timeout > 0 && (q = setTimeout(function() {
                    v.abort("timeout");
                }, d.timeout));
                try {
                    s = 1,
                    p.send(l, w);
                } catch (z) {
                    if (s < 2) {
                        w(-1, z);
                    } else {
                        throw z;
                    }
                }
            }
            return v;
        },
        param: function(a, c) {
            var d = []
              , e = function(a, b) {
                b = f.isFunction(b) ? b() : b,
                d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b);
            }
            ;
            c === b && (c = f.ajaxSettings.traditional);
            if (f.isArray(a) || a.jquery && !f.isPlainObject(a)) {
                f.each(a, function() {
                    e(this.name, this.value);
                });
            } else {
                for (var g in a) {
                    b_(g, a[g], c, e);
                }
            }
            return d.join("&").replace(bC, "+");
        }
    }),
    f.extend({
        active: 0,
        lastModified: {},
        etag: {}
    });
    var cc = f.now()
      , cd = /(\=)\?(&|$)|\?\?/i;
    f.ajaxSetup({
        jsonp: "callback",
        jsonpCallback: function() {
            return f.expando + "_" + cc++;
        }
    }),
    f.ajaxPrefilter("json jsonp", function(b, c, d) {
        var e = typeof b.data == "string" && /^application\/x\-www\-form\-urlencoded/.test(b.contentType);
        if (b.dataTypes[0] === "jsonp" || b.jsonp !== !1 && (cd.test(b.url) || e && cd.test(b.data))) {
            var g, h = b.jsonpCallback = f.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, i = a[h], j = b.url, k = b.data, l = "$1" + h + "$2";
            b.jsonp !== !1 && (j = j.replace(cd, l),
            b.url === j && (e && (k = k.replace(cd, l)),
            b.data === k && (j += (/\?/.test(j) ? "&" : "?") + b.jsonp + "=" + h))),
            b.url = j,
            b.data = k,
            a[h] = function(a) {
                g = [a];
            }
            ,
            d.always(function() {
                a[h] = i,
                g && f.isFunction(i) && a[h](g[0]);
            }),
            b.converters["script json"] = function() {
                g || f.error(h + " was not called");
                return g[0];
            }
            ,
            b.dataTypes[0] = "json";
            return "script";
        }
    }),
    f.ajaxSetup({
        accepts: {
            script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
        },
        contents: {
            script: /javascript|ecmascript/
        },
        converters: {
            "text script": function(a) {
                f.globalEval(a);
                return a;
            }
        }
    }),
    f.ajaxPrefilter("script", function(a) {
        a.cache === b && (a.cache = !1),
        a.crossDomain && (a.type = "GET",
        a.global = !1);
    }),
    f.ajaxTransport("script", function(a) {
        if (a.crossDomain) {
            var d, e = c.head || c.getElementsByTagName("head")[0] || c.documentElement;
            return {
                send: function(f, g) {
                    d = c.createElement("script"),
                    d.async = "async",
                    a.scriptCharset && (d.charset = a.scriptCharset),
                    d.src = a.url,
                    d.onload = d.onreadystatechange = function(a, c) {
                        if (c || !d.readyState || /loaded|complete/.test(d.readyState)) {
                            d.onload = d.onreadystatechange = null ,
                            e && d.parentNode && e.removeChild(d),
                            d = b,
                            c || g(200, "success");
                        }
                    }
                    ,
                    e.insertBefore(d, e.firstChild);
                },
                abort: function() {
                    d && d.onload(0, 1);
                }
            };
        }
    });
    var ce = a.ActiveXObject ? function() {
        for (var a in cg) {
            cg[a](0, 1);
        }
    }
     : !1, cf = 0, cg;
    f.ajaxSettings.xhr = a.ActiveXObject ? function() {
        return !this.isLocal && ch() || ci();
    }
     : ch,
    function(a) {
        f.extend(f.support, {
            ajax: !!a,
            cors: !!a && "withCredentials" in a
        });
    }(f.ajaxSettings.xhr()),
    f.support.ajax && f.ajaxTransport(function(c) {
        if (!c.crossDomain || f.support.cors) {
            var d;
            return {
                send: function(e, g) {
                    var h = c.xhr(), i, j;
                    c.username ? h.open(c.type, c.url, c.async, c.username, c.password) : h.open(c.type, c.url, c.async);
                    if (c.xhrFields) {
                        for (j in c.xhrFields) {
                            h[j] = c.xhrFields[j];
                        }
                    }
                    c.mimeType && h.overrideMimeType && h.overrideMimeType(c.mimeType),
                    !c.crossDomain && !e["X-Requested-With"] && (e["X-Requested-With"] = "XMLHttpRequest");
                    try {
                        for (j in e) {
                            h.setRequestHeader(j, e[j]);
                        }
                    } catch (k) {}
                    h.send(c.hasContent && c.data || null ),
                    d = function(a, e) {
                        var j, k, l, m, n;
                        try {
                            if (d && (e || h.readyState === 4)) {
                                d = b,
                                i && (h.onreadystatechange = f.noop,
                                ce && delete cg[i]);
                                if (e) {
                                    h.readyState !== 4 && h.abort();
                                } else {
                                    j = h.status,
                                    l = h.getAllResponseHeaders(),
                                    m = {},
                                    n = h.responseXML,
                                    n && n.documentElement && (m.xml = n);
                                    try {
                                        m.text = h.responseText;
                                    } catch (a) {}
                                    try {
                                        k = h.statusText;
                                    } catch (o) {
                                        k = "";
                                    }
                                    !j && c.isLocal && !c.crossDomain ? j = m.text ? 200 : 404 : j === 1223 && (j = 204);
                                }
                            }
                        } catch (p) {
                            e || g(-1, p);
                        }
                        m && g(j, k, m, l);
                    }
                    ,
                    !c.async || h.readyState === 4 ? d() : (i = ++cf,
                    ce && (cg || (cg = {},
                    f(a).unload(ce)),
                    cg[i] = d),
                    h.onreadystatechange = d);
                },
                abort: function() {
                    d && d(0, 1);
                }
            };
        }
    });
    var cj = {}, ck, cl, cm = /^(?:toggle|show|hide)$/, cn = /^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i, co, cp = [["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"], ["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"], ["opacity"]], cq;
    f.fn.extend({
        show: function(a, b, c) {
            var d, e;
            if (a || a === 0) {
                return this.animate(ct("show", 3), a, b, c);
            }
            for (var g = 0, h = this.length; g < h; g++) {
                d = this[g],
                d.style && (e = d.style.display,
                !f._data(d, "olddisplay") && e === "none" && (e = d.style.display = ""),
                (e === "" && f.css(d, "display") === "none" || !f.contains(d.ownerDocument.documentElement, d)) && f._data(d, "olddisplay", cu(d.nodeName)));
            }
            for (g = 0; g < h; g++) {
                d = this[g];
                if (d.style) {
                    e = d.style.display;
                    if (e === "" || e === "none") {
                        d.style.display = f._data(d, "olddisplay") || "";
                    }
                }
            }
            return this;
        },
        hide: function(a, b, c) {
            if (a || a === 0) {
                return this.animate(ct("hide", 3), a, b, c);
            }
            var d, e, g = 0, h = this.length;
            for (; g < h; g++) {
                d = this[g],
                d.style && (e = f.css(d, "display"),
                e !== "none" && !f._data(d, "olddisplay") && f._data(d, "olddisplay", e));
            }
            for (g = 0; g < h; g++) {
                this[g].style && (this[g].style.display = "none");
            }
            return this;
        },
        _toggle: f.fn.toggle,
        toggle: function(a, b, c) {
            var d = typeof a == "boolean";
            f.isFunction(a) && f.isFunction(b) ? this._toggle.apply(this, arguments) : a == null  || d ? this.each(function() {
                var b = d ? a : f(this).is(":hidden");
                f(this)[b ? "show" : "hide"]();
            }) : this.animate(ct("toggle", 3), a, b, c);
            return this;
        },
        fadeTo: function(a, b, c, d) {
            return this.filter(":hidden").css("opacity", 0).show().end().animate({
                opacity: b
            }, a, c, d);
        },
        animate: function(a, b, c, d) {
            function g() {
                e.queue === !1 && f._mark(this);
                var b = f.extend({}, e), c = this.nodeType === 1, d = c && f(this).is(":hidden"), g, h, i, j, k, l, m, n, o, p, q;
                b.animatedProperties = {};
                for (i in a) {
                    g = f.camelCase(i),
                    i !== g && (a[g] = a[i],
                    delete a[i]);
                    if ((k = f.cssHooks[g]) && "expand" in k) {
                        l = k.expand(a[g]),
                        delete a[g];
                        for (i in l) {
                            i in a || (a[i] = l[i]);
                        }
                    }
                }
                for (g in a) {
                    h = a[g],
                    f.isArray(h) ? (b.animatedProperties[g] = h[1],
                    h = a[g] = h[0]) : b.animatedProperties[g] = b.specialEasing && b.specialEasing[g] || b.easing || "swing";
                    if (h === "hide" && d || h === "show" && !d) {
                        return b.complete.call(this);
                    }
                    c && (g === "height" || g === "width") && (b.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY],
                    f.css(this, "display") === "inline" && f.css(this, "float") === "none" && (!f.support.inlineBlockNeedsLayout || cu(this.nodeName) === "inline" ? this.style.display = "inline-block" : this.style.zoom = 1));
                }
                b.overflow != null  && (this.style.overflow = "hidden");
                for (i in a) {
                    j = new f.fx(this,b,i),
                    h = a[i],
                    cm.test(h) ? (q = f._data(this, "toggle" + i) || (h === "toggle" ? d ? "show" : "hide" : 0),
                    q ? (f._data(this, "toggle" + i, q === "show" ? "hide" : "show"),
                    j[q]()) : j[h]()) : (m = cn.exec(h),
                    n = j.cur(),
                    m ? (o = parseFloat(m[2]),
                    p = m[3] || (f.cssNumber[i] ? "" : "px"),
                    p !== "px" && (f.style(this, i, (o || 1) + p),
                    n = (o || 1) / j.cur() * n,
                    f.style(this, i, n + p)),
                    m[1] && (o = (m[1] === "-=" ? -1 : 1) * o + n),
                    j.custom(n, o, p)) : j.custom(n, h, ""));
                }
                return !0;
            }
            var e = f.speed(b, c, d);
            if (f.isEmptyObject(a)) {
                return this.each(e.complete, [!1]);
            }
            a = f.extend({}, a);
            return e.queue === !1 ? this.each(g) : this.queue(e.queue, g);
        },
        stop: function(a, c, d) {
            typeof a != "string" && (d = c,
            c = a,
            a = b),
            c && a !== !1 && this.queue(a || "fx", []);
            return this.each(function() {
                function h(a, b, c) {
                    var e = b[c];
                    f.removeData(a, c, !0),
                    e.stop(d);
                }
                var b, c = !1, e = f.timers, g = f._data(this);
                d || f._unmark(!0, this);
                if (a == null ) {
                    for (b in g) {
                        g[b] && g[b].stop && b.indexOf(".run") === b.length - 4 && h(this, g, b);
                    }
                } else {
                    g[b = a + ".run"] && g[b].stop && h(this, g, b);
                }
                for (b = e.length; b--; ) {
                    e[b].elem === this && (a == null  || e[b].queue === a) && (d ? e[b](!0) : e[b].saveState(),
                    c = !0,
                    e.splice(b, 1));
                }
                (!d || !c) && f.dequeue(this, a);
            });
        }
    }),
    f.each({
        slideDown: ct("show", 1),
        slideUp: ct("hide", 1),
        slideToggle: ct("toggle", 1),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(a, b) {
        f.fn[a] = function(a, c, d) {
            return this.animate(b, a, c, d);
        }
        ;
    }),
    f.extend({
        speed: function(a, b, c) {
            var d = a && typeof a == "object" ? f.extend({}, a) : {
                complete: c || !c && b || f.isFunction(a) && a,
                duration: a,
                easing: c && b || b && !f.isFunction(b) && b
            };
            d.duration = f.fx.off ? 0 : typeof d.duration == "number" ? d.duration : d.duration in f.fx.speeds ? f.fx.speeds[d.duration] : f.fx.speeds._default;
            if (d.queue == null  || d.queue === !0) {
                d.queue = "fx";
            }
            d.old = d.complete,
            d.complete = function(a) {
                f.isFunction(d.old) && d.old.call(this),
                d.queue ? f.dequeue(this, d.queue) : a !== !1 && f._unmark(this);
            }
            ;
            return d;
        },
        easing: {
            linear: function(a) {
                return a;
            },
            swing: function(a) {
                return -Math.cos(a * Math.PI) / 2 + 0.5;
            }
        },
        timers: [],
        fx: function(a, b, c) {
            this.options = b,
            this.elem = a,
            this.prop = c,
            b.orig = b.orig || {};
        }
    }),
    f.fx.prototype = {
        update: function() {
            this.options.step && this.options.step.call(this.elem, this.now, this),
            (f.fx.step[this.prop] || f.fx.step._default)(this);
        },
        cur: function() {
            if (this.elem[this.prop] != null  && (!this.elem.style || this.elem.style[this.prop] == null )) {
                return this.elem[this.prop];
            }
            var a, b = f.css(this.elem, this.prop);
            return isNaN(a = parseFloat(b)) ? !b || b === "auto" ? 0 : b : a;
        },
        custom: function(a, c, d) {
            function h(a) {
                return e.step(a);
            }
            var e = this
              , g = f.fx;
            this.startTime = cq || cr(),
            this.end = c,
            this.now = this.start = a,
            this.pos = this.state = 0,
            this.unit = d || this.unit || (f.cssNumber[this.prop] ? "" : "px"),
            h.queue = this.options.queue,
            h.elem = this.elem,
            h.saveState = function() {
                f._data(e.elem, "fxshow" + e.prop) === b && (e.options.hide ? f._data(e.elem, "fxshow" + e.prop, e.start) : e.options.show && f._data(e.elem, "fxshow" + e.prop, e.end));
            }
            ,
            h() && f.timers.push(h) && !co && (co = setInterval(g.tick, g.interval));
        },
        show: function() {
            var a = f._data(this.elem, "fxshow" + this.prop);
            this.options.orig[this.prop] = a || f.style(this.elem, this.prop),
            this.options.show = !0,
            a !== b ? this.custom(this.cur(), a) : this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur()),
            f(this.elem).show();
        },
        hide: function() {
            this.options.orig[this.prop] = f._data(this.elem, "fxshow" + this.prop) || f.style(this.elem, this.prop),
            this.options.hide = !0,
            this.custom(this.cur(), 0);
        },
        step: function(a) {
            var b, c, d, e = cq || cr(), g = !0, h = this.elem, i = this.options;
            if (a || e >= i.duration + this.startTime) {
                this.now = this.end,
                this.pos = this.state = 1,
                this.update(),
                i.animatedProperties[this.prop] = !0;
                for (b in i.animatedProperties) {
                    i.animatedProperties[b] !== !0 && (g = !1);
                }
                if (g) {
                    i.overflow != null  && !f.support.shrinkWrapBlocks && f.each(["", "X", "Y"], function(a, b) {
                        h.style["overflow" + b] = i.overflow[a];
                    }),
                    i.hide && f(h).hide();
                    if (i.hide || i.show) {
                        for (b in i.animatedProperties) {
                            f.style(h, b, i.orig[b]),
                            f.removeData(h, "fxshow" + b, !0),
                            f.removeData(h, "toggle" + b, !0);
                        }
                    }
                    d = i.complete,
                    d && (i.complete = !1,
                    d.call(h));
                }
                return !1;
            }
            i.duration == Infinity ? this.now = e : (c = e - this.startTime,
            this.state = c / i.duration,
            this.pos = f.easing[i.animatedProperties[this.prop]](this.state, c, 0, 1, i.duration),
            this.now = this.start + (this.end - this.start) * this.pos),
            this.update();
            return !0;
        }
    },
    f.extend(f.fx, {
        tick: function() {
            var a, b = f.timers, c = 0;
            for (; c < b.length; c++) {
                a = b[c],
                !a() && b[c] === a && b.splice(c--, 1);
            }
            b.length || f.fx.stop();
        },
        interval: 13,
        stop: function() {
            clearInterval(co),
            co = null ;
        },
        speeds: {
            slow: 600,
            fast: 200,
            _default: 400
        },
        step: {
            opacity: function(a) {
                f.style(a.elem, "opacity", a.now);
            },
            _default: function(a) {
                a.elem.style && a.elem.style[a.prop] != null  ? a.elem.style[a.prop] = a.now + a.unit : a.elem[a.prop] = a.now;
            }
        }
    }),
    f.each(cp.concat.apply([], cp), function(a, b) {
        b.indexOf("margin") && (f.fx.step[b] = function(a) {
            f.style(a.elem, b, Math.max(0, a.now) + a.unit);
        }
        );
    }),
    f.expr && f.expr.filters && (f.expr.filters.animated = function(a) {
        return f.grep(f.timers, function(b) {
            return a === b.elem;
        }).length;
    }
    );
    var cv, cw = /^t(?:able|d|h)$/i, cx = /^(?:body|html)$/i;
    "getBoundingClientRect" in c.documentElement ? cv = function(a, b, c, d) {
        try {
            d = a.getBoundingClientRect();
        } catch (e) {}
        if (!d || !f.contains(c, a)) {
            return d ? {
                top: d.top,
                left: d.left
            } : {
                top: 0,
                left: 0
            };
        }
        var g = b.body
          , h = cy(b)
          , i = c.clientTop || g.clientTop || 0
          , j = c.clientLeft || g.clientLeft || 0
          , k = h.pageYOffset || f.support.boxModel && c.scrollTop || g.scrollTop
          , l = h.pageXOffset || f.support.boxModel && c.scrollLeft || g.scrollLeft
          , m = d.top + k - i
          , n = d.left + l - j;
        return {
            top: m,
            left: n
        };
    }
     : cv = function(a, b, c) {
        var d, e = a.offsetParent, g = a, h = b.body, i = b.defaultView, j = i ? i.getComputedStyle(a, null ) : a.currentStyle, k = a.offsetTop, l = a.offsetLeft;
        while ((a = a.parentNode) && a !== h && a !== c) {
            if (f.support.fixedPosition && j.position === "fixed") {
                break;
            }
            d = i ? i.getComputedStyle(a, null ) : a.currentStyle,
            k -= a.scrollTop,
            l -= a.scrollLeft,
            a === e && (k += a.offsetTop,
            l += a.offsetLeft,
            f.support.doesNotAddBorder && (!f.support.doesAddBorderForTableAndCells || !cw.test(a.nodeName)) && (k += parseFloat(d.borderTopWidth) || 0,
            l += parseFloat(d.borderLeftWidth) || 0),
            g = e,
            e = a.offsetParent),
            f.support.subtractsBorderForOverflowNotVisible && d.overflow !== "visible" && (k += parseFloat(d.borderTopWidth) || 0,
            l += parseFloat(d.borderLeftWidth) || 0),
            j = d;
        }
        if (j.position === "relative" || j.position === "static") {
            k += h.offsetTop,
            l += h.offsetLeft;
        }
        f.support.fixedPosition && j.position === "fixed" && (k += Math.max(c.scrollTop, h.scrollTop),
        l += Math.max(c.scrollLeft, h.scrollLeft));
        return {
            top: k,
            left: l
        };
    }
    ,
    f.fn.offset = function(a) {
        if (arguments.length) {
            return a === b ? this : this.each(function(b) {
                f.offset.setOffset(this, a, b);
            });
        }
        var c = this[0]
          , d = c && c.ownerDocument;
        if (!d) {
            return null ;
        }
        if (c === d.body) {
            return f.offset.bodyOffset(c);
        }
        return cv(c, d, d.documentElement);
    }
    ,
    f.offset = {
        bodyOffset: function(a) {
            var b = a.offsetTop
              , c = a.offsetLeft;
            f.support.doesNotIncludeMarginInBodyOffset && (b += parseFloat(f.css(a, "marginTop")) || 0,
            c += parseFloat(f.css(a, "marginLeft")) || 0);
            return {
                top: b,
                left: c
            };
        },
        setOffset: function(a, b, c) {
            var d = f.css(a, "position");
            d === "static" && (a.style.position = "relative");
            var e = f(a), g = e.offset(), h = f.css(a, "top"), i = f.css(a, "left"), j = (d === "absolute" || d === "fixed") && f.inArray("auto", [h, i]) > -1, k = {}, l = {}, m, n;
            j ? (l = e.position(),
            m = l.top,
            n = l.left) : (m = parseFloat(h) || 0,
            n = parseFloat(i) || 0),
            f.isFunction(b) && (b = b.call(a, c, g)),
            b.top != null  && (k.top = b.top - g.top + m),
            b.left != null  && (k.left = b.left - g.left + n),
            "using" in b ? b.using.call(a, k) : e.css(k);
        }
    },
    f.fn.extend({
        position: function() {
            if (!this[0]) {
                return null ;
            }
            var a = this[0]
              , b = this.offsetParent()
              , c = this.offset()
              , d = cx.test(b[0].nodeName) ? {
                top: 0,
                left: 0
            } : b.offset();
            c.top -= parseFloat(f.css(a, "marginTop")) || 0,
            c.left -= parseFloat(f.css(a, "marginLeft")) || 0,
            d.top += parseFloat(f.css(b[0], "borderTopWidth")) || 0,
            d.left += parseFloat(f.css(b[0], "borderLeftWidth")) || 0;
            return {
                top: c.top - d.top,
                left: c.left - d.left
            };
        },
        offsetParent: function() {
            return this.map(function() {
                var a = this.offsetParent || c.body;
                while (a && !cx.test(a.nodeName) && f.css(a, "position") === "static") {
                    a = a.offsetParent;
                }
                return a;
            });
        }
    }),
    f.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(a, c) {
        var d = /Y/.test(c);
        f.fn[a] = function(e) {
            return f.access(this, function(a, e, g) {
                var h = cy(a);
                if (g === b) {
                    return h ? c in h ? h[c] : f.support.boxModel && h.document.documentElement[e] || h.document.body[e] : a[e];
                }
                h ? h.scrollTo(d ? f(h).scrollLeft() : g, d ? g : f(h).scrollTop()) : a[e] = g;
            }, a, e, arguments.length, null );
        }
        ;
    }),
    f.each({
        Height: "height",
        Width: "width"
    }, function(a, c) {
        var d = "client" + a
          , e = "scroll" + a
          , g = "offset" + a;
        f.fn["inner" + a] = function() {
            var a = this[0];
            return a ? a.style ? parseFloat(f.css(a, c, "padding")) : this[c]() : null ;
        }
        ,
        f.fn["outer" + a] = function(a) {
            var b = this[0];
            return b ? b.style ? parseFloat(f.css(b, c, a ? "margin" : "border")) : this[c]() : null ;
        }
        ,
        f.fn[c] = function(a) {
            return f.access(this, function(a, c, h) {
                var i, j, k, l;
                if (f.isWindow(a)) {
                    i = a.document,
                    j = i.documentElement[d];
                    return f.support.boxModel && j || i.body && i.body[d] || j;
                }
                if (a.nodeType === 9) {
                    i = a.documentElement;
                    if (i[d] >= i[e]) {
                        return i[d];
                    }
                    return Math.max(a.body[e], i[e], a.body[g], i[g]);
                }
                if (h === b) {
                    k = f.css(a, c),
                    l = parseFloat(k);
                    return f.isNumeric(l) ? l : k;
                }
                f(a).css(c, h);
            }, c, a, arguments.length, null );
        }
        ;
    }),
    a.jQuery = a.$ = f,
    typeof define == "function" && define.amd && define.amd.jQuery && define("jquery", [], function() {
        return f;
    });
})(window);
/*!
 * jQuery UI 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a, b) {
    function d(b) {
        return !a(b).parents().andSelf().filter(function() {
            return a.curCSS(this, "visibility") === "hidden" || a.expr.filters.hidden(this);
        }).length;
    }
    function c(b, c) {
        var e = b.nodeName.toLowerCase();
        if ("area" === e) {
            var f = b.parentNode, g = f.name, h;
            if (!b.href || !g || f.nodeName.toLowerCase() !== "map") {
                return !1;
            }
            h = a("img[usemap=#" + g + "]")[0];
            return !!h && d(h);
        }
        return (/input|select|textarea|button|object/.test(e) ? !b.disabled : "a" == e ? b.href || c : c) && d(b);
    }
    a.ui = a.ui || {};
    a.ui.version || (a.extend(a.ui, {
        version: "1.8.18",
        keyCode: {
            ALT: 18,
            BACKSPACE: 8,
            CAPS_LOCK: 20,
            COMMA: 188,
            COMMAND: 91,
            COMMAND_LEFT: 91,
            COMMAND_RIGHT: 93,
            CONTROL: 17,
            DELETE: 46,
            DOWN: 40,
            END: 35,
            ENTER: 13,
            ESCAPE: 27,
            HOME: 36,
            INSERT: 45,
            LEFT: 37,
            MENU: 93,
            NUMPAD_ADD: 107,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            NUMPAD_ENTER: 108,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_SUBTRACT: 109,
            PAGE_DOWN: 34,
            PAGE_UP: 33,
            PERIOD: 190,
            RIGHT: 39,
            SHIFT: 16,
            SPACE: 32,
            TAB: 9,
            UP: 38,
            WINDOWS: 91
        }
    }),
    a.fn.extend({
        propAttr: a.fn.prop || a.fn.attr,
        _focus: a.fn.focus,
        focus: function(b, c) {
            return typeof b == "number" ? this.each(function() {
                var d = this;
                setTimeout(function() {
                    a(d).focus(),
                    c && c.call(d);
                }, b);
            }) : this._focus.apply(this, arguments);
        },
        scrollParent: function() {
            var b;
            a.browser.msie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? b = this.parents().filter(function() {
                return /(relative|absolute|fixed)/.test(a.curCSS(this, "position", 1)) && /(auto|scroll)/.test(a.curCSS(this, "overflow", 1) + a.curCSS(this, "overflow-y", 1) + a.curCSS(this, "overflow-x", 1));
            }).eq(0) : b = this.parents().filter(function() {
                return /(auto|scroll)/.test(a.curCSS(this, "overflow", 1) + a.curCSS(this, "overflow-y", 1) + a.curCSS(this, "overflow-x", 1));
            }).eq(0);
            return /fixed/.test(this.css("position")) || !b.length ? a(document) : b;
        },
        zIndex: function(c) {
            if (c !== b) {
                return this.css("zIndex", c);
            }
            if (this.length) {
                var d = a(this[0]), e, f;
                while (d.length && d[0] !== document) {
                    e = d.css("position");
                    if (e === "absolute" || e === "relative" || e === "fixed") {
                        f = parseInt(d.css("zIndex"), 10);
                        if (!isNaN(f) && f !== 0) {
                            return f;
                        }
                    }
                    d = d.parent();
                }
            }
            return 0;
        },
        disableSelection: function() {
            return this.bind((a.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(a) {
                a.preventDefault();
            });
        },
        enableSelection: function() {
            return this.unbind(".ui-disableSelection");
        }
    }),
    a.each(["Width", "Height"], function(c, d) {
        function h(b, c, d, f) {
            a.each(e, function() {
                c -= parseFloat(a.curCSS(b, "padding" + this, !0)) || 0,
                d && (c -= parseFloat(a.curCSS(b, "border" + this + "Width", !0)) || 0),
                f && (c -= parseFloat(a.curCSS(b, "margin" + this, !0)) || 0);
            });
            return c;
        }
        var e = d === "Width" ? ["Left", "Right"] : ["Top", "Bottom"]
          , f = d.toLowerCase()
          , g = {
            innerWidth: a.fn.innerWidth,
            innerHeight: a.fn.innerHeight,
            outerWidth: a.fn.outerWidth,
            outerHeight: a.fn.outerHeight
        };
        a.fn["inner" + d] = function(c) {
            if (c === b) {
                return g["inner" + d].call(this);
            }
            return this.each(function() {
                a(this).css(f, h(this, c) + "px");
            });
        }
        ,
        a.fn["outer" + d] = function(b, c) {
            if (typeof b != "number") {
                return g["outer" + d].call(this, b);
            }
            return this.each(function() {
                a(this).css(f, h(this, b, !0, c) + "px");
            });
        }
        ;
    }),
    a.extend(a.expr[":"], {
        data: function(b, c, d) {
            return !!a.data(b, d[3]);
        },
        focusable: function(b) {
            return c(b, !isNaN(a.attr(b, "tabindex")));
        },
        tabbable: function(b) {
            var d = a.attr(b, "tabindex")
              , e = isNaN(d);
            return (e || d >= 0) && c(b, !e);
        }
    }),
    a(function() {
        var b = document.body
          , c = b.appendChild(c = document.createElement("div"));
        c.offsetHeight,
        a.extend(c.style, {
            minHeight: "100px",
            height: "auto",
            padding: 0,
            borderWidth: 0
        }),
        a.support.minHeight = c.offsetHeight === 100,
        a.support.selectstart = "onselectstart" in c,
        b.removeChild(c).style.display = "none";
    }),
    a.extend(a.ui, {
        plugin: {
            add: function(b, c, d) {
                var e = a.ui[b].prototype;
                for (var f in d) {
                    e.plugins[f] = e.plugins[f] || [],
                    e.plugins[f].push([c, d[f]]);
                }
            },
            call: function(a, b, c) {
                var d = a.plugins[b];
                if (!!d && !!a.element[0].parentNode) {
                    for (var e = 0; e < d.length; e++) {
                        a.options[d[e][0]] && d[e][1].apply(a.element, c);
                    }
                }
            }
        },
        contains: function(a, b) {
            return document.compareDocumentPosition ? a.compareDocumentPosition(b) & 16 : a !== b && a.contains(b);
        },
        hasScroll: function(b, c) {
            if (a(b).css("overflow") === "hidden") {
                return !1;
            }
            var d = c && c === "left" ? "scrollLeft" : "scrollTop"
              , e = !1;
            if (b[d] > 0) {
                return !0;
            }
            b[d] = 1,
            e = b[d] > 0,
            b[d] = 0;
            return e;
        },
        isOverAxis: function(a, b, c) {
            return a > b && a < b + c;
        },
        isOver: function(b, c, d, e, f, g) {
            return a.ui.isOverAxis(b, d, f) && a.ui.isOverAxis(c, e, g);
        }
    }));
})(jQuery);
/*!
 * jQuery UI Widget 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a, b) {
    if (a.cleanData) {
        var c = a.cleanData;
        a.cleanData = function(b) {
            for (var d = 0, e; (e = b[d]) != null ; d++) {
                try {
                    a(e).triggerHandler("remove");
                } catch (f) {}
            }
            c(b);
        }
        ;
    } else {
        var d = a.fn.remove;
        a.fn.remove = function(b, c) {
            return this.each(function() {
                c || (!b || a.filter(b, [this]).length) && a("*", this).add([this]).each(function() {
                    try {
                        a(this).triggerHandler("remove");
                    } catch (b) {}
                });
                return d.call(a(this), b, c);
            });
        }
        ;
    }
    a.widget = function(b, c, d) {
        var e = b.split(".")[0], f;
        b = b.split(".")[1],
        f = e + "-" + b,
        d || (d = c,
        c = a.Widget),
        a.expr[":"][f] = function(c) {
            return !!a.data(c, b);
        }
        ,
        a[e] = a[e] || {},
        a[e][b] = function(a, b) {
            arguments.length && this._createWidget(a, b);
        }
        ;
        var g = new c;
        g.options = a.extend(!0, {}, g.options),
        a[e][b].prototype = a.extend(!0, g, {
            namespace: e,
            widgetName: b,
            widgetEventPrefix: a[e][b].prototype.widgetEventPrefix || b,
            widgetBaseClass: f
        }, d),
        a.widget.bridge(b, a[e][b]);
    }
    ,
    a.widget.bridge = function(c, d) {
        a.fn[c] = function(e) {
            var f = typeof e == "string"
              , g = Array.prototype.slice.call(arguments, 1)
              , h = this;
            e = !f && g.length ? a.extend.apply(null , [!0, e].concat(g)) : e;
            if (f && e.charAt(0) === "_") {
                return h;
            }
            f ? this.each(function() {
                var d = a.data(this, c)
                  , f = d && a.isFunction(d[e]) ? d[e].apply(d, g) : d;
                if (f !== d && f !== b) {
                    h = f;
                    return !1;
                }
            }) : this.each(function() {
                var b = a.data(this, c);
                b ? b.option(e || {})._init() : a.data(this, c, new d(e,this));
            });
            return h;
        }
        ;
    }
    ,
    a.Widget = function(a, b) {
        arguments.length && this._createWidget(a, b);
    }
    ,
    a.Widget.prototype = {
        widgetName: "widget",
        widgetEventPrefix: "",
        options: {
            disabled: !1
        },
        _createWidget: function(b, c) {
            a.data(c, this.widgetName, this),
            this.element = a(c),
            this.options = a.extend(!0, {}, this.options, this._getCreateOptions(), b);
            var d = this;
            this.element.bind("remove." + this.widgetName, function() {
                d.destroy();
            }),
            this._create(),
            this._trigger("create"),
            this._init();
        },
        _getCreateOptions: function() {
            return a.metadata && a.metadata.get(this.element[0])[this.widgetName];
        },
        _create: function() {},
        _init: function() {},
        destroy: function() {
            this.element.unbind("." + this.widgetName).removeData(this.widgetName),
            this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled " + "ui-state-disabled");
        },
        widget: function() {
            return this.element;
        },
        option: function(c, d) {
            var e = c;
            if (arguments.length === 0) {
                return a.extend({}, this.options);
            }
            if (typeof c == "string") {
                if (d === b) {
                    return this.options[c];
                }
                e = {},
                e[c] = d;
            }
            this._setOptions(e);
            return this;
        },
        _setOptions: function(b) {
            var c = this;
            a.each(b, function(a, b) {
                c._setOption(a, b);
            });
            return this;
        },
        _setOption: function(a, b) {
            this.options[a] = b,
            a === "disabled" && this.widget()[b ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled" + " " + "ui-state-disabled").attr("aria-disabled", b);
            return this;
        },
        enable: function() {
            return this._setOption("disabled", !1);
        },
        disable: function() {
            return this._setOption("disabled", !0);
        },
        _trigger: function(b, c, d) {
            var e, f, g = this.options[b];
            d = d || {},
            c = a.Event(c),
            c.type = (b === this.widgetEventPrefix ? b : this.widgetEventPrefix + b).toLowerCase(),
            c.target = this.element[0],
            f = c.originalEvent;
            if (f) {
                for (e in f) {
                    e in c || (c[e] = f[e]);
                }
            }
            this.element.trigger(c, d);
            return !(a.isFunction(g) && g.call(this.element[0], c, d) === !1 || c.isDefaultPrevented());
        }
    };
})(jQuery);
/*!
 * jQuery UI Mouse 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a, b) {
    var c = !1;
    a(document).mouseup(function(a) {
        c = !1;
    }),
    a.widget("ui.mouse", {
        options: {
            cancel: ":input,option",
            distance: 1,
            delay: 0
        },
        _mouseInit: function() {
            var b = this;
            this.element.bind("mousedown." + this.widgetName, function(a) {
                return b._mouseDown(a);
            }).bind("click." + this.widgetName, function(c) {
                if (!0 === a.data(c.target, b.widgetName + ".preventClickEvent")) {
                    a.removeData(c.target, b.widgetName + ".preventClickEvent"),
                    c.stopImmediatePropagation();
                    return !1;
                }
            }),
            this.started = !1;
        },
        _mouseDestroy: function() {
            this.element.unbind("." + this.widgetName);
        },
        _mouseDown: function(b) {
            if (!c) {
                this._mouseStarted && this._mouseUp(b),
                this._mouseDownEvent = b;
                var d = this
                  , e = b.which == 1
                  , f = typeof this.options.cancel == "string" && b.target.nodeName ? a(b.target).closest(this.options.cancel).length : !1;
                if (!e || f || !this._mouseCapture(b)) {
                    return !0;
                }
                this.mouseDelayMet = !this.options.delay,
                this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function() {
                    d.mouseDelayMet = !0;
                }, this.options.delay));
                if (this._mouseDistanceMet(b) && this._mouseDelayMet(b)) {
                    this._mouseStarted = this._mouseStart(b) !== !1;
                    if (!this._mouseStarted) {
                        b.preventDefault();
                        return !0;
                    }
                }
                !0 === a.data(b.target, this.widgetName + ".preventClickEvent") && a.removeData(b.target, this.widgetName + ".preventClickEvent"),
                this._mouseMoveDelegate = function(a) {
                    return d._mouseMove(a);
                }
                ,
                this._mouseUpDelegate = function(a) {
                    return d._mouseUp(a);
                }
                ,
                a(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate),
                b.preventDefault(),
                c = !0;
                return !0;
            }
        },
        _mouseMove: function(b) {
            if (a.browser.msie && !(document.documentMode >= 9) && !b.button) {
                return this._mouseUp(b);
            }
            if (this._mouseStarted) {
                this._mouseDrag(b);
                return b.preventDefault();
            }
            this._mouseDistanceMet(b) && this._mouseDelayMet(b) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, b) !== !1,
            this._mouseStarted ? this._mouseDrag(b) : this._mouseUp(b));
            return !this._mouseStarted;
        },
        _mouseUp: function(b) {
            a(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate),
            this._mouseStarted && (this._mouseStarted = !1,
            b.target == this._mouseDownEvent.target && a.data(b.target, this.widgetName + ".preventClickEvent", !0),
            this._mouseStop(b));
            return !1;
        },
        _mouseDistanceMet: function(a) {
            return Math.max(Math.abs(this._mouseDownEvent.pageX - a.pageX), Math.abs(this._mouseDownEvent.pageY - a.pageY)) >= this.options.distance;
        },
        _mouseDelayMet: function(a) {
            return this.mouseDelayMet;
        },
        _mouseStart: function(a) {},
        _mouseDrag: function(a) {},
        _mouseStop: function(a) {},
        _mouseCapture: function(a) {
            return !0;
        }
    });
})(jQuery);
(function(a, b) {
    a.ui = a.ui || {};
    var c = /left|center|right/
      , d = /top|center|bottom/
      , e = "center"
      , f = {}
      , g = a.fn.position
      , h = a.fn.offset;
    a.fn.position = function(b) {
        if (!b || !b.of) {
            return g.apply(this, arguments);
        }
        b = a.extend({}, b);
        var h = a(b.of), i = h[0], j = (b.collision || "flip").split(" "), k = b.offset ? b.offset.split(" ") : [0, 0], l, m, n;
        i.nodeType === 9 ? (l = h.width(),
        m = h.height(),
        n = {
            top: 0,
            left: 0
        }) : i.setTimeout ? (l = h.width(),
        m = h.height(),
        n = {
            top: h.scrollTop(),
            left: h.scrollLeft()
        }) : i.preventDefault ? (b.at = "left top",
        l = m = 0,
        n = {
            top: b.of.pageY,
            left: b.of.pageX
        }) : (l = h.outerWidth(),
        m = h.outerHeight(),
        n = h.offset()),
        a.each(["my", "at"], function() {
            var a = (b[this] || "").split(" ");
            a.length === 1 && (a = c.test(a[0]) ? a.concat([e]) : d.test(a[0]) ? [e].concat(a) : [e, e]),
            a[0] = c.test(a[0]) ? a[0] : e,
            a[1] = d.test(a[1]) ? a[1] : e,
            b[this] = a;
        }),
        j.length === 1 && (j[1] = j[0]),
        k[0] = parseInt(k[0], 10) || 0,
        k.length === 1 && (k[1] = k[0]),
        k[1] = parseInt(k[1], 10) || 0,
        b.at[0] === "right" ? n.left += l : b.at[0] === e && (n.left += l / 2),
        b.at[1] === "bottom" ? n.top += m : b.at[1] === e && (n.top += m / 2),
        n.left += k[0],
        n.top += k[1];
        return this.each(function() {
            var c = a(this), d = c.outerWidth(), g = c.outerHeight(), h = parseInt(a.curCSS(this, "marginLeft", !0)) || 0, i = parseInt(a.curCSS(this, "marginTop", !0)) || 0, o = d + h + (parseInt(a.curCSS(this, "marginRight", !0)) || 0), p = g + i + (parseInt(a.curCSS(this, "marginBottom", !0)) || 0), q = a.extend({}, n), r;
            b.my[0] === "right" ? q.left -= d : b.my[0] === e && (q.left -= d / 2),
            b.my[1] === "bottom" ? q.top -= g : b.my[1] === e && (q.top -= g / 2),
            f.fractions || (q.left = Math.round(q.left),
            q.top = Math.round(q.top)),
            r = {
                left: q.left - h,
                top: q.top - i
            },
            a.each(["left", "top"], function(c, e) {
                a.ui.position[j[c]] && a.ui.position[j[c]][e](q, {
                    targetWidth: l,
                    targetHeight: m,
                    elemWidth: d,
                    elemHeight: g,
                    collisionPosition: r,
                    collisionWidth: o,
                    collisionHeight: p,
                    offset: k,
                    my: b.my,
                    at: b.at
                });
            }),
            a.fn.bgiframe && c.bgiframe(),
            c.offset(a.extend(q, {
                using: b.using
            }));
        });
    }
    ,
    a.ui.position = {
        fit: {
            left: function(b, c) {
                var d = a(window)
                  , e = c.collisionPosition.left + c.collisionWidth - d.width() - d.scrollLeft();
                b.left = e > 0 ? b.left - e : Math.max(b.left - c.collisionPosition.left, b.left);
            },
            top: function(b, c) {
                var d = a(window)
                  , e = c.collisionPosition.top + c.collisionHeight - d.height() - d.scrollTop();
                b.top = e > 0 ? b.top - e : Math.max(b.top - c.collisionPosition.top, b.top);
            }
        },
        flip: {
            left: function(b, c) {
                if (c.at[0] !== e) {
                    var d = a(window)
                      , f = c.collisionPosition.left + c.collisionWidth - d.width() - d.scrollLeft()
                      , g = c.my[0] === "left" ? -c.elemWidth : c.my[0] === "right" ? c.elemWidth : 0
                      , h = c.at[0] === "left" ? c.targetWidth : -c.targetWidth
                      , i = -2 * c.offset[0];
                    b.left += c.collisionPosition.left < 0 ? g + h + i : f > 0 ? g + h + i : 0;
                }
            },
            top: function(b, c) {
                if (c.at[1] !== e) {
                    var d = a(window)
                      , f = c.collisionPosition.top + c.collisionHeight - d.height() - d.scrollTop()
                      , g = c.my[1] === "top" ? -c.elemHeight : c.my[1] === "bottom" ? c.elemHeight : 0
                      , h = c.at[1] === "top" ? c.targetHeight : -c.targetHeight
                      , i = -2 * c.offset[1];
                    b.top += c.collisionPosition.top < 0 ? g + h + i : f > 0 ? g + h + i : 0;
                }
            }
        }
    },
    a.offset.setOffset || (a.offset.setOffset = function(b, c) {
        /static/.test(a.curCSS(b, "position")) && (b.style.position = "relative");
        var d = a(b)
          , e = d.offset()
          , f = parseInt(a.curCSS(b, "top", !0), 10) || 0
          , g = parseInt(a.curCSS(b, "left", !0), 10) || 0
          , h = {
            top: c.top - e.top + f,
            left: c.left - e.left + g
        };
        "using" in c ? c.using.call(b, h) : d.css(h);
    }
    ,
    a.fn.offset = function(b) {
        var c = this[0];
        if (!c || !c.ownerDocument) {
            return null ;
        }
        if (b) {
            return this.each(function() {
                a.offset.setOffset(this, b);
            });
        }
        return h.call(this);
    }
    ),
    function() {
        var b = document.getElementsByTagName("body")[0], c = document.createElement("div"), d, e, g, h, i;
        d = document.createElement(b ? "div" : "body"),
        g = {
            visibility: "hidden",
            width: 0,
            height: 0,
            border: 0,
            margin: 0,
            background: "none"
        },
        b && a.extend(g, {
            position: "absolute",
            left: "-1000px",
            top: "-1000px"
        });
        for (var j in g) {
            d.style[j] = g[j];
        }
        d.appendChild(c),
        e = b || document.documentElement,
        e.insertBefore(d, e.firstChild),
        c.style.cssText = "position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",
        h = a(c).offset(function(a, b) {
            return b;
        }).offset(),
        d.innerHTML = "",
        e.removeChild(d),
        i = h.top + h.left + (b ? 2000 : 0),
        f.fractions = i > 21 && i < 22;
    }();
})(jQuery);
(function(a, b) {
    a.widget("ui.draggable", a.ui.mouse, {
        widgetEventPrefix: "drag",
        options: {
            addClasses: !0,
            appendTo: "parent",
            axis: !1,
            connectToSortable: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            iframeFix: !1,
            opacity: !1,
            refreshPositions: !1,
            revert: !1,
            revertDuration: 500,
            scope: "default",
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            snap: !1,
            snapMode: "both",
            snapTolerance: 20,
            stack: !1,
            zIndex: !1
        },
        _create: function() {
            this.options.helper == "original" && !/^(?:r|a|f)/.test(this.element.css("position")) && (this.element[0].style.position = "relative"),
            this.options.addClasses && this.element.addClass("ui-draggable"),
            this.options.disabled && this.element.addClass("ui-draggable-disabled"),
            this._mouseInit();
        },
        destroy: function() {
            if (!!this.element.data("draggable")) {
                this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),
                this._mouseDestroy();
                return this;
            }
        },
        _mouseCapture: function(b) {
            var c = this.options;
            if (this.helper || c.disabled || a(b.target).is(".ui-resizable-handle")) {
                return !1;
            }
            this.handle = this._getHandle(b);
            if (!this.handle) {
                return !1;
            }
            c.iframeFix && a(c.iframeFix === !0 ? "iframe" : c.iframeFix).each(function() {
                a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({
                    width: this.offsetWidth + "px",
                    height: this.offsetHeight + "px",
                    position: "absolute",
                    opacity: "0.001",
                    zIndex: 1000
                }).css(a(this).offset()).appendTo("body");
            });
            return !0;
        },
        _mouseStart: function(b) {
            var c = this.options;
            this.helper = this._createHelper(b),
            this._cacheHelperProportions(),
            a.ui.ddmanager && (a.ui.ddmanager.current = this),
            this._cacheMargins(),
            this.cssPosition = this.helper.css("position"),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.positionAbs = this.element.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            a.extend(this.offset, {
                click: {
                    left: b.pageX - this.offset.left,
                    top: b.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.originalPosition = this.position = this._generatePosition(b),
            this.originalPageX = b.pageX,
            this.originalPageY = b.pageY,
            c.cursorAt && this._adjustOffsetFromHelper(c.cursorAt),
            c.containment && this._setContainment();
            if (this._trigger("start", b) === !1) {
                this._clear();
                return !1;
            }
            this._cacheHelperProportions(),
            a.ui.ddmanager && !c.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b),
            this.helper.addClass("ui-draggable-dragging"),
            this._mouseDrag(b, !0),
            a.ui.ddmanager && a.ui.ddmanager.dragStart(this, b);
            return !0;
        },
        _mouseDrag: function(b, c) {
            this.position = this._generatePosition(b),
            this.positionAbs = this._convertPositionTo("absolute");
            if (!c) {
                var d = this._uiHash();
                if (this._trigger("drag", b, d) === !1) {
                    this._mouseUp({});
                    return !1;
                }
                this.position = d.position;
            }
            if (!this.options.axis || this.options.axis != "y") {
                this.helper[0].style.left = this.position.left + "px";
            }
            if (!this.options.axis || this.options.axis != "x") {
                this.helper[0].style.top = this.position.top + "px";
            }
            a.ui.ddmanager && a.ui.ddmanager.drag(this, b);
            return !1;
        },
        _mouseStop: function(b) {
            var c = !1;
            a.ui.ddmanager && !this.options.dropBehaviour && (c = a.ui.ddmanager.drop(this, b)),
            this.dropped && (c = this.dropped,
            this.dropped = !1);
            if ((!this.element[0] || !this.element[0].parentNode) && this.options.helper == "original") {
                return !1;
            }
            if (this.options.revert == "invalid" && !c || this.options.revert == "valid" && c || this.options.revert === !0 || a.isFunction(this.options.revert) && this.options.revert.call(this.element, c)) {
                var d = this;
                a(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function() {
                    d._trigger("stop", b) !== !1 && d._clear();
                });
            } else {
                this._trigger("stop", b) !== !1 && this._clear();
            }
            return !1;
        },
        _mouseUp: function(b) {
            this.options.iframeFix === !0 && a("div.ui-draggable-iframeFix").each(function() {
                this.parentNode.removeChild(this);
            }),
            a.ui.ddmanager && a.ui.ddmanager.dragStop(this, b);
            return a.ui.mouse.prototype._mouseUp.call(this, b);
        },
        cancel: function() {
            this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear();
            return this;
        },
        _getHandle: function(b) {
            var c = !this.options.handle || !a(this.options.handle, this.element).length ? !0 : !1;
            a(this.options.handle, this.element).find("*").andSelf().each(function() {
                this == b.target && (c = !0);
            });
            return c;
        },
        _createHelper: function(b) {
            var c = this.options
              , d = a.isFunction(c.helper) ? a(c.helper.apply(this.element[0], [b])) : c.helper == "clone" ? this.element.clone().removeAttr("id") : this.element;
            d.parents("body").length || d.appendTo(c.appendTo == "parent" ? this.element[0].parentNode : c.appendTo),
            d[0] != this.element[0] && !/(fixed|absolute)/.test(d.css("position")) && d.css("position", "absolute");
            return d;
        },
        _adjustOffsetFromHelper: function(b) {
            typeof b == "string" && (b = b.split(" ")),
            a.isArray(b) && (b = {
                left: +b[0],
                top: +b[1] || 0
            }),
            "left" in b && (this.offset.click.left = b.left + this.margins.left),
            "right" in b && (this.offset.click.left = this.helperProportions.width - b.right + this.margins.left),
            "top" in b && (this.offset.click.top = b.top + this.margins.top),
            "bottom" in b && (this.offset.click.top = this.helperProportions.height - b.bottom + this.margins.top);
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var b = this.offsetParent.offset();
            this.cssPosition == "absolute" && this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0], this.offsetParent[0]) && (b.left += this.scrollParent.scrollLeft(),
            b.top += this.scrollParent.scrollTop());
            if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && a.browser.msie) {
                b = {
                    top: 0,
                    left: 0
                };
            }
            return {
                top: b.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: b.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset: function() {
            if (this.cssPosition == "relative") {
                var a = this.element.position();
                return {
                    top: a.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: a.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                top: 0,
                left: 0
            };
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.element.css("marginLeft"), 10) || 0,
                top: parseInt(this.element.css("marginTop"), 10) || 0,
                right: parseInt(this.element.css("marginRight"), 10) || 0,
                bottom: parseInt(this.element.css("marginBottom"), 10) || 0
            };
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            };
        },
        _setContainment: function() {
            var b = this.options;
            b.containment == "parent" && (b.containment = this.helper[0].parentNode);
            if (b.containment == "document" || b.containment == "window") {
                this.containment = [b.containment == "document" ? 0 : a(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, b.containment == "document" ? 0 : a(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, (b.containment == "document" ? 0 : a(window).scrollLeft()) + a(b.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (b.containment == "document" ? 0 : a(window).scrollTop()) + (a(b.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
            }
            if (!/^(document|window|parent)$/.test(b.containment) && b.containment.constructor != Array) {
                var c = a(b.containment)
                  , d = c[0];
                if (!d) {
                    return;
                }
                var e = c.offset()
                  , f = a(d).css("overflow") != "hidden";
                this.containment = [(parseInt(a(d).css("borderLeftWidth"), 10) || 0) + (parseInt(a(d).css("paddingLeft"), 10) || 0), (parseInt(a(d).css("borderTopWidth"), 10) || 0) + (parseInt(a(d).css("paddingTop"), 10) || 0), (f ? Math.max(d.scrollWidth, d.offsetWidth) : d.offsetWidth) - (parseInt(a(d).css("borderLeftWidth"), 10) || 0) - (parseInt(a(d).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (f ? Math.max(d.scrollHeight, d.offsetHeight) : d.offsetHeight) - (parseInt(a(d).css("borderTopWidth"), 10) || 0) - (parseInt(a(d).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom],
                this.relative_container = c;
            } else {
                b.containment.constructor == Array && (this.containment = b.containment);
            }
        },
        _convertPositionTo: function(b, c) {
            c || (c = this.position);
            var d = b == "absolute" ? 1 : -1
              , e = this.options
              , f = this.cssPosition == "absolute" && (this.scrollParent[0] == document || !a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent
              , g = /(html|body)/i.test(f[0].tagName);
            return {
                top: c.top + this.offset.relative.top * d + this.offset.parent.top * d - (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : g ? 0 : f.scrollTop()) * d),
                left: c.left + this.offset.relative.left * d + this.offset.parent.left * d - (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : g ? 0 : f.scrollLeft()) * d)
            };
        },
        _generatePosition: function(b) {
            var c = this.options
              , d = this.cssPosition == "absolute" && (this.scrollParent[0] == document || !a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent
              , e = /(html|body)/i.test(d[0].tagName)
              , f = b.pageX
              , g = b.pageY;
            if (this.originalPosition) {
                var h;
                if (this.containment) {
                    if (this.relative_container) {
                        var i = this.relative_container.offset();
                        h = [this.containment[0] + i.left, this.containment[1] + i.top, this.containment[2] + i.left, this.containment[3] + i.top];
                    } else {
                        h = this.containment;
                    }
                    b.pageX - this.offset.click.left < h[0] && (f = h[0] + this.offset.click.left),
                    b.pageY - this.offset.click.top < h[1] && (g = h[1] + this.offset.click.top),
                    b.pageX - this.offset.click.left > h[2] && (f = h[2] + this.offset.click.left),
                    b.pageY - this.offset.click.top > h[3] && (g = h[3] + this.offset.click.top);
                }
                if (c.grid) {
                    var j = c.grid[1] ? this.originalPageY + Math.round((g - this.originalPageY) / c.grid[1]) * c.grid[1] : this.originalPageY;
                    g = h ? j - this.offset.click.top < h[1] || j - this.offset.click.top > h[3] ? j - this.offset.click.top < h[1] ? j + c.grid[1] : j - c.grid[1] : j : j;
                    var k = c.grid[0] ? this.originalPageX + Math.round((f - this.originalPageX) / c.grid[0]) * c.grid[0] : this.originalPageX;
                    f = h ? k - this.offset.click.left < h[0] || k - this.offset.click.left > h[2] ? k - this.offset.click.left < h[0] ? k + c.grid[0] : k - c.grid[0] : k : k;
                }
            }
            return {
                top: g - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : e ? 0 : d.scrollTop()),
                left: f - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (a.browser.safari && a.browser.version < 526 && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : e ? 0 : d.scrollLeft())
            };
        },
        _clear: function() {
            this.helper.removeClass("ui-draggable-dragging"),
            this.helper[0] != this.element[0] && !this.cancelHelperRemoval && this.helper.remove(),
            this.helper = null ,
            this.cancelHelperRemoval = !1;
        },
        _trigger: function(b, c, d) {
            d = d || this._uiHash(),
            a.ui.plugin.call(this, b, [c, d]),
            b == "drag" && (this.positionAbs = this._convertPositionTo("absolute"));
            return a.Widget.prototype._trigger.call(this, b, c, d);
        },
        plugins: {},
        _uiHash: function(a) {
            return {
                helper: this.helper,
                position: this.position,
                originalPosition: this.originalPosition,
                offset: this.positionAbs
            };
        }
    }),
    a.extend(a.ui.draggable, {
        version: "1.8.18"
    }),
    a.ui.plugin.add("draggable", "connectToSortable", {
        start: function(b, c) {
            var d = a(this).data("draggable")
              , e = d.options
              , f = a.extend({}, c, {
                item: d.element
            });
            d.sortables = [],
            a(e.connectToSortable).each(function() {
                var c = a.data(this, "sortable");
                c && !c.options.disabled && (d.sortables.push({
                    instance: c,
                    shouldRevert: c.options.revert
                }),
                c.refreshPositions(),
                c._trigger("activate", b, f));
            });
        },
        stop: function(b, c) {
            var d = a(this).data("draggable")
              , e = a.extend({}, c, {
                item: d.element
            });
            a.each(d.sortables, function() {
                this.instance.isOver ? (this.instance.isOver = 0,
                d.cancelHelperRemoval = !0,
                this.instance.cancelHelperRemoval = !1,
                this.shouldRevert && (this.instance.options.revert = !0),
                this.instance._mouseStop(b),
                this.instance.options.helper = this.instance.options._helper,
                d.options.helper == "original" && this.instance.currentItem.css({
                    top: "auto",
                    left: "auto"
                })) : (this.instance.cancelHelperRemoval = !1,
                this.instance._trigger("deactivate", b, e));
            });
        },
        drag: function(b, c) {
            var d = a(this).data("draggable")
              , e = this
              , f = function(b) {
                var c = this.offset.click.top
                  , d = this.offset.click.left
                  , e = this.positionAbs.top
                  , f = this.positionAbs.left
                  , g = b.height
                  , h = b.width
                  , i = b.top
                  , j = b.left;
                return a.ui.isOver(e + c, f + d, i, j, g, h);
            }
            ;
            a.each(d.sortables, function(f) {
                this.instance.positionAbs = d.positionAbs,
                this.instance.helperProportions = d.helperProportions,
                this.instance.offset.click = d.offset.click,
                this.instance._intersectsWith(this.instance.containerCache) ? (this.instance.isOver || (this.instance.isOver = 1,
                this.instance.currentItem = a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item", !0),
                this.instance.options._helper = this.instance.options.helper,
                this.instance.options.helper = function() {
                    return c.helper[0];
                }
                ,
                b.target = this.instance.currentItem[0],
                this.instance._mouseCapture(b, !0),
                this.instance._mouseStart(b, !0, !0),
                this.instance.offset.click.top = d.offset.click.top,
                this.instance.offset.click.left = d.offset.click.left,
                this.instance.offset.parent.left -= d.offset.parent.left - this.instance.offset.parent.left,
                this.instance.offset.parent.top -= d.offset.parent.top - this.instance.offset.parent.top,
                d._trigger("toSortable", b),
                d.dropped = this.instance.element,
                d.currentItem = d.element,
                this.instance.fromOutside = d),
                this.instance.currentItem && this.instance._mouseDrag(b)) : this.instance.isOver && (this.instance.isOver = 0,
                this.instance.cancelHelperRemoval = !0,
                this.instance.options.revert = !1,
                this.instance._trigger("out", b, this.instance._uiHash(this.instance)),
                this.instance._mouseStop(b, !0),
                this.instance.options.helper = this.instance.options._helper,
                this.instance.currentItem.remove(),
                this.instance.placeholder && this.instance.placeholder.remove(),
                d._trigger("fromSortable", b),
                d.dropped = !1);
            });
        }
    }),
    a.ui.plugin.add("draggable", "cursor", {
        start: function(b, c) {
            var d = a("body")
              , e = a(this).data("draggable").options;
            d.css("cursor") && (e._cursor = d.css("cursor")),
            d.css("cursor", e.cursor);
        },
        stop: function(b, c) {
            var d = a(this).data("draggable").options;
            d._cursor && a("body").css("cursor", d._cursor);
        }
    }),
    a.ui.plugin.add("draggable", "opacity", {
        start: function(b, c) {
            var d = a(c.helper)
              , e = a(this).data("draggable").options;
            d.css("opacity") && (e._opacity = d.css("opacity")),
            d.css("opacity", e.opacity);
        },
        stop: function(b, c) {
            var d = a(this).data("draggable").options;
            d._opacity && a(c.helper).css("opacity", d._opacity);
        }
    }),
    a.ui.plugin.add("draggable", "scroll", {
        start: function(b, c) {
            var d = a(this).data("draggable");
            d.scrollParent[0] != document && d.scrollParent[0].tagName != "HTML" && (d.overflowOffset = d.scrollParent.offset());
        },
        drag: function(b, c) {
            var d = a(this).data("draggable")
              , e = d.options
              , f = !1;
            if (d.scrollParent[0] != document && d.scrollParent[0].tagName != "HTML") {
                if (!e.axis || e.axis != "x") {
                    d.overflowOffset.top + d.scrollParent[0].offsetHeight - b.pageY < e.scrollSensitivity ? d.scrollParent[0].scrollTop = f = d.scrollParent[0].scrollTop + e.scrollSpeed : b.pageY - d.overflowOffset.top < e.scrollSensitivity && (d.scrollParent[0].scrollTop = f = d.scrollParent[0].scrollTop - e.scrollSpeed);
                }
                if (!e.axis || e.axis != "y") {
                    d.overflowOffset.left + d.scrollParent[0].offsetWidth - b.pageX < e.scrollSensitivity ? d.scrollParent[0].scrollLeft = f = d.scrollParent[0].scrollLeft + e.scrollSpeed : b.pageX - d.overflowOffset.left < e.scrollSensitivity && (d.scrollParent[0].scrollLeft = f = d.scrollParent[0].scrollLeft - e.scrollSpeed);
                }
            } else {
                if (!e.axis || e.axis != "x") {
                    b.pageY - a(document).scrollTop() < e.scrollSensitivity ? f = a(document).scrollTop(a(document).scrollTop() - e.scrollSpeed) : a(window).height() - (b.pageY - a(document).scrollTop()) < e.scrollSensitivity && (f = a(document).scrollTop(a(document).scrollTop() + e.scrollSpeed));
                }
                if (!e.axis || e.axis != "y") {
                    b.pageX - a(document).scrollLeft() < e.scrollSensitivity ? f = a(document).scrollLeft(a(document).scrollLeft() - e.scrollSpeed) : a(window).width() - (b.pageX - a(document).scrollLeft()) < e.scrollSensitivity && (f = a(document).scrollLeft(a(document).scrollLeft() + e.scrollSpeed));
                }
            }
            f !== !1 && a.ui.ddmanager && !e.dropBehaviour && a.ui.ddmanager.prepareOffsets(d, b);
        }
    }),
    a.ui.plugin.add("draggable", "snap", {
        start: function(b, c) {
            var d = a(this).data("draggable")
              , e = d.options;
            d.snapElements = [],
            a(e.snap.constructor != String ? e.snap.items || ":data(draggable)" : e.snap).each(function() {
                var b = a(this)
                  , c = b.offset();
                this != d.element[0] && d.snapElements.push({
                    item: this,
                    width: b.outerWidth(),
                    height: b.outerHeight(),
                    top: c.top,
                    left: c.left
                });
            });
        },
        drag: function(b, c) {
            var d = a(this).data("draggable")
              , e = d.options
              , f = e.snapTolerance
              , g = c.offset.left
              , h = g + d.helperProportions.width
              , i = c.offset.top
              , j = i + d.helperProportions.height;
            for (var k = d.snapElements.length - 1; k >= 0; k--) {
                var l = d.snapElements[k].left
                  , m = l + d.snapElements[k].width
                  , n = d.snapElements[k].top
                  , o = n + d.snapElements[k].height;
                if (!(l - f < g && g < m + f && n - f < i && i < o + f || l - f < g && g < m + f && n - f < j && j < o + f || l - f < h && h < m + f && n - f < i && i < o + f || l - f < h && h < m + f && n - f < j && j < o + f)) {
                    d.snapElements[k].snapping && d.options.snap.release && d.options.snap.release.call(d.element, b, a.extend(d._uiHash(), {
                        snapItem: d.snapElements[k].item
                    })),
                    d.snapElements[k].snapping = !1;
                    continue;
                }
                if (e.snapMode != "inner") {
                    var p = Math.abs(n - j) <= f
                      , q = Math.abs(o - i) <= f
                      , r = Math.abs(l - h) <= f
                      , s = Math.abs(m - g) <= f;
                    p && (c.position.top = d._convertPositionTo("relative", {
                        top: n - d.helperProportions.height,
                        left: 0
                    }).top - d.margins.top),
                    q && (c.position.top = d._convertPositionTo("relative", {
                        top: o,
                        left: 0
                    }).top - d.margins.top),
                    r && (c.position.left = d._convertPositionTo("relative", {
                        top: 0,
                        left: l - d.helperProportions.width
                    }).left - d.margins.left),
                    s && (c.position.left = d._convertPositionTo("relative", {
                        top: 0,
                        left: m
                    }).left - d.margins.left);
                }
                var t = p || q || r || s;
                if (e.snapMode != "outer") {
                    var p = Math.abs(n - i) <= f
                      , q = Math.abs(o - j) <= f
                      , r = Math.abs(l - g) <= f
                      , s = Math.abs(m - h) <= f;
                    p && (c.position.top = d._convertPositionTo("relative", {
                        top: n,
                        left: 0
                    }).top - d.margins.top),
                    q && (c.position.top = d._convertPositionTo("relative", {
                        top: o - d.helperProportions.height,
                        left: 0
                    }).top - d.margins.top),
                    r && (c.position.left = d._convertPositionTo("relative", {
                        top: 0,
                        left: l
                    }).left - d.margins.left),
                    s && (c.position.left = d._convertPositionTo("relative", {
                        top: 0,
                        left: m - d.helperProportions.width
                    }).left - d.margins.left);
                }
                !d.snapElements[k].snapping && (p || q || r || s || t) && d.options.snap.snap && d.options.snap.snap.call(d.element, b, a.extend(d._uiHash(), {
                    snapItem: d.snapElements[k].item
                })),
                d.snapElements[k].snapping = p || q || r || s || t;
            }
        }
    }),
    a.ui.plugin.add("draggable", "stack", {
        start: function(b, c) {
            var d = a(this).data("draggable").options
              , e = a.makeArray(a(d.stack)).sort(function(b, c) {
                return (parseInt(a(b).css("zIndex"), 10) || 0) - (parseInt(a(c).css("zIndex"), 10) || 0);
            });
            if (!!e.length) {
                var f = parseInt(e[0].style.zIndex) || 0;
                a(e).each(function(a) {
                    this.style.zIndex = f + a;
                }),
                this[0].style.zIndex = f + e.length;
            }
        }
    }),
    a.ui.plugin.add("draggable", "zIndex", {
        start: function(b, c) {
            var d = a(c.helper)
              , e = a(this).data("draggable").options;
            d.css("zIndex") && (e._zIndex = d.css("zIndex")),
            d.css("zIndex", e.zIndex);
        },
        stop: function(b, c) {
            var d = a(this).data("draggable").options;
            d._zIndex && a(c.helper).css("zIndex", d._zIndex);
        }
    });
})(jQuery);
(function(a, b) {
    a.widget("ui.droppable", {
        widgetEventPrefix: "drop",
        options: {
            accept: "*",
            activeClass: !1,
            addClasses: !0,
            greedy: !1,
            hoverClass: !1,
            scope: "default",
            tolerance: "intersect"
        },
        _create: function() {
            var b = this.options
              , c = b.accept;
            this.isover = 0,
            this.isout = 1,
            this.accept = a.isFunction(c) ? c : function(a) {
                return a.is(c);
            }
            ,
            this.proportions = {
                width: this.element[0].offsetWidth,
                height: this.element[0].offsetHeight
            },
            a.ui.ddmanager.droppables[b.scope] = a.ui.ddmanager.droppables[b.scope] || [],
            a.ui.ddmanager.droppables[b.scope].push(this),
            b.addClasses && this.element.addClass("ui-droppable");
        },
        destroy: function() {
            var b = a.ui.ddmanager.droppables[this.options.scope];
            for (var c = 0; c < b.length; c++) {
                b[c] == this && b.splice(c, 1);
            }
            this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");
            return this;
        },
        _setOption: function(b, c) {
            b == "accept" && (this.accept = a.isFunction(c) ? c : function(a) {
                return a.is(c);
            }
            ),
            a.Widget.prototype._setOption.apply(this, arguments);
        },
        _activate: function(b) {
            var c = a.ui.ddmanager.current;
            this.options.activeClass && this.element.addClass(this.options.activeClass),
            c && this._trigger("activate", b, this.ui(c));
        },
        _deactivate: function(b) {
            var c = a.ui.ddmanager.current;
            this.options.activeClass && this.element.removeClass(this.options.activeClass),
            c && this._trigger("deactivate", b, this.ui(c));
        },
        _over: function(b) {
            var c = a.ui.ddmanager.current;
            !!c && (c.currentItem || c.element)[0] != this.element[0] && this.accept.call(this.element[0], c.currentItem || c.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass),
            this._trigger("over", b, this.ui(c)));
        },
        _out: function(b) {
            var c = a.ui.ddmanager.current;
            !!c && (c.currentItem || c.element)[0] != this.element[0] && this.accept.call(this.element[0], c.currentItem || c.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
            this._trigger("out", b, this.ui(c)));
        },
        _drop: function(b, c) {
            var d = c || a.ui.ddmanager.current;
            if (!d || (d.currentItem || d.element)[0] == this.element[0]) {
                return !1;
            }
            var e = !1;
            this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function() {
                var b = a.data(this, "droppable");
                if (b.options.greedy && !b.options.disabled && b.options.scope == d.options.scope && b.accept.call(b.element[0], d.currentItem || d.element) && a.ui.intersect(d, a.extend(b, {
                    offset: b.element.offset()
                }), b.options.tolerance)) {
                    e = !0;
                    return !1;
                }
            });
            if (e) {
                return !1;
            }
            if (this.accept.call(this.element[0], d.currentItem || d.element)) {
                this.options.activeClass && this.element.removeClass(this.options.activeClass),
                this.options.hoverClass && this.element.removeClass(this.options.hoverClass),
                this._trigger("drop", b, this.ui(d));
                return this.element;
            }
            return !1;
        },
        ui: function(a) {
            return {
                draggable: a.currentItem || a.element,
                helper: a.helper,
                position: a.position,
                offset: a.positionAbs
            };
        }
    }),
    a.extend(a.ui.droppable, {
        version: "1.8.18"
    }),
    a.ui.intersect = function(b, c, d) {
        if (!c.offset) {
            return !1;
        }
        var e = (b.positionAbs || b.position.absolute).left
          , f = e + b.helperProportions.width
          , g = (b.positionAbs || b.position.absolute).top
          , h = g + b.helperProportions.height
          , i = c.offset.left
          , j = i + c.proportions.width
          , k = c.offset.top
          , l = k + c.proportions.height;
        switch (d) {
        case "fit":
            return i <= e && f <= j && k <= g && h <= l;
        case "intersect":
            return i < e + b.helperProportions.width / 2 && f - b.helperProportions.width / 2 < j && k < g + b.helperProportions.height / 2 && h - b.helperProportions.height / 2 < l;
        case "pointer":
            var m = (b.positionAbs || b.position.absolute).left + (b.clickOffset || b.offset.click).left
              , n = (b.positionAbs || b.position.absolute).top + (b.clickOffset || b.offset.click).top
              , o = a.ui.isOver(n, m, k, i, c.proportions.height, c.proportions.width);
            return o;
        case "touch":
            return (g >= k && g <= l || h >= k && h <= l || g < k && h > l) && (e >= i && e <= j || f >= i && f <= j || e < i && f > j);
        default:
            return !1;
        }
    }
    ,
    a.ui.ddmanager = {
        current: null ,
        droppables: {
            "default": []
        },
        prepareOffsets: function(b, c) {
            var d = a.ui.ddmanager.droppables[b.options.scope] || []
              , e = c ? c.type : null 
              , f = (b.currentItem || b.element).find(":data(droppable)").andSelf();
            droppablesLoop: for (var g = 0; g < d.length; g++) {
                if (d[g].options.disabled || b && !d[g].accept.call(d[g].element[0], b.currentItem || b.element)) {
                    continue;
                }
                for (var h = 0; h < f.length; h++) {
                    if (f[h] == d[g].element[0]) {
                        d[g].proportions.height = 0;
                        continue droppablesLoop;
                    }
                }
                d[g].visible = d[g].element.css("display") != "none";
                if (!d[g].visible) {
                    continue;
                }
                e == "mousedown" && d[g]._activate.call(d[g], c),
                d[g].offset = d[g].element.offset(),
                d[g].proportions = {
                    width: d[g].element[0].offsetWidth,
                    height: d[g].element[0].offsetHeight
                };
            }
        },
        drop: function(b, c) {
            var d = !1;
            a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function() {
                !this.options || (!this.options.disabled && this.visible && a.ui.intersect(b, this, this.options.tolerance) && (d = this._drop.call(this, c) || d),
                !this.options.disabled && this.visible && this.accept.call(this.element[0], b.currentItem || b.element) && (this.isout = 1,
                this.isover = 0,
                this._deactivate.call(this, c)));
            });
            return d;
        },
        dragStart: function(b, c) {
            b.element.parents(":not(body,html)").bind("scroll.droppable", function() {
                b.options.refreshPositions || a.ui.ddmanager.prepareOffsets(b, c);
            });
        },
        drag: function(b, c) {
            b.options.refreshPositions && a.ui.ddmanager.prepareOffsets(b, c),
            a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function() {
                if (!(this.options.disabled || this.greedyChild || !this.visible)) {
                    var d = a.ui.intersect(b, this, this.options.tolerance)
                      , e = !d && this.isover == 1 ? "isout" : d && this.isover == 0 ? "isover" : null ;
                    if (!e) {
                        return;
                    }
                    var f;
                    if (this.options.greedy) {
                        var g = this.element.parents(":data(droppable):eq(0)");
                        g.length && (f = a.data(g[0], "droppable"),
                        f.greedyChild = e == "isover" ? 1 : 0);
                    }
                    f && e == "isover" && (f.isover = 0,
                    f.isout = 1,
                    f._out.call(f, c)),
                    this[e] = 1,
                    this[e == "isout" ? "isover" : "isout"] = 0,
                    this[e == "isover" ? "_over" : "_out"].call(this, c),
                    f && e == "isout" && (f.isout = 0,
                    f.isover = 1,
                    f._over.call(f, c));
                }
            });
        },
        dragStop: function(b, c) {
            b.element.parents(":not(body,html)").unbind("scroll.droppable"),
            b.options.refreshPositions || a.ui.ddmanager.prepareOffsets(b, c);
        }
    };
})(jQuery);
(function(a, b) {
    a.widget("ui.resizable", a.ui.mouse, {
        widgetEventPrefix: "resize",
        options: {
            alsoResize: !1,
            animate: !1,
            animateDuration: "slow",
            animateEasing: "swing",
            aspectRatio: !1,
            autoHide: !1,
            containment: !1,
            ghost: !1,
            grid: !1,
            handles: "e,s,se",
            helper: !1,
            maxHeight: null ,
            maxWidth: null ,
            minHeight: 10,
            minWidth: 10,
            zIndex: 1000
        },
        _create: function() {
            var b = this
              , c = this.options;
            this.element.addClass("ui-resizable"),
            a.extend(this, {
                _aspectRatio: !!c.aspectRatio,
                aspectRatio: c.aspectRatio,
                originalElement: this.element,
                _proportionallyResizeElements: [],
                _helper: c.helper || c.ghost || c.animate ? c.helper || "ui-resizable-helper" : null 
            }),
            this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({
                position: this.element.css("position"),
                width: this.element.outerWidth(),
                height: this.element.outerHeight(),
                top: this.element.css("top"),
                left: this.element.css("left")
            })),
            this.element = this.element.parent().data("resizable", this.element.data("resizable")),
            this.elementIsWrapper = !0,
            this.element.css({
                marginLeft: this.originalElement.css("marginLeft"),
                marginTop: this.originalElement.css("marginTop"),
                marginRight: this.originalElement.css("marginRight"),
                marginBottom: this.originalElement.css("marginBottom")
            }),
            this.originalElement.css({
                marginLeft: 0,
                marginTop: 0,
                marginRight: 0,
                marginBottom: 0
            }),
            this.originalResizeStyle = this.originalElement.css("resize"),
            this.originalElement.css("resize", "none"),
            this._proportionallyResizeElements.push(this.originalElement.css({
                position: "static",
                zoom: 1,
                display: "block"
            })),
            this.originalElement.css({
                margin: this.originalElement.css("margin")
            }),
            this._proportionallyResize()),
            this.handles = c.handles || (a(".ui-resizable-handle", this.element).length ? {
                n: ".ui-resizable-n",
                e: ".ui-resizable-e",
                s: ".ui-resizable-s",
                w: ".ui-resizable-w",
                se: ".ui-resizable-se",
                sw: ".ui-resizable-sw",
                ne: ".ui-resizable-ne",
                nw: ".ui-resizable-nw"
            } : "e,s,se");
            if (this.handles.constructor == String) {
                this.handles == "all" && (this.handles = "n,e,s,w,se,sw,ne,nw");
                var d = this.handles.split(",");
                this.handles = {};
                for (var e = 0; e < d.length; e++) {
                    var f = a.trim(d[e])
                      , g = "ui-resizable-" + f
                      , h = a('<div class="ui-resizable-handle ' + g + '"></div>');
                    /sw|se|ne|nw/.test(f) && h.css({
                        zIndex: ++c.zIndex
                    }),
                    "se" == f && h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),
                    this.handles[f] = ".ui-resizable-" + f,
                    this.element.append(h);
                }
            }
            this._renderAxis = function(b) {
                b = b || this.element;
                for (var c in this.handles) {
                    this.handles[c].constructor == String && (this.handles[c] = a(this.handles[c], this.element).show());
                    if (this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i)) {
                        var d = a(this.handles[c], this.element)
                          , e = 0;
                        e = /sw|ne|nw|se|n|s/.test(c) ? d.outerHeight() : d.outerWidth();
                        var f = ["padding", /ne|nw|n/.test(c) ? "Top" : /se|sw|s/.test(c) ? "Bottom" : /^e$/.test(c) ? "Right" : "Left"].join("");
                        b.css(f, e),
                        this._proportionallyResize();
                    }
                    if (!a(this.handles[c]).length) {
                        continue;
                    }
                }
            }
            ,
            this._renderAxis(this.element),
            this._handles = a(".ui-resizable-handle", this.element).disableSelection(),
            this._handles.mouseover(function() {
                if (!b.resizing) {
                    if (this.className) {
                        var a = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);
                    }
                    b.axis = a && a[1] ? a[1] : "se";
                }
            }),
            c.autoHide && (this._handles.hide(),
            a(this.element).addClass("ui-resizable-autohide").hover(function() {
                c.disabled || (a(this).removeClass("ui-resizable-autohide"),
                b._handles.show());
            }, function() {
                c.disabled || b.resizing || (a(this).addClass("ui-resizable-autohide"),
                b._handles.hide());
            })),
            this._mouseInit();
        },
        destroy: function() {
            this._mouseDestroy();
            var b = function(b) {
                a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove();
            }
            ;
            if (this.elementIsWrapper) {
                b(this.element);
                var c = this.element;
                c.after(this.originalElement.css({
                    position: c.css("position"),
                    width: c.outerWidth(),
                    height: c.outerHeight(),
                    top: c.css("top"),
                    left: c.css("left")
                })).remove();
            }
            this.originalElement.css("resize", this.originalResizeStyle),
            b(this.originalElement);
            return this;
        },
        _mouseCapture: function(b) {
            var c = !1;
            for (var d in this.handles) {
                a(this.handles[d])[0] == b.target && (c = !0);
            }
            return !this.options.disabled && c;
        },
        _mouseStart: function(b) {
            var d = this.options
              , e = this.element.position()
              , f = this.element;
            this.resizing = !0,
            this.documentScroll = {
                top: a(document).scrollTop(),
                left: a(document).scrollLeft()
            },
            (f.is(".ui-draggable") || /absolute/.test(f.css("position"))) && f.css({
                position: "absolute",
                top: e.top,
                left: e.left
            }),
            this._renderProxy();
            var g = c(this.helper.css("left"))
              , h = c(this.helper.css("top"));
            d.containment && (g += a(d.containment).scrollLeft() || 0,
            h += a(d.containment).scrollTop() || 0),
            this.offset = this.helper.offset(),
            this.position = {
                left: g,
                top: h
            },
            this.size = this._helper ? {
                width: f.outerWidth(),
                height: f.outerHeight()
            } : {
                width: f.width(),
                height: f.height()
            },
            this.originalSize = this._helper ? {
                width: f.outerWidth(),
                height: f.outerHeight()
            } : {
                width: f.width(),
                height: f.height()
            },
            this.originalPosition = {
                left: g,
                top: h
            },
            this.sizeDiff = {
                width: f.outerWidth() - f.width(),
                height: f.outerHeight() - f.height()
            },
            this.originalMousePosition = {
                left: b.pageX,
                top: b.pageY
            },
            this.aspectRatio = typeof d.aspectRatio == "number" ? d.aspectRatio : this.originalSize.width / this.originalSize.height || 1;
            var i = a(".ui-resizable-" + this.axis).css("cursor");
            a("body").css("cursor", i == "auto" ? this.axis + "-resize" : i),
            f.addClass("ui-resizable-resizing"),
            this._propagate("start", b);
            return !0;
        },
        _mouseDrag: function(b) {
            var c = this.helper
              , d = this.options
              , e = {}
              , f = this
              , g = this.originalMousePosition
              , h = this.axis
              , i = b.pageX - g.left || 0
              , j = b.pageY - g.top || 0
              , k = this._change[h];
            if (!k) {
                return !1;
            }
            var l = k.apply(this, [b, i, j])
              , m = a.browser.msie && a.browser.version < 7
              , n = this.sizeDiff;
            this._updateVirtualBoundaries(b.shiftKey);
            if (this._aspectRatio || b.shiftKey) {
                l = this._updateRatio(l, b);
            }
            l = this._respectSize(l, b),
            this._propagate("resize", b),
            c.css({
                top: this.position.top + "px",
                left: this.position.left + "px",
                width: this.size.width + "px",
                height: this.size.height + "px"
            }),
            !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(),
            this._updateCache(l),
            this._trigger("resize", b, this.ui());
            return !1;
        },
        _mouseStop: function(b) {
            this.resizing = !1;
            var c = this.options
              , d = this;
            if (this._helper) {
                var e = this._proportionallyResizeElements
                  , f = e.length && /textarea/i.test(e[0].nodeName)
                  , g = f && a.ui.hasScroll(e[0], "left") ? 0 : d.sizeDiff.height
                  , h = f ? 0 : d.sizeDiff.width
                  , i = {
                    width: d.helper.width() - h,
                    height: d.helper.height() - g
                }
                  , j = parseInt(d.element.css("left"), 10) + (d.position.left - d.originalPosition.left) || null 
                  , k = parseInt(d.element.css("top"), 10) + (d.position.top - d.originalPosition.top) || null ;
                c.animate || this.element.css(a.extend(i, {
                    top: k,
                    left: j
                })),
                d.helper.height(d.size.height),
                d.helper.width(d.size.width),
                this._helper && !c.animate && this._proportionallyResize();
            }
            a("body").css("cursor", "auto"),
            this.element.removeClass("ui-resizable-resizing"),
            this._propagate("stop", b),
            this._helper && this.helper.remove();
            return !1;
        },
        _updateVirtualBoundaries: function(a) {
            var b = this.options, c, e, f, g, h;
            h = {
                minWidth: d(b.minWidth) ? b.minWidth : 0,
                maxWidth: d(b.maxWidth) ? b.maxWidth : Infinity,
                minHeight: d(b.minHeight) ? b.minHeight : 0,
                maxHeight: d(b.maxHeight) ? b.maxHeight : Infinity
            };
            if (this._aspectRatio || a) {
                c = h.minHeight * this.aspectRatio,
                f = h.minWidth / this.aspectRatio,
                e = h.maxHeight * this.aspectRatio,
                g = h.maxWidth / this.aspectRatio,
                c > h.minWidth && (h.minWidth = c),
                f > h.minHeight && (h.minHeight = f),
                e < h.maxWidth && (h.maxWidth = e),
                g < h.maxHeight && (h.maxHeight = g);
            }
            this._vBoundaries = h;
        },
        _updateCache: function(a) {
            var b = this.options;
            this.offset = this.helper.offset(),
            d(a.left) && (this.position.left = a.left),
            d(a.top) && (this.position.top = a.top),
            d(a.height) && (this.size.height = a.height),
            d(a.width) && (this.size.width = a.width);
        },
        _updateRatio: function(a, b) {
            var c = this.options
              , e = this.position
              , f = this.size
              , g = this.axis;
            d(a.height) ? a.width = a.height * this.aspectRatio : d(a.width) && (a.height = a.width / this.aspectRatio),
            g == "sw" && (a.left = e.left + (f.width - a.width),
            a.top = null ),
            g == "nw" && (a.top = e.top + (f.height - a.height),
            a.left = e.left + (f.width - a.width));
            return a;
        },
        _respectSize: function(a, b) {
            var c = this.helper
              , e = this._vBoundaries
              , f = this._aspectRatio || b.shiftKey
              , g = this.axis
              , h = d(a.width) && e.maxWidth && e.maxWidth < a.width
              , i = d(a.height) && e.maxHeight && e.maxHeight < a.height
              , j = d(a.width) && e.minWidth && e.minWidth > a.width
              , k = d(a.height) && e.minHeight && e.minHeight > a.height;
            j && (a.width = e.minWidth),
            k && (a.height = e.minHeight),
            h && (a.width = e.maxWidth),
            i && (a.height = e.maxHeight);
            var l = this.originalPosition.left + this.originalSize.width
              , m = this.position.top + this.size.height
              , n = /sw|nw|w/.test(g)
              , o = /nw|ne|n/.test(g);
            j && n && (a.left = l - e.minWidth),
            h && n && (a.left = l - e.maxWidth),
            k && o && (a.top = m - e.minHeight),
            i && o && (a.top = m - e.maxHeight);
            var p = !a.width && !a.height;
            p && !a.left && a.top ? a.top = null  : p && !a.top && a.left && (a.left = null );
            return a;
        },
        _proportionallyResize: function() {
            var b = this.options;
            if (!!this._proportionallyResizeElements.length) {
                var c = this.helper || this.element;
                for (var d = 0; d < this._proportionallyResizeElements.length; d++) {
                    var e = this._proportionallyResizeElements[d];
                    if (!this.borderDif) {
                        var f = [e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth")]
                          , g = [e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft")];
                        this.borderDif = a.map(f, function(a, b) {
                            var c = parseInt(a, 10) || 0
                              , d = parseInt(g[b], 10) || 0;
                            return c + d;
                        });
                    }
                    if (a.browser.msie && (!!a(c).is(":hidden") || !!a(c).parents(":hidden").length)) {
                        continue;
                    }
                    e.css({
                        height: c.height() - this.borderDif[0] - this.borderDif[2] || 0,
                        width: c.width() - this.borderDif[1] - this.borderDif[3] || 0
                    });
                }
            }
        },
        _renderProxy: function() {
            var b = this.element
              , c = this.options;
            this.elementOffset = b.offset();
            if (this._helper) {
                this.helper = this.helper || a('<div style="overflow:hidden;"></div>');
                var d = a.browser.msie && a.browser.version < 7
                  , e = d ? 1 : 0
                  , f = d ? 2 : -1;
                this.helper.addClass(this._helper).css({
                    width: this.element.outerWidth() + f,
                    height: this.element.outerHeight() + f,
                    position: "absolute",
                    left: this.elementOffset.left - e + "px",
                    top: this.elementOffset.top - e + "px",
                    zIndex: ++c.zIndex
                }),
                this.helper.appendTo("body").disableSelection();
            } else {
                this.helper = this.element;
            }
        },
        _change: {
            e: function(a, b, c) {
                return {
                    width: this.originalSize.width + b
                };
            },
            w: function(a, b, c) {
                var d = this.options
                  , e = this.originalSize
                  , f = this.originalPosition;
                return {
                    left: f.left + b,
                    width: e.width - b
                };
            },
            n: function(a, b, c) {
                var d = this.options
                  , e = this.originalSize
                  , f = this.originalPosition;
                return {
                    top: f.top + c,
                    height: e.height - c
                };
            },
            s: function(a, b, c) {
                return {
                    height: this.originalSize.height + c
                };
            },
            se: function(b, c, d) {
                return a.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [b, c, d]));
            },
            sw: function(b, c, d) {
                return a.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [b, c, d]));
            },
            ne: function(b, c, d) {
                return a.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [b, c, d]));
            },
            nw: function(b, c, d) {
                return a.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [b, c, d]));
            }
        },
        _propagate: function(b, c) {
            a.ui.plugin.call(this, b, [c, this.ui()]),
            b != "resize" && this._trigger(b, c, this.ui());
        },
        plugins: {},
        ui: function() {
            return {
                originalElement: this.originalElement,
                element: this.element,
                helper: this.helper,
                position: this.position,
                size: this.size,
                originalSize: this.originalSize,
                originalPosition: this.originalPosition
            };
        }
    }),
    a.extend(a.ui.resizable, {
        version: "1.8.18"
    }),
    a.ui.plugin.add("resizable", "alsoResize", {
        start: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = function(b) {
                a(b).each(function() {
                    var b = a(this);
                    b.data("resizable-alsoresize", {
                        width: parseInt(b.width(), 10),
                        height: parseInt(b.height(), 10),
                        left: parseInt(b.css("left"), 10),
                        top: parseInt(b.css("top"), 10)
                    });
                });
            }
            ;
            typeof e.alsoResize == "object" && !e.alsoResize.parentNode ? e.alsoResize.length ? (e.alsoResize = e.alsoResize[0],
            f(e.alsoResize)) : a.each(e.alsoResize, function(a) {
                f(a);
            }) : f(e.alsoResize);
        },
        resize: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d.originalSize
              , g = d.originalPosition
              , h = {
                height: d.size.height - f.height || 0,
                width: d.size.width - f.width || 0,
                top: d.position.top - g.top || 0,
                left: d.position.left - g.left || 0
            }
              , i = function(b, d) {
                a(b).each(function() {
                    var b = a(this)
                      , e = a(this).data("resizable-alsoresize")
                      , f = {}
                      , g = d && d.length ? d : b.parents(c.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                    a.each(g, function(a, b) {
                        var c = (e[b] || 0) + (h[b] || 0);
                        c && c >= 0 && (f[b] = c || null );
                    }),
                    b.css(f);
                });
            }
            ;
            typeof e.alsoResize == "object" && !e.alsoResize.nodeType ? a.each(e.alsoResize, function(a, b) {
                i(a, b);
            }) : i(e.alsoResize);
        },
        stop: function(b, c) {
            a(this).removeData("resizable-alsoresize");
        }
    }),
    a.ui.plugin.add("resizable", "animate", {
        stop: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d._proportionallyResizeElements
              , g = f.length && /textarea/i.test(f[0].nodeName)
              , h = g && a.ui.hasScroll(f[0], "left") ? 0 : d.sizeDiff.height
              , i = g ? 0 : d.sizeDiff.width
              , j = {
                width: d.size.width - i,
                height: d.size.height - h
            }
              , k = parseInt(d.element.css("left"), 10) + (d.position.left - d.originalPosition.left) || null 
              , l = parseInt(d.element.css("top"), 10) + (d.position.top - d.originalPosition.top) || null ;
            d.element.animate(a.extend(j, l && k ? {
                top: l,
                left: k
            } : {}), {
                duration: e.animateDuration,
                easing: e.animateEasing,
                step: function() {
                    var c = {
                        width: parseInt(d.element.css("width"), 10),
                        height: parseInt(d.element.css("height"), 10),
                        top: parseInt(d.element.css("top"), 10),
                        left: parseInt(d.element.css("left"), 10)
                    };
                    f && f.length && a(f[0]).css({
                        width: c.width,
                        height: c.height
                    }),
                    d._updateCache(c),
                    d._propagate("resize", b);
                }
            });
        }
    }),
    a.ui.plugin.add("resizable", "containment", {
        start: function(b, d) {
            var e = a(this).data("resizable")
              , f = e.options
              , g = e.element
              , h = f.containment
              , i = h instanceof a ? h.get(0) : /parent/.test(h) ? g.parent().get(0) : h;
            if (!!i) {
                e.containerElement = a(i);
                if (/document/.test(h) || h == document) {
                    e.containerOffset = {
                        left: 0,
                        top: 0
                    },
                    e.containerPosition = {
                        left: 0,
                        top: 0
                    },
                    e.parentData = {
                        element: a(document),
                        left: 0,
                        top: 0,
                        width: a(document).width(),
                        height: a(document).height() || document.body.parentNode.scrollHeight
                    };
                } else {
                    var j = a(i)
                      , k = [];
                    a(["Top", "Right", "Left", "Bottom"]).each(function(a, b) {
                        k[a] = c(j.css("padding" + b));
                    }),
                    e.containerOffset = j.offset(),
                    e.containerPosition = j.position(),
                    e.containerSize = {
                        height: j.innerHeight() - k[3],
                        width: j.innerWidth() - k[1]
                    };
                    var l = e.containerOffset
                      , m = e.containerSize.height
                      , n = e.containerSize.width
                      , o = a.ui.hasScroll(i, "left") ? i.scrollWidth : n
                      , p = a.ui.hasScroll(i) ? i.scrollHeight : m;
                    e.parentData = {
                        element: i,
                        left: l.left,
                        top: l.top,
                        width: o,
                        height: p
                    };
                }
            }
        },
        resize: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d.containerSize
              , g = d.containerOffset
              , h = d.size
              , i = d.position
              , j = d._aspectRatio || b.shiftKey
              , k = {
                top: 0,
                left: 0
            }
              , l = d.containerElement;
            l[0] != document && /static/.test(l.css("position")) && (k = g),
            i.left < (d._helper ? g.left : 0) && (d.size.width = d.size.width + (d._helper ? d.position.left - g.left : d.position.left - k.left),
            j && (d.size.height = d.size.width / e.aspectRatio),
            d.position.left = e.helper ? g.left : 0),
            i.top < (d._helper ? g.top : 0) && (d.size.height = d.size.height + (d._helper ? d.position.top - g.top : d.position.top),
            j && (d.size.width = d.size.height * e.aspectRatio),
            d.position.top = d._helper ? g.top : 0),
            d.offset.left = d.parentData.left + d.position.left,
            d.offset.top = d.parentData.top + d.position.top;
            var m = Math.abs((d._helper ? d.offset.left - k.left : d.offset.left - k.left) + d.sizeDiff.width)
              , n = Math.abs((d._helper ? d.offset.top - k.top : d.offset.top - g.top) + d.sizeDiff.height)
              , o = d.containerElement.get(0) == d.element.parent().get(0)
              , p = /relative|absolute/.test(d.containerElement.css("position"));
            o && p && (m -= d.parentData.left),
            m + d.size.width >= d.parentData.width && (d.size.width = d.parentData.width - m,
            j && (d.size.height = d.size.width / d.aspectRatio)),
            n + d.size.height >= d.parentData.height && (d.size.height = d.parentData.height - n,
            j && (d.size.width = d.size.height * d.aspectRatio));
        },
        stop: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d.position
              , g = d.containerOffset
              , h = d.containerPosition
              , i = d.containerElement
              , j = a(d.helper)
              , k = j.offset()
              , l = j.outerWidth() - d.sizeDiff.width
              , m = j.outerHeight() - d.sizeDiff.height;
            d._helper && !e.animate && /relative/.test(i.css("position")) && a(this).css({
                left: k.left - h.left - g.left,
                width: l,
                height: m
            }),
            d._helper && !e.animate && /static/.test(i.css("position")) && a(this).css({
                left: k.left - h.left - g.left,
                width: l,
                height: m
            });
        }
    }),
    a.ui.plugin.add("resizable", "ghost", {
        start: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d.size;
            d.ghost = d.originalElement.clone(),
            d.ghost.css({
                opacity: 0.25,
                display: "block",
                position: "relative",
                height: f.height,
                width: f.width,
                margin: 0,
                left: 0,
                top: 0
            }).addClass("ui-resizable-ghost").addClass(typeof e.ghost == "string" ? e.ghost : ""),
            d.ghost.appendTo(d.helper);
        },
        resize: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options;
            d.ghost && d.ghost.css({
                position: "relative",
                height: d.size.height,
                width: d.size.width
            });
        },
        stop: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options;
            d.ghost && d.helper && d.helper.get(0).removeChild(d.ghost.get(0));
        }
    }),
    a.ui.plugin.add("resizable", "grid", {
        resize: function(b, c) {
            var d = a(this).data("resizable")
              , e = d.options
              , f = d.size
              , g = d.originalSize
              , h = d.originalPosition
              , i = d.axis
              , j = e._aspectRatio || b.shiftKey;
            e.grid = typeof e.grid == "number" ? [e.grid, e.grid] : e.grid;
            var k = Math.round((f.width - g.width) / (e.grid[0] || 1)) * (e.grid[0] || 1)
              , l = Math.round((f.height - g.height) / (e.grid[1] || 1)) * (e.grid[1] || 1);
            /^(se|s|e)$/.test(i) ? (d.size.width = g.width + k,
            d.size.height = g.height + l) : /^(ne)$/.test(i) ? (d.size.width = g.width + k,
            d.size.height = g.height + l,
            d.position.top = h.top - l) : /^(sw)$/.test(i) ? (d.size.width = g.width + k,
            d.size.height = g.height + l,
            d.position.left = h.left - k) : (d.size.width = g.width + k,
            d.size.height = g.height + l,
            d.position.top = h.top - l,
            d.position.left = h.left - k);
        }
    });
    var c = function(a) {
        return parseInt(a, 10) || 0;
    }
      , d = function(a) {
        return !isNaN(parseInt(a, 10));
    }
    ;
})(jQuery);
(function(a, b) {
    a.widget("ui.selectable", a.ui.mouse, {
        options: {
            appendTo: "body",
            autoRefresh: !0,
            distance: 0,
            filter: "*",
            tolerance: "touch"
        },
        _create: function() {
            var b = this;
            this.element.addClass("ui-selectable"),
            this.dragged = !1;
            var c;
            this.refresh = function() {
                c = a(b.options.filter, b.element[0]),
                c.addClass("ui-selectee"),
                c.each(function() {
                    var b = a(this)
                      , c = b.offset();
                    a.data(this, "selectable-item", {
                        element: this,
                        $element: b,
                        left: c.left,
                        top: c.top,
                        right: c.left + b.outerWidth(),
                        bottom: c.top + b.outerHeight(),
                        startselected: !1,
                        selected: b.hasClass("ui-selected"),
                        selecting: b.hasClass("ui-selecting"),
                        unselecting: b.hasClass("ui-unselecting")
                    });
                });
            }
            ,
            this.refresh(),
            this.selectees = c.addClass("ui-selectee"),
            this._mouseInit(),
            this.helper = a("<div class='ui-selectable-helper'></div>");
        },
        destroy: function() {
            this.selectees.removeClass("ui-selectee").removeData("selectable-item"),
            this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),
            this._mouseDestroy();
            return this;
        },
        _mouseStart: function(b) {
            var c = this;
            this.opos = [b.pageX, b.pageY];
            if (!this.options.disabled) {
                var d = this.options;
                this.selectees = a(d.filter, this.element[0]),
                this._trigger("start", b),
                a(d.appendTo).append(this.helper),
                this.helper.css({
                    left: b.clientX,
                    top: b.clientY,
                    width: 0,
                    height: 0
                }),
                d.autoRefresh && this.refresh(),
                this.selectees.filter(".ui-selected").each(function() {
                    var d = a.data(this, "selectable-item");
                    d.startselected = !0,
                    !b.metaKey && !b.ctrlKey && (d.$element.removeClass("ui-selected"),
                    d.selected = !1,
                    d.$element.addClass("ui-unselecting"),
                    d.unselecting = !0,
                    c._trigger("unselecting", b, {
                        unselecting: d.element
                    }));
                }),
                a(b.target).parents().andSelf().each(function() {
                    var d = a.data(this, "selectable-item");
                    if (d) {
                        var e = !b.metaKey && !b.ctrlKey || !d.$element.hasClass("ui-selected");
                        d.$element.removeClass(e ? "ui-unselecting" : "ui-selected").addClass(e ? "ui-selecting" : "ui-unselecting"),
                        d.unselecting = !e,
                        d.selecting = e,
                        d.selected = e,
                        e ? c._trigger("selecting", b, {
                            selecting: d.element
                        }) : c._trigger("unselecting", b, {
                            unselecting: d.element
                        });
                        return !1;
                    }
                });
            }
        },
        _mouseDrag: function(b) {
            var c = this;
            this.dragged = !0;
            if (!this.options.disabled) {
                var d = this.options
                  , e = this.opos[0]
                  , f = this.opos[1]
                  , g = b.pageX
                  , h = b.pageY;
                if (e > g) {
                    var i = g;
                    g = e,
                    e = i;
                }
                if (f > h) {
                    var i = h;
                    h = f,
                    f = i;
                }
                this.helper.css({
                    left: e,
                    top: f,
                    width: g - e,
                    height: h - f
                }),
                this.selectees.each(function() {
                    var i = a.data(this, "selectable-item");
                    if (!!i && i.element != c.element[0]) {
                        var j = !1;
                        d.tolerance == "touch" ? j = !(i.left > g || i.right < e || i.top > h || i.bottom < f) : d.tolerance == "fit" && (j = i.left > e && i.right < g && i.top > f && i.bottom < h),
                        j ? (i.selected && (i.$element.removeClass("ui-selected"),
                        i.selected = !1),
                        i.unselecting && (i.$element.removeClass("ui-unselecting"),
                        i.unselecting = !1),
                        i.selecting || (i.$element.addClass("ui-selecting"),
                        i.selecting = !0,
                        c._trigger("selecting", b, {
                            selecting: i.element
                        }))) : (i.selecting && ((b.metaKey || b.ctrlKey) && i.startselected ? (i.$element.removeClass("ui-selecting"),
                        i.selecting = !1,
                        i.$element.addClass("ui-selected"),
                        i.selected = !0) : (i.$element.removeClass("ui-selecting"),
                        i.selecting = !1,
                        i.startselected && (i.$element.addClass("ui-unselecting"),
                        i.unselecting = !0),
                        c._trigger("unselecting", b, {
                            unselecting: i.element
                        }))),
                        i.selected && !b.metaKey && !b.ctrlKey && !i.startselected && (i.$element.removeClass("ui-selected"),
                        i.selected = !1,
                        i.$element.addClass("ui-unselecting"),
                        i.unselecting = !0,
                        c._trigger("unselecting", b, {
                            unselecting: i.element
                        })));
                    }
                });
                return !1;
            }
        },
        _mouseStop: function(b) {
            var c = this;
            this.dragged = !1;
            var d = this.options;
            a(".ui-unselecting", this.element[0]).each(function() {
                var d = a.data(this, "selectable-item");
                d.$element.removeClass("ui-unselecting"),
                d.unselecting = !1,
                d.startselected = !1,
                c._trigger("unselected", b, {
                    unselected: d.element
                });
            }),
            a(".ui-selecting", this.element[0]).each(function() {
                var d = a.data(this, "selectable-item");
                d.$element.removeClass("ui-selecting").addClass("ui-selected"),
                d.selecting = !1,
                d.selected = !0,
                d.startselected = !0,
                c._trigger("selected", b, {
                    selected: d.element
                });
            }),
            this._trigger("stop", b),
            this.helper.remove();
            return !1;
        }
    }),
    a.extend(a.ui.selectable, {
        version: "1.8.18"
    });
})(jQuery);
(function(a, b) {
    a.widget("ui.sortable", a.ui.mouse, {
        widgetEventPrefix: "sort",
        ready: !1,
        options: {
            appendTo: "parent",
            axis: !1,
            connectWith: !1,
            containment: !1,
            cursor: "auto",
            cursorAt: !1,
            dropOnEmpty: !0,
            forcePlaceholderSize: !1,
            forceHelperSize: !1,
            grid: !1,
            handle: !1,
            helper: "original",
            items: "> *",
            opacity: !1,
            placeholder: !1,
            revert: !1,
            scroll: !0,
            scrollSensitivity: 20,
            scrollSpeed: 20,
            scope: "default",
            tolerance: "intersect",
            zIndex: 1000
        },
        _create: function() {
            var a = this.options;
            this.containerCache = {},
            this.element.addClass("ui-sortable"),
            this.refresh(),
            this.floating = this.items.length ? a.axis === "x" || /left|right/.test(this.items[0].item.css("float")) || /inline|table-cell/.test(this.items[0].item.css("display")) : !1,
            this.offset = this.element.offset(),
            this._mouseInit(),
            this.ready = !0;
        },
        destroy: function() {
            a.Widget.prototype.destroy.call(this),
            this.element.removeClass("ui-sortable ui-sortable-disabled"),
            this._mouseDestroy();
            for (var b = this.items.length - 1; b >= 0; b--) {
                this.items[b].item.removeData(this.widgetName + "-item");
            }
            return this;
        },
        _setOption: function(b, c) {
            b === "disabled" ? (this.options[b] = c,
            this.widget()[c ? "addClass" : "removeClass"]("ui-sortable-disabled")) : a.Widget.prototype._setOption.apply(this, arguments);
        },
        _mouseCapture: function(b, c) {
            var d = this;
            if (this.reverting) {
                return !1;
            }
            if (this.options.disabled || this.options.type == "static") {
                return !1;
            }
            this._refreshItems(b);
            var e = null 
              , f = this
              , g = a(b.target).parents().each(function() {
                if (a.data(this, d.widgetName + "-item") == f) {
                    e = a(this);
                    return !1;
                }
            });
            a.data(b.target, d.widgetName + "-item") == f && (e = a(b.target));
            if (!e) {
                return !1;
            }
            if (this.options.handle && !c) {
                var h = !1;
                a(this.options.handle, e).find("*").andSelf().each(function() {
                    this == b.target && (h = !0);
                });
                if (!h) {
                    return !1;
                }
            }
            this.currentItem = e,
            this._removeCurrentsFromItems();
            return !0;
        },
        _mouseStart: function(b, c, d) {
            var e = this.options
              , f = this;
            this.currentContainer = this,
            this.refreshPositions(),
            this.helper = this._createHelper(b),
            this._cacheHelperProportions(),
            this._cacheMargins(),
            this.scrollParent = this.helper.scrollParent(),
            this.offset = this.currentItem.offset(),
            this.offset = {
                top: this.offset.top - this.margins.top,
                left: this.offset.left - this.margins.left
            },
            this.helper.css("position", "absolute"),
            this.cssPosition = this.helper.css("position"),
            a.extend(this.offset, {
                click: {
                    left: b.pageX - this.offset.left,
                    top: b.pageY - this.offset.top
                },
                parent: this._getParentOffset(),
                relative: this._getRelativeOffset()
            }),
            this.originalPosition = this._generatePosition(b),
            this.originalPageX = b.pageX,
            this.originalPageY = b.pageY,
            e.cursorAt && this._adjustOffsetFromHelper(e.cursorAt),
            this.domPosition = {
                prev: this.currentItem.prev()[0],
                parent: this.currentItem.parent()[0]
            },
            this.helper[0] != this.currentItem[0] && this.currentItem.hide(),
            this._createPlaceholder(),
            e.containment && this._setContainment(),
            e.cursor && (a("body").css("cursor") && (this._storedCursor = a("body").css("cursor")),
            a("body").css("cursor", e.cursor)),
            e.opacity && (this.helper.css("opacity") && (this._storedOpacity = this.helper.css("opacity")),
            this.helper.css("opacity", e.opacity)),
            e.zIndex && (this.helper.css("zIndex") && (this._storedZIndex = this.helper.css("zIndex")),
            this.helper.css("zIndex", e.zIndex)),
            this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" && (this.overflowOffset = this.scrollParent.offset()),
            this._trigger("start", b, this._uiHash()),
            this._preserveHelperProportions || this._cacheHelperProportions();
            if (!d) {
                for (var g = this.containers.length - 1; g >= 0; g--) {
                    this.containers[g]._trigger("activate", b, f._uiHash(this));
                }
            }
            a.ui.ddmanager && (a.ui.ddmanager.current = this),
            a.ui.ddmanager && !e.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b),
            this.dragging = !0,
            this.helper.addClass("ui-sortable-helper"),
            this._mouseDrag(b);
            return !0;
        },
        _mouseDrag: function(b) {
            this.position = this._generatePosition(b),
            this.positionAbs = this._convertPositionTo("absolute"),
            this.lastPositionAbs || (this.lastPositionAbs = this.positionAbs);
            if (this.options.scroll) {
                var c = this.options
                  , d = !1;
                this.scrollParent[0] != document && this.scrollParent[0].tagName != "HTML" ? (this.overflowOffset.top + this.scrollParent[0].offsetHeight - b.pageY < c.scrollSensitivity ? this.scrollParent[0].scrollTop = d = this.scrollParent[0].scrollTop + c.scrollSpeed : b.pageY - this.overflowOffset.top < c.scrollSensitivity && (this.scrollParent[0].scrollTop = d = this.scrollParent[0].scrollTop - c.scrollSpeed),
                this.overflowOffset.left + this.scrollParent[0].offsetWidth - b.pageX < c.scrollSensitivity ? this.scrollParent[0].scrollLeft = d = this.scrollParent[0].scrollLeft + c.scrollSpeed : b.pageX - this.overflowOffset.left < c.scrollSensitivity && (this.scrollParent[0].scrollLeft = d = this.scrollParent[0].scrollLeft - c.scrollSpeed)) : (b.pageY - a(document).scrollTop() < c.scrollSensitivity ? d = a(document).scrollTop(a(document).scrollTop() - c.scrollSpeed) : a(window).height() - (b.pageY - a(document).scrollTop()) < c.scrollSensitivity && (d = a(document).scrollTop(a(document).scrollTop() + c.scrollSpeed)),
                b.pageX - a(document).scrollLeft() < c.scrollSensitivity ? d = a(document).scrollLeft(a(document).scrollLeft() - c.scrollSpeed) : a(window).width() - (b.pageX - a(document).scrollLeft()) < c.scrollSensitivity && (d = a(document).scrollLeft(a(document).scrollLeft() + c.scrollSpeed))),
                d !== !1 && a.ui.ddmanager && !c.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b);
            }
            this.positionAbs = this._convertPositionTo("absolute");
            if (!this.options.axis || this.options.axis != "y") {
                this.helper[0].style.left = this.position.left + "px";
            }
            if (!this.options.axis || this.options.axis != "x") {
                this.helper[0].style.top = this.position.top + "px";
            }
            for (var e = this.items.length - 1; e >= 0; e--) {
                var f = this.items[e]
                  , g = f.item[0]
                  , h = this._intersectsWithPointer(f);
                if (!h) {
                    continue;
                }
                if (g != this.currentItem[0] && this.placeholder[h == 1 ? "next" : "prev"]()[0] != g && !a.ui.contains(this.placeholder[0], g) && (this.options.type == "semi-dynamic" ? !a.ui.contains(this.element[0], g) : !0)) {
                    this.direction = h == 1 ? "down" : "up";
                    if (this.options.tolerance == "pointer" || this._intersectsWithSides(f)) {
                        this._rearrange(b, f);
                    } else {
                        break;
                    }
                    this._trigger("change", b, this._uiHash());
                    break;
                }
            }
            this._contactContainers(b),
            a.ui.ddmanager && a.ui.ddmanager.drag(this, b),
            this._trigger("sort", b, this._uiHash()),
            this.lastPositionAbs = this.positionAbs;
            return !1;
        },
        _mouseStop: function(b, c) {
            if (!!b) {
                a.ui.ddmanager && !this.options.dropBehaviour && a.ui.ddmanager.drop(this, b);
                if (this.options.revert) {
                    var d = this
                      , e = d.placeholder.offset();
                    d.reverting = !0,
                    a(this.helper).animate({
                        left: e.left - this.offset.parent.left - d.margins.left + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollLeft),
                        top: e.top - this.offset.parent.top - d.margins.top + (this.offsetParent[0] == document.body ? 0 : this.offsetParent[0].scrollTop)
                    }, parseInt(this.options.revert, 10) || 500, function() {
                        d._clear(b);
                    });
                } else {
                    this._clear(b, c);
                }
                return !1;
            }
        },
        cancel: function() {
            var b = this;
            if (this.dragging) {
                this._mouseUp({
                    target: null 
                }),
                this.options.helper == "original" ? this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper") : this.currentItem.show();
                for (var c = this.containers.length - 1; c >= 0; c--) {
                    this.containers[c]._trigger("deactivate", null , b._uiHash(this)),
                    this.containers[c].containerCache.over && (this.containers[c]._trigger("out", null , b._uiHash(this)),
                    this.containers[c].containerCache.over = 0);
                }
            }
            this.placeholder && (this.placeholder[0].parentNode && this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.options.helper != "original" && this.helper && this.helper[0].parentNode && this.helper.remove(),
            a.extend(this, {
                helper: null ,
                dragging: !1,
                reverting: !1,
                _noFinalSort: null 
            }),
            this.domPosition.prev ? a(this.domPosition.prev).after(this.currentItem) : a(this.domPosition.parent).prepend(this.currentItem));
            return this;
        },
        serialize: function(b) {
            var c = this._getItemsAsjQuery(b && b.connected)
              , d = [];
            b = b || {},
            a(c).each(function() {
                var c = (a(b.item || this).attr(b.attribute || "id") || "").match(b.expression || /(.+)[-=_](.+)/);
                c && d.push((b.key || c[1] + "[]") + "=" + (b.key && b.expression ? c[1] : c[2]));
            }),
            !d.length && b.key && d.push(b.key + "=");
            return d.join("&");
        },
        toArray: function(b) {
            var c = this._getItemsAsjQuery(b && b.connected)
              , d = [];
            b = b || {},
            c.each(function() {
                d.push(a(b.item || this).attr(b.attribute || "id") || "");
            });
            return d;
        },
        _intersectsWith: function(a) {
            var b = this.positionAbs.left
              , c = b + this.helperProportions.width
              , d = this.positionAbs.top
              , e = d + this.helperProportions.height
              , f = a.left
              , g = f + a.width
              , h = a.top
              , i = h + a.height
              , j = this.offset.click.top
              , k = this.offset.click.left
              , l = d + j > h && d + j < i && b + k > f && b + k < g;
            return this.options.tolerance == "pointer" || this.options.forcePointerForContainers || this.options.tolerance != "pointer" && this.helperProportions[this.floating ? "width" : "height"] > a[this.floating ? "width" : "height"] ? l : f < b + this.helperProportions.width / 2 && c - this.helperProportions.width / 2 < g && h < d + this.helperProportions.height / 2 && e - this.helperProportions.height / 2 < i;
        },
        _intersectsWithPointer: function(b) {
            var c = a.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, b.top, b.height)
              , d = a.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, b.left, b.width)
              , e = c && d
              , f = this._getDragVerticalDirection()
              , g = this._getDragHorizontalDirection();
            if (!e) {
                return !1;
            }
            return this.floating ? g && g == "right" || f == "down" ? 2 : 1 : f && (f == "down" ? 2 : 1);
        },
        _intersectsWithSides: function(b) {
            var c = a.ui.isOverAxis(this.positionAbs.top + this.offset.click.top, b.top + b.height / 2, b.height)
              , d = a.ui.isOverAxis(this.positionAbs.left + this.offset.click.left, b.left + b.width / 2, b.width)
              , e = this._getDragVerticalDirection()
              , f = this._getDragHorizontalDirection();
            return this.floating && f ? f == "right" && d || f == "left" && !d : e && (e == "down" && c || e == "up" && !c);
        },
        _getDragVerticalDirection: function() {
            var a = this.positionAbs.top - this.lastPositionAbs.top;
            return a != 0 && (a > 0 ? "down" : "up");
        },
        _getDragHorizontalDirection: function() {
            var a = this.positionAbs.left - this.lastPositionAbs.left;
            return a != 0 && (a > 0 ? "right" : "left");
        },
        refresh: function(a) {
            this._refreshItems(a),
            this.refreshPositions();
            return this;
        },
        _connectWith: function() {
            var a = this.options;
            return a.connectWith.constructor == String ? [a.connectWith] : a.connectWith;
        },
        _getItemsAsjQuery: function(b) {
            var c = this
              , d = []
              , e = []
              , f = this._connectWith();
            if (f && b) {
                for (var g = f.length - 1; g >= 0; g--) {
                    var h = a(f[g]);
                    for (var i = h.length - 1; i >= 0; i--) {
                        var j = a.data(h[i], this.widgetName);
                        j && j != this && !j.options.disabled && e.push([a.isFunction(j.options.items) ? j.options.items.call(j.element) : a(j.options.items, j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), j]);
                    }
                }
            }
            e.push([a.isFunction(this.options.items) ? this.options.items.call(this.element, null , {
                options: this.options,
                item: this.currentItem
            }) : a(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);
            for (var g = e.length - 1; g >= 0; g--) {
                e[g][0].each(function() {
                    d.push(this);
                });
            }
            return a(d);
        },
        _removeCurrentsFromItems: function() {
            var a = this.currentItem.find(":data(" + this.widgetName + "-item)");
            for (var b = 0; b < this.items.length; b++) {
                for (var c = 0; c < a.length; c++) {
                    a[c] == this.items[b].item[0] && this.items.splice(b, 1);
                }
            }
        },
        _refreshItems: function(b) {
            this.items = [],
            this.containers = [this];
            var c = this.items
              , d = this
              , e = [[a.isFunction(this.options.items) ? this.options.items.call(this.element[0], b, {
                item: this.currentItem
            }) : a(this.options.items, this.element), this]]
              , f = this._connectWith();
            if (f && this.ready) {
                for (var g = f.length - 1; g >= 0; g--) {
                    var h = a(f[g]);
                    for (var i = h.length - 1; i >= 0; i--) {
                        var j = a.data(h[i], this.widgetName);
                        j && j != this && !j.options.disabled && (e.push([a.isFunction(j.options.items) ? j.options.items.call(j.element[0], b, {
                            item: this.currentItem
                        }) : a(j.options.items, j.element), j]),
                        this.containers.push(j));
                    }
                }
            }
            for (var g = e.length - 1; g >= 0; g--) {
                var k = e[g][1]
                  , l = e[g][0];
                for (var i = 0, m = l.length; i < m; i++) {
                    var n = a(l[i]);
                    n.data(this.widgetName + "-item", k),
                    c.push({
                        item: n,
                        instance: k,
                        width: 0,
                        height: 0,
                        left: 0,
                        top: 0
                    });
                }
            }
        },
        refreshPositions: function(b) {
            this.offsetParent && this.helper && (this.offset.parent = this._getParentOffset());
            for (var c = this.items.length - 1; c >= 0; c--) {
                var d = this.items[c];
                if (d.instance != this.currentContainer && this.currentContainer && d.item[0] != this.currentItem[0]) {
                    continue;
                }
                var e = this.options.toleranceElement ? a(this.options.toleranceElement, d.item) : d.item;
                b || (d.width = e.outerWidth(),
                d.height = e.outerHeight());
                var f = e.offset();
                d.left = f.left,
                d.top = f.top;
            }
            if (this.options.custom && this.options.custom.refreshContainers) {
                this.options.custom.refreshContainers.call(this);
            } else {
                for (var c = this.containers.length - 1; c >= 0; c--) {
                    var f = this.containers[c].element.offset();
                    this.containers[c].containerCache.left = f.left,
                    this.containers[c].containerCache.top = f.top,
                    this.containers[c].containerCache.width = this.containers[c].element.outerWidth(),
                    this.containers[c].containerCache.height = this.containers[c].element.outerHeight();
                }
            }
            return this;
        },
        _createPlaceholder: function(b) {
            var c = b || this
              , d = c.options;
            if (!d.placeholder || d.placeholder.constructor == String) {
                var e = d.placeholder;
                d.placeholder = {
                    element: function() {
                        var b = a(document.createElement(c.currentItem[0].nodeName)).addClass(e || c.currentItem[0].className + " ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
                        e || (b.style.visibility = "hidden");
                        return b;
                    },
                    update: function(a, b) {
                        if (!e || !!d.forcePlaceholderSize) {
                            b.height() || b.height(c.currentItem.innerHeight() - parseInt(c.currentItem.css("paddingTop") || 0, 10) - parseInt(c.currentItem.css("paddingBottom") || 0, 10)),
                            b.width() || b.width(c.currentItem.innerWidth() - parseInt(c.currentItem.css("paddingLeft") || 0, 10) - parseInt(c.currentItem.css("paddingRight") || 0, 10));
                        }
                    }
                };
            }
            c.placeholder = a(d.placeholder.element.call(c.element, c.currentItem)),
            c.currentItem.after(c.placeholder),
            d.placeholder.update(c, c.placeholder);
        },
        _contactContainers: function(b) {
            var c = null 
              , d = null ;
            for (var e = this.containers.length - 1; e >= 0; e--) {
                if (a.ui.contains(this.currentItem[0], this.containers[e].element[0])) {
                    continue;
                }
                if (this._intersectsWith(this.containers[e].containerCache)) {
                    if (c && a.ui.contains(this.containers[e].element[0], c.element[0])) {
                        continue;
                    }
                    c = this.containers[e],
                    d = e;
                } else {
                    this.containers[e].containerCache.over && (this.containers[e]._trigger("out", b, this._uiHash(this)),
                    this.containers[e].containerCache.over = 0);
                }
            }
            if (!!c) {
                if (this.containers.length === 1) {
                    this.containers[d]._trigger("over", b, this._uiHash(this)),
                    this.containers[d].containerCache.over = 1;
                } else {
                    if (this.currentContainer != this.containers[d]) {
                        var f = 10000
                          , g = null 
                          , h = this.positionAbs[this.containers[d].floating ? "left" : "top"];
                        for (var i = this.items.length - 1; i >= 0; i--) {
                            if (!a.ui.contains(this.containers[d].element[0], this.items[i].item[0])) {
                                continue;
                            }
                            var j = this.items[i][this.containers[d].floating ? "left" : "top"];
                            Math.abs(j - h) < f && (f = Math.abs(j - h),
                            g = this.items[i]);
                        }
                        if (!g && !this.options.dropOnEmpty) {
                            return;
                        }
                        this.currentContainer = this.containers[d],
                        g ? this._rearrange(b, g, null , !0) : this._rearrange(b, null , this.containers[d].element, !0),
                        this._trigger("change", b, this._uiHash()),
                        this.containers[d]._trigger("change", b, this._uiHash(this)),
                        this.options.placeholder.update(this.currentContainer, this.placeholder),
                        this.containers[d]._trigger("over", b, this._uiHash(this)),
                        this.containers[d].containerCache.over = 1;
                    }
                }
            }
        },
        _createHelper: function(b) {
            var c = this.options
              , d = a.isFunction(c.helper) ? a(c.helper.apply(this.element[0], [b, this.currentItem])) : c.helper == "clone" ? this.currentItem.clone() : this.currentItem;
            d.parents("body").length || a(c.appendTo != "parent" ? c.appendTo : this.currentItem[0].parentNode)[0].appendChild(d[0]),
            d[0] == this.currentItem[0] && (this._storedCSS = {
                width: this.currentItem[0].style.width,
                height: this.currentItem[0].style.height,
                position: this.currentItem.css("position"),
                top: this.currentItem.css("top"),
                left: this.currentItem.css("left")
            }),
            (d[0].style.width == "" || c.forceHelperSize) && d.width(this.currentItem.width()),
            (d[0].style.height == "" || c.forceHelperSize) && d.height(this.currentItem.height());
            return d;
        },
        _adjustOffsetFromHelper: function(b) {
            typeof b == "string" && (b = b.split(" ")),
            a.isArray(b) && (b = {
                left: +b[0],
                top: +b[1] || 0
            }),
            "left" in b && (this.offset.click.left = b.left + this.margins.left),
            "right" in b && (this.offset.click.left = this.helperProportions.width - b.right + this.margins.left),
            "top" in b && (this.offset.click.top = b.top + this.margins.top),
            "bottom" in b && (this.offset.click.top = this.helperProportions.height - b.bottom + this.margins.top);
        },
        _getParentOffset: function() {
            this.offsetParent = this.helper.offsetParent();
            var b = this.offsetParent.offset();
            this.cssPosition == "absolute" && this.scrollParent[0] != document && a.ui.contains(this.scrollParent[0], this.offsetParent[0]) && (b.left += this.scrollParent.scrollLeft(),
            b.top += this.scrollParent.scrollTop());
            if (this.offsetParent[0] == document.body || this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() == "html" && a.browser.msie) {
                b = {
                    top: 0,
                    left: 0
                };
            }
            return {
                top: b.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0),
                left: b.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)
            };
        },
        _getRelativeOffset: function() {
            if (this.cssPosition == "relative") {
                var a = this.currentItem.position();
                return {
                    top: a.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(),
                    left: a.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()
                };
            }
            return {
                top: 0,
                left: 0
            };
        },
        _cacheMargins: function() {
            this.margins = {
                left: parseInt(this.currentItem.css("marginLeft"), 10) || 0,
                top: parseInt(this.currentItem.css("marginTop"), 10) || 0
            };
        },
        _cacheHelperProportions: function() {
            this.helperProportions = {
                width: this.helper.outerWidth(),
                height: this.helper.outerHeight()
            };
        },
        _setContainment: function() {
            var b = this.options;
            b.containment == "parent" && (b.containment = this.helper[0].parentNode);
            if (b.containment == "document" || b.containment == "window") {
                this.containment = [0 - this.offset.relative.left - this.offset.parent.left, 0 - this.offset.relative.top - this.offset.parent.top, a(b.containment == "document" ? document : window).width() - this.helperProportions.width - this.margins.left, (a(b.containment == "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top];
            }
            if (!/^(document|window|parent)$/.test(b.containment)) {
                var c = a(b.containment)[0]
                  , d = a(b.containment).offset()
                  , e = a(c).css("overflow") != "hidden";
                this.containment = [d.left + (parseInt(a(c).css("borderLeftWidth"), 10) || 0) + (parseInt(a(c).css("paddingLeft"), 10) || 0) - this.margins.left, d.top + (parseInt(a(c).css("borderTopWidth"), 10) || 0) + (parseInt(a(c).css("paddingTop"), 10) || 0) - this.margins.top, d.left + (e ? Math.max(c.scrollWidth, c.offsetWidth) : c.offsetWidth) - (parseInt(a(c).css("borderLeftWidth"), 10) || 0) - (parseInt(a(c).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left, d.top + (e ? Math.max(c.scrollHeight, c.offsetHeight) : c.offsetHeight) - (parseInt(a(c).css("borderTopWidth"), 10) || 0) - (parseInt(a(c).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top];
            }
        },
        _convertPositionTo: function(b, c) {
            c || (c = this.position);
            var d = b == "absolute" ? 1 : -1
              , e = this.options
              , f = this.cssPosition == "absolute" && (this.scrollParent[0] == document || !a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent
              , g = /(html|body)/i.test(f[0].tagName);
            return {
                top: c.top + this.offset.relative.top * d + this.offset.parent.top * d - (a.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : g ? 0 : f.scrollTop()) * d),
                left: c.left + this.offset.relative.left * d + this.offset.parent.left * d - (a.browser.safari && this.cssPosition == "fixed" ? 0 : (this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : g ? 0 : f.scrollLeft()) * d)
            };
        },
        _generatePosition: function(b) {
            var c = this.options
              , d = this.cssPosition == "absolute" && (this.scrollParent[0] == document || !a.ui.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent
              , e = /(html|body)/i.test(d[0].tagName);
            this.cssPosition == "relative" && (this.scrollParent[0] == document || this.scrollParent[0] == this.offsetParent[0]) && (this.offset.relative = this._getRelativeOffset());
            var f = b.pageX
              , g = b.pageY;
            if (this.originalPosition) {
                this.containment && (b.pageX - this.offset.click.left < this.containment[0] && (f = this.containment[0] + this.offset.click.left),
                b.pageY - this.offset.click.top < this.containment[1] && (g = this.containment[1] + this.offset.click.top),
                b.pageX - this.offset.click.left > this.containment[2] && (f = this.containment[2] + this.offset.click.left),
                b.pageY - this.offset.click.top > this.containment[3] && (g = this.containment[3] + this.offset.click.top));
                if (c.grid) {
                    var h = this.originalPageY + Math.round((g - this.originalPageY) / c.grid[1]) * c.grid[1];
                    g = this.containment ? h - this.offset.click.top < this.containment[1] || h - this.offset.click.top > this.containment[3] ? h - this.offset.click.top < this.containment[1] ? h + c.grid[1] : h - c.grid[1] : h : h;
                    var i = this.originalPageX + Math.round((f - this.originalPageX) / c.grid[0]) * c.grid[0];
                    f = this.containment ? i - this.offset.click.left < this.containment[0] || i - this.offset.click.left > this.containment[2] ? i - this.offset.click.left < this.containment[0] ? i + c.grid[0] : i - c.grid[0] : i : i;
                }
            }
            return {
                top: g - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + (a.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollTop() : e ? 0 : d.scrollTop()),
                left: f - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + (a.browser.safari && this.cssPosition == "fixed" ? 0 : this.cssPosition == "fixed" ? -this.scrollParent.scrollLeft() : e ? 0 : d.scrollLeft())
            };
        },
        _rearrange: function(a, b, c, d) {
            c ? c[0].appendChild(this.placeholder[0]) : b.item[0].parentNode.insertBefore(this.placeholder[0], this.direction == "down" ? b.item[0] : b.item[0].nextSibling),
            this.counter = this.counter ? ++this.counter : 1;
            var e = this
              , f = this.counter;
            window.setTimeout(function() {
                f == e.counter && e.refreshPositions(!d);
            }, 0);
        },
        _clear: function(b, c) {
            this.reverting = !1;
            var d = []
              , e = this;
            !this._noFinalSort && this.currentItem.parent().length && this.placeholder.before(this.currentItem),
            this._noFinalSort = null ;
            if (this.helper[0] == this.currentItem[0]) {
                for (var f in this._storedCSS) {
                    if (this._storedCSS[f] == "auto" || this._storedCSS[f] == "static") {
                        this._storedCSS[f] = "";
                    }
                }
                this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
            } else {
                this.currentItem.show();
            }
            this.fromOutside && !c && d.push(function(a) {
                this._trigger("receive", a, this._uiHash(this.fromOutside));
            }),
            (this.fromOutside || this.domPosition.prev != this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent != this.currentItem.parent()[0]) && !c && d.push(function(a) {
                this._trigger("update", a, this._uiHash());
            });
            if (!a.ui.contains(this.element[0], this.currentItem[0])) {
                c || d.push(function(a) {
                    this._trigger("remove", a, this._uiHash());
                });
                for (var f = this.containers.length - 1; f >= 0; f--) {
                    a.ui.contains(this.containers[f].element[0], this.currentItem[0]) && !c && (d.push(function(a) {
                        return function(b) {
                            a._trigger("receive", b, this._uiHash(this));
                        }
                        ;
                    }
                    .call(this, this.containers[f])),
                    d.push(function(a) {
                        return function(b) {
                            a._trigger("update", b, this._uiHash(this));
                        }
                        ;
                    }
                    .call(this, this.containers[f])));
                }
            }
            for (var f = this.containers.length - 1; f >= 0; f--) {
                c || d.push(function(a) {
                    return function(b) {
                        a._trigger("deactivate", b, this._uiHash(this));
                    }
                    ;
                }
                .call(this, this.containers[f])),
                this.containers[f].containerCache.over && (d.push(function(a) {
                    return function(b) {
                        a._trigger("out", b, this._uiHash(this));
                    }
                    ;
                }
                .call(this, this.containers[f])),
                this.containers[f].containerCache.over = 0);
            }
            this._storedCursor && a("body").css("cursor", this._storedCursor),
            this._storedOpacity && this.helper.css("opacity", this._storedOpacity),
            this._storedZIndex && this.helper.css("zIndex", this._storedZIndex == "auto" ? "" : this._storedZIndex),
            this.dragging = !1;
            if (this.cancelHelperRemoval) {
                if (!c) {
                    this._trigger("beforeStop", b, this._uiHash());
                    for (var f = 0; f < d.length; f++) {
                        d[f].call(this, b);
                    }
                    this._trigger("stop", b, this._uiHash());
                }
                return !1;
            }
            c || this._trigger("beforeStop", b, this._uiHash()),
            this.placeholder[0].parentNode.removeChild(this.placeholder[0]),
            this.helper[0] != this.currentItem[0] && this.helper.remove(),
            this.helper = null ;
            if (!c) {
                for (var f = 0; f < d.length; f++) {
                    d[f].call(this, b);
                }
                this._trigger("stop", b, this._uiHash());
            }
            this.fromOutside = !1;
            return !0;
        },
        _trigger: function() {
            a.Widget.prototype._trigger.apply(this, arguments) === !1 && this.cancel();
        },
        _uiHash: function(b) {
            var c = b || this;
            return {
                helper: c.helper,
                placeholder: c.placeholder || a([]),
                position: c.position,
                originalPosition: c.originalPosition,
                offset: c.positionAbs,
                item: c.currentItem,
                sender: b ? b.element : null 
            };
        }
    }),
    a.extend(a.ui.sortable, {
        version: "1.8.18"
    });
})(jQuery);
(function(a, b) {
    a.widget("ui.accordion", {
        options: {
            active: 0,
            animated: "slide",
            autoHeight: !0,
            clearStyle: !1,
            collapsible: !1,
            event: "click",
            fillSpace: !1,
            header: "> li > :first-child,> :not(li):even",
            icons: {
                header: "ui-icon-triangle-1-e",
                headerSelected: "ui-icon-triangle-1-s"
            },
            navigation: !1,
            navigationFilter: function() {
                return this.href.toLowerCase() === location.href.toLowerCase();
            }
        },
        _create: function() {
            var b = this
              , c = b.options;
            b.running = 0,
            b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),
            b.headers = b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion", function() {
                c.disabled || a(this).addClass("ui-state-hover");
            }).bind("mouseleave.accordion", function() {
                c.disabled || a(this).removeClass("ui-state-hover");
            }).bind("focus.accordion", function() {
                c.disabled || a(this).addClass("ui-state-focus");
            }).bind("blur.accordion", function() {
                c.disabled || a(this).removeClass("ui-state-focus");
            }),
            b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");
            if (c.navigation) {
                var d = b.element.find("a").filter(c.navigationFilter).eq(0);
                if (d.length) {
                    var e = d.closest(".ui-accordion-header");
                    e.length ? b.active = e : b.active = d.closest(".ui-accordion-content").prev();
                }
            }
            b.active = b._findActive(b.active || c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),
            b.active.next().addClass("ui-accordion-content-active"),
            b._createIcons(),
            b.resize(),
            b.element.attr("role", "tablist"),
            b.headers.attr("role", "tab").bind("keydown.accordion", function(a) {
                return b._keydown(a);
            }).next().attr("role", "tabpanel"),
            b.headers.not(b.active || "").attr({
                "aria-expanded": "false",
                "aria-selected": "false",
                tabIndex: -1
            }).next().hide(),
            b.active.length ? b.active.attr({
                "aria-expanded": "true",
                "aria-selected": "true",
                tabIndex: 0
            }) : b.headers.eq(0).attr("tabIndex", 0),
            a.browser.safari || b.headers.find("a").attr("tabIndex", -1),
            c.event && b.headers.bind(c.event.split(" ").join(".accordion ") + ".accordion", function(a) {
                b._clickHandler.call(b, a, this),
                a.preventDefault();
            });
        },
        _createIcons: function() {
            var b = this.options;
            b.icons && (a("<span></span>").addClass("ui-icon " + b.icons.header).prependTo(this.headers),
            this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),
            this.element.addClass("ui-accordion-icons"));
        },
        _destroyIcons: function() {
            this.headers.children(".ui-icon").remove(),
            this.element.removeClass("ui-accordion-icons");
        },
        destroy: function() {
            var b = this.options;
            this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),
            this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),
            this.headers.find("a").removeAttr("tabIndex"),
            this._destroyIcons();
            var c = this.headers.next().css("display", "").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");
            (b.autoHeight || b.fillHeight) && c.css("height", "");
            return a.Widget.prototype.destroy.call(this);
        },
        _setOption: function(b, c) {
            a.Widget.prototype._setOption.apply(this, arguments),
            b == "active" && this.activate(c),
            b == "icons" && (this._destroyIcons(),
            c && this._createIcons()),
            b == "disabled" && this.headers.add(this.headers.next())[c ? "addClass" : "removeClass"]("ui-accordion-disabled ui-state-disabled");
        },
        _keydown: function(b) {
            if (!(this.options.disabled || b.altKey || b.ctrlKey)) {
                var c = a.ui.keyCode
                  , d = this.headers.length
                  , e = this.headers.index(b.target)
                  , f = !1;
                switch (b.keyCode) {
                case c.RIGHT:
                case c.DOWN:
                    f = this.headers[(e + 1) % d];
                    break;
                case c.LEFT:
                case c.UP:
                    f = this.headers[(e - 1 + d) % d];
                    break;
                case c.SPACE:
                case c.ENTER:
                    this._clickHandler({
                        target: b.target
                    }, b.target),
                    b.preventDefault();
                }
                if (f) {
                    a(b.target).attr("tabIndex", -1),
                    a(f).attr("tabIndex", 0),
                    f.focus();
                    return !1;
                }
                return !0;
            }
        },
        resize: function() {
            var b = this.options, c;
            if (b.fillSpace) {
                if (a.browser.msie) {
                    var d = this.element.parent().css("overflow");
                    this.element.parent().css("overflow", "hidden");
                }
                c = this.element.parent().height(),
                a.browser.msie && this.element.parent().css("overflow", d),
                this.headers.each(function() {
                    c -= a(this).outerHeight(!0);
                }),
                this.headers.next().each(function() {
                    a(this).height(Math.max(0, c - a(this).innerHeight() + a(this).height()));
                }).css("overflow", "auto");
            } else {
                b.autoHeight && (c = 0,
                this.headers.next().each(function() {
                    c = Math.max(c, a(this).height("").height());
                }).height(c));
            }
            return this;
        },
        activate: function(a) {
            this.options.active = a;
            var b = this._findActive(a)[0];
            this._clickHandler({
                target: b
            }, b);
            return this;
        },
        _findActive: function(b) {
            return b ? typeof b == "number" ? this.headers.filter(":eq(" + b + ")") : this.headers.not(this.headers.not(b)) : b === !1 ? a([]) : this.headers.filter(":eq(0)");
        },
        _clickHandler: function(b, c) {
            var d = this.options;
            if (!d.disabled) {
                if (!b.target) {
                    if (!d.collapsible) {
                        return;
                    }
                    this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),
                    this.active.next().addClass("ui-accordion-content-active");
                    var e = this.active.next()
                      , f = {
                        options: d,
                        newHeader: a([]),
                        oldHeader: d.active,
                        newContent: a([]),
                        oldContent: e
                    }
                      , g = this.active = a([]);
                    this._toggle(g, e, f);
                    return;
                }
                var h = a(b.currentTarget || c)
                  , i = h[0] === this.active[0];
                d.active = d.collapsible && i ? !1 : this.headers.index(h);
                if (this.running || !d.collapsible && i) {
                    return;
                }
                var j = this.active
                  , g = h.next()
                  , e = this.active.next()
                  , f = {
                    options: d,
                    newHeader: i && d.collapsible ? a([]) : h,
                    oldHeader: this.active,
                    newContent: i && d.collapsible ? a([]) : g,
                    oldContent: e
                }
                  , k = this.headers.index(this.active[0]) > this.headers.index(h[0]);
                this.active = i ? a([]) : h,
                this._toggle(g, e, f, i, k),
                j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),
                i || (h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),
                h.next().addClass("ui-accordion-content-active"));
                return;
            }
        },
        _toggle: function(b, c, d, e, f) {
            var g = this
              , h = g.options;
            g.toShow = b,
            g.toHide = c,
            g.data = d;
            var i = function() {
                if (!!g) {
                    return g._completed.apply(g, arguments);
                }
            }
            ;
            g._trigger("changestart", null , g.data),
            g.running = c.size() === 0 ? b.size() : c.size();
            if (h.animated) {
                var j = {};
                h.collapsible && e ? j = {
                    toShow: a([]),
                    toHide: c,
                    complete: i,
                    down: f,
                    autoHeight: h.autoHeight || h.fillSpace
                } : j = {
                    toShow: b,
                    toHide: c,
                    complete: i,
                    down: f,
                    autoHeight: h.autoHeight || h.fillSpace
                },
                h.proxied || (h.proxied = h.animated),
                h.proxiedDuration || (h.proxiedDuration = h.duration),
                h.animated = a.isFunction(h.proxied) ? h.proxied(j) : h.proxied,
                h.duration = a.isFunction(h.proxiedDuration) ? h.proxiedDuration(j) : h.proxiedDuration;
                var k = a.ui.accordion.animations
                  , l = h.duration
                  , m = h.animated;
                m && !k[m] && !a.easing[m] && (m = "slide"),
                k[m] || (k[m] = function(a) {
                    this.slide(a, {
                        easing: m,
                        duration: l || 700
                    });
                }
                ),
                k[m](j);
            } else {
                h.collapsible && e ? b.toggle() : (c.hide(),
                b.show()),
                i(!0);
            }
            c.prev().attr({
                "aria-expanded": "false",
                "aria-selected": "false",
                tabIndex: -1
            }).blur(),
            b.prev().attr({
                "aria-expanded": "true",
                "aria-selected": "true",
                tabIndex: 0
            }).focus();
        },
        _completed: function(a) {
            this.running = a ? 0 : --this.running;
            this.running || (this.options.clearStyle && this.toShow.add(this.toHide).css({
                height: "",
                overflow: ""
            }),
            this.toHide.removeClass("ui-accordion-content-active"),
            this.toHide.length && (this.toHide.parent()[0].className = this.toHide.parent()[0].className),
            this._trigger("change", null , this.data));
        }
    }),
    a.extend(a.ui.accordion, {
        version: "1.8.18",
        animations: {
            slide: function(b, c) {
                b = a.extend({
                    easing: "swing",
                    duration: 300
                }, b, c);
                if (!b.toHide.size()) {
                    b.toShow.animate({
                        height: "show",
                        paddingTop: "show",
                        paddingBottom: "show"
                    }, b);
                } else {
                    if (!b.toShow.size()) {
                        b.toHide.animate({
                            height: "hide",
                            paddingTop: "hide",
                            paddingBottom: "hide"
                        }, b);
                        return;
                    }
                    var d = b.toShow.css("overflow"), e = 0, f = {}, g = {}, h = ["height", "paddingTop", "paddingBottom"], i, j = b.toShow;
                    i = j[0].style.width,
                    j.width(j.parent().width() - parseFloat(j.css("paddingLeft")) - parseFloat(j.css("paddingRight")) - (parseFloat(j.css("borderLeftWidth")) || 0) - (parseFloat(j.css("borderRightWidth")) || 0)),
                    a.each(h, function(c, d) {
                        g[d] = "hide";
                        var e = ("" + a.css(b.toShow[0], d)).match(/^([\d+-.]+)(.*)$/);
                        f[d] = {
                            value: e[1],
                            unit: e[2] || "px"
                        };
                    }),
                    b.toShow.css({
                        height: 0,
                        overflow: "hidden"
                    }).show(),
                    b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g, {
                        step: function(a, c) {
                            c.prop == "height" && (e = c.end - c.start === 0 ? 0 : (c.now - c.start) / (c.end - c.start)),
                            b.toShow[0].style[c.prop] = e * f[c.prop].value + f[c.prop].unit;
                        },
                        duration: b.duration,
                        easing: b.easing,
                        complete: function() {
                            b.autoHeight || b.toShow.css("height", ""),
                            b.toShow.css({
                                width: i,
                                overflow: d
                            }),
                            b.complete();
                        }
                    });
                }
            },
            bounceslide: function(a) {
                this.slide(a, {
                    easing: a.down ? "easeOutBounce" : "swing",
                    duration: a.down ? 1000 : 200
                });
            }
        }
    });
})(jQuery);
(function(a, b) {
    var c = 0;
    a.widget("ui.autocomplete", {
        options: {
            appendTo: "body",
            autoFocus: !1,
            delay: 300,
            minLength: 1,
            position: {
                my: "left top",
                at: "left bottom",
                collision: "none"
            },
            source: null 
        },
        pending: 0,
        _create: function() {
            var b = this, c = this.element[0].ownerDocument, d;
            this.element.addClass("ui-autocomplete-input").attr("autocomplete", "off").attr({
                role: "textbox",
                "aria-autocomplete": "list",
                "aria-haspopup": "true"
            }).bind("keydown.autocomplete", function(c) {
                if (!b.options.disabled && !b.element.propAttr("readOnly")) {
                    d = !1;
                    var e = a.ui.keyCode;
                    switch (c.keyCode) {
                    case e.PAGE_UP:
                        b._move("previousPage", c);
                        break;
                    case e.PAGE_DOWN:
                        b._move("nextPage", c);
                        break;
                    case e.UP:
                        b._move("previous", c),
                        c.preventDefault();
                        break;
                    case e.DOWN:
                        b._move("next", c),
                        c.preventDefault();
                        break;
                    case e.ENTER:
                    case e.NUMPAD_ENTER:
                        b.menu.active && (d = !0,
                        c.preventDefault());
                    case e.TAB:
                        if (!b.menu.active) {
                            return;
                        }
                        b.menu.select(c);
                        break;
                    case e.ESCAPE:
                        b.element.val(b.term),
                        b.close(c);
                        break;
                    default:
                        clearTimeout(b.searching),
                        b.searching = setTimeout(function() {
                            b.term != b.element.val() && (b.selectedItem = null ,
                            b.search(null , c));
                        }, b.options.delay);
                    }
                }
            }).bind("keypress.autocomplete", function(a) {
                d && (d = !1,
                a.preventDefault());
            }).bind("focus.autocomplete", function() {
                b.options.disabled || (b.selectedItem = null ,
                b.previous = b.element.val());
            }).bind("blur.autocomplete", function(a) {
                b.options.disabled || (clearTimeout(b.searching),
                b.closing = setTimeout(function() {
                    b.close(a),
                    b._change(a);
                }, 150));
            }),
            this._initSource(),
            this.response = function() {
                return b._response.apply(b, arguments);
            }
            ,
            this.menu = a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo || "body", c)[0]).mousedown(function(c) {
                var d = b.menu.element[0];
                a(c.target).closest(".ui-menu-item").length || setTimeout(function() {
                    a(document).one("mousedown", function(c) {
                        c.target !== b.element[0] && c.target !== d && !a.ui.contains(d, c.target) && b.close();
                    });
                }, 1),
                setTimeout(function() {
                    clearTimeout(b.closing);
                }, 13);
            }).menu({
                focus: function(a, c) {
                    var d = c.item.data("item.autocomplete");
                    !1 !== b._trigger("focus", a, {
                        item: d
                    }) && /^key/.test(a.originalEvent.type) && b.element.val(d.value);
                },
                selected: function(a, d) {
                    var e = d.item.data("item.autocomplete")
                      , f = b.previous;
                    b.element[0] !== c.activeElement && (b.element.focus(),
                    b.previous = f,
                    setTimeout(function() {
                        b.previous = f,
                        b.selectedItem = e;
                    }, 1)),
                    !1 !== b._trigger("select", a, {
                        item: e
                    }) && b.element.val(e.value),
                    b.term = b.element.val(),
                    b.close(a),
                    b.selectedItem = e;
                },
                blur: function(a, c) {
                    b.menu.element.is(":visible") && b.element.val() !== b.term && b.element.val(b.term);
                }
            }).zIndex(this.element.zIndex() + 1).css({
                top: 0,
                left: 0
            }).hide().data("menu"),
            a.fn.bgiframe && this.menu.element.bgiframe(),
            b.beforeunloadHandler = function() {
                b.element.removeAttr("autocomplete");
            }
            ,
            a(window).bind("beforeunload", b.beforeunloadHandler);
        },
        destroy: function() {
            this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),
            this.menu.element.remove(),
            a(window).unbind("beforeunload", this.beforeunloadHandler),
            a.Widget.prototype.destroy.call(this);
        },
        _setOption: function(b, c) {
            a.Widget.prototype._setOption.apply(this, arguments),
            b === "source" && this._initSource(),
            b === "appendTo" && this.menu.element.appendTo(a(c || "body", this.element[0].ownerDocument)[0]),
            b === "disabled" && c && this.xhr && this.xhr.abort();
        },
        _initSource: function() {
            var b = this, d, e;
            a.isArray(this.options.source) ? (d = this.options.source,
            this.source = function(b, c) {
                c(a.ui.autocomplete.filter(d, b.term));
            }
            ) : typeof this.options.source == "string" ? (e = this.options.source,
            this.source = function(d, f) {
                b.xhr && b.xhr.abort(),
                b.xhr = a.ajax({
                    url: e,
                    data: d,
                    dataType: "json",
                    context: {
                        autocompleteRequest: ++c
                    },
                    success: function(a, b) {
                        this.autocompleteRequest === c && f(a);
                    },
                    error: function() {
                        this.autocompleteRequest === c && f([]);
                    }
                });
            }
            ) : this.source = this.options.source;
        },
        search: function(a, b) {
            a = a != null  ? a : this.element.val(),
            this.term = this.element.val();
            if (a.length < this.options.minLength) {
                return this.close(b);
            }
            clearTimeout(this.closing);
            if (this._trigger("search", b) !== !1) {
                return this._search(a);
            }
        },
        _search: function(a) {
            this.pending++,
            this.element.addClass("ui-autocomplete-loading"),
            this.source({
                term: a
            }, this.response);
        },
        _response: function(a) {
            !this.options.disabled && a && a.length ? (a = this._normalize(a),
            this._suggest(a),
            this._trigger("open")) : this.close(),
            this.pending--,
            this.pending || this.element.removeClass("ui-autocomplete-loading");
        },
        close: function(a) {
            clearTimeout(this.closing),
            this.menu.element.is(":visible") && (this.menu.element.hide(),
            this.menu.deactivate(),
            this._trigger("close", a));
        },
        _change: function(a) {
            this.previous !== this.element.val() && this._trigger("change", a, {
                item: this.selectedItem
            });
        },
        _normalize: function(b) {
            if (b.length && b[0].label && b[0].value) {
                return b;
            }
            return a.map(b, function(b) {
                if (typeof b == "string") {
                    return {
                        label: b,
                        value: b
                    };
                }
                return a.extend({
                    label: b.label || b.value,
                    value: b.value || b.label
                }, b);
            });
        },
        _suggest: function(b) {
            var c = this.menu.element.empty().zIndex(this.element.zIndex() + 1);
            this._renderMenu(c, b),
            this.menu.deactivate(),
            this.menu.refresh(),
            c.show(),
            this._resizeMenu(),
            c.position(a.extend({
                of: this.element
            }, this.options.position)),
            this.options.autoFocus && this.menu.next(new a.Event("mouseover"));
        },
        _resizeMenu: function() {
            var a = this.menu.element;
            a.outerWidth(Math.max(a.width("").outerWidth() + 1, this.element.outerWidth()));
        },
        _renderMenu: function(b, c) {
            var d = this;
            a.each(c, function(a, c) {
                d._renderItem(b, c);
            });
        },
        _renderItem: function(b, c) {
            return a("<li></li>").data("item.autocomplete", c).append(a("<a></a>").text(c.label)).appendTo(b);
        },
        _move: function(a, b) {
            if (!this.menu.element.is(":visible")) {
                this.search(null , b);
            } else {
                if (this.menu.first() && /^previous/.test(a) || this.menu.last() && /^next/.test(a)) {
                    this.element.val(this.term),
                    this.menu.deactivate();
                    return;
                }
                this.menu[a](b);
            }
        },
        widget: function() {
            return this.menu.element;
        }
    }),
    a.extend(a.ui.autocomplete, {
        escapeRegex: function(a) {
            return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        },
        filter: function(b, c) {
            var d = new RegExp(a.ui.autocomplete.escapeRegex(c),"i");
            return a.grep(b, function(a) {
                return d.test(a.label || a.value || a);
            });
        }
    });
})(jQuery),
function(a) {
    a.widget("ui.menu", {
        _create: function() {
            var b = this;
            this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({
                role: "listbox",
                "aria-activedescendant": "ui-active-menuitem"
            }).click(function(c) {
                !a(c.target).closest(".ui-menu-item a").length || (c.preventDefault(),
                b.select(c));
            }),
            this.refresh();
        },
        refresh: function() {
            var b = this
              , c = this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role", "menuitem");
            c.children("a").addClass("ui-corner-all").attr("tabindex", -1).mouseenter(function(c) {
                b.activate(c, a(this).parent());
            }).mouseleave(function() {
                b.deactivate();
            });
        },
        activate: function(a, b) {
            this.deactivate();
            if (this.hasScroll()) {
                var c = b.offset().top - this.element.offset().top
                  , d = this.element.scrollTop()
                  , e = this.element.height();
                c < 0 ? this.element.scrollTop(d + c) : c >= e && this.element.scrollTop(d + c - e + b.height());
            }
            this.active = b.eq(0).children("a").addClass("ui-state-hover").attr("id", "ui-active-menuitem").end(),
            this._trigger("focus", a, {
                item: b
            });
        },
        deactivate: function() {
            !this.active || (this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),
            this._trigger("blur"),
            this.active = null );
        },
        next: function(a) {
            this.move("next", ".ui-menu-item:first", a);
        },
        previous: function(a) {
            this.move("prev", ".ui-menu-item:last", a);
        },
        first: function() {
            return this.active && !this.active.prevAll(".ui-menu-item").length;
        },
        last: function() {
            return this.active && !this.active.nextAll(".ui-menu-item").length;
        },
        move: function(a, b, c) {
            if (!this.active) {
                this.activate(c, this.element.children(b));
            } else {
                var d = this.active[a + "All"](".ui-menu-item").eq(0);
                d.length ? this.activate(c, d) : this.activate(c, this.element.children(b));
            }
        },
        nextPage: function(b) {
            if (this.hasScroll()) {
                if (!this.active || this.last()) {
                    this.activate(b, this.element.children(".ui-menu-item:first"));
                    return;
                }
                var c = this.active.offset().top
                  , d = this.element.height()
                  , e = this.element.children(".ui-menu-item").filter(function() {
                    var b = a(this).offset().top - c - d + a(this).height();
                    return b < 10 && b > -10;
                });
                e.length || (e = this.element.children(".ui-menu-item:last")),
                this.activate(b, e);
            } else {
                this.activate(b, this.element.children(".ui-menu-item").filter(!this.active || this.last() ? ":first" : ":last"));
            }
        },
        previousPage: function(b) {
            if (this.hasScroll()) {
                if (!this.active || this.first()) {
                    this.activate(b, this.element.children(".ui-menu-item:last"));
                    return;
                }
                var c = this.active.offset().top
                  , d = this.element.height();
                result = this.element.children(".ui-menu-item").filter(function() {
                    var b = a(this).offset().top - c + d - a(this).height();
                    return b < 10 && b > -10;
                }),
                result.length || (result = this.element.children(".ui-menu-item:first")),
                this.activate(b, result);
            } else {
                this.activate(b, this.element.children(".ui-menu-item").filter(!this.active || this.first() ? ":last" : ":first"));
            }
        },
        hasScroll: function() {
            return this.element.height() < this.element[a.fn.prop ? "prop" : "attr"]("scrollHeight");
        },
        select: function(a) {
            this._trigger("selected", a, {
                item: this.active
            });
        }
    });
}(jQuery);
(function(a, b) {
    var c, d, e, f, g = "ui-button ui-widget ui-state-default ui-corner-all", h = "ui-state-hover ui-state-active ", i = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", j = function() {
        var b = a(this).find(":ui-button");
        setTimeout(function() {
            b.button("refresh");
        }, 1);
    }
    , k = function(b) {
        var c = b.name
          , d = b.form
          , e = a([]);
        c && (d ? e = a(d).find("[name='" + c + "']") : e = a("[name='" + c + "']", b.ownerDocument).filter(function() {
            return !this.form;
        }));
        return e;
    }
    ;
    a.widget("ui.button", {
        options: {
            disabled: null ,
            text: !0,
            label: null ,
            icons: {
                primary: null ,
                secondary: null 
            }
        },
        _create: function() {
            this.element.closest("form").unbind("reset.button").bind("reset.button", j),
            typeof this.options.disabled != "boolean" ? this.options.disabled = !!this.element.propAttr("disabled") : this.element.propAttr("disabled", this.options.disabled),
            this._determineButtonType(),
            this.hasTitle = !!this.buttonElement.attr("title");
            var b = this
              , h = this.options
              , i = this.type === "checkbox" || this.type === "radio"
              , l = "ui-state-hover" + (i ? "" : " ui-state-active")
              , m = "ui-state-focus";
            h.label === null  && (h.label = this.buttonElement.html()),
            this.buttonElement.addClass(g).attr("role", "button").bind("mouseenter.button", function() {
                h.disabled || (a(this).addClass("ui-state-hover"),
                this === c && a(this).addClass("ui-state-active"));
            }).bind("mouseleave.button", function() {
                h.disabled || a(this).removeClass(l);
            }).bind("click.button", function(a) {
                h.disabled && (a.preventDefault(),
                a.stopImmediatePropagation());
            }),
            this.element.bind("focus.button", function() {
                b.buttonElement.addClass(m);
            }).bind("blur.button", function() {
                b.buttonElement.removeClass(m);
            }),
            i && (this.element.bind("change.button", function() {
                f || b.refresh();
            }),
            this.buttonElement.bind("mousedown.button", function(a) {
                h.disabled || (f = !1,
                d = a.pageX,
                e = a.pageY);
            }).bind("mouseup.button", function(a) {
                !h.disabled && (d !== a.pageX || e !== a.pageY) && (f = !0);
            })),
            this.type === "checkbox" ? this.buttonElement.bind("click.button", function() {
                if (h.disabled || f) {
                    return !1;
                }
                a(this).toggleClass("ui-state-active"),
                b.buttonElement.attr("aria-pressed", b.element[0].checked);
            }) : this.type === "radio" ? this.buttonElement.bind("click.button", function() {
                if (h.disabled || f) {
                    return !1;
                }
                a(this).addClass("ui-state-active"),
                b.buttonElement.attr("aria-pressed", "true");
                var c = b.element[0];
                k(c).not(c).map(function() {
                    return a(this).button("widget")[0];
                }).removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : (this.buttonElement.bind("mousedown.button", function() {
                if (h.disabled) {
                    return !1;
                }
                a(this).addClass("ui-state-active"),
                c = this,
                a(document).one("mouseup", function() {
                    c = null ;
                });
            }).bind("mouseup.button", function() {
                if (h.disabled) {
                    return !1;
                }
                a(this).removeClass("ui-state-active");
            }).bind("keydown.button", function(b) {
                if (h.disabled) {
                    return !1;
                }
                (b.keyCode == a.ui.keyCode.SPACE || b.keyCode == a.ui.keyCode.ENTER) && a(this).addClass("ui-state-active");
            }).bind("keyup.button", function() {
                a(this).removeClass("ui-state-active");
            }),
            this.buttonElement.is("a") && this.buttonElement.keyup(function(b) {
                b.keyCode === a.ui.keyCode.SPACE && a(this).click();
            })),
            this._setOption("disabled", h.disabled),
            this._resetButton();
        },
        _determineButtonType: function() {
            this.element.is(":checkbox") ? this.type = "checkbox" : this.element.is(":radio") ? this.type = "radio" : this.element.is("input") ? this.type = "input" : this.type = "button";
            if (this.type === "checkbox" || this.type === "radio") {
                var a = this.element.parents().filter(":last")
                  , b = "label[for='" + this.element.attr("id") + "']";
                this.buttonElement = a.find(b),
                this.buttonElement.length || (a = a.length ? a.siblings() : this.element.siblings(),
                this.buttonElement = a.filter(b),
                this.buttonElement.length || (this.buttonElement = a.find(b))),
                this.element.addClass("ui-helper-hidden-accessible");
                var c = this.element.is(":checked");
                c && this.buttonElement.addClass("ui-state-active"),
                this.buttonElement.attr("aria-pressed", c);
            } else {
                this.buttonElement = this.element;
            }
        },
        widget: function() {
            return this.buttonElement;
        },
        destroy: function() {
            this.element.removeClass("ui-helper-hidden-accessible"),
            this.buttonElement.removeClass(g + " " + h + " " + i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),
            this.hasTitle || this.buttonElement.removeAttr("title"),
            a.Widget.prototype.destroy.call(this);
        },
        _setOption: function(b, c) {
            a.Widget.prototype._setOption.apply(this, arguments);
            b === "disabled" ? c ? this.element.propAttr("disabled", !0) : this.element.propAttr("disabled", !1) : this._resetButton();
        },
        refresh: function() {
            var b = this.element.is(":disabled");
            b !== this.options.disabled && this._setOption("disabled", b),
            this.type === "radio" ? k(this.element[0]).each(function() {
                a(this).is(":checked") ? a(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false");
            }) : this.type === "checkbox" && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"));
        },
        _resetButton: function() {
            if (this.type === "input") {
                this.options.label && this.element.val(this.options.label);
            } else {
                var b = this.buttonElement.removeClass(i)
                  , c = a("<span></span>", this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text()
                  , d = this.options.icons
                  , e = d.primary && d.secondary
                  , f = [];
                d.primary || d.secondary ? (this.options.text && f.push("ui-button-text-icon" + (e ? "s" : d.primary ? "-primary" : "-secondary")),
                d.primary && b.prepend("<span class='ui-button-icon-primary ui-icon " + d.primary + "'></span>"),
                d.secondary && b.append("<span class='ui-button-icon-secondary ui-icon " + d.secondary + "'></span>"),
                this.options.text || (f.push(e ? "ui-button-icons-only" : "ui-button-icon-only"),
                this.hasTitle || b.attr("title", c))) : f.push("ui-button-text-only"),
                b.addClass(f.join(" "));
            }
        }
    }),
    a.widget("ui.buttonset", {
        options: {
            items: ":button, :submit, :reset, :checkbox, :radio, a, :data(button)"
        },
        _create: function() {
            this.element.addClass("ui-buttonset");
        },
        _init: function() {
            this.refresh();
        },
        _setOption: function(b, c) {
            b === "disabled" && this.buttons.button("option", b, c),
            a.Widget.prototype._setOption.apply(this, arguments);
        },
        refresh: function() {
            var b = this.element.css("direction") === "rtl";
            this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function() {
                return a(this).button("widget")[0];
            }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(b ? "ui-corner-left" : "ui-corner-right").end().end();
        },
        destroy: function() {
            this.element.removeClass("ui-buttonset"),
            this.buttons.map(function() {
                return a(this).button("widget")[0];
            }).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),
            a.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery);
(function(a, b) {
    var c = "ui-dialog ui-widget ui-widget-content ui-corner-all "
      , d = {
        buttons: !0,
        height: !0,
        maxHeight: !0,
        maxWidth: !0,
        minHeight: !0,
        minWidth: !0,
        width: !0
    }
      , e = {
        maxHeight: !0,
        maxWidth: !0,
        minHeight: !0,
        minWidth: !0
    }
      , f = a.attrFn || {
        val: !0,
        css: !0,
        html: !0,
        text: !0,
        data: !0,
        width: !0,
        height: !0,
        offset: !0,
        click: !0
    };
    a.widget("ui.dialog", {
        options: {
            autoOpen: !0,
            buttons: {},
            closeOnEscape: !0,
            closeText: "close",
            dialogClass: "",
            draggable: !0,
            hide: null ,
            height: "auto",
            maxHeight: !1,
            maxWidth: !1,
            minHeight: 150,
            minWidth: 150,
            modal: !1,
            position: {
                my: "center",
                at: "center",
                collision: "fit",
                using: function(b) {
                    var c = a(this).css(b).offset().top;
                    c < 0 && a(this).css("top", b.top - c);
                }
            },
            resizable: !0,
            show: null ,
            stack: !0,
            title: "",
            width: 300,
            zIndex: 1000
        },
        _create: function() {
            this.originalTitle = this.element.attr("title"),
            typeof this.originalTitle != "string" && (this.originalTitle = ""),
            this.options.title = this.options.title || this.originalTitle;
            var b = this
              , d = b.options
              , e = d.title || "&#160;"
              , f = a.ui.dialog.getTitleId(b.element)
              , g = (b.uiDialog = a("<div></div>")).appendTo(document.body).hide().addClass(c + d.dialogClass).css({
                zIndex: d.zIndex
            }).attr("tabIndex", -1).css("outline", 0).keydown(function(c) {
                d.closeOnEscape && !c.isDefaultPrevented() && c.keyCode && c.keyCode === a.ui.keyCode.ESCAPE && (b.close(c),
                c.preventDefault());
            }).attr({
                role: "dialog",
                "aria-labelledby": f
            }).mousedown(function(a) {
                b.moveToTop(!1, a);
            })
              , h = b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g)
              , i = (b.uiDialogTitlebar = a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)
              , j = a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role", "button").hover(function() {
                j.addClass("ui-state-hover");
            }, function() {
                j.removeClass("ui-state-hover");
            }).focus(function() {
                j.addClass("ui-state-focus");
            }).blur(function() {
                j.removeClass("ui-state-focus");
            }).click(function(a) {
                b.close(a);
                return !1;
            }).appendTo(i)
              , k = (b.uiDialogTitlebarCloseText = a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j)
              , l = a("<span></span>").addClass("ui-dialog-title").attr("id", f).html(e).prependTo(i);
            a.isFunction(d.beforeclose) && !a.isFunction(d.beforeClose) && (d.beforeClose = d.beforeclose),
            i.find("*").add(i).disableSelection(),
            d.draggable && a.fn.draggable && b._makeDraggable(),
            d.resizable && a.fn.resizable && b._makeResizable(),
            b._createButtons(d.buttons),
            b._isOpen = !1,
            a.fn.bgiframe && g.bgiframe();
        },
        _init: function() {
            this.options.autoOpen && this.open();
        },
        destroy: function() {
            var a = this;
            a.overlay && a.overlay.destroy(),
            a.uiDialog.hide(),
            a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),
            a.uiDialog.remove(),
            a.originalTitle && a.element.attr("title", a.originalTitle);
            return a;
        },
        widget: function() {
            return this.uiDialog;
        },
        close: function(b) {
            var c = this, d, e;
            if (!1 !== c._trigger("beforeClose", b)) {
                c.overlay && c.overlay.destroy(),
                c.uiDialog.unbind("keypress.ui-dialog"),
                c._isOpen = !1,
                c.options.hide ? c.uiDialog.hide(c.options.hide, function() {
                    c._trigger("close", b);
                }) : (c.uiDialog.hide(),
                c._trigger("close", b)),
                a.ui.dialog.overlay.resize(),
                c.options.modal && (d = 0,
                a(".ui-dialog").each(function() {
                    this !== c.uiDialog[0] && (e = a(this).css("z-index"),
                    isNaN(e) || (d = Math.max(d, e)));
                }),
                a.ui.dialog.maxZ = d);
                return c;
            }
        },
        isOpen: function() {
            return this._isOpen;
        },
        moveToTop: function(b, c) {
            var d = this, e = d.options, f;
            if (e.modal && !b || !e.stack && !e.modal) {
                return d._trigger("focus", c);
            }
            e.zIndex > a.ui.dialog.maxZ && (a.ui.dialog.maxZ = e.zIndex),
            d.overlay && (a.ui.dialog.maxZ += 1,
            d.overlay.$el.css("z-index", a.ui.dialog.overlay.maxZ = a.ui.dialog.maxZ)),
            f = {
                scrollTop: d.element.scrollTop(),
                scrollLeft: d.element.scrollLeft()
            },
            a.ui.dialog.maxZ += 1,
            d.uiDialog.css("z-index", a.ui.dialog.maxZ),
            d.element.attr(f),
            d._trigger("focus", c);
            return d;
        },
        open: function() {
            if (!this._isOpen) {
                var b = this
                  , c = b.options
                  , d = b.uiDialog;
                b.overlay = c.modal ? new a.ui.dialog.overlay(b) : null ,
                b._size(),
                b._position(c.position),
                d.show(c.show),
                b.moveToTop(!0),
                c.modal && d.bind("keydown.ui-dialog", function(b) {
                    if (b.keyCode === a.ui.keyCode.TAB) {
                        var c = a(":tabbable", this)
                          , d = c.filter(":first")
                          , e = c.filter(":last");
                        if (b.target === e[0] && !b.shiftKey) {
                            d.focus(1);
                            return !1;
                        }
                        if (b.target === d[0] && b.shiftKey) {
                            e.focus(1);
                            return !1;
                        }
                    }
                }),
                a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),
                b._isOpen = !0,
                b._trigger("open");
                return b;
            }
        },
        _createButtons: function(b) {
            var c = this
              , d = !1
              , e = a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix")
              , g = a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);
            c.uiDialog.find(".ui-dialog-buttonpane").remove(),
            typeof b == "object" && b !== null  && a.each(b, function() {
                return !(d = !0);
            }),
            d && (a.each(b, function(b, d) {
                d = a.isFunction(d) ? {
                    click: d,
                    text: b
                } : d;
                var e = a('<button type="button"></button>').click(function() {
                    d.click.apply(c.element[0], arguments);
                }).appendTo(g);
                a.each(d, function(a, b) {
                    a !== "click" && (a in f ? e[a](b) : e.attr(a, b));
                }),
                a.fn.button && e.button();
            }),
            e.appendTo(c.uiDialog));
        },
        _makeDraggable: function() {
            function f(a) {
                return {
                    position: a.position,
                    offset: a.offset
                };
            }
            var b = this, c = b.options, d = a(document), e;
            b.uiDialog.draggable({
                cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
                handle: ".ui-dialog-titlebar",
                containment: "document",
                start: function(d, g) {
                    e = c.height === "auto" ? "auto" : a(this).height(),
                    a(this).height(a(this).height()).addClass("ui-dialog-dragging"),
                    b._trigger("dragStart", d, f(g));
                },
                drag: function(a, c) {
                    b._trigger("drag", a, f(c));
                },
                stop: function(g, h) {
                    c.position = [h.position.left - d.scrollLeft(), h.position.top - d.scrollTop()],
                    a(this).removeClass("ui-dialog-dragging").height(e),
                    b._trigger("dragStop", g, f(h)),
                    a.ui.dialog.overlay.resize();
                }
            });
        },
        _makeResizable: function(c) {
            function h(a) {
                return {
                    originalPosition: a.originalPosition,
                    originalSize: a.originalSize,
                    position: a.position,
                    size: a.size
                };
            }
            c = c === b ? this.options.resizable : c;
            var d = this
              , e = d.options
              , f = d.uiDialog.css("position")
              , g = typeof c == "string" ? c : "n,e,s,w,se,sw,ne,nw";
            d.uiDialog.resizable({
                cancel: ".ui-dialog-content",
                containment: "document",
                alsoResize: d.element,
                maxWidth: e.maxWidth,
                maxHeight: e.maxHeight,
                minWidth: e.minWidth,
                minHeight: d._minHeight(),
                handles: g,
                start: function(b, c) {
                    a(this).addClass("ui-dialog-resizing"),
                    d._trigger("resizeStart", b, h(c));
                },
                resize: function(a, b) {
                    d._trigger("resize", a, h(b));
                },
                stop: function(b, c) {
                    a(this).removeClass("ui-dialog-resizing"),
                    e.height = a(this).height(),
                    e.width = a(this).width(),
                    d._trigger("resizeStop", b, h(c)),
                    a.ui.dialog.overlay.resize();
                }
            }).css("position", f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se");
        },
        _minHeight: function() {
            var a = this.options;
            return a.height === "auto" ? a.minHeight : Math.min(a.minHeight, a.height);
        },
        _position: function(b) {
            var c = [], d = [0, 0], e;
            if (b) {
                if (typeof b == "string" || typeof b == "object" && "0" in b) {
                    c = b.split ? b.split(" ") : [b[0], b[1]],
                    c.length === 1 && (c[1] = c[0]),
                    a.each(["left", "top"], function(a, b) {
                        +c[a] === c[a] && (d[a] = c[a],
                        c[a] = b);
                    }),
                    b = {
                        my: c.join(" "),
                        at: c.join(" "),
                        offset: d.join(" ")
                    };
                }
                b = a.extend({}, a.ui.dialog.prototype.options.position, b);
            } else {
                b = a.ui.dialog.prototype.options.position;
            }
            e = this.uiDialog.is(":visible"),
            e || this.uiDialog.show(),
            this.uiDialog.css({
                top: 0,
                left: 0
            }).position(a.extend({
                of: window
            }, b)),
            e || this.uiDialog.hide();
        },
        _setOptions: function(b) {
            var c = this
              , f = {}
              , g = !1;
            a.each(b, function(a, b) {
                c._setOption(a, b),
                a in d && (g = !0),
                a in e && (f[a] = b);
            }),
            g && this._size(),
            this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", f);
        },
        _setOption: function(b, d) {
            var e = this
              , f = e.uiDialog;
            switch (b) {
            case "beforeclose":
                b = "beforeClose";
                break;
            case "buttons":
                e._createButtons(d);
                break;
            case "closeText":
                e.uiDialogTitlebarCloseText.text("" + d);
                break;
            case "dialogClass":
                f.removeClass(e.options.dialogClass).addClass(c + d);
                break;
            case "disabled":
                d ? f.addClass("ui-dialog-disabled") : f.removeClass("ui-dialog-disabled");
                break;
            case "draggable":
                var g = f.is(":data(draggable)");
                g && !d && f.draggable("destroy"),
                !g && d && e._makeDraggable();
                break;
            case "position":
                e._position(d);
                break;
            case "resizable":
                var h = f.is(":data(resizable)");
                h && !d && f.resizable("destroy"),
                h && typeof d == "string" && f.resizable("option", "handles", d),
                !h && d !== !1 && e._makeResizable(d);
                break;
            case "title":
                a(".ui-dialog-title", e.uiDialogTitlebar).html("" + (d || "&#160;"));
            }
            a.Widget.prototype._setOption.apply(e, arguments);
        },
        _size: function() {
            var b = this.options, c, d, e = this.uiDialog.is(":visible");
            this.element.show().css({
                width: "auto",
                minHeight: 0,
                height: 0
            }),
            b.minWidth > b.width && (b.width = b.minWidth),
            c = this.uiDialog.css({
                height: "auto",
                width: b.width
            }).height(),
            d = Math.max(0, b.minHeight - c);
            if (b.height === "auto") {
                if (a.support.minHeight) {
                    this.element.css({
                        minHeight: d,
                        height: "auto"
                    });
                } else {
                    this.uiDialog.show();
                    var f = this.element.css("height", "auto").height();
                    e || this.uiDialog.hide(),
                    this.element.height(Math.max(f, d));
                }
            } else {
                this.element.height(Math.max(b.height - c, 0));
            }
            this.uiDialog.is(":data(resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight());
        }
    }),
    a.extend(a.ui.dialog, {
        version: "1.8.18",
        uuid: 0,
        maxZ: 0,
        getTitleId: function(a) {
            var b = a.attr("id");
            b || (this.uuid += 1,
            b = this.uuid);
            return "ui-dialog-title-" + b;
        },
        overlay: function(b) {
            this.$el = a.ui.dialog.overlay.create(b);
        }
    }),
    a.extend(a.ui.dialog.overlay, {
        instances: [],
        oldInstances: [],
        maxZ: 0,
        events: a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","), function(a) {
            return a + ".dialog-overlay";
        }).join(" "),
        create: function(b) {
            this.instances.length === 0 && (setTimeout(function() {
                a.ui.dialog.overlay.instances.length && a(document).bind(a.ui.dialog.overlay.events, function(b) {
                    if (a(b.target).zIndex() < a.ui.dialog.overlay.maxZ) {
                        return !1;
                    }
                });
            }, 1),
            a(document).bind("keydown.dialog-overlay", function(c) {
                b.options.closeOnEscape && !c.isDefaultPrevented() && c.keyCode && c.keyCode === a.ui.keyCode.ESCAPE && (b.close(c),
                c.preventDefault());
            }),
            a(window).bind("resize.dialog-overlay", a.ui.dialog.overlay.resize));
            var c = (this.oldInstances.pop() || a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({
                width: this.width(),
                height: this.height()
            });
            a.fn.bgiframe && c.bgiframe(),
            this.instances.push(c);
            return c;
        },
        destroy: function(b) {
            var c = a.inArray(b, this.instances);
            c != -1 && this.oldInstances.push(this.instances.splice(c, 1)[0]),
            this.instances.length === 0 && a([document, window]).unbind(".dialog-overlay"),
            b.remove();
            var d = 0;
            a.each(this.instances, function() {
                d = Math.max(d, this.css("z-index"));
            }),
            this.maxZ = d;
        },
        height: function() {
            var b, c;
            if (a.browser.msie && a.browser.version < 7) {
                b = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight),
                c = Math.max(document.documentElement.offsetHeight, document.body.offsetHeight);
                return b < c ? a(window).height() + "px" : b + "px";
            }
            return a(document).height() + "px";
        },
        width: function() {
            var b, c;
            if (a.browser.msie) {
                b = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth),
                c = Math.max(document.documentElement.offsetWidth, document.body.offsetWidth);
                return b < c ? a(window).width() + "px" : b + "px";
            }
            return a(document).width() + "px";
        },
        resize: function() {
            var b = a([]);
            a.each(a.ui.dialog.overlay.instances, function() {
                b = b.add(this);
            }),
            b.css({
                width: 0,
                height: 0
            }).css({
                width: a.ui.dialog.overlay.width(),
                height: a.ui.dialog.overlay.height()
            });
        }
    }),
    a.extend(a.ui.dialog.overlay.prototype, {
        destroy: function() {
            a.ui.dialog.overlay.destroy(this.$el);
        }
    });
})(jQuery);
(function(a, b) {
    var c = 5;
    a.widget("ui.slider", a.ui.mouse, {
        widgetEventPrefix: "slide",
        options: {
            animate: !1,
            distance: 0,
            max: 100,
            min: 0,
            orientation: "horizontal",
            range: !1,
            step: 1,
            value: 0,
            values: null 
        },
        _create: function() {
            var b = this
              , d = this.options
              , e = this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all")
              , f = "<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>"
              , g = d.values && d.values.length || 1
              , h = [];
            this._keySliding = !1,
            this._mouseSliding = !1,
            this._animateOff = !0,
            this._handleIndex = null ,
            this._detectOrientation(),
            this._mouseInit(),
            this.element.addClass("ui-slider ui-slider-" + this.orientation + " ui-widget" + " ui-widget-content" + " ui-corner-all" + (d.disabled ? " ui-slider-disabled ui-disabled" : "")),
            this.range = a([]),
            d.range && (d.range === !0 && (d.values || (d.values = [this._valueMin(), this._valueMin()]),
            d.values.length && d.values.length !== 2 && (d.values = [d.values[0], d.values[0]])),
            this.range = a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header" + (d.range === "min" || d.range === "max" ? " ui-slider-range-" + d.range : "")));
            for (var i = e.length; i < g; i += 1) {
                h.push(f);
            }
            this.handles = e.add(a(h.join("")).appendTo(b.element)),
            this.handle = this.handles.eq(0),
            this.handles.add(this.range).filter("a").click(function(a) {
                a.preventDefault();
            }).hover(function() {
                d.disabled || a(this).addClass("ui-state-hover");
            }, function() {
                a(this).removeClass("ui-state-hover");
            }).focus(function() {
                d.disabled ? a(this).blur() : (a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),
                a(this).addClass("ui-state-focus"));
            }).blur(function() {
                a(this).removeClass("ui-state-focus");
            }),
            this.handles.each(function(b) {
                a(this).data("index.ui-slider-handle", b);
            }),
            this.handles.keydown(function(d) {
                var e = a(this).data("index.ui-slider-handle"), f, g, h, i;
                if (!b.options.disabled) {
                    switch (d.keyCode) {
                    case a.ui.keyCode.HOME:
                    case a.ui.keyCode.END:
                    case a.ui.keyCode.PAGE_UP:
                    case a.ui.keyCode.PAGE_DOWN:
                    case a.ui.keyCode.UP:
                    case a.ui.keyCode.RIGHT:
                    case a.ui.keyCode.DOWN:
                    case a.ui.keyCode.LEFT:
                        d.preventDefault();
                        if (!b._keySliding) {
                            b._keySliding = !0,
                            a(this).addClass("ui-state-active"),
                            f = b._start(d, e);
                            if (f === !1) {
                                return;
                            }
                        }
                    }
                    i = b.options.step,
                    b.options.values && b.options.values.length ? g = h = b.values(e) : g = h = b.value();
                    switch (d.keyCode) {
                    case a.ui.keyCode.HOME:
                        h = b._valueMin();
                        break;
                    case a.ui.keyCode.END:
                        h = b._valueMax();
                        break;
                    case a.ui.keyCode.PAGE_UP:
                        h = b._trimAlignValue(g + (b._valueMax() - b._valueMin()) / c);
                        break;
                    case a.ui.keyCode.PAGE_DOWN:
                        h = b._trimAlignValue(g - (b._valueMax() - b._valueMin()) / c);
                        break;
                    case a.ui.keyCode.UP:
                    case a.ui.keyCode.RIGHT:
                        if (g === b._valueMax()) {
                            return;
                        }
                        h = b._trimAlignValue(g + i);
                        break;
                    case a.ui.keyCode.DOWN:
                    case a.ui.keyCode.LEFT:
                        if (g === b._valueMin()) {
                            return;
                        }
                        h = b._trimAlignValue(g - i);
                    }
                    b._slide(d, e, h);
                }
            }).keyup(function(c) {
                var d = a(this).data("index.ui-slider-handle");
                b._keySliding && (b._keySliding = !1,
                b._stop(c, d),
                b._change(c, d),
                a(this).removeClass("ui-state-active"));
            }),
            this._refreshValue(),
            this._animateOff = !1;
        },
        destroy: function() {
            this.handles.remove(),
            this.range.remove(),
            this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),
            this._mouseDestroy();
            return this;
        },
        _mouseCapture: function(b) {
            var c = this.options, d, e, f, g, h, i, j, k, l;
            if (c.disabled) {
                return !1;
            }
            this.elementSize = {
                width: this.element.outerWidth(),
                height: this.element.outerHeight()
            },
            this.elementOffset = this.element.offset(),
            d = {
                x: b.pageX,
                y: b.pageY
            },
            e = this._normValueFromMouse(d),
            f = this._valueMax() - this._valueMin() + 1,
            h = this,
            this.handles.each(function(b) {
                var c = Math.abs(e - h.values(b));
                f > c && (f = c,
                g = a(this),
                i = b);
            }),
            c.range === !0 && this.values(1) === c.min && (i += 1,
            g = a(this.handles[i])),
            j = this._start(b, i);
            if (j === !1) {
                return !1;
            }
            this._mouseSliding = !0,
            h._handleIndex = i,
            g.addClass("ui-state-active").focus(),
            k = g.offset(),
            l = !a(b.target).parents().andSelf().is(".ui-slider-handle"),
            this._clickOffset = l ? {
                left: 0,
                top: 0
            } : {
                left: b.pageX - k.left - g.width() / 2,
                top: b.pageY - k.top - g.height() / 2 - (parseInt(g.css("borderTopWidth"), 10) || 0) - (parseInt(g.css("borderBottomWidth"), 10) || 0) + (parseInt(g.css("marginTop"), 10) || 0)
            },
            this.handles.hasClass("ui-state-hover") || this._slide(b, i, e),
            this._animateOff = !0;
            return !0;
        },
        _mouseStart: function(a) {
            return !0;
        },
        _mouseDrag: function(a) {
            var b = {
                x: a.pageX,
                y: a.pageY
            }
              , c = this._normValueFromMouse(b);
            this._slide(a, this._handleIndex, c);
            return !1;
        },
        _mouseStop: function(a) {
            this.handles.removeClass("ui-state-active"),
            this._mouseSliding = !1,
            this._stop(a, this._handleIndex),
            this._change(a, this._handleIndex),
            this._handleIndex = null ,
            this._clickOffset = null ,
            this._animateOff = !1;
            return !1;
        },
        _detectOrientation: function() {
            this.orientation = this.options.orientation === "vertical" ? "vertical" : "horizontal";
        },
        _normValueFromMouse: function(a) {
            var b, c, d, e, f;
            this.orientation === "horizontal" ? (b = this.elementSize.width,
            c = a.x - this.elementOffset.left - (this._clickOffset ? this._clickOffset.left : 0)) : (b = this.elementSize.height,
            c = a.y - this.elementOffset.top - (this._clickOffset ? this._clickOffset.top : 0)),
            d = c / b,
            d > 1 && (d = 1),
            d < 0 && (d = 0),
            this.orientation === "vertical" && (d = 1 - d),
            e = this._valueMax() - this._valueMin(),
            f = this._valueMin() + d * e;
            return this._trimAlignValue(f);
        },
        _start: function(a, b) {
            var c = {
                handle: this.handles[b],
                value: this.value()
            };
            this.options.values && this.options.values.length && (c.value = this.values(b),
            c.values = this.values());
            return this._trigger("start", a, c);
        },
        _slide: function(a, b, c) {
            var d, e, f;
            this.options.values && this.options.values.length ? (d = this.values(b ? 0 : 1),
            this.options.values.length === 2 && this.options.range === !0 && (b === 0 && c > d || b === 1 && c < d) && (c = d),
            c !== this.values(b) && (e = this.values(),
            e[b] = c,
            f = this._trigger("slide", a, {
                handle: this.handles[b],
                value: c,
                values: e
            }),
            d = this.values(b ? 0 : 1),
            f !== !1 && this.values(b, c, !0))) : c !== this.value() && (f = this._trigger("slide", a, {
                handle: this.handles[b],
                value: c
            }),
            f !== !1 && this.value(c));
        },
        _stop: function(a, b) {
            var c = {
                handle: this.handles[b],
                value: this.value()
            };
            this.options.values && this.options.values.length && (c.value = this.values(b),
            c.values = this.values()),
            this._trigger("stop", a, c);
        },
        _change: function(a, b) {
            if (!this._keySliding && !this._mouseSliding) {
                var c = {
                    handle: this.handles[b],
                    value: this.value()
                };
                this.options.values && this.options.values.length && (c.value = this.values(b),
                c.values = this.values()),
                this._trigger("change", a, c);
            }
        },
        value: function(a) {
            if (arguments.length) {
                this.options.value = this._trimAlignValue(a),
                this._refreshValue(),
                this._change(null , 0);
            } else {
                return this._value();
            }
        },
        values: function(b, c) {
            var d, e, f;
            if (arguments.length > 1) {
                this.options.values[b] = this._trimAlignValue(c),
                this._refreshValue(),
                this._change(null , b);
            } else {
                if (!arguments.length) {
                    return this._values();
                }
                if (!a.isArray(arguments[0])) {
                    return this.options.values && this.options.values.length ? this._values(b) : this.value();
                }
                d = this.options.values,
                e = arguments[0];
                for (f = 0; f < d.length; f += 1) {
                    d[f] = this._trimAlignValue(e[f]),
                    this._change(null , f);
                }
                this._refreshValue();
            }
        },
        _setOption: function(b, c) {
            var d, e = 0;
            a.isArray(this.options.values) && (e = this.options.values.length),
            a.Widget.prototype._setOption.apply(this, arguments);
            switch (b) {
            case "disabled":
                c ? (this.handles.filter(".ui-state-focus").blur(),
                this.handles.removeClass("ui-state-hover"),
                this.handles.propAttr("disabled", !0),
                this.element.addClass("ui-disabled")) : (this.handles.propAttr("disabled", !1),
                this.element.removeClass("ui-disabled"));
                break;
            case "orientation":
                this._detectOrientation(),
                this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-" + this.orientation),
                this._refreshValue();
                break;
            case "value":
                this._animateOff = !0,
                this._refreshValue(),
                this._change(null , 0),
                this._animateOff = !1;
                break;
            case "values":
                this._animateOff = !0,
                this._refreshValue();
                for (d = 0; d < e; d += 1) {
                    this._change(null , d);
                }
                this._animateOff = !1;
            }
        },
        _value: function() {
            var a = this.options.value;
            a = this._trimAlignValue(a);
            return a;
        },
        _values: function(a) {
            var b, c, d;
            if (arguments.length) {
                b = this.options.values[a],
                b = this._trimAlignValue(b);
                return b;
            }
            c = this.options.values.slice();
            for (d = 0; d < c.length; d += 1) {
                c[d] = this._trimAlignValue(c[d]);
            }
            return c;
        },
        _trimAlignValue: function(a) {
            if (a <= this._valueMin()) {
                return this._valueMin();
            }
            if (a >= this._valueMax()) {
                return this._valueMax();
            }
            var b = this.options.step > 0 ? this.options.step : 1
              , c = (a - this._valueMin()) % b
              , d = a - c;
            Math.abs(c) * 2 >= b && (d += c > 0 ? b : -b);
            return parseFloat(d.toFixed(5));
        },
        _valueMin: function() {
            return this.options.min;
        },
        _valueMax: function() {
            return this.options.max;
        },
        _refreshValue: function() {
            var b = this.options.range, c = this.options, d = this, e = this._animateOff ? !1 : c.animate, f, g = {}, h, i, j, k;
            this.options.values && this.options.values.length ? this.handles.each(function(b, i) {
                f = (d.values(b) - d._valueMin()) / (d._valueMax() - d._valueMin()) * 100,
                g[d.orientation === "horizontal" ? "left" : "bottom"] = f + "%",
                a(this).stop(1, 1)[e ? "animate" : "css"](g, c.animate),
                d.options.range === !0 && (d.orientation === "horizontal" ? (b === 0 && d.range.stop(1, 1)[e ? "animate" : "css"]({
                    left: f + "%"
                }, c.animate),
                b === 1 && d.range[e ? "animate" : "css"]({
                    width: f - h + "%"
                }, {
                    queue: !1,
                    duration: c.animate
                })) : (b === 0 && d.range.stop(1, 1)[e ? "animate" : "css"]({
                    bottom: f + "%"
                }, c.animate),
                b === 1 && d.range[e ? "animate" : "css"]({
                    height: f - h + "%"
                }, {
                    queue: !1,
                    duration: c.animate
                }))),
                h = f;
            }) : (i = this.value(),
            j = this._valueMin(),
            k = this._valueMax(),
            f = k !== j ? (i - j) / (k - j) * 100 : 0,
            g[d.orientation === "horizontal" ? "left" : "bottom"] = f + "%",
            this.handle.stop(1, 1)[e ? "animate" : "css"](g, c.animate),
            b === "min" && this.orientation === "horizontal" && this.range.stop(1, 1)[e ? "animate" : "css"]({
                width: f + "%"
            }, c.animate),
            b === "max" && this.orientation === "horizontal" && this.range[e ? "animate" : "css"]({
                width: 100 - f + "%"
            }, {
                queue: !1,
                duration: c.animate
            }),
            b === "min" && this.orientation === "vertical" && this.range.stop(1, 1)[e ? "animate" : "css"]({
                height: f + "%"
            }, c.animate),
            b === "max" && this.orientation === "vertical" && this.range[e ? "animate" : "css"]({
                height: 100 - f + "%"
            }, {
                queue: !1,
                duration: c.animate
            }));
        }
    }),
    a.extend(a.ui.slider, {
        version: "1.8.18"
    });
})(jQuery);
(function(a, b) {
    function f() {
        return ++d;
    }
    function e() {
        return ++c;
    }
    var c = 0
      , d = 0;
    a.widget("ui.tabs", {
        options: {
            add: null ,
            ajaxOptions: null ,
            cache: !1,
            cookie: null ,
            collapsible: !1,
            disable: null ,
            disabled: [],
            enable: null ,
            event: "click",
            fx: null ,
            idPrefix: "ui-tabs-",
            load: null ,
            panelTemplate: "<div></div>",
            remove: null ,
            select: null ,
            show: null ,
            spinner: "<em>Loading&#8230;</em>",
            tabTemplate: "<li><a href='#{href}'><span>#{label}</span></a></li>"
        },
        _create: function() {
            this._tabify(!0);
        },
        _setOption: function(a, b) {
            if (a == "selected") {
                if (this.options.collapsible && b == this.options.selected) {
                    return;
                }
                this.select(b);
            } else {
                this.options[a] = b,
                this._tabify();
            }
        },
        _tabId: function(a) {
            return a.title && a.title.replace(/\s/g, "_").replace(/[^\w\u00c0-\uFFFF-]/g, "") || this.options.idPrefix + e();
        },
        _sanitizeSelector: function(a) {
            return a.replace(/:/g, "\\:");
        },
        _cookie: function() {
            var b = this.cookie || (this.cookie = this.options.cookie.name || "ui-tabs-" + f());
            return a.cookie.apply(null , [b].concat(a.makeArray(arguments)));
        },
        _ui: function(a, b) {
            return {
                tab: a,
                panel: b,
                index: this.anchors.index(a)
            };
        },
        _cleanup: function() {
            this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function() {
                var b = a(this);
                b.html(b.data("label.tabs")).removeData("label.tabs");
            });
        },
        _tabify: function(c) {
            function m(b, c) {
                b.css("display", ""),
                !a.support.opacity && c.opacity && b[0].style.removeAttribute("filter");
            }
            var d = this
              , e = this.options
              , f = /^#.+/;
            this.list = this.element.find("ol,ul").eq(0),
            this.lis = a(" > li:has(a[href])", this.list),
            this.anchors = this.lis.map(function() {
                return a("a", this)[0];
            }),
            this.panels = a([]),
            this.anchors.each(function(b, c) {
                var g = a(c).attr("href"), h = g.split("#")[0], i;
                h && (h === location.toString().split("#")[0] || (i = a("base")[0]) && h === i.href) && (g = c.hash,
                c.href = g);
                if (f.test(g)) {
                    d.panels = d.panels.add(d.element.find(d._sanitizeSelector(g)));
                } else {
                    if (g && g !== "#") {
                        a.data(c, "href.tabs", g),
                        a.data(c, "load.tabs", g.replace(/#.*$/, ""));
                        var j = d._tabId(c);
                        c.href = "#" + j;
                        var k = d.element.find("#" + j);
                        k.length || (k = a(e.panelTemplate).attr("id", j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b - 1] || d.list),
                        k.data("destroy.tabs", !0)),
                        d.panels = d.panels.add(k);
                    } else {
                        e.disabled.push(b);
                    }
                }
            }),
            c ? (this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),
            this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),
            this.lis.addClass("ui-state-default ui-corner-top"),
            this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),
            e.selected === b ? (location.hash && this.anchors.each(function(a, b) {
                if (b.hash == location.hash) {
                    e.selected = a;
                    return !1;
                }
            }),
            typeof e.selected != "number" && e.cookie && (e.selected = parseInt(d._cookie(), 10)),
            typeof e.selected != "number" && this.lis.filter(".ui-tabs-selected").length && (e.selected = this.lis.index(this.lis.filter(".ui-tabs-selected"))),
            e.selected = e.selected || (this.lis.length ? 0 : -1)) : e.selected === null  && (e.selected = -1),
            e.selected = e.selected >= 0 && this.anchors[e.selected] || e.selected < 0 ? e.selected : 0,
            e.disabled = a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"), function(a, b) {
                return d.lis.index(a);
            }))).sort(),
            a.inArray(e.selected, e.disabled) != -1 && e.disabled.splice(a.inArray(e.selected, e.disabled), 1),
            this.panels.addClass("ui-tabs-hide"),
            this.lis.removeClass("ui-tabs-selected ui-state-active"),
            e.selected >= 0 && this.anchors.length && (d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),
            this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),
            d.element.queue("tabs", function() {
                d._trigger("show", null , d._ui(d.anchors[e.selected], d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]));
            }),
            this.load(e.selected)),
            a(window).bind("unload", function() {
                d.lis.add(d.anchors).unbind(".tabs"),
                d.lis = d.anchors = d.panels = null ;
            })) : e.selected = this.lis.index(this.lis.filter(".ui-tabs-selected")),
            this.element[e.collapsible ? "addClass" : "removeClass"]("ui-tabs-collapsible"),
            e.cookie && this._cookie(e.selected, e.cookie);
            for (var g = 0, h; h = this.lis[g]; g++) {
                a(h)[a.inArray(g, e.disabled) != -1 && !a(h).hasClass("ui-tabs-selected") ? "addClass" : "removeClass"]("ui-state-disabled");
            }
            e.cache === !1 && this.anchors.removeData("cache.tabs"),
            this.lis.add(this.anchors).unbind(".tabs");
            if (e.event !== "mouseover") {
                var i = function(a, b) {
                    b.is(":not(.ui-state-disabled)") && b.addClass("ui-state-" + a);
                }
                  , j = function(a, b) {
                    b.removeClass("ui-state-" + a);
                }
                ;
                this.lis.bind("mouseover.tabs", function() {
                    i("hover", a(this));
                }),
                this.lis.bind("mouseout.tabs", function() {
                    j("hover", a(this));
                }),
                this.anchors.bind("focus.tabs", function() {
                    i("focus", a(this).closest("li"));
                }),
                this.anchors.bind("blur.tabs", function() {
                    j("focus", a(this).closest("li"));
                });
            }
            var k, l;
            e.fx && (a.isArray(e.fx) ? (k = e.fx[0],
            l = e.fx[1]) : k = l = e.fx);
            var n = l ? function(b, c) {
                a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),
                c.hide().removeClass("ui-tabs-hide").animate(l, l.duration || "normal", function() {
                    m(c, l),
                    d._trigger("show", null , d._ui(b, c[0]));
                });
            }
             : function(b, c) {
                a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),
                c.removeClass("ui-tabs-hide"),
                d._trigger("show", null , d._ui(b, c[0]));
            }
              , o = k ? function(a, b) {
                b.animate(k, k.duration || "normal", function() {
                    d.lis.removeClass("ui-tabs-selected ui-state-active"),
                    b.addClass("ui-tabs-hide"),
                    m(b, k),
                    d.element.dequeue("tabs");
                });
            }
             : function(a, b, c) {
                d.lis.removeClass("ui-tabs-selected ui-state-active"),
                b.addClass("ui-tabs-hide"),
                d.element.dequeue("tabs");
            }
            ;
            this.anchors.bind(e.event + ".tabs", function() {
                var b = this
                  , c = a(b).closest("li")
                  , f = d.panels.filter(":not(.ui-tabs-hide)")
                  , g = d.element.find(d._sanitizeSelector(b.hash));
                if (c.hasClass("ui-tabs-selected") && !e.collapsible || c.hasClass("ui-state-disabled") || c.hasClass("ui-state-processing") || d.panels.filter(":animated").length || d._trigger("select", null , d._ui(this, g[0])) === !1) {
                    this.blur();
                    return !1;
                }
                e.selected = d.anchors.index(this),
                d.abort();
                if (e.collapsible) {
                    if (c.hasClass("ui-tabs-selected")) {
                        e.selected = -1,
                        e.cookie && d._cookie(e.selected, e.cookie),
                        d.element.queue("tabs", function() {
                            o(b, f);
                        }).dequeue("tabs"),
                        this.blur();
                        return !1;
                    }
                    if (!f.length) {
                        e.cookie && d._cookie(e.selected, e.cookie),
                        d.element.queue("tabs", function() {
                            n(b, g);
                        }),
                        d.load(d.anchors.index(this)),
                        this.blur();
                        return !1;
                    }
                }
                e.cookie && d._cookie(e.selected, e.cookie);
                if (g.length) {
                    f.length && d.element.queue("tabs", function() {
                        o(b, f);
                    }),
                    d.element.queue("tabs", function() {
                        n(b, g);
                    }),
                    d.load(d.anchors.index(this));
                } else {
                    throw "jQuery UI Tabs: Mismatching fragment identifier.";
                }
                a.browser.msie && this.blur();
            }),
            this.anchors.bind("click.tabs", function() {
                return !1;
            });
        },
        _getIndex: function(a) {
            typeof a == "string" && (a = this.anchors.index(this.anchors.filter("[href$=" + a + "]")));
            return a;
        },
        destroy: function() {
            var b = this.options;
            this.abort(),
            this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),
            this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),
            this.anchors.each(function() {
                var b = a.data(this, "href.tabs");
                b && (this.href = b);
                var c = a(this).unbind(".tabs");
                a.each(["href", "load", "cache"], function(a, b) {
                    c.removeData(b + ".tabs");
                });
            }),
            this.lis.unbind(".tabs").add(this.panels).each(function() {
                a.data(this, "destroy.tabs") ? a(this).remove() : a(this).removeClass(["ui-state-default", "ui-corner-top", "ui-tabs-selected", "ui-state-active", "ui-state-hover", "ui-state-focus", "ui-state-disabled", "ui-tabs-panel", "ui-widget-content", "ui-corner-bottom", "ui-tabs-hide"].join(" "));
            }),
            b.cookie && this._cookie(null , b.cookie);
            return this;
        },
        add: function(c, d, e) {
            e === b && (e = this.anchors.length);
            var f = this
              , g = this.options
              , h = a(g.tabTemplate.replace(/#\{href\}/g, c).replace(/#\{label\}/g, d))
              , i = c.indexOf("#") ? this._tabId(a("a", h)[0]) : c.replace("#", "");
            h.addClass("ui-state-default ui-corner-top").data("destroy.tabs", !0);
            var j = f.element.find("#" + i);
            j.length || (j = a(g.panelTemplate).attr("id", i).data("destroy.tabs", !0)),
            j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),
            e >= this.lis.length ? (h.appendTo(this.list),
            j.appendTo(this.list[0].parentNode)) : (h.insertBefore(this.lis[e]),
            j.insertBefore(this.panels[e])),
            g.disabled = a.map(g.disabled, function(a, b) {
                return a >= e ? ++a : a;
            }),
            this._tabify(),
            this.anchors.length == 1 && (g.selected = 0,
            h.addClass("ui-tabs-selected ui-state-active"),
            j.removeClass("ui-tabs-hide"),
            this.element.queue("tabs", function() {
                f._trigger("show", null , f._ui(f.anchors[0], f.panels[0]));
            }),
            this.load(0)),
            this._trigger("add", null , this._ui(this.anchors[e], this.panels[e]));
            return this;
        },
        remove: function(b) {
            b = this._getIndex(b);
            var c = this.options
              , d = this.lis.eq(b).remove()
              , e = this.panels.eq(b).remove();
            d.hasClass("ui-tabs-selected") && this.anchors.length > 1 && this.select(b + (b + 1 < this.anchors.length ? 1 : -1)),
            c.disabled = a.map(a.grep(c.disabled, function(a, c) {
                return a != b;
            }), function(a, c) {
                return a >= b ? --a : a;
            }),
            this._tabify(),
            this._trigger("remove", null , this._ui(d.find("a")[0], e[0]));
            return this;
        },
        enable: function(b) {
            b = this._getIndex(b);
            var c = this.options;
            if (a.inArray(b, c.disabled) != -1) {
                this.lis.eq(b).removeClass("ui-state-disabled"),
                c.disabled = a.grep(c.disabled, function(a, c) {
                    return a != b;
                }),
                this._trigger("enable", null , this._ui(this.anchors[b], this.panels[b]));
                return this;
            }
        },
        disable: function(a) {
            a = this._getIndex(a);
            var b = this
              , c = this.options;
            a != c.selected && (this.lis.eq(a).addClass("ui-state-disabled"),
            c.disabled.push(a),
            c.disabled.sort(),
            this._trigger("disable", null , this._ui(this.anchors[a], this.panels[a])));
            return this;
        },
        select: function(a) {
            a = this._getIndex(a);
            if (a == -1) {
                if (this.options.collapsible && this.options.selected != -1) {
                    a = this.options.selected;
                } else {
                    return this;
                }
            }
            this.anchors.eq(a).trigger(this.options.event + ".tabs");
            return this;
        },
        load: function(b) {
            b = this._getIndex(b);
            var c = this
              , d = this.options
              , e = this.anchors.eq(b)[0]
              , f = a.data(e, "load.tabs");
            this.abort();
            if (!f || this.element.queue("tabs").length !== 0 && a.data(e, "cache.tabs")) {
                this.element.dequeue("tabs");
            } else {
                this.lis.eq(b).addClass("ui-state-processing");
                if (d.spinner) {
                    var g = a("span", e);
                    g.data("label.tabs", g.html()).html(d.spinner);
                }
                this.xhr = a.ajax(a.extend({}, d.ajaxOptions, {
                    url: f,
                    success: function(f, g) {
                        c.element.find(c._sanitizeSelector(e.hash)).html(f),
                        c._cleanup(),
                        d.cache && a.data(e, "cache.tabs", !0),
                        c._trigger("load", null , c._ui(c.anchors[b], c.panels[b]));
                        try {
                            d.ajaxOptions.success(f, g);
                        } catch (h) {}
                    },
                    error: function(a, f, g) {
                        c._cleanup(),
                        c._trigger("load", null , c._ui(c.anchors[b], c.panels[b]));
                        try {
                            d.ajaxOptions.error(a, f, b, e);
                        } catch (g) {}
                    }
                })),
                c.element.dequeue("tabs");
                return this;
            }
        },
        abort: function() {
            this.element.queue([]),
            this.panels.stop(!1, !0),
            this.element.queue("tabs", this.element.queue("tabs").splice(-2, 2)),
            this.xhr && (this.xhr.abort(),
            delete this.xhr),
            this._cleanup();
            return this;
        },
        url: function(a, b) {
            this.anchors.eq(a).removeData("cache.tabs").data("load.tabs", b);
            return this;
        },
        length: function() {
            return this.anchors.length;
        }
    }),
    a.extend(a.ui.tabs, {
        version: "1.8.18"
    }),
    a.extend(a.ui.tabs.prototype, {
        rotation: null ,
        rotate: function(a, b) {
            var c = this
              , d = this.options
              , e = c._rotate || (c._rotate = function(b) {
                clearTimeout(c.rotation),
                c.rotation = setTimeout(function() {
                    var a = d.selected;
                    c.select(++a < c.anchors.length ? a : 0);
                }, a),
                b && b.stopPropagation();
            }
            )
              , f = c._unrotate || (c._unrotate = b ? function(a) {
                t = d.selected,
                e();
            }
             : function(a) {
                a.clientX && c.rotate(null );
            }
            );
            a ? (this.element.bind("tabsshow", e),
            this.anchors.bind(d.event + ".tabs", f),
            e()) : (clearTimeout(c.rotation),
            this.element.unbind("tabsshow", e),
            this.anchors.unbind(d.event + ".tabs", f),
            delete this._rotate,
            delete this._unrotate);
            return this;
        }
    });
})(jQuery);
(function($, undefined) {
    function isArray(a) {
        return a && ($.browser.safari && typeof a == "object" && a.length || a.constructor && a.constructor.toString().match(/\Array\(\)/));
    }
    function extendRemove(a, b) {
        $.extend(a, b);
        for (var c in b) {
            if (b[c] == null  || b[c] == undefined) {
                a[c] = b[c];
            }
        }
        return a;
    }
    function bindHover(a) {
        var b = "button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";
        return a.bind("mouseout", function(a) {
            var c = $(a.target).closest(b);
            !c.length || c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover");
        }).bind("mouseover", function(c) {
            var d = $(c.target).closest(b);
            !$.datepicker._isDisabledDatepicker(instActive.inline ? a.parent()[0] : instActive.input[0]) && !!d.length && (d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
            d.addClass("ui-state-hover"),
            d.hasClass("ui-datepicker-prev") && d.addClass("ui-datepicker-prev-hover"),
            d.hasClass("ui-datepicker-next") && d.addClass("ui-datepicker-next-hover"));
        });
    }
    function Datepicker() {
        this.debug = !1,
        this._curInst = null ,
        this._keyEvent = !1,
        this._disabledInputs = [],
        this._datepickerShowing = !1,
        this._inDialog = !1,
        this._mainDivId = "ui-datepicker-div",
        this._inlineClass = "ui-datepicker-inline",
        this._appendClass = "ui-datepicker-append",
        this._triggerClass = "ui-datepicker-trigger",
        this._dialogClass = "ui-datepicker-dialog",
        this._disableClass = "ui-datepicker-disabled",
        this._unselectableClass = "ui-datepicker-unselectable",
        this._currentClass = "ui-datepicker-current-day",
        this._dayOverClass = "ui-datepicker-days-cell-over",
        this.regional = [],
        this.regional[""] = {
            closeText: "Done",
            prevText: "Prev",
            nextText: "Next",
            currentText: "Today",
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            dayNamesMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
            weekHeader: "Wk",
            dateFormat: "mm/dd/yy",
            firstDay: 0,
            isRTL: !1,
            showMonthAfterYear: !1,
            yearSuffix: ""
        },
        this._defaults = {
            showOn: "focus",
            showAnim: "fadeIn",
            showOptions: {},
            defaultDate: null ,
            appendText: "",
            buttonText: "...",
            buttonImage: "",
            buttonImageOnly: !1,
            hideIfNoPrevNext: !1,
            navigationAsDateFormat: !1,
            gotoCurrent: !1,
            changeMonth: !1,
            changeYear: !1,
            yearRange: "c-10:c+10",
            showOtherMonths: !1,
            selectOtherMonths: !1,
            showWeek: !1,
            calculateWeek: this.iso8601Week,
            shortYearCutoff: "+10",
            minDate: null ,
            maxDate: null ,
            duration: "fast",
            beforeShowDay: null ,
            beforeShow: null ,
            onSelect: null ,
            onChangeMonthYear: null ,
            onClose: null ,
            numberOfMonths: 1,
            showCurrentAtPos: 0,
            stepMonths: 1,
            stepBigMonths: 12,
            altField: "",
            altFormat: "",
            constrainInput: !0,
            showButtonPanel: !1,
            autoSize: !1,
            disabled: !1
        },
        $.extend(this._defaults, this.regional[""]),
        this.dpDiv = bindHover($('<div id="' + this._mainDivId + '" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'));
    }
    $.extend($.ui, {
        datepicker: {
            version: "1.8.18"
        }
    });
    var PROP_NAME = "datepicker", dpuuid = (new Date).getTime(), instActive;
    $.extend(Datepicker.prototype, {
        markerClassName: "hasDatepicker",
        maxRows: 4,
        log: function() {
            this.debug && console.log.apply("", arguments);
        },
        _widgetDatepicker: function() {
            return this.dpDiv;
        },
        setDefaults: function(a) {
            extendRemove(this._defaults, a || {});
            return this;
        },
        _attachDatepicker: function(target, settings) {
            var inlineSettings = null ;
            for (var attrName in this._defaults) {
                var attrValue = target.getAttribute("date:" + attrName);
                if (attrValue) {
                    inlineSettings = inlineSettings || {};
                    try {
                        inlineSettings[attrName] = eval(attrValue);
                    } catch (err) {
                        inlineSettings[attrName] = attrValue;
                    }
                }
            }
            var nodeName = target.nodeName.toLowerCase()
              , inline = nodeName == "div" || nodeName == "span";
            target.id || (this.uuid += 1,
            target.id = "dp" + this.uuid);
            var inst = this._newInst($(target), inline);
            inst.settings = $.extend({}, settings || {}, inlineSettings || {}),
            nodeName == "input" ? this._connectDatepicker(target, inst) : inline && this._inlineDatepicker(target, inst);
        },
        _newInst: function(a, b) {
            var c = a[0].id.replace(/([^A-Za-z0-9_-])/g, "\\\\$1");
            return {
                id: c,
                input: a,
                selectedDay: 0,
                selectedMonth: 0,
                selectedYear: 0,
                drawMonth: 0,
                drawYear: 0,
                inline: b,
                dpDiv: b ? bindHover($('<div class="' + this._inlineClass + ' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')) : this.dpDiv
            };
        },
        _connectDatepicker: function(a, b) {
            var c = $(a);
            b.append = $([]),
            b.trigger = $([]);
            c.hasClass(this.markerClassName) || (this._attachments(c, b),
            c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker", function(a, c, d) {
                b.settings[c] = d;
            }).bind("getData.datepicker", function(a, c) {
                return this._get(b, c);
            }),
            this._autoSize(b),
            $.data(a, PROP_NAME, b),
            b.settings.disabled && this._disableDatepicker(a));
        },
        _attachments: function(a, b) {
            var c = this._get(b, "appendText")
              , d = this._get(b, "isRTL");
            b.append && b.append.remove(),
            c && (b.append = $('<span class="' + this._appendClass + '">' + c + "</span>"),
            a[d ? "before" : "after"](b.append)),
            a.unbind("focus", this._showDatepicker),
            b.trigger && b.trigger.remove();
            var e = this._get(b, "showOn");
            (e == "focus" || e == "both") && a.focus(this._showDatepicker);
            if (e == "button" || e == "both") {
                var f = this._get(b, "buttonText")
                  , g = this._get(b, "buttonImage");
                b.trigger = $(this._get(b, "buttonImageOnly") ? $("<img/>").addClass(this._triggerClass).attr({
                    src: g,
                    alt: f,
                    title: f
                }) : $('<button type="button"></button>').addClass(this._triggerClass).html(g == "" ? f : $("<img/>").attr({
                    src: g,
                    alt: f,
                    title: f
                }))),
                a[d ? "before" : "after"](b.trigger),
                b.trigger.click(function() {
                    $.datepicker._datepickerShowing && $.datepicker._lastInput == a[0] ? $.datepicker._hideDatepicker() : $.datepicker._datepickerShowing && $.datepicker._lastInput != a[0] ? ($.datepicker._hideDatepicker(),
                    $.datepicker._showDatepicker(a[0])) : $.datepicker._showDatepicker(a[0]);
                    return !1;
                });
            }
        },
        _autoSize: function(a) {
            if (this._get(a, "autoSize") && !a.inline) {
                var b = new Date(2009,11,20)
                  , c = this._get(a, "dateFormat");
                if (c.match(/[DM]/)) {
                    var d = function(a) {
                        var b = 0
                          , c = 0;
                        for (var d = 0; d < a.length; d++) {
                            a[d].length > b && (b = a[d].length,
                            c = d);
                        }
                        return c;
                    }
                    ;
                    b.setMonth(d(this._get(a, c.match(/MM/) ? "monthNames" : "monthNamesShort"))),
                    b.setDate(d(this._get(a, c.match(/DD/) ? "dayNames" : "dayNamesShort")) + 20 - b.getDay());
                }
                a.input.attr("size", this._formatDate(a, b).length);
            }
        },
        _inlineDatepicker: function(a, b) {
            var c = $(a);
            c.hasClass(this.markerClassName) || (c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker", function(a, c, d) {
                b.settings[c] = d;
            }).bind("getData.datepicker", function(a, c) {
                return this._get(b, c);
            }),
            $.data(a, PROP_NAME, b),
            this._setDate(b, this._getDefaultDate(b), !0),
            this._updateDatepicker(b),
            this._updateAlternate(b),
            b.settings.disabled && this._disableDatepicker(a),
            b.dpDiv.css("display", "block"));
        },
        _dialogDatepicker: function(a, b, c, d, e) {
            var f = this._dialogInst;
            if (!f) {
                this.uuid += 1;
                var g = "dp" + this.uuid;
                this._dialogInput = $('<input type="text" id="' + g + '" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>'),
                this._dialogInput.keydown(this._doKeyDown),
                $("body").append(this._dialogInput),
                f = this._dialogInst = this._newInst(this._dialogInput, !1),
                f.settings = {},
                $.data(this._dialogInput[0], PROP_NAME, f);
            }
            extendRemove(f.settings, d || {}),
            b = b && b.constructor == Date ? this._formatDate(f, b) : b,
            this._dialogInput.val(b),
            this._pos = e ? e.length ? e : [e.pageX, e.pageY] : null ;
            if (!this._pos) {
                var h = document.documentElement.clientWidth
                  , i = document.documentElement.clientHeight
                  , j = document.documentElement.scrollLeft || document.body.scrollLeft
                  , k = document.documentElement.scrollTop || document.body.scrollTop;
                this._pos = [h / 2 - 100 + j, i / 2 - 150 + k];
            }
            this._dialogInput.css("left", this._pos[0] + 20 + "px").css("top", this._pos[1] + "px"),
            f.settings.onSelect = c,
            this._inDialog = !0,
            this.dpDiv.addClass(this._dialogClass),
            this._showDatepicker(this._dialogInput[0]),
            $.blockUI && $.blockUI(this.dpDiv),
            $.data(this._dialogInput[0], PROP_NAME, f);
            return this;
        },
        _destroyDatepicker: function(a) {
            var b = $(a)
              , c = $.data(a, PROP_NAME);
            if (!!b.hasClass(this.markerClassName)) {
                var d = a.nodeName.toLowerCase();
                $.removeData(a, PROP_NAME),
                d == "input" ? (c.append.remove(),
                c.trigger.remove(),
                b.removeClass(this.markerClassName).unbind("focus", this._showDatepicker).unbind("keydown", this._doKeyDown).unbind("keypress", this._doKeyPress).unbind("keyup", this._doKeyUp)) : (d == "div" || d == "span") && b.removeClass(this.markerClassName).empty();
            }
        },
        _enableDatepicker: function(a) {
            var b = $(a)
              , c = $.data(a, PROP_NAME);
            if (!!b.hasClass(this.markerClassName)) {
                var d = a.nodeName.toLowerCase();
                if (d == "input") {
                    a.disabled = !1,
                    c.trigger.filter("button").each(function() {
                        this.disabled = !1;
                    }).end().filter("img").css({
                        opacity: "1.0",
                        cursor: ""
                    });
                } else {
                    if (d == "div" || d == "span") {
                        var e = b.children("." + this._inlineClass);
                        e.children().removeClass("ui-state-disabled"),
                        e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");
                    }
                }
                this._disabledInputs = $.map(this._disabledInputs, function(b) {
                    return b == a ? null  : b;
                });
            }
        },
        _disableDatepicker: function(a) {
            var b = $(a)
              , c = $.data(a, PROP_NAME);
            if (!!b.hasClass(this.markerClassName)) {
                var d = a.nodeName.toLowerCase();
                if (d == "input") {
                    a.disabled = !0,
                    c.trigger.filter("button").each(function() {
                        this.disabled = !0;
                    }).end().filter("img").css({
                        opacity: "0.5",
                        cursor: "default"
                    });
                } else {
                    if (d == "div" || d == "span") {
                        var e = b.children("." + this._inlineClass);
                        e.children().addClass("ui-state-disabled"),
                        e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled", "disabled");
                    }
                }
                this._disabledInputs = $.map(this._disabledInputs, function(b) {
                    return b == a ? null  : b;
                }),
                this._disabledInputs[this._disabledInputs.length] = a;
            }
        },
        _isDisabledDatepicker: function(a) {
            if (!a) {
                return !1;
            }
            for (var b = 0; b < this._disabledInputs.length; b++) {
                if (this._disabledInputs[b] == a) {
                    return !0;
                }
            }
            return !1;
        },
        _getInst: function(a) {
            try {
                return $.data(a, PROP_NAME);
            } catch (b) {
                throw "Missing instance data for this datepicker";
            }
        },
        _optionDatepicker: function(a, b, c) {
            var d = this._getInst(a);
            if (arguments.length == 2 && typeof b == "string") {
                return b == "defaults" ? $.extend({}, $.datepicker._defaults) : d ? b == "all" ? $.extend({}, d.settings) : this._get(d, b) : null ;
            }
            var e = b || {};
            typeof b == "string" && (e = {},
            e[b] = c);
            if (d) {
                this._curInst == d && this._hideDatepicker();
                var f = this._getDateDatepicker(a, !0)
                  , g = this._getMinMaxDate(d, "min")
                  , h = this._getMinMaxDate(d, "max");
                extendRemove(d.settings, e),
                g !== null  && e.dateFormat !== undefined && e.minDate === undefined && (d.settings.minDate = this._formatDate(d, g)),
                h !== null  && e.dateFormat !== undefined && e.maxDate === undefined && (d.settings.maxDate = this._formatDate(d, h)),
                this._attachments($(a), d),
                this._autoSize(d),
                this._setDate(d, f),
                this._updateAlternate(d),
                this._updateDatepicker(d);
            }
        },
        _changeDatepicker: function(a, b, c) {
            this._optionDatepicker(a, b, c);
        },
        _refreshDatepicker: function(a) {
            var b = this._getInst(a);
            b && this._updateDatepicker(b);
        },
        _setDateDatepicker: function(a, b) {
            var c = this._getInst(a);
            c && (this._setDate(c, b),
            this._updateDatepicker(c),
            this._updateAlternate(c));
        },
        _getDateDatepicker: function(a, b) {
            var c = this._getInst(a);
            c && !c.inline && this._setDateFromField(c, b);
            return c ? this._getDate(c) : null ;
        },
        _doKeyDown: function(a) {
            var b = $.datepicker._getInst(a.target)
              , c = !0
              , d = b.dpDiv.is(".ui-datepicker-rtl");
            b._keyEvent = !0;
            if ($.datepicker._datepickerShowing) {
                switch (a.keyCode) {
                case 9:
                    $.datepicker._hideDatepicker(),
                    c = !1;
                    break;
                case 13:
                    var e = $("td." + $.datepicker._dayOverClass + ":not(." + $.datepicker._currentClass + ")", b.dpDiv);
                    e[0] && $.datepicker._selectDay(a.target, b.selectedMonth, b.selectedYear, e[0]);
                    var f = $.datepicker._get(b, "onSelect");
                    if (f) {
                        var g = $.datepicker._formatDate(b);
                        f.apply(b.input ? b.input[0] : null , [g, b]);
                    } else {
                        $.datepicker._hideDatepicker();
                    }
                    return !1;
                case 27:
                    $.datepicker._hideDatepicker();
                    break;
                case 33:
                    $.datepicker._adjustDate(a.target, a.ctrlKey ? -$.datepicker._get(b, "stepBigMonths") : -$.datepicker._get(b, "stepMonths"), "M");
                    break;
                case 34:
                    $.datepicker._adjustDate(a.target, a.ctrlKey ? +$.datepicker._get(b, "stepBigMonths") : +$.datepicker._get(b, "stepMonths"), "M");
                    break;
                case 35:
                    (a.ctrlKey || a.metaKey) && $.datepicker._clearDate(a.target),
                    c = a.ctrlKey || a.metaKey;
                    break;
                case 36:
                    (a.ctrlKey || a.metaKey) && $.datepicker._gotoToday(a.target),
                    c = a.ctrlKey || a.metaKey;
                    break;
                case 37:
                    (a.ctrlKey || a.metaKey) && $.datepicker._adjustDate(a.target, d ? 1 : -1, "D"),
                    c = a.ctrlKey || a.metaKey,
                    a.originalEvent.altKey && $.datepicker._adjustDate(a.target, a.ctrlKey ? -$.datepicker._get(b, "stepBigMonths") : -$.datepicker._get(b, "stepMonths"), "M");
                    break;
                case 38:
                    (a.ctrlKey || a.metaKey) && $.datepicker._adjustDate(a.target, -7, "D"),
                    c = a.ctrlKey || a.metaKey;
                    break;
                case 39:
                    (a.ctrlKey || a.metaKey) && $.datepicker._adjustDate(a.target, d ? -1 : 1, "D"),
                    c = a.ctrlKey || a.metaKey,
                    a.originalEvent.altKey && $.datepicker._adjustDate(a.target, a.ctrlKey ? +$.datepicker._get(b, "stepBigMonths") : +$.datepicker._get(b, "stepMonths"), "M");
                    break;
                case 40:
                    (a.ctrlKey || a.metaKey) && $.datepicker._adjustDate(a.target, 7, "D"),
                    c = a.ctrlKey || a.metaKey;
                    break;
                default:
                    c = !1;
                }
            } else {
                a.keyCode == 36 && a.ctrlKey ? $.datepicker._showDatepicker(this) : c = !1;
            }
            c && (a.preventDefault(),
            a.stopPropagation());
        },
        _doKeyPress: function(a) {
            var b = $.datepicker._getInst(a.target);
            if ($.datepicker._get(b, "constrainInput")) {
                var c = $.datepicker._possibleChars($.datepicker._get(b, "dateFormat"))
                  , d = String.fromCharCode(a.charCode == undefined ? a.keyCode : a.charCode);
                return a.ctrlKey || a.metaKey || d < " " || !c || c.indexOf(d) > -1;
            }
        },
        _doKeyUp: function(a) {
            var b = $.datepicker._getInst(a.target);
            if (b.input.val() != b.lastVal) {
                try {
                    var c = $.datepicker.parseDate($.datepicker._get(b, "dateFormat"), b.input ? b.input.val() : null , $.datepicker._getFormatConfig(b));
                    c && ($.datepicker._setDateFromField(b),
                    $.datepicker._updateAlternate(b),
                    $.datepicker._updateDatepicker(b));
                } catch (a) {
                    $.datepicker.log(a);
                }
            }
            return !0;
        },
        _showDatepicker: function(a) {
            a = a.target || a,
            a.nodeName.toLowerCase() != "input" && (a = $("input", a.parentNode)[0]);
            if (!$.datepicker._isDisabledDatepicker(a) && $.datepicker._lastInput != a) {
                var b = $.datepicker._getInst(a);
                $.datepicker._curInst && $.datepicker._curInst != b && ($.datepicker._curInst.dpDiv.stop(!0, !0),
                b && $.datepicker._datepickerShowing && $.datepicker._hideDatepicker($.datepicker._curInst.input[0]));
                var c = $.datepicker._get(b, "beforeShow")
                  , d = c ? c.apply(a, [a, b]) : {};
                if (d === !1) {
                    return;
                }
                extendRemove(b.settings, d),
                b.lastVal = null ,
                $.datepicker._lastInput = a,
                $.datepicker._setDateFromField(b),
                $.datepicker._inDialog && (a.value = ""),
                $.datepicker._pos || ($.datepicker._pos = $.datepicker._findPos(a),
                $.datepicker._pos[1] += a.offsetHeight);
                var e = !1;
                $(a).parents().each(function() {
                    e |= $(this).css("position") == "fixed";
                    return !e;
                }),
                e && $.browser.opera && ($.datepicker._pos[0] -= document.documentElement.scrollLeft,
                $.datepicker._pos[1] -= document.documentElement.scrollTop);
                var f = {
                    left: $.datepicker._pos[0],
                    top: $.datepicker._pos[1]
                };
                $.datepicker._pos = null ,
                b.dpDiv.empty(),
                b.dpDiv.css({
                    position: "absolute",
                    display: "block",
                    top: "-1000px"
                }),
                $.datepicker._updateDatepicker(b),
                f = $.datepicker._checkOffset(b, f, e),
                b.dpDiv.css({
                    position: $.datepicker._inDialog && $.blockUI ? "static" : e ? "fixed" : "absolute",
                    display: "none",
                    left: f.left + "px",
                    top: f.top + "px"
                });
                if (!b.inline) {
                    var g = $.datepicker._get(b, "showAnim")
                      , h = $.datepicker._get(b, "duration")
                      , i = function() {
                        var a = b.dpDiv.find("iframe.ui-datepicker-cover");
                        if (!!a.length) {
                            var c = $.datepicker._getBorders(b.dpDiv);
                            a.css({
                                left: -c[0],
                                top: -c[1],
                                width: b.dpDiv.outerWidth(),
                                height: b.dpDiv.outerHeight()
                            });
                        }
                    }
                    ;
                    b.dpDiv.zIndex($(a).zIndex() + 1),
                    $.datepicker._datepickerShowing = !0,
                    $.effects && $.effects[g] ? b.dpDiv.show(g, $.datepicker._get(b, "showOptions"), h, i) : b.dpDiv[g || "show"](g ? h : null , i),
                    (!g || !h) && i(),
                    b.input.is(":visible") && !b.input.is(":disabled") && b.input.focus(),
                    $.datepicker._curInst = b;
                }
            }
        },
        _updateDatepicker: function(a) {
            var b = this;
            b.maxRows = 4;
            var c = $.datepicker._getBorders(a.dpDiv);
            instActive = a,
            a.dpDiv.empty().append(this._generateHTML(a));
            var d = a.dpDiv.find("iframe.ui-datepicker-cover");
            !d.length || d.css({
                left: -c[0],
                top: -c[1],
                width: a.dpDiv.outerWidth(),
                height: a.dpDiv.outerHeight()
            }),
            a.dpDiv.find("." + this._dayOverClass + " a").mouseover();
            var e = this._getNumberOfMonths(a)
              , f = e[1]
              , g = 17;
            a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),
            f > 1 && a.dpDiv.addClass("ui-datepicker-multi-" + f).css("width", g * f + "em"),
            a.dpDiv[(e[0] != 1 || e[1] != 1 ? "add" : "remove") + "Class"]("ui-datepicker-multi"),
            a.dpDiv[(this._get(a, "isRTL") ? "add" : "remove") + "Class"]("ui-datepicker-rtl"),
            a == $.datepicker._curInst && $.datepicker._datepickerShowing && a.input && a.input.is(":visible") && !a.input.is(":disabled") && a.input[0] != document.activeElement && a.input.focus();
            if (a.yearshtml) {
                var h = a.yearshtml;
                setTimeout(function() {
                    h === a.yearshtml && a.yearshtml && a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),
                    h = a.yearshtml = null ;
                }, 0);
            }
        },
        _getBorders: function(a) {
            var b = function(a) {
                return {
                    thin: 1,
                    medium: 2,
                    thick: 3
                }[a] || a;
            }
            ;
            return [parseFloat(b(a.css("border-left-width"))), parseFloat(b(a.css("border-top-width")))];
        },
        _checkOffset: function(a, b, c) {
            var d = a.dpDiv.outerWidth()
              , e = a.dpDiv.outerHeight()
              , f = a.input ? a.input.outerWidth() : 0
              , g = a.input ? a.input.outerHeight() : 0
              , h = document.documentElement.clientWidth + $(document).scrollLeft()
              , i = document.documentElement.clientHeight + $(document).scrollTop();
            b.left -= this._get(a, "isRTL") ? d - f : 0,
            b.left -= c && b.left == a.input.offset().left ? $(document).scrollLeft() : 0,
            b.top -= c && b.top == a.input.offset().top + g ? $(document).scrollTop() : 0,
            b.left -= Math.min(b.left, b.left + d > h && h > d ? Math.abs(b.left + d - h) : 0),
            b.top -= Math.min(b.top, b.top + e > i && i > e ? Math.abs(e + g) : 0);
            return b;
        },
        _findPos: function(a) {
            var b = this._getInst(a)
              , c = this._get(b, "isRTL");
            while (a && (a.type == "hidden" || a.nodeType != 1 || $.expr.filters.hidden(a))) {
                a = a[c ? "previousSibling" : "nextSibling"];
            }
            var d = $(a).offset();
            return [d.left, d.top];
        },
        _hideDatepicker: function(a) {
            var b = this._curInst;
            if (!(!b || a && b != $.data(a, PROP_NAME)) && this._datepickerShowing) {
                var c = this._get(b, "showAnim")
                  , d = this._get(b, "duration")
                  , e = this
                  , f = function() {
                    $.datepicker._tidyDialog(b),
                    e._curInst = null ;
                }
                ;
                $.effects && $.effects[c] ? b.dpDiv.hide(c, $.datepicker._get(b, "showOptions"), d, f) : b.dpDiv[c == "slideDown" ? "slideUp" : c == "fadeIn" ? "fadeOut" : "hide"](c ? d : null , f),
                c || f(),
                this._datepickerShowing = !1;
                var g = this._get(b, "onClose");
                g && g.apply(b.input ? b.input[0] : null , [b.input ? b.input.val() : "", b]),
                this._lastInput = null ,
                this._inDialog && (this._dialogInput.css({
                    position: "absolute",
                    left: "0",
                    top: "-100px"
                }),
                $.blockUI && ($.unblockUI(),
                $("body").append(this.dpDiv))),
                this._inDialog = !1;
            }
        },
        _tidyDialog: function(a) {
            a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar");
        },
        _checkExternalClick: function(a) {
            if (!!$.datepicker._curInst) {
                var b = $(a.target)
                  , c = $.datepicker._getInst(b[0]);
                (b[0].id != $.datepicker._mainDivId && b.parents("#" + $.datepicker._mainDivId).length == 0 && !b.hasClass($.datepicker.markerClassName) && !b.closest("." + $.datepicker._triggerClass).length && $.datepicker._datepickerShowing && (!$.datepicker._inDialog || !$.blockUI) || b.hasClass($.datepicker.markerClassName) && $.datepicker._curInst != c) && $.datepicker._hideDatepicker();
            }
        },
        _adjustDate: function(a, b, c) {
            var d = $(a)
              , e = this._getInst(d[0]);
            this._isDisabledDatepicker(d[0]) || (this._adjustInstDate(e, b + (c == "M" ? this._get(e, "showCurrentAtPos") : 0), c),
            this._updateDatepicker(e));
        },
        _gotoToday: function(a) {
            var b = $(a)
              , c = this._getInst(b[0]);
            if (this._get(c, "gotoCurrent") && c.currentDay) {
                c.selectedDay = c.currentDay,
                c.drawMonth = c.selectedMonth = c.currentMonth,
                c.drawYear = c.selectedYear = c.currentYear;
            } else {
                var d = new Date;
                c.selectedDay = d.getDate(),
                c.drawMonth = c.selectedMonth = d.getMonth(),
                c.drawYear = c.selectedYear = d.getFullYear();
            }
            this._notifyChange(c),
            this._adjustDate(b);
        },
        _selectMonthYear: function(a, b, c) {
            var d = $(a)
              , e = this._getInst(d[0]);
            e["selected" + (c == "M" ? "Month" : "Year")] = e["draw" + (c == "M" ? "Month" : "Year")] = parseInt(b.options[b.selectedIndex].value, 10),
            this._notifyChange(e),
            this._adjustDate(d);
        },
        _selectDay: function(a, b, c, d) {
            var e = $(a);
            if (!$(d).hasClass(this._unselectableClass) && !this._isDisabledDatepicker(e[0])) {
                var f = this._getInst(e[0]);
                f.selectedDay = f.currentDay = $("a", d).html(),
                f.selectedMonth = f.currentMonth = b,
                f.selectedYear = f.currentYear = c,
                this._selectDate(a, this._formatDate(f, f.currentDay, f.currentMonth, f.currentYear));
            }
        },
        _clearDate: function(a) {
            var b = $(a)
              , c = this._getInst(b[0]);
            this._selectDate(b, "");
        },
        _selectDate: function(a, b) {
            var c = $(a)
              , d = this._getInst(c[0]);
            b = b != null  ? b : this._formatDate(d),
            d.input && d.input.val(b),
            this._updateAlternate(d);
            var e = this._get(d, "onSelect");
            e ? e.apply(d.input ? d.input[0] : null , [b, d]) : d.input && d.input.trigger("change"),
            d.inline ? this._updateDatepicker(d) : (this._hideDatepicker(),
            this._lastInput = d.input[0],
            typeof d.input[0] != "object" && d.input.focus(),
            this._lastInput = null );
        },
        _updateAlternate: function(a) {
            var b = this._get(a, "altField");
            if (b) {
                var c = this._get(a, "altFormat") || this._get(a, "dateFormat")
                  , d = this._getDate(a)
                  , e = this.formatDate(c, d, this._getFormatConfig(a));
                $(b).each(function() {
                    $(this).val(e);
                });
            }
        },
        noWeekends: function(a) {
            var b = a.getDay();
            return [b > 0 && b < 6, ""];
        },
        iso8601Week: function(a) {
            var b = new Date(a.getTime());
            b.setDate(b.getDate() + 4 - (b.getDay() || 7));
            var c = b.getTime();
            b.setMonth(0),
            b.setDate(1);
            return Math.floor(Math.round((c - b) / 86400000) / 7) + 1;
        },
        parseDate: function(a, b, c) {
            if (a == null  || b == null ) {
                throw "Invalid arguments";
            }
            b = typeof b == "object" ? b.toString() : b + "";
            if (b == "") {
                return null ;
            }
            var d = (c ? c.shortYearCutoff : null ) || this._defaults.shortYearCutoff;
            d = typeof d != "string" ? d : (new Date).getFullYear() % 100 + parseInt(d, 10);
            var e = (c ? c.dayNamesShort : null ) || this._defaults.dayNamesShort
              , f = (c ? c.dayNames : null ) || this._defaults.dayNames
              , g = (c ? c.monthNamesShort : null ) || this._defaults.monthNamesShort
              , h = (c ? c.monthNames : null ) || this._defaults.monthNames
              , i = -1
              , j = -1
              , k = -1
              , l = -1
              , m = !1
              , n = function(b) {
                var c = s + 1 < a.length && a.charAt(s + 1) == b;
                c && s++;
                return c;
            }
              , o = function(a) {
                var c = n(a)
                  , d = a == "@" ? 14 : a == "!" ? 20 : a == "y" && c ? 4 : a == "o" ? 3 : 2
                  , e = new RegExp("^\\d{1," + d + "}")
                  , f = b.substring(r).match(e);
                if (!f) {
                    throw "Missing number at position " + r;
                }
                r += f[0].length;
                return parseInt(f[0], 10);
            }
              , p = function(a, c, d) {
                var e = $.map(n(a) ? d : c, function(a, b) {
                    return [[b, a]];
                }).sort(function(a, b) {
                    return -(a[1].length - b[1].length);
                })
                  , f = -1;
                $.each(e, function(a, c) {
                    var d = c[1];
                    if (b.substr(r, d.length).toLowerCase() == d.toLowerCase()) {
                        f = c[0],
                        r += d.length;
                        return !1;
                    }
                });
                if (f != -1) {
                    return f + 1;
                }
                throw "Unknown name at position " + r;
            }
              , q = function() {
                if (b.charAt(r) != a.charAt(s)) {
                    throw "Unexpected literal at position " + r;
                }
                r++;
            }
              , r = 0;
            for (var s = 0; s < a.length; s++) {
                if (m) {
                    a.charAt(s) == "'" && !n("'") ? m = !1 : q();
                } else {
                    switch (a.charAt(s)) {
                    case "d":
                        k = o("d");
                        break;
                    case "D":
                        p("D", e, f);
                        break;
                    case "o":
                        l = o("o");
                        break;
                    case "m":
                        j = o("m");
                        break;
                    case "M":
                        j = p("M", g, h);
                        break;
                    case "y":
                        i = o("y");
                        break;
                    case "@":
                        var t = new Date(o("@"));
                        i = t.getFullYear(),
                        j = t.getMonth() + 1,
                        k = t.getDate();
                        break;
                    case "!":
                        var t = new Date((o("!") - this._ticksTo1970) / 10000);
                        i = t.getFullYear(),
                        j = t.getMonth() + 1,
                        k = t.getDate();
                        break;
                    case "'":
                        n("'") ? q() : m = !0;
                        break;
                    default:
                        q();
                    }
                }
            }
            if (r < b.length) {
                throw "Extra/unparsed characters found in date: " + b.substring(r);
            }
            i == -1 ? i = (new Date).getFullYear() : i < 100 && (i += (new Date).getFullYear() - (new Date).getFullYear() % 100 + (i <= d ? 0 : -100));
            if (l > -1) {
                j = 1,
                k = l;
                for (; ; ) {
                    var u = this._getDaysInMonth(i, j - 1);
                    if (k <= u) {
                        break;
                    }
                    j++,
                    k -= u;
                }
            }
            var t = this._daylightSavingAdjust(new Date(i,j - 1,k));
            if (t.getFullYear() != i || t.getMonth() + 1 != j || t.getDate() != k) {
                throw "Invalid date";
            }
            return t;
        },
        ATOM: "yy-mm-dd",
        COOKIE: "D, dd M yy",
        ISO_8601: "yy-mm-dd",
        RFC_822: "D, d M y",
        RFC_850: "DD, dd-M-y",
        RFC_1036: "D, d M y",
        RFC_1123: "D, d M yy",
        RFC_2822: "D, d M yy",
        RSS: "D, d M y",
        TICKS: "!",
        TIMESTAMP: "@",
        W3C: "yy-mm-dd",
        _ticksTo1970: (718685 + Math.floor(492.5) - Math.floor(19.7) + Math.floor(4.925)) * 24 * 60 * 60 * 10000000,
        formatDate: function(a, b, c) {
            if (!b) {
                return "";
            }
            var d = (c ? c.dayNamesShort : null ) || this._defaults.dayNamesShort
              , e = (c ? c.dayNames : null ) || this._defaults.dayNames
              , f = (c ? c.monthNamesShort : null ) || this._defaults.monthNamesShort
              , g = (c ? c.monthNames : null ) || this._defaults.monthNames
              , h = function(b) {
                var c = m + 1 < a.length && a.charAt(m + 1) == b;
                c && m++;
                return c;
            }
              , i = function(a, b, c) {
                var d = "" + b;
                if (h(a)) {
                    while (d.length < c) {
                        d = "0" + d;
                    }
                }
                return d;
            }
              , j = function(a, b, c, d) {
                return h(a) ? d[b] : c[b];
            }
              , k = ""
              , l = !1;
            if (b) {
                for (var m = 0; m < a.length; m++) {
                    if (l) {
                        a.charAt(m) == "'" && !h("'") ? l = !1 : k += a.charAt(m);
                    } else {
                        switch (a.charAt(m)) {
                        case "d":
                            k += i("d", b.getDate(), 2);
                            break;
                        case "D":
                            k += j("D", b.getDay(), d, e);
                            break;
                        case "o":
                            k += i("o", Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime() - (new Date(b.getFullYear(),0,0)).getTime()) / 86400000), 3);
                            break;
                        case "m":
                            k += i("m", b.getMonth() + 1, 2);
                            break;
                        case "M":
                            k += j("M", b.getMonth(), f, g);
                            break;
                        case "y":
                            k += h("y") ? b.getFullYear() : (b.getYear() % 100 < 10 ? "0" : "") + b.getYear() % 100;
                            break;
                        case "@":
                            k += b.getTime();
                            break;
                        case "!":
                            k += b.getTime() * 10000 + this._ticksTo1970;
                            break;
                        case "'":
                            h("'") ? k += "'" : l = !0;
                            break;
                        default:
                            k += a.charAt(m);
                        }
                    }
                }
            }
            return k;
        },
        _possibleChars: function(a) {
            var b = ""
              , c = !1
              , d = function(b) {
                var c = e + 1 < a.length && a.charAt(e + 1) == b;
                c && e++;
                return c;
            }
            ;
            for (var e = 0; e < a.length; e++) {
                if (c) {
                    a.charAt(e) == "'" && !d("'") ? c = !1 : b += a.charAt(e);
                } else {
                    switch (a.charAt(e)) {
                    case "d":
                    case "m":
                    case "y":
                    case "@":
                        b += "0123456789";
                        break;
                    case "D":
                    case "M":
                        return null ;
                    case "'":
                        d("'") ? b += "'" : c = !0;
                        break;
                    default:
                        b += a.charAt(e);
                    }
                }
            }
            return b;
        },
        _get: function(a, b) {
            return a.settings[b] !== undefined ? a.settings[b] : this._defaults[b];
        },
        _setDateFromField: function(a, b) {
            if (a.input.val() != a.lastVal) {
                var c = this._get(a, "dateFormat"), d = a.lastVal = a.input ? a.input.val() : null , e, f;
                e = f = this._getDefaultDate(a);
                var g = this._getFormatConfig(a);
                try {
                    e = this.parseDate(c, d, g) || f;
                } catch (h) {
                    this.log(h),
                    d = b ? "" : d;
                }
                a.selectedDay = e.getDate(),
                a.drawMonth = a.selectedMonth = e.getMonth(),
                a.drawYear = a.selectedYear = e.getFullYear(),
                a.currentDay = d ? e.getDate() : 0,
                a.currentMonth = d ? e.getMonth() : 0,
                a.currentYear = d ? e.getFullYear() : 0,
                this._adjustInstDate(a);
            }
        },
        _getDefaultDate: function(a) {
            return this._restrictMinMax(a, this._determineDate(a, this._get(a, "defaultDate"), new Date));
        },
        _determineDate: function(a, b, c) {
            var d = function(a) {
                var b = new Date;
                b.setDate(b.getDate() + a);
                return b;
            }
              , e = function(b) {
                try {
                    return $.datepicker.parseDate($.datepicker._get(a, "dateFormat"), b, $.datepicker._getFormatConfig(a));
                } catch (c) {}
                var d = (b.toLowerCase().match(/^c/) ? $.datepicker._getDate(a) : null ) || new Date
                  , e = d.getFullYear()
                  , f = d.getMonth()
                  , g = d.getDate()
                  , h = /([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g
                  , i = h.exec(b);
                while (i) {
                    switch (i[2] || "d") {
                    case "d":
                    case "D":
                        g += parseInt(i[1], 10);
                        break;
                    case "w":
                    case "W":
                        g += parseInt(i[1], 10) * 7;
                        break;
                    case "m":
                    case "M":
                        f += parseInt(i[1], 10),
                        g = Math.min(g, $.datepicker._getDaysInMonth(e, f));
                        break;
                    case "y":
                    case "Y":
                        e += parseInt(i[1], 10),
                        g = Math.min(g, $.datepicker._getDaysInMonth(e, f));
                    }
                    i = h.exec(b);
                }
                return new Date(e,f,g);
            }
              , f = b == null  || b === "" ? c : typeof b == "string" ? e(b) : typeof b == "number" ? isNaN(b) ? c : d(b) : new Date(b.getTime());
            f = f && f.toString() == "Invalid Date" ? c : f,
            f && (f.setHours(0),
            f.setMinutes(0),
            f.setSeconds(0),
            f.setMilliseconds(0));
            return this._daylightSavingAdjust(f);
        },
        _daylightSavingAdjust: function(a) {
            if (!a) {
                return null ;
            }
            a.setHours(a.getHours() > 12 ? a.getHours() + 2 : 0);
            return a;
        },
        _setDate: function(a, b, c) {
            var d = !b
              , e = a.selectedMonth
              , f = a.selectedYear
              , g = this._restrictMinMax(a, this._determineDate(a, b, new Date));
            a.selectedDay = a.currentDay = g.getDate(),
            a.drawMonth = a.selectedMonth = a.currentMonth = g.getMonth(),
            a.drawYear = a.selectedYear = a.currentYear = g.getFullYear(),
            (e != a.selectedMonth || f != a.selectedYear) && !c && this._notifyChange(a),
            this._adjustInstDate(a),
            a.input && a.input.val(d ? "" : this._formatDate(a));
        },
        _getDate: function(a) {
            var b = !a.currentYear || a.input && a.input.val() == "" ? null  : this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));
            return b;
        },
        _generateHTML: function(a) {
            var b = new Date;
            b = this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));
            var c = this._get(a, "isRTL")
              , d = this._get(a, "showButtonPanel")
              , e = this._get(a, "hideIfNoPrevNext")
              , f = this._get(a, "navigationAsDateFormat")
              , g = this._getNumberOfMonths(a)
              , h = this._get(a, "showCurrentAtPos")
              , i = this._get(a, "stepMonths")
              , j = g[0] != 1 || g[1] != 1
              , k = this._daylightSavingAdjust(a.currentDay ? new Date(a.currentYear,a.currentMonth,a.currentDay) : new Date(9999,9,9))
              , l = this._getMinMaxDate(a, "min")
              , m = this._getMinMaxDate(a, "max")
              , n = a.drawMonth - h
              , o = a.drawYear;
            n < 0 && (n += 12,
            o--);
            if (m) {
                var p = this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth() - g[0] * g[1] + 1,m.getDate()));
                p = l && p < l ? l : p;
                while (this._daylightSavingAdjust(new Date(o,n,1)) > p) {
                    n--,
                    n < 0 && (n = 11,
                    o--);
                }
            }
            a.drawMonth = n,
            a.drawYear = o;
            var q = this._get(a, "prevText");
            q = f ? this.formatDate(q, this._daylightSavingAdjust(new Date(o,n - i,1)), this._getFormatConfig(a)) : q;
            var r = this._canAdjustMonth(a, -1, o, n) ? '<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + a.id + "', -" + i + ", 'M');\"" + ' title="' + q + '"><span class="ui-icon ui-icon-circle-triangle-' + (c ? "e" : "w") + '">' + q + "</span></a>" : e ? "" : '<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="' + q + '"><span class="ui-icon ui-icon-circle-triangle-' + (c ? "e" : "w") + '">' + q + "</span></a>"
              , s = this._get(a, "nextText");
            s = f ? this.formatDate(s, this._daylightSavingAdjust(new Date(o,n + i,1)), this._getFormatConfig(a)) : s;
            var t = this._canAdjustMonth(a, 1, o, n) ? '<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._adjustDate('#" + a.id + "', +" + i + ", 'M');\"" + ' title="' + s + '"><span class="ui-icon ui-icon-circle-triangle-' + (c ? "w" : "e") + '">' + s + "</span></a>" : e ? "" : '<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="' + s + '"><span class="ui-icon ui-icon-circle-triangle-' + (c ? "w" : "e") + '">' + s + "</span></a>"
              , u = this._get(a, "currentText")
              , v = this._get(a, "gotoCurrent") && a.currentDay ? k : b;
            u = f ? this.formatDate(u, v, this._getFormatConfig(a)) : u;
            var w = a.inline ? "" : '<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_' + dpuuid + '.datepicker._hideDatepicker();">' + this._get(a, "closeText") + "</button>"
              , x = d ? '<div class="ui-datepicker-buttonpane ui-widget-content">' + (c ? w : "") + (this._isInRange(a, v) ? '<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_' + dpuuid + ".datepicker._gotoToday('#" + a.id + "');\"" + ">" + u + "</button>" : "") + (c ? "" : w) + "</div>" : ""
              , y = parseInt(this._get(a, "firstDay"), 10);
            y = isNaN(y) ? 0 : y;
            var z = this._get(a, "showWeek")
              , A = this._get(a, "dayNames")
              , B = this._get(a, "dayNamesShort")
              , C = this._get(a, "dayNamesMin")
              , D = this._get(a, "monthNames")
              , E = this._get(a, "monthNamesShort")
              , F = this._get(a, "beforeShowDay")
              , G = this._get(a, "showOtherMonths")
              , H = this._get(a, "selectOtherMonths")
              , I = this._get(a, "calculateWeek") || this.iso8601Week
              , J = this._getDefaultDate(a)
              , K = "";
            for (var L = 0; L < g[0]; L++) {
                var M = "";
                this.maxRows = 4;
                for (var N = 0; N < g[1]; N++) {
                    var O = this._daylightSavingAdjust(new Date(o,n,a.selectedDay))
                      , P = " ui-corner-all"
                      , Q = "";
                    if (j) {
                        Q += '<div class="ui-datepicker-group';
                        if (g[1] > 1) {
                            switch (N) {
                            case 0:
                                Q += " ui-datepicker-group-first",
                                P = " ui-corner-" + (c ? "right" : "left");
                                break;
                            case g[1] - 1:
                                Q += " ui-datepicker-group-last",
                                P = " ui-corner-" + (c ? "left" : "right");
                                break;
                            default:
                                Q += " ui-datepicker-group-middle",
                                P = "";
                            }
                        }
                        Q += '">';
                    }
                    Q += '<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix' + P + '">' + (/all|left/.test(P) && L == 0 ? c ? t : r : "") + (/all|right/.test(P) && L == 0 ? c ? r : t : "") + this._generateMonthYearHeader(a, n, o, l, m, L > 0 || N > 0, D, E) + '</div><table class="ui-datepicker-calendar"><thead>' + "<tr>";
                    var R = z ? '<th class="ui-datepicker-week-col">' + this._get(a, "weekHeader") + "</th>" : "";
                    for (var S = 0; S < 7; S++) {
                        var T = (S + y) % 7;
                        R += "<th" + ((S + y + 6) % 7 >= 5 ? ' class="ui-datepicker-week-end"' : "") + ">" + '<span title="' + A[T] + '">' + C[T] + "</span></th>";
                    }
                    Q += R + "</tr></thead><tbody>";
                    var U = this._getDaysInMonth(o, n);
                    o == a.selectedYear && n == a.selectedMonth && (a.selectedDay = Math.min(a.selectedDay, U));
                    var V = (this._getFirstDayOfMonth(o, n) - y + 7) % 7
                      , W = Math.ceil((V + U) / 7)
                      , X = j ? this.maxRows > W ? this.maxRows : W : W;
                    this.maxRows = X;
                    var Y = this._daylightSavingAdjust(new Date(o,n,1 - V));
                    for (var Z = 0; Z < X; Z++) {
                        Q += "<tr>";
                        var _ = z ? '<td class="ui-datepicker-week-col">' + this._get(a, "calculateWeek")(Y) + "</td>" : "";
                        for (var S = 0; S < 7; S++) {
                            var ba = F ? F.apply(a.input ? a.input[0] : null , [Y]) : [!0, ""]
                              , bb = Y.getMonth() != n
                              , bc = bb && !H || !ba[0] || l && Y < l || m && Y > m;
                            _ += '<td class="' + ((S + y + 6) % 7 >= 5 ? " ui-datepicker-week-end" : "") + (bb ? " ui-datepicker-other-month" : "") + (Y.getTime() == O.getTime() && n == a.selectedMonth && a._keyEvent || J.getTime() == Y.getTime() && J.getTime() == O.getTime() ? " " + this._dayOverClass : "") + (bc ? " " + this._unselectableClass + " ui-state-disabled" : "") + (bb && !G ? "" : " " + ba[1] + (Y.getTime() == k.getTime() ? " " + this._currentClass : "") + (Y.getTime() == b.getTime() ? " ui-datepicker-today" : "")) + '"' + ((!bb || G) && ba[2] ? ' title="' + ba[2] + '"' : "") + (bc ? "" : ' onclick="DP_jQuery_' + dpuuid + ".datepicker._selectDay('#" + a.id + "'," + Y.getMonth() + "," + Y.getFullYear() + ', this);return false;"') + ">" + (bb && !G ? "&#xa0;" : bc ? '<span class="ui-state-default">' + Y.getDate() + "</span>" : '<a class="ui-state-default' + (Y.getTime() == b.getTime() ? " ui-state-highlight" : "") + (Y.getTime() == k.getTime() ? " ui-state-active" : "") + (bb ? " ui-priority-secondary" : "") + '" href="#">' + Y.getDate() + "</a>") + "</td>",
                            Y.setDate(Y.getDate() + 1),
                            Y = this._daylightSavingAdjust(Y);
                        }
                        Q += _ + "</tr>";
                    }
                    n++,
                    n > 11 && (n = 0,
                    o++),
                    Q += "</tbody></table>" + (j ? "</div>" + (g[0] > 0 && N == g[1] - 1 ? '<div class="ui-datepicker-row-break"></div>' : "") : ""),
                    M += Q;
                }
                K += M;
            }
            K += x + ($.browser.msie && parseInt($.browser.version, 10) < 7 && !a.inline ? '<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>' : ""),
            a._keyEvent = !1;
            return K;
        },
        _generateMonthYearHeader: function(a, b, c, d, e, f, g, h) {
            var i = this._get(a, "changeMonth")
              , j = this._get(a, "changeYear")
              , k = this._get(a, "showMonthAfterYear")
              , l = '<div class="ui-datepicker-title">'
              , m = "";
            if (f || !i) {
                m += '<span class="ui-datepicker-month">' + g[b] + "</span>";
            } else {
                var n = d && d.getFullYear() == c
                  , o = e && e.getFullYear() == c;
                m += '<select class="ui-datepicker-month" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + a.id + "', this, 'M');\" " + ">";
                for (var p = 0; p < 12; p++) {
                    (!n || p >= d.getMonth()) && (!o || p <= e.getMonth()) && (m += '<option value="' + p + '"' + (p == b ? ' selected="selected"' : "") + ">" + h[p] + "</option>");
                }
                m += "</select>";
            }
            k || (l += m + (f || !i || !j ? "&#xa0;" : ""));
            if (!a.yearshtml) {
                a.yearshtml = "";
                if (f || !j) {
                    l += '<span class="ui-datepicker-year">' + c + "</span>";
                } else {
                    var q = this._get(a, "yearRange").split(":")
                      , r = (new Date).getFullYear()
                      , s = function(a) {
                        var b = a.match(/c[+-].*/) ? c + parseInt(a.substring(1), 10) : a.match(/[+-].*/) ? r + parseInt(a, 10) : parseInt(a, 10);
                        return isNaN(b) ? r : b;
                    }
                      , t = s(q[0])
                      , u = Math.max(t, s(q[1] || ""));
                    t = d ? Math.max(t, d.getFullYear()) : t,
                    u = e ? Math.min(u, e.getFullYear()) : u,
                    a.yearshtml += '<select class="ui-datepicker-year" onchange="DP_jQuery_' + dpuuid + ".datepicker._selectMonthYear('#" + a.id + "', this, 'Y');\" " + ">";
                    for (; t <= u; t++) {
                        a.yearshtml += '<option value="' + t + '"' + (t == c ? ' selected="selected"' : "") + ">" + t + "</option>";
                    }
                    a.yearshtml += "</select>",
                    l += a.yearshtml,
                    a.yearshtml = null ;
                }
            }
            l += this._get(a, "yearSuffix"),
            k && (l += (f || !i || !j ? "&#xa0;" : "") + m),
            l += "</div>";
            return l;
        },
        _adjustInstDate: function(a, b, c) {
            var d = a.drawYear + (c == "Y" ? b : 0)
              , e = a.drawMonth + (c == "M" ? b : 0)
              , f = Math.min(a.selectedDay, this._getDaysInMonth(d, e)) + (c == "D" ? b : 0)
              , g = this._restrictMinMax(a, this._daylightSavingAdjust(new Date(d,e,f)));
            a.selectedDay = g.getDate(),
            a.drawMonth = a.selectedMonth = g.getMonth(),
            a.drawYear = a.selectedYear = g.getFullYear(),
            (c == "M" || c == "Y") && this._notifyChange(a);
        },
        _restrictMinMax: function(a, b) {
            var c = this._getMinMaxDate(a, "min")
              , d = this._getMinMaxDate(a, "max")
              , e = c && b < c ? c : b;
            e = d && e > d ? d : e;
            return e;
        },
        _notifyChange: function(a) {
            var b = this._get(a, "onChangeMonthYear");
            b && b.apply(a.input ? a.input[0] : null , [a.selectedYear, a.selectedMonth + 1, a]);
        },
        _getNumberOfMonths: function(a) {
            var b = this._get(a, "numberOfMonths");
            return b == null  ? [1, 1] : typeof b == "number" ? [1, b] : b;
        },
        _getMinMaxDate: function(a, b) {
            return this._determineDate(a, this._get(a, b + "Date"), null );
        },
        _getDaysInMonth: function(a, b) {
            return 32 - this._daylightSavingAdjust(new Date(a,b,32)).getDate();
        },
        _getFirstDayOfMonth: function(a, b) {
            return (new Date(a,b,1)).getDay();
        },
        _canAdjustMonth: function(a, b, c, d) {
            var e = this._getNumberOfMonths(a)
              , f = this._daylightSavingAdjust(new Date(c,d + (b < 0 ? b : e[0] * e[1]),1));
            b < 0 && f.setDate(this._getDaysInMonth(f.getFullYear(), f.getMonth()));
            return this._isInRange(a, f);
        },
        _isInRange: function(a, b) {
            var c = this._getMinMaxDate(a, "min")
              , d = this._getMinMaxDate(a, "max");
            return (!c || b.getTime() >= c.getTime()) && (!d || b.getTime() <= d.getTime());
        },
        _getFormatConfig: function(a) {
            var b = this._get(a, "shortYearCutoff");
            b = typeof b != "string" ? b : (new Date).getFullYear() % 100 + parseInt(b, 10);
            return {
                shortYearCutoff: b,
                dayNamesShort: this._get(a, "dayNamesShort"),
                dayNames: this._get(a, "dayNames"),
                monthNamesShort: this._get(a, "monthNamesShort"),
                monthNames: this._get(a, "monthNames")
            };
        },
        _formatDate: function(a, b, c, d) {
            b || (a.currentDay = a.selectedDay,
            a.currentMonth = a.selectedMonth,
            a.currentYear = a.selectedYear);
            var e = b ? typeof b == "object" ? b : this._daylightSavingAdjust(new Date(d,c,b)) : this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));
            return this.formatDate(this._get(a, "dateFormat"), e, this._getFormatConfig(a));
        }
    }),
    $.fn.datepicker = function(a) {
        if (!this.length) {
            return this;
        }
        $.datepicker.initialized || ($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),
        $.datepicker.initialized = !0);
        var b = Array.prototype.slice.call(arguments, 1);
        if (typeof a == "string" && (a == "isDisabled" || a == "getDate" || a == "widget")) {
            return $.datepicker["_" + a + "Datepicker"].apply($.datepicker, [this[0]].concat(b));
        }
        if (a == "option" && arguments.length == 2 && typeof arguments[1] == "string") {
            return $.datepicker["_" + a + "Datepicker"].apply($.datepicker, [this[0]].concat(b));
        }
        return this.each(function() {
            typeof a == "string" ? $.datepicker["_" + a + "Datepicker"].apply($.datepicker, [this].concat(b)) : $.datepicker._attachDatepicker(this, a);
        });
    }
    ,
    $.datepicker = new Datepicker,
    $.datepicker.initialized = !1,
    $.datepicker.uuid = (new Date).getTime(),
    $.datepicker.version = "1.8.18",
    window["DP_jQuery_" + dpuuid] = $;
})(jQuery);
(function(a, b) {
    a.widget("ui.progressbar", {
        options: {
            value: 0,
            max: 100
        },
        min: 0,
        _create: function() {
            this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({
                role: "progressbar",
                "aria-valuemin": this.min,
                "aria-valuemax": this.options.max,
                "aria-valuenow": this._value()
            }),
            this.valueDiv = a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),
            this.oldValue = this._value(),
            this._refreshValue();
        },
        destroy: function() {
            this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),
            this.valueDiv.remove(),
            a.Widget.prototype.destroy.apply(this, arguments);
        },
        value: function(a) {
            if (a === b) {
                return this._value();
            }
            this._setOption("value", a);
            return this;
        },
        _setOption: function(b, c) {
            b === "value" && (this.options.value = c,
            this._refreshValue(),
            this._value() === this.options.max && this._trigger("complete")),
            a.Widget.prototype._setOption.apply(this, arguments);
        },
        _value: function() {
            var a = this.options.value;
            typeof a != "number" && (a = 0);
            return Math.min(this.options.max, Math.max(this.min, a));
        },
        _percentage: function() {
            return 100 * this._value() / this.options.max;
        },
        _refreshValue: function() {
            var a = this.value()
              , b = this._percentage();
            this.oldValue !== a && (this.oldValue = a,
            this._trigger("change")),
            this.valueDiv.toggle(a > this.min).toggleClass("ui-corner-right", a === this.options.max).width(b.toFixed(0) + "%"),
            this.element.attr("aria-valuenow", a);
        }
    }),
    a.extend(a.ui.progressbar, {
        version: "1.8.18"
    });
})(jQuery);
jQuery.effects || function(a, b) {
    function l(b) {
        if (!b || typeof b == "number" || a.fx.speeds[b]) {
            return !0;
        }
        if (typeof b == "string" && !a.effects[b]) {
            return !0;
        }
        return !1;
    }
    function k(b, c, d, e) {
        typeof b == "object" && (e = c,
        d = null ,
        c = b,
        b = c.effect),
        a.isFunction(c) && (e = c,
        d = null ,
        c = {});
        if (typeof c == "number" || a.fx.speeds[c]) {
            e = d,
            d = c,
            c = {};
        }
        a.isFunction(d) && (e = d,
        d = null ),
        c = c || {},
        d = d || c.duration,
        d = a.fx.off ? 0 : typeof d == "number" ? d : d in a.fx.speeds ? a.fx.speeds[d] : a.fx.speeds._default,
        e = e || c.complete;
        return [b, c, d, e];
    }
    function j(a, b) {
        var c = {
            _: 0
        }, d;
        for (d in b) {
            a[d] != b[d] && (c[d] = b[d]);
        }
        return c;
    }
    function i(b) {
        var c, d;
        for (c in b) {
            d = b[c],
            (d == null  || a.isFunction(d) || c in g || /scrollbar/.test(c) || !/color/i.test(c) && isNaN(parseFloat(d))) && delete b[c];
        }
        return b;
    }
    function h() {
        var a = document.defaultView ? document.defaultView.getComputedStyle(this, null ) : this.currentStyle, b = {}, c, d;
        if (a && a.length && a[0] && a[a[0]]) {
            var e = a.length;
            while (e--) {
                c = a[e],
                typeof a[c] == "string" && (d = c.replace(/\-(\w)/g, function(a, b) {
                    return b.toUpperCase();
                }),
                b[d] = a[c]);
            }
        } else {
            for (c in a) {
                typeof a[c] == "string" && (b[c] = a[c]);
            }
        }
        return b;
    }
    function d(b, d) {
        var e;
        do {
            e = a.curCSS(b, d);
            if (e != "" && e != "transparent" || a.nodeName(b, "body")) {
                break;
            }
            d = "backgroundColor";
        } while (b = b.parentNode);return c(e);
    }
    function c(b) {
        var c;
        if (b && b.constructor == Array && b.length == 3) {
            return b;
        }
        if (c = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)) {
            return [parseInt(c[1], 10), parseInt(c[2], 10), parseInt(c[3], 10)];
        }
        if (c = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b)) {
            return [parseFloat(c[1]) * 2.55, parseFloat(c[2]) * 2.55, parseFloat(c[3]) * 2.55];
        }
        if (c = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b)) {
            return [parseInt(c[1], 16), parseInt(c[2], 16), parseInt(c[3], 16)];
        }
        if (c = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b)) {
            return [parseInt(c[1] + c[1], 16), parseInt(c[2] + c[2], 16), parseInt(c[3] + c[3], 16)];
        }
        if (c = /rgba\(0, 0, 0, 0\)/.exec(b)) {
            return e.transparent;
        }
        return e[a.trim(b).toLowerCase()];
    }
    a.effects = {},
    a.each(["backgroundColor", "borderBottomColor", "borderLeftColor", "borderRightColor", "borderTopColor", "borderColor", "color", "outlineColor"], function(b, e) {
        a.fx.step[e] = function(a) {
            a.colorInit || (a.start = d(a.elem, e),
            a.end = c(a.end),
            a.colorInit = !0),
            a.elem.style[e] = "rgb(" + Math.max(Math.min(parseInt(a.pos * (a.end[0] - a.start[0]) + a.start[0], 10), 255), 0) + "," + Math.max(Math.min(parseInt(a.pos * (a.end[1] - a.start[1]) + a.start[1], 10), 255), 0) + "," + Math.max(Math.min(parseInt(a.pos * (a.end[2] - a.start[2]) + a.start[2], 10), 255), 0) + ")";
        }
        ;
    });
    var e = {
        aqua: [0, 255, 255],
        azure: [240, 255, 255],
        beige: [245, 245, 220],
        black: [0, 0, 0],
        blue: [0, 0, 255],
        brown: [165, 42, 42],
        cyan: [0, 255, 255],
        darkblue: [0, 0, 139],
        darkcyan: [0, 139, 139],
        darkgrey: [169, 169, 169],
        darkgreen: [0, 100, 0],
        darkkhaki: [189, 183, 107],
        darkmagenta: [139, 0, 139],
        darkolivegreen: [85, 107, 47],
        darkorange: [255, 140, 0],
        darkorchid: [153, 50, 204],
        darkred: [139, 0, 0],
        darksalmon: [233, 150, 122],
        darkviolet: [148, 0, 211],
        fuchsia: [255, 0, 255],
        gold: [255, 215, 0],
        green: [0, 128, 0],
        indigo: [75, 0, 130],
        khaki: [240, 230, 140],
        lightblue: [173, 216, 230],
        lightcyan: [224, 255, 255],
        lightgreen: [144, 238, 144],
        lightgrey: [211, 211, 211],
        lightpink: [255, 182, 193],
        lightyellow: [255, 255, 224],
        lime: [0, 255, 0],
        magenta: [255, 0, 255],
        maroon: [128, 0, 0],
        navy: [0, 0, 128],
        olive: [128, 128, 0],
        orange: [255, 165, 0],
        pink: [255, 192, 203],
        purple: [128, 0, 128],
        violet: [128, 0, 128],
        red: [255, 0, 0],
        silver: [192, 192, 192],
        white: [255, 255, 255],
        yellow: [255, 255, 0],
        transparent: [255, 255, 255]
    }
      , f = ["add", "remove", "toggle"]
      , g = {
        border: 1,
        borderBottom: 1,
        borderColor: 1,
        borderLeft: 1,
        borderRight: 1,
        borderTop: 1,
        borderWidth: 1,
        margin: 1,
        padding: 1
    };
    a.effects.animateClass = function(b, c, d, e) {
        a.isFunction(d) && (e = d,
        d = null );
        return this.queue(function() {
            var g = a(this), k = g.attr("style") || " ", l = i(h.call(this)), m, n = g.attr("class");
            a.each(f, function(a, c) {
                b[c] && g[c + "Class"](b[c]);
            }),
            m = i(h.call(this)),
            g.attr("class", n),
            g.animate(j(l, m), {
                queue: !1,
                duration: c,
                easing: d,
                complete: function() {
                    a.each(f, function(a, c) {
                        b[c] && g[c + "Class"](b[c]);
                    }),
                    typeof g.attr("style") == "object" ? (g.attr("style").cssText = "",
                    g.attr("style").cssText = k) : g.attr("style", k),
                    e && e.apply(this, arguments),
                    a.dequeue(this);
                }
            });
        });
    }
    ,
    a.fn.extend({
        _addClass: a.fn.addClass,
        addClass: function(b, c, d, e) {
            return c ? a.effects.animateClass.apply(this, [{
                add: b
            }, c, d, e]) : this._addClass(b);
        },
        _removeClass: a.fn.removeClass,
        removeClass: function(b, c, d, e) {
            return c ? a.effects.animateClass.apply(this, [{
                remove: b
            }, c, d, e]) : this._removeClass(b);
        },
        _toggleClass: a.fn.toggleClass,
        toggleClass: function(c, d, e, f, g) {
            return typeof d == "boolean" || d === b ? e ? a.effects.animateClass.apply(this, [d ? {
                add: c
            } : {
                remove: c
            }, e, f, g]) : this._toggleClass(c, d) : a.effects.animateClass.apply(this, [{
                toggle: c
            }, d, e, f]);
        },
        switchClass: function(b, c, d, e, f) {
            return a.effects.animateClass.apply(this, [{
                add: c,
                remove: b
            }, d, e, f]);
        }
    }),
    a.extend(a.effects, {
        version: "1.8.18",
        save: function(a, b) {
            for (var c = 0; c < b.length; c++) {
                b[c] !== null  && a.data("ec.storage." + b[c], a[0].style[b[c]]);
            }
        },
        restore: function(a, b) {
            for (var c = 0; c < b.length; c++) {
                b[c] !== null  && a.css(b[c], a.data("ec.storage." + b[c]));
            }
        },
        setMode: function(a, b) {
            b == "toggle" && (b = a.is(":hidden") ? "show" : "hide");
            return b;
        },
        getBaseline: function(a, b) {
            var c, d;
            switch (a[0]) {
            case "top":
                c = 0;
                break;
            case "middle":
                c = 0.5;
                break;
            case "bottom":
                c = 1;
                break;
            default:
                c = a[0] / b.height;
            }
            switch (a[1]) {
            case "left":
                d = 0;
                break;
            case "center":
                d = 0.5;
                break;
            case "right":
                d = 1;
                break;
            default:
                d = a[1] / b.width;
            }
            return {
                x: d,
                y: c
            };
        },
        createWrapper: function(b) {
            if (b.parent().is(".ui-effects-wrapper")) {
                return b.parent();
            }
            var c = {
                width: b.outerWidth(!0),
                height: b.outerHeight(!0),
                "float": b.css("float")
            }
              , d = a("<div></div>").addClass("ui-effects-wrapper").css({
                fontSize: "100%",
                background: "transparent",
                border: "none",
                margin: 0,
                padding: 0
            })
              , e = document.activeElement;
            b.wrap(d),
            (b[0] === e || a.contains(b[0], e)) && a(e).focus(),
            d = b.parent(),
            b.css("position") == "static" ? (d.css({
                position: "relative"
            }),
            b.css({
                position: "relative"
            })) : (a.extend(c, {
                position: b.css("position"),
                zIndex: b.css("z-index")
            }),
            a.each(["top", "left", "bottom", "right"], function(a, d) {
                c[d] = b.css(d),
                isNaN(parseInt(c[d], 10)) && (c[d] = "auto");
            }),
            b.css({
                position: "relative",
                top: 0,
                left: 0,
                right: "auto",
                bottom: "auto"
            }));
            return d.css(c).show();
        },
        removeWrapper: function(b) {
            var c, d = document.activeElement;
            if (b.parent().is(".ui-effects-wrapper")) {
                c = b.parent().replaceWith(b),
                (b[0] === d || a.contains(b[0], d)) && a(d).focus();
                return c;
            }
            return b;
        },
        setTransition: function(b, c, d, e) {
            e = e || {},
            a.each(c, function(a, c) {
                unit = b.cssUnit(c),
                unit[0] > 0 && (e[c] = unit[0] * d + unit[1]);
            });
            return e;
        }
    }),
    a.fn.extend({
        effect: function(b, c, d, e) {
            var f = k.apply(this, arguments)
              , g = {
                options: f[1],
                duration: f[2],
                callback: f[3]
            }
              , h = g.options.mode
              , i = a.effects[b];
            if (a.fx.off || !i) {
                return h ? this[h](g.duration, g.callback) : this.each(function() {
                    g.callback && g.callback.call(this);
                });
            }
            return i.call(this, g);
        },
        _show: a.fn.show,
        show: function(a) {
            if (l(a)) {
                return this._show.apply(this, arguments);
            }
            var b = k.apply(this, arguments);
            b[1].mode = "show";
            return this.effect.apply(this, b);
        },
        _hide: a.fn.hide,
        hide: function(a) {
            if (l(a)) {
                return this._hide.apply(this, arguments);
            }
            var b = k.apply(this, arguments);
            b[1].mode = "hide";
            return this.effect.apply(this, b);
        },
        __toggle: a.fn.toggle,
        toggle: function(b) {
            if (l(b) || typeof b == "boolean" || a.isFunction(b)) {
                return this.__toggle.apply(this, arguments);
            }
            var c = k.apply(this, arguments);
            c[1].mode = "toggle";
            return this.effect.apply(this, c);
        },
        cssUnit: function(b) {
            var c = this.css(b)
              , d = [];
            a.each(["em", "px", "%", "pt"], function(a, b) {
                c.indexOf(b) > 0 && (d = [parseFloat(c), b]);
            });
            return d;
        }
    }),
    a.easing.jswing = a.easing.swing,
    a.extend(a.easing, {
        def: "easeOutQuad",
        swing: function(b, c, d, e, f) {
            return a.easing[a.easing.def](b, c, d, e, f);
        },
        easeInQuad: function(a, b, c, d, e) {
            return d * (b /= e) * b + c;
        },
        easeOutQuad: function(a, b, c, d, e) {
            return -d * (b /= e) * (b - 2) + c;
        },
        easeInOutQuad: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) {
                return d / 2 * b * b + c;
            }
            return -d / 2 * (--b * (b - 2) - 1) + c;
        },
        easeInCubic: function(a, b, c, d, e) {
            return d * (b /= e) * b * b + c;
        },
        easeOutCubic: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b + 1) + c;
        },
        easeInOutCubic: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) {
                return d / 2 * b * b * b + c;
            }
            return d / 2 * ((b -= 2) * b * b + 2) + c;
        },
        easeInQuart: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b + c;
        },
        easeOutQuart: function(a, b, c, d, e) {
            return -d * ((b = b / e - 1) * b * b * b - 1) + c;
        },
        easeInOutQuart: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) {
                return d / 2 * b * b * b * b + c;
            }
            return -d / 2 * ((b -= 2) * b * b * b - 2) + c;
        },
        easeInQuint: function(a, b, c, d, e) {
            return d * (b /= e) * b * b * b * b + c;
        },
        easeOutQuint: function(a, b, c, d, e) {
            return d * ((b = b / e - 1) * b * b * b * b + 1) + c;
        },
        easeInOutQuint: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) {
                return d / 2 * b * b * b * b * b + c;
            }
            return d / 2 * ((b -= 2) * b * b * b * b + 2) + c;
        },
        easeInSine: function(a, b, c, d, e) {
            return -d * Math.cos(b / e * (Math.PI / 2)) + d + c;
        },
        easeOutSine: function(a, b, c, d, e) {
            return d * Math.sin(b / e * (Math.PI / 2)) + c;
        },
        easeInOutSine: function(a, b, c, d, e) {
            return -d / 2 * (Math.cos(Math.PI * b / e) - 1) + c;
        },
        easeInExpo: function(a, b, c, d, e) {
            return b == 0 ? c : d * Math.pow(2, 10 * (b / e - 1)) + c;
        },
        easeOutExpo: function(a, b, c, d, e) {
            return b == e ? c + d : d * (-Math.pow(2, -10 * b / e) + 1) + c;
        },
        easeInOutExpo: function(a, b, c, d, e) {
            if (b == 0) {
                return c;
            }
            if (b == e) {
                return c + d;
            }
            if ((b /= e / 2) < 1) {
                return d / 2 * Math.pow(2, 10 * (b - 1)) + c;
            }
            return d / 2 * (-Math.pow(2, -10 * --b) + 2) + c;
        },
        easeInCirc: function(a, b, c, d, e) {
            return -d * (Math.sqrt(1 - (b /= e) * b) - 1) + c;
        },
        easeOutCirc: function(a, b, c, d, e) {
            return d * Math.sqrt(1 - (b = b / e - 1) * b) + c;
        },
        easeInOutCirc: function(a, b, c, d, e) {
            if ((b /= e / 2) < 1) {
                return -d / 2 * (Math.sqrt(1 - b * b) - 1) + c;
            }
            return d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c;
        },
        easeInElastic: function(a, b, c, d, e) {
            var f = 1.70158
              , g = 0
              , h = d;
            if (b == 0) {
                return c;
            }
            if ((b /= e) == 1) {
                return c + d;
            }
            g || (g = e * 0.3);
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4;
            } else {
                var f = g / (2 * Math.PI) * Math.asin(d / h);
            }
            return -(h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g)) + c;
        },
        easeOutElastic: function(a, b, c, d, e) {
            var f = 1.70158
              , g = 0
              , h = d;
            if (b == 0) {
                return c;
            }
            if ((b /= e) == 1) {
                return c + d;
            }
            g || (g = e * 0.3);
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4;
            } else {
                var f = g / (2 * Math.PI) * Math.asin(d / h);
            }
            return h * Math.pow(2, -10 * b) * Math.sin((b * e - f) * 2 * Math.PI / g) + d + c;
        },
        easeInOutElastic: function(a, b, c, d, e) {
            var f = 1.70158
              , g = 0
              , h = d;
            if (b == 0) {
                return c;
            }
            if ((b /= e / 2) == 2) {
                return c + d;
            }
            g || (g = e * 0.3 * 1.5);
            if (h < Math.abs(d)) {
                h = d;
                var f = g / 4;
            } else {
                var f = g / (2 * Math.PI) * Math.asin(d / h);
            }
            if (b < 1) {
                return -0.5 * h * Math.pow(2, 10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g) + c;
            }
            return h * Math.pow(2, -10 * (b -= 1)) * Math.sin((b * e - f) * 2 * Math.PI / g) * 0.5 + d + c;
        },
        easeInBack: function(a, c, d, e, f, g) {
            g == b && (g = 1.70158);
            return e * (c /= f) * c * ((g + 1) * c - g) + d;
        },
        easeOutBack: function(a, c, d, e, f, g) {
            g == b && (g = 1.70158);
            return e * ((c = c / f - 1) * c * ((g + 1) * c + g) + 1) + d;
        },
        easeInOutBack: function(a, c, d, e, f, g) {
            g == b && (g = 1.70158);
            if ((c /= f / 2) < 1) {
                return e / 2 * c * c * (((g *= 1.525) + 1) * c - g) + d;
            }
            return e / 2 * ((c -= 2) * c * (((g *= 1.525) + 1) * c + g) + 2) + d;
        },
        easeInBounce: function(b, c, d, e, f) {
            return e - a.easing.easeOutBounce(b, f - c, 0, e, f) + d;
        },
        easeOutBounce: function(a, b, c, d, e) {
            return (b /= e) < 1 / 2.75 ? d * 7.5625 * b * b + c : b < 2 / 2.75 ? d * (7.5625 * (b -= 1.5 / 2.75) * b + 0.75) + c : b < 2.5 / 2.75 ? d * (7.5625 * (b -= 2.25 / 2.75) * b + 0.9375) + c : d * (7.5625 * (b -= 2.625 / 2.75) * b + 0.984375) + c;
        },
        easeInOutBounce: function(b, c, d, e, f) {
            if (c < f / 2) {
                return a.easing.easeInBounce(b, c * 2, 0, e, f) * 0.5 + d;
            }
            return a.easing.easeOutBounce(b, c * 2 - f, 0, e, f) * 0.5 + e * 0.5 + d;
        }
    });
}(jQuery);
(function(a, b) {
    a.effects.blind = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right"]
              , e = a.effects.setMode(c, b.options.mode || "hide")
              , f = b.options.direction || "vertical";
            a.effects.save(c, d),
            c.show();
            var g = a.effects.createWrapper(c).css({
                overflow: "hidden"
            })
              , h = f == "vertical" ? "height" : "width"
              , i = f == "vertical" ? g.height() : g.width();
            e == "show" && g.css(h, 0);
            var j = {};
            j[h] = e == "show" ? i : 0,
            g.animate(j, b.duration, b.options.easing, function() {
                e == "hide" && c.hide(),
                a.effects.restore(c, d),
                a.effects.removeWrapper(c),
                b.callback && b.callback.apply(c[0], arguments),
                c.dequeue();
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.bounce = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right"]
              , e = a.effects.setMode(c, b.options.mode || "effect")
              , f = b.options.direction || "up"
              , g = b.options.distance || 20
              , h = b.options.times || 5
              , i = b.duration || 250;
            /show|hide/.test(e) && d.push("opacity"),
            a.effects.save(c, d),
            c.show(),
            a.effects.createWrapper(c);
            var j = f == "up" || f == "down" ? "top" : "left"
              , k = f == "up" || f == "left" ? "pos" : "neg"
              , g = b.options.distance || (j == "top" ? c.outerHeight({
                margin: !0
            }) / 3 : c.outerWidth({
                margin: !0
            }) / 3);
            e == "show" && c.css("opacity", 0).css(j, k == "pos" ? -g : g),
            e == "hide" && (g = g / (h * 2)),
            e != "hide" && h--;
            if (e == "show") {
                var l = {
                    opacity: 1
                };
                l[j] = (k == "pos" ? "+=" : "-=") + g,
                c.animate(l, i / 2, b.options.easing),
                g = g / 2,
                h--;
            }
            for (var m = 0; m < h; m++) {
                var n = {}
                  , p = {};
                n[j] = (k == "pos" ? "-=" : "+=") + g,
                p[j] = (k == "pos" ? "+=" : "-=") + g,
                c.animate(n, i / 2, b.options.easing).animate(p, i / 2, b.options.easing),
                g = e == "hide" ? g * 2 : g / 2;
            }
            if (e == "hide") {
                var l = {
                    opacity: 0
                };
                l[j] = (k == "pos" ? "-=" : "+=") + g,
                c.animate(l, i / 2, b.options.easing, function() {
                    c.hide(),
                    a.effects.restore(c, d),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(this, arguments);
                });
            } else {
                var n = {}
                  , p = {};
                n[j] = (k == "pos" ? "-=" : "+=") + g,
                p[j] = (k == "pos" ? "+=" : "-=") + g,
                c.animate(n, i / 2, b.options.easing).animate(p, i / 2, b.options.easing, function() {
                    a.effects.restore(c, d),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(this, arguments);
                });
            }
            c.queue("fx", function() {
                c.dequeue();
            }),
            c.dequeue();
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.clip = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right", "height", "width"]
              , e = a.effects.setMode(c, b.options.mode || "hide")
              , f = b.options.direction || "vertical";
            a.effects.save(c, d),
            c.show();
            var g = a.effects.createWrapper(c).css({
                overflow: "hidden"
            })
              , h = c[0].tagName == "IMG" ? g : c
              , i = {
                size: f == "vertical" ? "height" : "width",
                position: f == "vertical" ? "top" : "left"
            }
              , j = f == "vertical" ? h.height() : h.width();
            e == "show" && (h.css(i.size, 0),
            h.css(i.position, j / 2));
            var k = {};
            k[i.size] = e == "show" ? j : 0,
            k[i.position] = e == "show" ? 0 : j / 2,
            h.animate(k, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    e == "hide" && c.hide(),
                    a.effects.restore(c, d),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(c[0], arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.drop = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right", "opacity"]
              , e = a.effects.setMode(c, b.options.mode || "hide")
              , f = b.options.direction || "left";
            a.effects.save(c, d),
            c.show(),
            a.effects.createWrapper(c);
            var g = f == "up" || f == "down" ? "top" : "left"
              , h = f == "up" || f == "left" ? "pos" : "neg"
              , i = b.options.distance || (g == "top" ? c.outerHeight({
                margin: !0
            }) / 2 : c.outerWidth({
                margin: !0
            }) / 2);
            e == "show" && c.css("opacity", 0).css(g, h == "pos" ? -i : i);
            var j = {
                opacity: e == "show" ? 1 : 0
            };
            j[g] = (e == "show" ? h == "pos" ? "+=" : "-=" : h == "pos" ? "-=" : "+=") + i,
            c.animate(j, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    e == "hide" && c.hide(),
                    a.effects.restore(c, d),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(this, arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.explode = function(b) {
        return this.queue(function() {
            var c = b.options.pieces ? Math.round(Math.sqrt(b.options.pieces)) : 3
              , d = b.options.pieces ? Math.round(Math.sqrt(b.options.pieces)) : 3;
            b.options.mode = b.options.mode == "toggle" ? a(this).is(":visible") ? "hide" : "show" : b.options.mode;
            var e = a(this).show().css("visibility", "hidden")
              , f = e.offset();
            f.top -= parseInt(e.css("marginTop"), 10) || 0,
            f.left -= parseInt(e.css("marginLeft"), 10) || 0;
            var g = e.outerWidth(!0)
              , h = e.outerHeight(!0);
            for (var i = 0; i < c; i++) {
                for (var j = 0; j < d; j++) {
                    e.clone().appendTo("body").wrap("<div></div>").css({
                        position: "absolute",
                        visibility: "visible",
                        left: -j * (g / d),
                        top: -i * (h / c)
                    }).parent().addClass("ui-effects-explode").css({
                        position: "absolute",
                        overflow: "hidden",
                        width: g / d,
                        height: h / c,
                        left: f.left + j * (g / d) + (b.options.mode == "show" ? (j - Math.floor(d / 2)) * (g / d) : 0),
                        top: f.top + i * (h / c) + (b.options.mode == "show" ? (i - Math.floor(c / 2)) * (h / c) : 0),
                        opacity: b.options.mode == "show" ? 0 : 1
                    }).animate({
                        left: f.left + j * (g / d) + (b.options.mode == "show" ? 0 : (j - Math.floor(d / 2)) * (g / d)),
                        top: f.top + i * (h / c) + (b.options.mode == "show" ? 0 : (i - Math.floor(c / 2)) * (h / c)),
                        opacity: b.options.mode == "show" ? 1 : 0
                    }, b.duration || 500);
                }
            }
            setTimeout(function() {
                b.options.mode == "show" ? e.css({
                    visibility: "visible"
                }) : e.css({
                    visibility: "visible"
                }).hide(),
                b.callback && b.callback.apply(e[0]),
                e.dequeue(),
                a("div.ui-effects-explode").remove();
            }, b.duration || 500);
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.fade = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = a.effects.setMode(c, b.options.mode || "hide");
            c.animate({
                opacity: d
            }, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    b.callback && b.callback.apply(this, arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.fold = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right"]
              , e = a.effects.setMode(c, b.options.mode || "hide")
              , f = b.options.size || 15
              , g = !!b.options.horizFirst
              , h = b.duration ? b.duration / 2 : a.fx.speeds._default / 2;
            a.effects.save(c, d),
            c.show();
            var i = a.effects.createWrapper(c).css({
                overflow: "hidden"
            })
              , j = e == "show" != g
              , k = j ? ["width", "height"] : ["height", "width"]
              , l = j ? [i.width(), i.height()] : [i.height(), i.width()]
              , m = /([0-9]+)%/.exec(f);
            m && (f = parseInt(m[1], 10) / 100 * l[e == "hide" ? 0 : 1]),
            e == "show" && i.css(g ? {
                height: 0,
                width: f
            } : {
                height: f,
                width: 0
            });
            var n = {}
              , p = {};
            n[k[0]] = e == "show" ? l[0] : f,
            p[k[1]] = e == "show" ? l[1] : 0,
            i.animate(n, h, b.options.easing).animate(p, h, b.options.easing, function() {
                e == "hide" && c.hide(),
                a.effects.restore(c, d),
                a.effects.removeWrapper(c),
                b.callback && b.callback.apply(c[0], arguments),
                c.dequeue();
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.highlight = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["backgroundImage", "backgroundColor", "opacity"]
              , e = a.effects.setMode(c, b.options.mode || "show")
              , f = {
                backgroundColor: c.css("backgroundColor")
            };
            e == "hide" && (f.opacity = 0),
            a.effects.save(c, d),
            c.show().css({
                backgroundImage: "none",
                backgroundColor: b.options.color || "#ffff99"
            }).animate(f, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    e == "hide" && c.hide(),
                    a.effects.restore(c, d),
                    e == "show" && !a.support.opacity && this.style.removeAttribute("filter"),
                    b.callback && b.callback.apply(this, arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.pulsate = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = a.effects.setMode(c, b.options.mode || "show");
            times = (b.options.times || 5) * 2 - 1,
            duration = b.duration ? b.duration / 2 : a.fx.speeds._default / 2,
            isVisible = c.is(":visible"),
            animateTo = 0,
            isVisible || (c.css("opacity", 0).show(),
            animateTo = 1),
            (d == "hide" && isVisible || d == "show" && !isVisible) && times--;
            for (var e = 0; e < times; e++) {
                c.animate({
                    opacity: animateTo
                }, duration, b.options.easing),
                animateTo = (animateTo + 1) % 2;
            }
            c.animate({
                opacity: animateTo
            }, duration, b.options.easing, function() {
                animateTo == 0 && c.hide(),
                b.callback && b.callback.apply(this, arguments);
            }),
            c.queue("fx", function() {
                c.dequeue();
            }).dequeue();
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.puff = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = a.effects.setMode(c, b.options.mode || "hide")
              , e = parseInt(b.options.percent, 10) || 150
              , f = e / 100
              , g = {
                height: c.height(),
                width: c.width()
            };
            a.extend(b.options, {
                fade: !0,
                mode: d,
                percent: d == "hide" ? e : 100,
                from: d == "hide" ? g : {
                    height: g.height * f,
                    width: g.width * f
                }
            }),
            c.effect("scale", b.options, b.duration, b.callback),
            c.dequeue();
        });
    }
    ,
    a.effects.scale = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = a.extend(!0, {}, b.options)
              , e = a.effects.setMode(c, b.options.mode || "effect")
              , f = parseInt(b.options.percent, 10) || (parseInt(b.options.percent, 10) == 0 ? 0 : e == "hide" ? 0 : 100)
              , g = b.options.direction || "both"
              , h = b.options.origin;
            e != "effect" && (d.origin = h || ["middle", "center"],
            d.restore = !0);
            var i = {
                height: c.height(),
                width: c.width()
            };
            c.from = b.options.from || (e == "show" ? {
                height: 0,
                width: 0
            } : i);
            var j = {
                y: g != "horizontal" ? f / 100 : 1,
                x: g != "vertical" ? f / 100 : 1
            };
            c.to = {
                height: i.height * j.y,
                width: i.width * j.x
            },
            b.options.fade && (e == "show" && (c.from.opacity = 0,
            c.to.opacity = 1),
            e == "hide" && (c.from.opacity = 1,
            c.to.opacity = 0)),
            d.from = c.from,
            d.to = c.to,
            d.mode = e,
            c.effect("size", d, b.duration, b.callback),
            c.dequeue();
        });
    }
    ,
    a.effects.size = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right", "width", "height", "overflow", "opacity"]
              , e = ["position", "top", "bottom", "left", "right", "overflow", "opacity"]
              , f = ["width", "height", "overflow"]
              , g = ["fontSize"]
              , h = ["borderTopWidth", "borderBottomWidth", "paddingTop", "paddingBottom"]
              , i = ["borderLeftWidth", "borderRightWidth", "paddingLeft", "paddingRight"]
              , j = a.effects.setMode(c, b.options.mode || "effect")
              , k = b.options.restore || !1
              , l = b.options.scale || "both"
              , m = b.options.origin
              , n = {
                height: c.height(),
                width: c.width()
            };
            c.from = b.options.from || n,
            c.to = b.options.to || n;
            if (m) {
                var p = a.effects.getBaseline(m, n);
                c.from.top = (n.height - c.from.height) * p.y,
                c.from.left = (n.width - c.from.width) * p.x,
                c.to.top = (n.height - c.to.height) * p.y,
                c.to.left = (n.width - c.to.width) * p.x;
            }
            var q = {
                from: {
                    y: c.from.height / n.height,
                    x: c.from.width / n.width
                },
                to: {
                    y: c.to.height / n.height,
                    x: c.to.width / n.width
                }
            };
            if (l == "box" || l == "both") {
                q.from.y != q.to.y && (d = d.concat(h),
                c.from = a.effects.setTransition(c, h, q.from.y, c.from),
                c.to = a.effects.setTransition(c, h, q.to.y, c.to)),
                q.from.x != q.to.x && (d = d.concat(i),
                c.from = a.effects.setTransition(c, i, q.from.x, c.from),
                c.to = a.effects.setTransition(c, i, q.to.x, c.to));
            }
            (l == "content" || l == "both") && q.from.y != q.to.y && (d = d.concat(g),
            c.from = a.effects.setTransition(c, g, q.from.y, c.from),
            c.to = a.effects.setTransition(c, g, q.to.y, c.to)),
            a.effects.save(c, k ? d : e),
            c.show(),
            a.effects.createWrapper(c),
            c.css("overflow", "hidden").css(c.from);
            if (l == "content" || l == "both") {
                h = h.concat(["marginTop", "marginBottom"]).concat(g),
                i = i.concat(["marginLeft", "marginRight"]),
                f = d.concat(h).concat(i),
                c.find("*[width]").each(function() {
                    child = a(this),
                    k && a.effects.save(child, f);
                    var c = {
                        height: child.height(),
                        width: child.width()
                    };
                    child.from = {
                        height: c.height * q.from.y,
                        width: c.width * q.from.x
                    },
                    child.to = {
                        height: c.height * q.to.y,
                        width: c.width * q.to.x
                    },
                    q.from.y != q.to.y && (child.from = a.effects.setTransition(child, h, q.from.y, child.from),
                    child.to = a.effects.setTransition(child, h, q.to.y, child.to)),
                    q.from.x != q.to.x && (child.from = a.effects.setTransition(child, i, q.from.x, child.from),
                    child.to = a.effects.setTransition(child, i, q.to.x, child.to)),
                    child.css(child.from),
                    child.animate(child.to, b.duration, b.options.easing, function() {
                        k && a.effects.restore(child, f);
                    });
                });
            }
            c.animate(c.to, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    c.to.opacity === 0 && c.css("opacity", c.from.opacity),
                    j == "hide" && c.hide(),
                    a.effects.restore(c, k ? d : e),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(this, arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.shake = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right"]
              , e = a.effects.setMode(c, b.options.mode || "effect")
              , f = b.options.direction || "left"
              , g = b.options.distance || 20
              , h = b.options.times || 3
              , i = b.duration || b.options.duration || 140;
            a.effects.save(c, d),
            c.show(),
            a.effects.createWrapper(c);
            var j = f == "up" || f == "down" ? "top" : "left"
              , k = f == "up" || f == "left" ? "pos" : "neg"
              , l = {}
              , m = {}
              , n = {};
            l[j] = (k == "pos" ? "-=" : "+=") + g,
            m[j] = (k == "pos" ? "+=" : "-=") + g * 2,
            n[j] = (k == "pos" ? "-=" : "+=") + g * 2,
            c.animate(l, i, b.options.easing);
            for (var p = 1; p < h; p++) {
                c.animate(m, i, b.options.easing).animate(n, i, b.options.easing);
            }
            c.animate(m, i, b.options.easing).animate(l, i / 2, b.options.easing, function() {
                a.effects.restore(c, d),
                a.effects.removeWrapper(c),
                b.callback && b.callback.apply(this, arguments);
            }),
            c.queue("fx", function() {
                c.dequeue();
            }),
            c.dequeue();
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.slide = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = ["position", "top", "bottom", "left", "right"]
              , e = a.effects.setMode(c, b.options.mode || "show")
              , f = b.options.direction || "left";
            a.effects.save(c, d),
            c.show(),
            a.effects.createWrapper(c).css({
                overflow: "hidden"
            });
            var g = f == "up" || f == "down" ? "top" : "left"
              , h = f == "up" || f == "left" ? "pos" : "neg"
              , i = b.options.distance || (g == "top" ? c.outerHeight({
                margin: !0
            }) : c.outerWidth({
                margin: !0
            }));
            e == "show" && c.css(g, h == "pos" ? isNaN(i) ? "-" + i : -i : i);
            var j = {};
            j[g] = (e == "show" ? h == "pos" ? "+=" : "-=" : h == "pos" ? "-=" : "+=") + i,
            c.animate(j, {
                queue: !1,
                duration: b.duration,
                easing: b.options.easing,
                complete: function() {
                    e == "hide" && c.hide(),
                    a.effects.restore(c, d),
                    a.effects.removeWrapper(c),
                    b.callback && b.callback.apply(this, arguments),
                    c.dequeue();
                }
            });
        });
    }
    ;
})(jQuery);
(function(a, b) {
    a.effects.transfer = function(b) {
        return this.queue(function() {
            var c = a(this)
              , d = a(b.options.to)
              , e = d.offset()
              , f = {
                top: e.top,
                left: e.left,
                height: d.innerHeight(),
                width: d.innerWidth()
            }
              , g = c.offset()
              , h = a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({
                top: g.top,
                left: g.left,
                height: c.innerHeight(),
                width: c.innerWidth(),
                position: "absolute"
            }).animate(f, b.duration, b.options.easing, function() {
                h.remove(),
                b.callback && b.callback.apply(c[0], arguments),
                c.dequeue();
            });
        });
    }
    ;
})(jQuery);
(function($) {
    var dropShadowZindex = 1;
    $.fn.dropShadow = function(options) {
        var opt = $.extend({
            left: 4,
            top: 4,
            blur: 2,
            opacity: 0.5,
            color: "black",
            swap: false
        }, options);
        var jShadows = $([]);
        this.not(".dropShadow").each(function() {
            var jthis = $(this);
            var shadows = [];
            var blur = (opt.blur <= 0) ? 0 : opt.blur;
            var opacity = (blur == 0) ? opt.opacity : opt.opacity / (blur * 8);
            var zOriginal = (opt.swap) ? dropShadowZindex : dropShadowZindex + 1;
            var zShadow = (opt.swap) ? dropShadowZindex + 1 : dropShadowZindex;
            var shadowId;
            if (this.id) {
                shadowId = this.id + "_dropShadow";
            } else {
                shadowId = "ds" + (1 + Math.floor(9999 * Math.random()));
            }
            $.data(this, "shadowId", shadowId);
            $.data(this, "shadowOptions", options);
            jthis.attr("shadowId", shadowId).css("zIndex", zOriginal);
            if (jthis.css("position") != "absolute") {
                jthis.css({
                    position: "relative",
                    zoom: 1
                });
            }
            bgColor = jthis.css("backgroundColor");
            if (bgColor == "rgba(0, 0, 0, 0)") {
                bgColor = "transparent";
            }
            if (bgColor != "transparent" || jthis.css("backgroundImage") != "none" || this.nodeName == "SELECT" || this.nodeName == "INPUT" || this.nodeName == "TEXTAREA") {
                shadows[0] = $("<div></div>").css("background", opt.color);
            } else {
                shadows[0] = jthis.clone().removeAttr("id").removeAttr("name").removeAttr("shadowId").css("color", opt.color);
            }
            shadows[0].addClass("dropShadow").css({
                height: jthis.outerHeight(),
                left: blur,
                opacity: opacity,
                position: "absolute",
                top: blur,
                width: jthis.outerWidth(),
                zIndex: zShadow
            });
            var layers = (8 * blur) + 1;
            for (i = 1; i < layers; i++) {
                shadows[i] = shadows[0].clone();
            }
            var i = 1;
            var j = blur;
            while (j > 0) {
                shadows[i].css({
                    left: j * 2,
                    top: 0
                });
                shadows[i + 1].css({
                    left: j * 4,
                    top: j * 2
                });
                shadows[i + 2].css({
                    left: j * 2,
                    top: j * 4
                });
                shadows[i + 3].css({
                    left: 0,
                    top: j * 2
                });
                shadows[i + 4].css({
                    left: j * 3,
                    top: j
                });
                shadows[i + 5].css({
                    left: j * 3,
                    top: j * 3
                });
                shadows[i + 6].css({
                    left: j,
                    top: j * 3
                });
                shadows[i + 7].css({
                    left: j,
                    top: j
                });
                i += 8;
                j--;
            }
            var divShadow = $("<div></div>").attr("id", shadowId).addClass("dropShadow").css({
                left: jthis.position().left + opt.left - blur,
                marginTop: jthis.css("marginTop"),
                marginRight: jthis.css("marginRight"),
                marginBottom: jthis.css("marginBottom"),
                marginLeft: jthis.css("marginLeft"),
                position: "absolute",
                top: jthis.position().top + opt.top - blur,
                zIndex: zShadow
            });
            for (i = 0; i < layers; i++) {
                divShadow.append(shadows[i]);
            }
            jthis.after(divShadow);
            jShadows = jShadows.add(divShadow);
            $(window).resize(function() {
                try {
                    divShadow.css({
                        left: jthis.position().left + opt.left - blur,
                        top: jthis.position().top + opt.top - blur
                    });
                } catch (e) {}
            });
            dropShadowZindex += 2;
        });
        return this.pushStack(jShadows);
    }
    ;
    $.fn.redrawShadow = function() {
        this.removeShadow();
        return this.each(function() {
            var shadowOptions = $.data(this, "shadowOptions");
            $(this).dropShadow(shadowOptions);
        });
    }
    ;
    $.fn.removeShadow = function() {
        return this.each(function() {
            var shadowId = $(this).shadowId();
            $("div#" + shadowId).remove();
        });
    }
    ;
    $.fn.shadowId = function() {
        return $.data(this[0], "shadowId");
    }
    ;
    $(function() {
        var noPrint = "<style type='text/css' media='print'>";
        noPrint += ".dropShadow{visibility:hidden;}</style>";
        $("head").append(noPrint);
    });
})(jQuery);
jQuery.fn.extend({
    everyTime: function(interval, label, fn, times, belay) {
        return this.each(function() {
            jQuery.timer.add(this, interval, label, fn, times, belay);
        });
    },
    oneTime: function(interval, label, fn) {
        return this.each(function() {
            jQuery.timer.add(this, interval, label, fn, 1);
        });
    },
    stopTime: function(label, fn) {
        return this.each(function() {
            jQuery.timer.remove(this, label, fn);
        });
    }
});
jQuery.extend({
    timer: {
        guid: 1,
        global: {},
        regex: /^([0-9]+)\s*(.*s)?$/,
        powers: {
            "ms": 1,
            "cs": 10,
            "ds": 100,
            "s": 1000,
            "das": 10000,
            "hs": 100000,
            "ks": 1000000
        },
        timeParse: function(value) {
            if (value == undefined || value == null ) {
                return null ;
            }
            var result = this.regex.exec(jQuery.trim(value.toString()));
            if (result[2]) {
                var num = parseInt(result[1], 10);
                var mult = this.powers[result[2]] || 1;
                return num * mult;
            } else {
                return value;
            }
        },
        add: function(element, interval, label, fn, times, belay) {
            var counter = 0;
            if (jQuery.isFunction(label)) {
                if (!times) {
                    times = fn;
                }
                fn = label;
                label = interval;
            }
            interval = jQuery.timer.timeParse(interval);
            if (typeof interval != "number" || isNaN(interval) || interval <= 0) {
                return;
            }
            if (times && times.constructor != Number) {
                belay = !!times;
                times = 0;
            }
            times = times || 0;
            belay = belay || false;
            if (!element.$timers) {
                element.$timers = {};
            }
            if (!element.$timers[label]) {
                element.$timers[label] = {};
            }
            fn.$timerID = fn.$timerID || this.guid++;
            var handler = function() {
                if (belay && this.inProgress) {
                    return;
                }
                this.inProgress = true;
                if ((++counter > times && times !== 0) || fn.call(element, counter) === false) {
                    jQuery.timer.remove(element, label, fn);
                }
                this.inProgress = false;
            }
            ;
            handler.$timerID = fn.$timerID;
            if (!element.$timers[label][fn.$timerID]) {
                element.$timers[label][fn.$timerID] = window.setInterval(handler, interval);
            }
            if (!this.global[label]) {
                this.global[label] = [];
            }
            this.global[label].push(element);
        },
        remove: function(element, label, fn) {
            var timers = element.$timers, ret;
            if (timers) {
                if (!label) {
                    for (label in timers) {
                        this.remove(element, label, fn);
                    }
                } else {
                    if (timers[label]) {
                        if (fn) {
                            if (fn.$timerID) {
                                window.clearInterval(timers[label][fn.$timerID]);
                                delete timers[label][fn.$timerID];
                            }
                        } else {
                            for (var fn in timers[label]) {
                                window.clearInterval(timers[label][fn]);
                                delete timers[label][fn];
                            }
                        }
                        for (ret in timers[label]) {
                            break;
                        }
                        if (!ret) {
                            ret = null ;
                            delete timers[label];
                        }
                    }
                }
                for (ret in timers) {
                    break;
                }
                if (!ret) {
                    element.$timers = null ;
                }
            }
        }
    }
});
if (jQuery.browser.msie) {
    jQuery(window).one("unload", function() {
        var global = jQuery.timer.global;
        for (var label in global) {
            var els = global[label]
              , i = els.length;
            while (--i) {
                jQuery.timer.remove(els[i], label);
            }
        }
    });
}
function test(){
	$(document).ready(function(){
		//alert()	
	})	
}
var checkedLabel = "";
var uncheckedLabel = "";
(function($) {
    var CB = function(e) {
        if (!e) {
            var e = window.event;
        }
        e.cancelBubble = true;
        if (e.stopPropagation) {
            e.stopPropagation();
        }
    }
    ;
    $.fn.checkbox = function(method) {
        var $arguments = arguments;
        try {
            document.execCommand("BackgroundImageCache", false, true);
        } catch (e) {}
        var settings = {
            cls: "jquery-checkbox",
            empty: "empty.png",
            checkedLabel: dictionaryList["on"],
            uncheckedLabel: dictionaryList["off"]
        };
        var addEvents = function(object) {
            var checked = object.checked;
            var disabled = object.disabled;
            var $object = $(object);
            if (object.stateInterval) {
                clearInterval(object.stateInterval);
            }
            object.stateInterval = setInterval(function() {
                if (object.disabled != disabled) {
                    $object.trigger((disabled = !!object.disabled) ? "disable" : "enable");
                }
                if (object.checked != checked) {
                    $object.trigger((checked = !!object.checked) ? "check" : "uncheck");
                }
            }, 10);
            return $object;
        }
        ;
        var methods = {
            init: function(options) {
                settings = $.extend(settings, options || {});
                var ch = this;
                var $ch = addEvents(ch);
                if (ch.wrapper) {
                    ch.wrapper.remove();
                }
                if (ch.checked) {
                    checkedStyle = "display:inline-block";
                    checkedToggleClass = "";
                    uncheckedToggleClass = " toggle_switch";
                    uncheckedStyle = "display:none";
                } else {
                    checkedStyle = "display:none";
                    checkedToggleClass = " toggle_switch";
                    uncheckedToggleClass = "";
                    uncheckedStyle = "display:inline-block";
                }
                ch.wrapper = $('<span tabindex="0" class="' + settings.cls + '"><div class="checkbox_container"> <span class="toggle_off" style="' + uncheckedStyle + '"></span><label class="checkbox_on' + checkedToggleClass + '"><span class="checkbox_on_text" style="' + checkedStyle + '">' + settings.checkedLabel + "</span></label>" + '<label class="checkbox_off' + uncheckedToggleClass + '"><span class="checkbox_off_text" style="' + uncheckedStyle + '">' + settings.uncheckedLabel + '</span></label><span class="toggle_on" style="' + checkedStyle + '"></span></div></span>');
                ch.wrapperInner = ch.wrapper.children("span:eq(0)");
                ch.wrapper.hover(function(e) {
                    ch.wrapperInner.addClass(settings.cls + "-hover");
                    CB(e);
                }, function(e) {
                    ch.wrapperInner.removeClass(settings.cls + "-hover");
                    CB(e);
                });
                $ch.css({
                    position: "absolute",
                    zIndex: -1,
                    visibility: "hidden"
                }).after(ch.wrapper);
                var label = false;
                if ($ch.attr("id")) {
                    label = $("label[for=" + $ch.attr("id") + "]");
                    if (!label.length) {
                        label = false;
                    }
                }
                if (!label) {
                    label = $ch.closest ? $ch.closest("label") : $ch.parents("label:eq(0)");
                    if (!label.length) {
                        label = false;
                    }
                }
                if (label) {
                    label.hover(function(e) {
                        ch.wrapper.trigger("mouseover", [e]);
                    }, function(e) {
                        ch.wrapper.trigger("mouseout", [e]);
                    });
                    label.click(function(e) {
                        $ch.trigger("click", [e]);
                        CB(e);
                        return false;
                    });
                }
                ch.wrapper.keyup(function(e) {
                    if (e.keyCode == 13) {
                        $ch.trigger("click", [e]);
                        CB(e);
                        $ch.trigger("toggle");
                        return false;
                    }
                });
                ch.wrapper.click(function(e) {
                    $ch.trigger("click", [e]);
                    CB(e);
                    $ch.trigger("toggle");
                    return false;
                });
                $ch.click(function(e) {
                    CB(e);
                });
                $ch.bind("disable", function() {
                    ch.wrapper.addClass("ui-state-disabled");
                    ch.wrapperInner.addClass(settings.cls + "-disabled");
                }).bind("enable", function() {
                    ch.wrapper.removeClass("ui-state-disabled");
                    ch.wrapperInner.removeClass(settings.cls + "-disabled");
                });
                $ch.bind("check", function() {
                    ch.wrapper.find(".checkbox_on_text").show();
                    ch.wrapper.find(".checkbox_off_text").hide();
                    ch.wrapper.find(".toggle_on").css("display", "inline-block");
                    ch.wrapper.find(".toggle_off").hide();
                    ch.wrapper.find(".checkbox_on").removeClass("toggle_switch");
                    ch.wrapper.find(".checkbox_off").addClass("toggle_switch");
                    ch.wrapper.addClass(settings.cls + "-checked");
                }).bind("uncheck", function() {
                    ch.wrapper.find(".checkbox_on_text").hide();
                    ch.wrapper.find(".checkbox_off_text").show();
                    ch.wrapper.find(".toggle_off").css("display", "inline-block");
                    ch.wrapper.find(".toggle_on").hide();
                    ch.wrapper.find(".checkbox_on").addClass("toggle_switch");
                    ch.wrapper.find(".checkbox_off").removeClass("toggle_switch");
                    ch.wrapper.removeClass(settings.cls + "-checked");
                });
                $("img", ch.wrapper).bind("dragstart", function() {
                    return false;
                }).bind("mousedown", function() {
                    return false;
                });
                if (window.getSelection) {
                    ch.wrapper.css("MozUserSelect", "none");
                }
                if (ch.checked) {
                    ch.wrapper.addClass(settings.cls + "-checked");
                }
                if (ch.disabled) {
                    ch.wrapperInner.addClass(settings.cls + "-disabled");
                }
            },
            changeLabels: function(checkedLabel, uncheckedLabel) {
                settings.checkedLabel = checkedLabel;
                settings.uncheckedLabel = uncheckedLabel;
                this.wrapper.find(".checkbox_on_text").text(settings.checkedLabel);
                this.wrapper.find(".checkbox_off_text").text(settings.uncheckedLabel);
            },
            disable: function() {
                if (this.wrapper != null ) {
                    this.wrapper.addClass("ui-state-disabled");
                }
            },
            enable: function() {
                if (this.wrapper != null ) {
                    this.wrapper.removeClass("ui-state-disabled");
                }
            }
        };
        return this.each(function() {
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call($arguments, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return methods.init.apply(this, $arguments);
                }
            }
        });
    }
    ;
})(jQuery);
function checkboxOptions(onValue, offValue, id) {
    $(document).ready(function() {
        $("#" + id).checkbox({
            checkedValue: "ON",
            uncheckedValue: "OFF"
        });
    });
}
(function($) {
    $.widget("ui.selectmenu", {
        getter: "value",
        version: "1.9",
        eventPrefix: "selectmenu",
        options: {
            transferClasses: true,
            typeAhead: 1000,
            style: "dropdown",
            positionOptions: {
                my: "left top",
                at: "left bottom",
                offset: null 
            },
            width: null ,
            menuWidth: null ,
            handleWidth: 26,
            maxHeight: null ,
            icons: null ,
            format: null ,
            bgImage: function() {},
            wrapperElement: "<div />"
        },
        _create: function() {
            var self = this
              , o = this.options;
            var selectmenuId = (this.element.attr("id") || "ui-selectmenu-" + Math.random().toString(16).slice(2, 10)).replace(":", "\\:");
            this.ids = [selectmenuId, selectmenuId + "-button", selectmenuId + "-menu"];
            this._safemouseup = true;
            this.isOpen = false;
            this.newelement = $("<a />", {
                "class": this.widgetBaseClass + " ui-widget ui-state-default ui-corner-all",
                "id": this.ids[1],
                "role": "button",
                "href": "#nogo",
                "tabindex": this.element.attr("disabled") ? 1 : 0,
                "aria-haspopup": true,
                "aria-owns": this.ids[2]
            });
            this.newelementWrap = $(o.wrapperElement).append(this.newelement).insertAfter(this.element);
            var tabindex = this.element.attr("tabindex");
            if (tabindex) {
                this.newelement.attr("tabindex", tabindex);
            }
            this.newelement.data("selectelement", this.element);
            this.selectmenuIcon = $('<span class="' + this.widgetBaseClass + '-icon ui-icon"></span>').prependTo(this.newelement);
            this.newelement.prepend('<span class="' + self.widgetBaseClass + '-status" />');
            this.element.bind({
                "click.selectmenu": function(event) {
                    self.newelement.focus();
                    event.preventDefault();
                }
            });
            this.newelement.bind("mousedown.selectmenu", function(event) {
                self._toggle(event, true);
                if (o.style == "popup") {
                    self._safemouseup = false;
                    setTimeout(function() {
                        self._safemouseup = true;
                    }, 300);
                }
                return false;
            }).bind("click.selectmenu", function() {
                return false;
            }).bind("keydown.selectmenu", function(event) {
                var ret = false;
                switch (event.keyCode) {
                case $.ui.keyCode.ENTER:
                    ret = true;
                    break;
                case $.ui.keyCode.SPACE:
                    self._toggle(event);
                    break;
                case $.ui.keyCode.UP:
                    if (event.altKey) {
                        self.open(event);
                    } else {
                        self._moveSelection(-1);
                    }
                    break;
                case $.ui.keyCode.DOWN:
                    if (event.altKey) {
                        self.open(event);
                    } else {
                        self._moveSelection(1);
                    }
                    break;
                case $.ui.keyCode.LEFT:
                    self._moveSelection(-1);
                    break;
                case $.ui.keyCode.RIGHT:
                    self._moveSelection(1);
                    break;
                case $.ui.keyCode.TAB:
                    ret = true;
                    break;
                case $.ui.keyCode.HOME:
                    self.index(0);
                    break;
                default:
                    ret = true;
                }
                return ret;
            }).bind("keypress.selectmenu", function(event) {
                if (event.which > 0) {
                    self._typeAhead(event.which, "mouseup");
                }
                return true;
            }).bind("mouseover.selectmenu focus.selectmenu", function() {
                if (!o.disabled) {
                    $(this).addClass(self.widgetBaseClass + "-focus ui-state-hover");
                }
            }).bind("mouseout.selectmenu blur.selectmenu", function() {
                if (!o.disabled) {
                    $(this).removeClass(self.widgetBaseClass + "-focus ui-state-hover");
                }
            });
            $(document).bind("mousedown.selectmenu-" + this.ids[0], function(event) {
                if (self.isOpen) {
                    self.close(event);
                }
            });
            this.element.bind("click.selectmenu", function() {
                self._refreshValue();
            }).bind("focus.selectmenu", function() {
                if (self.newelement) {
                    self.newelement[0].focus();
                }
            });
            if (!o.width) {
                o.width = this.element.outerWidth();
            }
            this.newelement.width(o.width);
            this.element.hide();
            this.list = $("<ul />", {
                "class": "ui-widget ui-widget-content",
                "aria-hidden": true,
                "role": "listbox",
                "aria-labelledby": this.ids[1],
                "id": this.ids[2]
            });
            this.listWrap = $(o.wrapperElement).addClass(self.widgetBaseClass + "-menu").append(this.list).appendTo("body");
            this.list.bind("keydown.selectmenu", function(event) {
                var ret = false;
                switch (event.keyCode) {
                case $.ui.keyCode.UP:
                    if (event.altKey) {
                        self.close(event, true);
                    } else {
                        self._moveFocus(-1);
                    }
                    break;
                case $.ui.keyCode.DOWN:
                    if (event.altKey) {
                        self.close(event, true);
                    } else {
                        self._moveFocus(1);
                    }
                    break;
                case $.ui.keyCode.LEFT:
                    self._moveFocus(-1);
                    break;
                case $.ui.keyCode.RIGHT:
                    self._moveFocus(1);
                    break;
                case $.ui.keyCode.HOME:
                    self._moveFocus(":first");
                    break;
                case $.ui.keyCode.PAGE_UP:
                    self._scrollPage("up");
                    break;
                case $.ui.keyCode.PAGE_DOWN:
                    self._scrollPage("down");
                    break;
                case $.ui.keyCode.END:
                    self._moveFocus(":last");
                    break;
                case $.ui.keyCode.ENTER:
                case $.ui.keyCode.SPACE:
                    self.close(event, true);
                    $(event.target).parents("li:eq(0)").trigger("mouseup");
                    break;
                case $.ui.keyCode.TAB:
                    ret = true;
                    self.close(event, true);
                    $(event.target).parents("li:eq(0)").trigger("mouseup");
                    break;
                case $.ui.keyCode.ESCAPE:
                    self.close(event, true);
                    break;
                default:
                    ret = true;
                }
                return ret;
            }).bind("keypress.selectmenu", function(event) {
                if (event.which > 0) {
                    self._typeAhead(event.which, "focus");
                }
                return true;
            }).bind("mousedown.selectmenu mouseup.selectmenu", function() {
                return false;
            });
            $(window).bind("resize.selectmenu-" + this.ids[0], $.proxy(self.close, this));
        },
        _init: function() {
            var self = this
              , o = this.options;
            var selectOptionData = [];
            this.element.find("option").each(function() {
                var opt = $(this);
                selectOptionData.push({
                    value: opt.attr("value"),
                    text: self._formatText(opt.text()),
                    selected: opt.attr("selected"),
                    disabled: opt.attr("disabled"),
                    classes: opt.attr("class"),
                    typeahead: opt.attr("typeahead"),
                    parentOptGroup: opt.parent("optgroup"),
                    bgImage: o.bgImage.call(opt)
                });
            });
            var activeClass = (self.options.style == "popup") ? " ui-state-active" : "";
            this.list.html("");
            if (selectOptionData.length) {
                for (var i = 0; i < selectOptionData.length; i++) {
                    var thisLiAttr = {
                        role: "presentation"
                    };
                    if (selectOptionData[i].disabled) {
                        thisLiAttr["class"] = this.namespace + "-state-disabled";
                    }
                    var thisAAttr = {
                        html: selectOptionData[i].text,
                        href: "#nogo",
                        tabindex: -1,
                        role: "option",
                        "aria-selected": false
                    };
                    if (selectOptionData[i].disabled) {
                        thisAAttr["aria-disabled"] = selectOptionData[i].disabled;
                    }
                    if (selectOptionData[i].typeahead) {
                        thisAAttr["typeahead"] = selectOptionData[i].typeahead;
                    }
                    var thisA = $("<a/>", thisAAttr);
                    var thisLi = $("<li/>", thisLiAttr).append(thisA).data("index", i).addClass(selectOptionData[i].classes).data("optionClasses", selectOptionData[i].classes || "").bind("mouseup.selectmenu", function(event) {
                        if (self._safemouseup && !self._disabled(event.currentTarget) && !self._disabled($(event.currentTarget).parents("ul>li." + self.widgetBaseClass + "-group "))) {
                            var changed = $(this).data("index") != self._selectedIndex();
                            self.index($(this).data("index"));
                            self.select(event);
                            if (changed) {
                                self.change(event);
                            }
                            self.close(event, true);
                        }
                        return false;
                    }).bind("click.selectmenu", function() {
                        return false;
                    }).bind("mouseover.selectmenu focus.selectmenu", function(e) {
                        if (!$(e.currentTarget).hasClass(self.namespace + "-state-disabled") && !$(e.currentTarget).parent("ul").parent("li").hasClass(self.namespace + "-state-disabled")) {
                            self._selectedOptionLi().addClass(activeClass);
                            self._focusedOptionLi().removeClass(self.widgetBaseClass + "-item-focus ui-state-hover");
                            $(this).removeClass("ui-state-active").addClass(self.widgetBaseClass + "-item-focus ui-state-hover");
                        }
                    }).bind("mouseout.selectmenu blur.selectmenu", function() {
                        if ($(this).is(self._selectedOptionLi().selector)) {
                            $(this).addClass(activeClass);
                        }
                        $(this).removeClass(self.widgetBaseClass + "-item-focus ui-state-hover");
                    });
                    if (selectOptionData[i].parentOptGroup.length) {
                        var optGroupName = self.widgetBaseClass + "-group-" + this.element.find("optgroup").index(selectOptionData[i].parentOptGroup);
                        if (this.list.find("li." + optGroupName).length) {
                            this.list.find("li." + optGroupName + ":last ul").append(thisLi);
                        } else {
                            $(' <li role="presentation" class="' + self.widgetBaseClass + "-group " + optGroupName + (selectOptionData[i].parentOptGroup.attr("disabled") ? " " + this.namespace + '-state-disabled" aria-disabled="true"' : '"') + '><span class="' + self.widgetBaseClass + '-group-label">' + selectOptionData[i].parentOptGroup.attr("label") + "</span><ul></ul></li> ").appendTo(this.list).find("ul").append(thisLi);
                        }
                    } else {
                        thisLi.appendTo(this.list);
                    }
                    if (o.icons) {
                        for (var j in o.icons) {
                            if (thisLi.is(o.icons[j].find)) {
                                thisLi.data("optionClasses", selectOptionData[i].classes + " " + self.widgetBaseClass + "-hasIcon").addClass(self.widgetBaseClass + "-hasIcon");
                                var iconClass = o.icons[j].icon || "";
                                thisLi.find("a:eq(0)").prepend('<span class="' + self.widgetBaseClass + "-item-icon ui-icon " + iconClass + '"></span>');
                                if (selectOptionData[i].bgImage) {
                                    thisLi.find("span").css("background-image", selectOptionData[i].bgImage);
                                }
                            }
                        }
                    }
                }
            } else {
                $('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
            }
            var isDropDown = (o.style == "dropdown");
            this.newelement.toggleClass(self.widgetBaseClass + "-dropdown", isDropDown).toggleClass(self.widgetBaseClass + "-popup", !isDropDown);
            this.list.toggleClass(self.widgetBaseClass + "-menu-dropdown ui-corner-bottom", isDropDown).toggleClass(self.widgetBaseClass + "-menu-popup ui-corner-all", !isDropDown).find("li:first").toggleClass("ui-corner-top", !isDropDown).end().find("li:last").addClass("ui-corner-bottom");
            this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s", isDropDown).toggleClass("ui-icon-triangle-2-n-s", !isDropDown);
            if (o.transferClasses) {
                var transferClasses = this.element.attr("class") || "";
                this.newelement.add(this.list).addClass(transferClasses);
            }
            if (o.style == "dropdown") {
            	if(this.ids[0] == "wifi_edit_config_form_activity_network")
            	    this.list.width(248);
            	else
                    this.list.width(o.menuWidth ? o.menuWidth : o.width);
            } else {
                this.list.width(o.menuWidth ? o.menuWidth : o.width - o.handleWidth);
            }
            this.list.css("height", "auto");
            var listH = this.listWrap.height();
            if (o.maxHeight && o.maxHeight < listH) {
                this.list.height(o.maxHeight);
            } else {
                var winH = $(window).height() / 3;
                if (winH < listH) {
                    this.list.height(winH);
                }
            }
            this._optionLis = this.list.find("li:not(." + self.widgetBaseClass + "-group)");
            if (this.element.attr("disabled")) {
                this.disable();
            } else {
                this.enable();
            }
            this.index(this._selectedIndex());
            window.setTimeout(function() {
                self._refreshPosition();
            }, 200);
        },
        destroy: function() {
            this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass + "-disabled" + " " + this.namespace + "-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");
            $(window).unbind(".selectmenu-" + this.ids[0]);
            $(document).unbind(".selectmenu-" + this.ids[0]);
            this.newelementWrap.remove();
            this.listWrap.remove();
            this.element.unbind(".selectmenu").show();
            $.Widget.prototype.destroy.apply(this, arguments);
        },
        _typeAhead: function(code, eventType) {
            var self = this
              , c = String.fromCharCode(code).toLowerCase()
              , items = this.list.find("li a")
              , matchee = null 
              , nextIndex = null ;
            if (self._typeAhead_timer) {
                window.clearTimeout(self._typeAhead_timer);
                self._typeAhead_timer = undefined;
            }
            self._typeAhead_chars = (self._typeAhead_chars === undefined ? "" : self._typeAhead_chars).concat(c);
            if (self._typeAhead_chars.length < 2 || (self._typeAhead_chars.substr(-2, 1) === c && self._typeAhead_cycling)) {
                self._typeAhead_cycling = true;
                matchee = c;
            } else {
                self._typeAhead_cycling = false;
                matchee = self._typeAhead_chars;
            }
            var selectedIndex = (eventType !== "focus" ? this._selectedOptionLi().data("index") : this._focusedOptionLi().data("index")) || 0;
            for (var i = 0; i < items.length; i++) {
                var thisText = items.eq(i).text().substr(0, matchee.length).toLowerCase();
                if (thisText === matchee) {
                    if (self._typeAhead_cycling) {
                        if (nextIndex === null ) {
                            nextIndex = i;
                        }
                        if (i > selectedIndex) {
                            nextIndex = i;
                            break;
                        }
                    } else {
                        nextIndex = i;
                    }
                }
            }
            if (nextIndex !== null ) {
                items.eq(nextIndex).trigger(eventType);
            }
            self._typeAhead_timer = window.setTimeout(function() {
                self._typeAhead_timer = undefined;
                self._typeAhead_chars = undefined;
                self._typeAhead_cycling = undefined;
            }, self.options.typeAhead);
        },
        _uiHash: function() {
            var index = this.index();
            return {
                index: index,
                option: $("option", this.element).get(index),
                value: this.element[0].value
            };
        },
        open: function(event) {
            var self = this
              , o = this.options;
            if (self.newelement.attr("aria-disabled") != "true") {
                self._closeOthers(event);
                self.newelement.addClass("ui-state-active");
                self.listWrap.appendTo(o.appendTo);
                self.list.attr("aria-hidden", false);
                self.listWrap.addClass(self.widgetBaseClass + "-open");
                var selected = this._selectedOptionLi();
                if (o.style == "dropdown") {
                    self.newelement.removeClass("ui-corner-all").addClass("ui-corner-top");
                } else {
                    this.list.css("left", -5000).scrollTop(this.list.scrollTop() + selected.position().top - this.list.outerHeight() / 2 + selected.outerHeight() / 2).css("left", "auto");
                }
                self._refreshPosition();
                var link = selected.find("a");
                if (link.length) {
                    link[0].focus();
                }
                self.isOpen = true;
                self._trigger("open", event, self._uiHash());
            }
        },
        close: function(event, retainFocus) {
            if (this.newelement.is(".ui-state-active")) {
                this.newelement.removeClass("ui-state-active");
                this.listWrap.removeClass(this.widgetBaseClass + "-open");
                this.list.attr("aria-hidden", true);
                if (this.options.style == "dropdown") {
                    this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all");
                }
                if (retainFocus) {
                    this.newelement.focus();
                }
                this.isOpen = false;
                this._trigger("close", event, this._uiHash());
            }
        },
        change: function(event) {
            this.element.trigger("change");
            this._trigger("change", event, this._uiHash());
        },
        select: function(event) {
            if (this._disabled(event.currentTarget)) {
                return false;
            }
            this._trigger("select", event, this._uiHash());
        },
        _closeOthers: function(event) {
            $("." + this.widgetBaseClass + ".ui-state-active").not(this.newelement).each(function() {
                $(this).data("selectelement").selectmenu("close", event);
            });
            $("." + this.widgetBaseClass + ".ui-state-hover").trigger("mouseout");
        },
        _toggle: function(event, retainFocus) {
            if (this.isOpen) {
                this.close(event, retainFocus);
            } else {
                this.open(event);
            }
        },
        _formatText: function(text) {
            return ( this.options.format ? this.options.format(text) : text) ;
        },
        _selectedIndex: function() {
            return this.element[0].selectedIndex;
        },
        _selectedOptionLi: function() {
            return this._optionLis.eq(this._selectedIndex());
        },
        _focusedOptionLi: function() {
            return this.list.find("." + this.widgetBaseClass + "-item-focus");
        },
        _moveSelection: function(amt, recIndex) {
            if (!this.options.disabled) {
                var currIndex = parseInt(this._selectedOptionLi().data("index") || 0, 10);
                var newIndex = currIndex + amt;
                if (newIndex < 0) {
                    newIndex = 0;
                }
                if (newIndex > this._optionLis.size() - 1) {
                    newIndex = this._optionLis.size() - 1;
                }
                if (newIndex === recIndex) {
                    return false;
                }
                if (this._optionLis.eq(newIndex).hasClass(this.namespace + "-state-disabled")) {
                    (amt > 0) ? ++amt : --amt;
                    this._moveSelection(amt, newIndex);
                } else {
                    return this._optionLis.eq(newIndex).trigger("mouseup");
                }
            }
        },
        _moveFocus: function(amt, recIndex) {
            if (!isNaN(amt)) {
                var currIndex = parseInt(this._focusedOptionLi().data("index") || 0, 10);
                var newIndex = currIndex + amt;
            } else {
                var newIndex = parseInt(this._optionLis.filter(amt).data("index"), 10);
            }
            if (newIndex < 0) {
                newIndex = 0;
            }
            if (newIndex > this._optionLis.size() - 1) {
                newIndex = this._optionLis.size() - 1;
            }
            if (newIndex === recIndex) {
                return false;
            }
            var activeID = this.widgetBaseClass + "-item-" + Math.round(Math.random() * 1000);
            this._focusedOptionLi().find("a:eq(0)").attr("id", "");
            if (this._optionLis.eq(newIndex).hasClass(this.namespace + "-state-disabled")) {
                (amt > 0) ? ++amt : --amt;
                this._moveFocus(amt, newIndex);
            } else {
                this._optionLis.eq(newIndex).find("a:eq(0)").attr("id", activeID).focus();
            }
            this.list.attr("aria-activedescendant", activeID);
        },
        _scrollPage: function(direction) {
            var numPerPage = Math.floor(this.list.outerHeight() / this.list.find("li:first").outerHeight());
            numPerPage = (direction == "up" ? -numPerPage : numPerPage);
            this._moveFocus(numPerPage);
        },
        _setOption: function(key, value) {
            this.options[key] = value;
            if (key == "disabled") {
                if (value) {
                    this.close();
                }
                this.element.add(this.newelement).add(this.list)[value ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled" + " " + this.namespace + "-state-disabled").attr("aria-disabled", value);
            }
        },
        disable: function(index, type) {
            if (typeof (index) == "undefined") {
                this._setOption("disabled", true);
            } else {
                if (type == "optgroup") {
                    this._disableOptgroup(index);
                } else {
                    this._disableOption(index);
                }
            }
        },
        enable: function(index, type) {
            if (typeof (index) == "undefined") {
                this._setOption("disabled", false);
            } else {
                if (type == "optgroup") {
                    this._enableOptgroup(index);
                } else {
                    this._enableOption(index);
                }
            }
        },
        _disabled: function(elem) {
            return $(elem).hasClass(this.namespace + "-state-disabled");
        },
        _disableOption: function(index) {
            var optionElem = this._optionLis.eq(index);
            if (optionElem) {
                optionElem.addClass(this.namespace + "-state-disabled").find("a").attr("aria-disabled", true);
                this.element.find("option").eq(index).attr("disabled", "disabled");
            }
        },
        _enableOption: function(index) {
            var optionElem = this._optionLis.eq(index);
            if (optionElem) {
                optionElem.removeClass(this.namespace + "-state-disabled").find("a").attr("aria-disabled", false);
                this.element.find("option").eq(index).removeAttr("disabled");
            }
        },
        _disableOptgroup: function(index) {
            var optGroupElem = this.list.find("li." + this.widgetBaseClass + "-group-" + index);
            if (optGroupElem) {
                optGroupElem.addClass(this.namespace + "-state-disabled").attr("aria-disabled", true);
                this.element.find("optgroup").eq(index).attr("disabled", "disabled");
            }
        },
        _enableOptgroup: function(index) {
            var optGroupElem = this.list.find("li." + this.widgetBaseClass + "-group-" + index);
            if (optGroupElem) {
                optGroupElem.removeClass(this.namespace + "-state-disabled").attr("aria-disabled", false);
                this.element.find("optgroup").eq(index).removeAttr("disabled");
            }
        },
        index: function(newValue) {
            if (arguments.length) {
                if (!this._disabled($(this._optionLis[newValue]))) {
                    this.element[0].selectedIndex = newValue;
                    this._refreshValue();
                } else {
                    return false;
                }
            } else {
                return this._selectedIndex();
            }
        },
        value: function(newValue) {
            if (arguments.length) {
                this.element[0].value = newValue;
                this._refreshValue();
            } else {
                return this.element[0].value;
            }
        },
        _refreshValue: function() {
            var activeClass = (this.options.style == "popup") ? " ui-state-active" : "";
            var activeID = this.widgetBaseClass + "-item-" + Math.round(Math.random() * 1000);
            this.list.find("." + this.widgetBaseClass + "-item-selected").removeClass(this.widgetBaseClass + "-item-selected" + activeClass).find("a").attr("aria-selected", "false").attr("id", "");
            this._selectedOptionLi().addClass(this.widgetBaseClass + "-item-selected" + activeClass).find("a").attr("aria-selected", "true").attr("id", activeID);
            var currentOptionClasses = (this.newelement.data("optionClasses") ? this.newelement.data("optionClasses") : "");
            var newOptionClasses = (this._selectedOptionLi().data("optionClasses") ? this._selectedOptionLi().data("optionClasses") : "");
            this.newelement.removeClass(currentOptionClasses).data("optionClasses", newOptionClasses).addClass(newOptionClasses).find("." + this.widgetBaseClass + "-status").html(this._selectedOptionLi().find("a:eq(0)").html());
            this.list.attr("aria-activedescendant", activeID);
        },
        _refreshPosition: function() {
            var o = this.options;
            if (o.style == "popup" && !o.positionOptions.offset) {
                var selected = this._selectedOptionLi();
                var _offset = "0 " + (this.list.offset().top - selected.offset().top - (this.newelement.outerHeight() + selected.outerHeight()) / 2);
            }
            this.listWrap.zIndex(this.element.zIndex() + 1).position({
                of: o.positionOptions.of || this.newelement,
                my: o.positionOptions.my,
                at: o.positionOptions.at,
                offset: o.positionOptions.offset || _offset,
                collision: o.positionOptions.collision || "flip"
            });
        },
        resize: function() {}
    });
})(jQuery);
(function($) {
    $.fn.touchwipe = function(settings) {
        var config = {
            min_move_x: 20,
            min_move_y: 20,
            wipeLeft: function() {},
            wipeRight: function() {},
            wipeUp: function() {},
            wipeDown: function() {},
            preventDefaultEvents: true
        };
        if (settings) {
            $.extend(config, settings);
        }
        this.each(function() {
            var startX;
            var startY;
            var isMoving = false;
            function cancelTouch() {
                this.removeEventListener("touchmove", onTouchMove);
                startX = null ;
                isMoving = false;
            }
            function onTouchMove(e) {
                if (config.preventDefaultEvents) {
                    e.preventDefault();
                }
                if (isMoving) {
                    var x = e.touches[0].pageX;
                    var y = e.touches[0].pageY;
                    var dx = startX - x;
                    var dy = startY - y;
                    if (Math.abs(dx) >= config.min_move_x) {
                        cancelTouch();
                        if (dx > 0) {
                            config.wipeLeft();
                        } else {
                            config.wipeRight();
                        }
                    } else {
                        if (Math.abs(dy) >= config.min_move_y) {
                            cancelTouch();
                            if (dy > 0) {
                                config.wipeDown();
                            } else {
                                config.wipeUp();
                            }
                        }
                    }
                }
            }
            function onTouchStart(e) {
                if (e.touches.length == 1) {
                    startX = e.touches[0].pageX;
                    startY = e.touches[0].pageY;
                    isMoving = true;
                    this.addEventListener("touchmove", onTouchMove, false);
                }
            }
            if ("ontouchstart" in document.documentElement) {
                this.addEventListener("touchstart", onTouchStart, false);
            }
        });
        return this;
    }
    ;
})(jQuery);
(function() {
    function log() {
        if (typeof (console) != "undefined" && typeof (console.log) == "function") {
            Array.prototype.unshift.call(arguments, "[Ajax Upload]");
            console.log(Array.prototype.join.call(arguments, " "));
        }
    }
    function addEvent(el, type, fn) {
        if (el.addEventListener) {
            el.addEventListener(type, fn, false);
        } else {
            if (el.attachEvent) {
                el.attachEvent("on" + type, function() {
                    fn.call(el);
                });
            } else {
                throw new Error("not supported or DOM not loaded");
            }
        }
    }
    function addResizeEvent(fn) {
        var timeout;
        addEvent(window, "resize", function() {
            if (timeout) {
                clearTimeout(timeout);
            }
            timeout = setTimeout(fn, 100);
        });
    }
    if (document.documentElement.getBoundingClientRect) {
        var getOffset = function(el) {
            var box = el.getBoundingClientRect();
            var doc = el.ownerDocument;
            var body = doc.body;
            var docElem = doc.documentElement;
            var clientTop = docElem.clientTop || body.clientTop || 0;
            var clientLeft = docElem.clientLeft || body.clientLeft || 0;
            var zoom = 1;
            if (body.getBoundingClientRect) {
                var bound = body.getBoundingClientRect();
                zoom = (bound.right - bound.left) / body.clientWidth;
            }
            if (zoom > 1) {
                clientTop = 0;
                clientLeft = 0;
            }
            var top = box.top / zoom + (window.pageYOffset || docElem && docElem.scrollTop / zoom || body.scrollTop / zoom) - clientTop
              , left = box.left / zoom + (window.pageXOffset || docElem && docElem.scrollLeft / zoom || body.scrollLeft / zoom) - clientLeft;
            return {
                top: top,
                left: left
            };
        }
        ;
    } else {
        var getOffset = function(el) {
            var top = 0
              , left = 0;
            do {
                top += el.offsetTop || 0;
                left += el.offsetLeft || 0;
                el = el.offsetParent;
            } while (el);return {
                left: left,
                top: top
            };
        }
        ;
    }
    function getBox(el) {
        var left, right, top, bottom;
        var offset = getOffset(el);
        left = offset.left;
        top = offset.top;
        right = left + el.offsetWidth;
        bottom = top + el.offsetHeight;
        return {
            left: left,
            right: right,
            top: top,
            bottom: bottom
        };
    }
    function addStyles(el, styles) {
        for (var name in styles) {
            if (styles.hasOwnProperty(name)) {
                el.style[name] = styles[name];
            }
        }
    }
    function copyLayout(from, to) {
        var box = getBox(from);
        addStyles(to, {
            position: "absolute",
            left: box.left + "px",
            top: box.top + "px",
            width: from.offsetWidth + "px",
            height: from.offsetHeight + "px"
        });
    }
    var toElement = (function() {
        var div = document.createElement("div");
        return function(html) {
            div.innerHTML = html;
            var el = div.firstChild;
            return div.removeChild(el);
        }
        ;
    })();
    var getUID = (function() {
        var id = 0;
        return function() {
            return "ValumsAjaxUpload" + id++;
        }
        ;
    })();
    function fileFromPath(file) {
        return file.replace(/.*(\/|\\)/, "");
    }
    function getExt(file) {
        return (-1 !== file.indexOf(".")) ? file.replace(/.*[.]/, "") : "";
    }
    function hasClass(el, name) {
        var re = new RegExp("\\b" + name + "\\b");
        return re.test(el.className);
    }
    function addClass(el, name) {
        if (!hasClass(el, name)) {
            el.className += " " + name;
        }
    }
    function removeClass(el, name) {
        var re = new RegExp("\\b" + name + "\\b");
        el.className = el.className.replace(re, "");
    }
    function removeNode(el) {
        el.parentNode.removeChild(el);
    }
    window.AjaxUpload = function(button, options) {
        this._settings = {
            action: "upload.php",
            name: "userfile",
            data: {},
            autoSubmit: true,
            responseType: false,
            hoverClass: "hover",
            disabledClass: "disabled",
            onChange: function(file, extension) {},
            onSubmit: function(file, extension) {},
            onComplete: function(file, response) {}
        };
        for (var i in options) {
            if (options.hasOwnProperty(i)) {
                this._settings[i] = options[i];
            }
        }
        if (button.jquery) {
            button = button[0];
        } else {
            if (typeof button == "string") {
                if (/^#.*/.test(button)) {
                    button = button.slice(1);
                }
                button = document.getElementById(button);
            }
        }
        if (!button || button.nodeType !== 1) {
            throw new Error("Please make sure that you're passing a valid element");
        }
        if (button.nodeName.toUpperCase() == "A") {
            addEvent(button, "click", function(e) {
                if (e && e.preventDefault) {
                    e.preventDefault();
                } else {
                    if (window.event) {
                        window.event.returnValue = false;
                    }
                }
            });
        }
        this._button = button;
        this._input = null ;
        this._disabled = false;
        this.enable();
        this._rerouteClicks();
    }
    ;
    AjaxUpload.prototype = {
        setData: function(data) {
            this._settings.data = data;
        },
        disable: function() {
            addClass(this._button, this._settings.disabledClass);
            this._disabled = true;
            var nodeName = this._button.nodeName.toUpperCase();
            if (nodeName == "INPUT" || nodeName == "BUTTON") {
                this._button.setAttribute("disabled", "disabled");
            }
            if (this._input) {
                this._input.parentNode.style.visibility = "hidden";
            }
        },
        enable: function() {
            removeClass(this._button, this._settings.disabledClass);
            this._button.removeAttribute("disabled");
            this._disabled = false;
        },
        _createInput: function() {
            var self = this;
            var input = document.createElement("input");
            input.setAttribute("type", "file");
            input.setAttribute("name", this._settings.name);
            addStyles(input, {
                "position": "absolute",
                "right": 0,
                "margin": 0,
                "padding": 0,
                "fontSize": "480px",
                "cursor": "pointer"
            });
            var div = document.createElement("div");
            addStyles(div, {
                "display": "block",
                "position": "absolute",
                "overflow": "hidden",
                "margin": 0,
                "padding": 0,
                "opacity": 0,
                "direction": "ltr",
                "zIndex": 2147483583
            });
            if (div.style.opacity !== "0") {
                if (typeof (div.filters) == "undefined") {
                    throw new Error("Opacity not supported by the browser");
                }
                div.style.filter = "alpha(opacity=0)";
            }
            addEvent(input, "change", function() {
                if (!input || input.value === "") {
                    return;
                }
                var file = fileFromPath(input.value);
                if (false === self._settings.onChange.call(self, file, getExt(file))) {
                    self._clearInput();
                    return;
                }
                if (self._settings.autoSubmit) {
                    self.submit();
                }
            });
            addEvent(input, "mouseover", function() {
                addClass(self._button, self._settings.hoverClass);
            });
            addEvent(input, "mouseout", function() {
                removeClass(self._button, self._settings.hoverClass);
                input.parentNode.style.visibility = "hidden";
            });
            div.appendChild(input);
            document.body.appendChild(div);
            this._input = input;
        },
        _clearInput: function() {
            if (!this._input) {
                return;
            }
            removeNode(this._input.parentNode);
            this._input = null ;
            this._createInput();
            removeClass(this._button, this._settings.hoverClass);
        },
        _rerouteClicks: function() {
            var self = this;
            addEvent(self._button, "mouseover", function() {
                if (self._disabled) {
                    return;
                }
                if (!self._input) {
                    self._createInput();
                }
                var div = self._input.parentNode;
                copyLayout(self._button, div);
                div.style.visibility = "visible";
            });
        },
        _createIframe: function() {
            var id = getUID();
            var iframe = toElement('<iframe src="javascript:false;" name="' + id + '" />');
            iframe.setAttribute("id", id);
            iframe.style.display = "none";
            document.body.appendChild(iframe);
            return iframe;
        },
        _createForm: function(iframe) {
            var settings = this._settings;
            var form = toElement('<form method="post" enctype="multipart/form-data"></form>');
            form.setAttribute("action", settings.action);
            form.setAttribute("target", iframe.name);
            form.style.display = "none";
            document.body.appendChild(form);
            for (var prop in settings.data) {
                if (settings.data.hasOwnProperty(prop)) {
                    var el = document.createElement("input");
                    el.setAttribute("type", "hidden");
                    el.setAttribute("name", prop);
                    el.setAttribute("value", settings.data[prop]);
                    form.appendChild(el);
                }
            }
            return form;
        },
        _getResponse: function(iframe, file) {
            var toDeleteFlag = false
              , self = this
              , settings = this._settings;
            addEvent(iframe, "load", function() {
                if (iframe.src == "javascript:'%3Chtml%3E%3C/html%3E';" || iframe.src == "javascript:'<html></html>';") {
                    if (toDeleteFlag) {
                        setTimeout(function() {
                            removeNode(iframe);
                        }, 0);
                    }
                    return;
                }
                var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;
                if (doc.readyState && doc.readyState != "complete") {
                    return;
                }
                if (doc.body && doc.body.innerHTML == "false") {
                    return;
                }
                var response;
                if (doc.XMLDocument) {
                    response = doc.XMLDocument;
                } else {
                    if (doc.body) {
                        response = doc.body.innerHTML;
                        if (settings.responseType && settings.responseType.toLowerCase() == "json") {
                            if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() == "PRE") {
                                response = doc.body.firstChild.firstChild.nodeValue;
                            }
                            if (response) {
                                response = eval("(" + response + ")");
                            } else {
                                response = {};
                            }
                        }
                    } else {
                        response = doc;
                    }
                }
                settings.onComplete.call(self, file, response);
                toDeleteFlag = true;
                iframe.src = "javascript:'<html></html>';";
            });
        },
        submit: function() {
            var self = this
              , settings = this._settings;
            if (!this._input || this._input.value === "") {
                return;
            }
            var file = fileFromPath(this._input.value);
            if (false === settings.onSubmit.call(this, file, getExt(file))) {
                this._clearInput();
                return;
            }
            var iframe = this._createIframe();
            var form = this._createForm(iframe);
            removeNode(this._input.parentNode);
            removeClass(self._button, self._settings.hoverClass);
            form.appendChild(this._input);
            form.submit();
            removeNode(form);
            form = null ;
            removeNode(this._input);
            this._input = null ;
            this._getResponse(iframe, file);
            this._createInput();
        }
    };
})();
/*! Copyright 2011, Ben Lin (http://dreamerslab.com/)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 1.0.6
*
* Requires: jQuery 1.2.3 ~ 1.7.1
*/
(function($) {
    $.fn.extend({
        actual: function(method, options) {
            var $hidden, $target, configs, css, tmp, actual, fix, restore;
            if (!this[method]) {
                throw '$.actual => The jQuery method "' + method + '" you called does not exist';
            }
            configs = $.extend({
                absolute: false,
                clone: false,
                includeMargin: undefined
            }, options);
            $target = this;
            if (configs.clone === true) {
                fix = function() {
                    $target = $target.filter(":first").clone().css({
                        position: "absolute",
                        top: -1000
                    }).appendTo("body");
                }
                ;
                restore = function() {
                    $target.remove();
                }
                ;
            } else {
                fix = function() {
                    $hidden = $target.parents().andSelf().filter(":hidden");
                    css = configs.absolute === true ? {
                        position: "absolute",
                        visibility: "hidden",
                        display: "block"
                    } : {
                        visibility: "hidden",
                        display: "block"
                    };
                    tmp = [];
                    $hidden.each(function() {
                        var _tmp = {}, name;
                        for (name in css) {
                            _tmp[name] = this.style[name];
                            this.style[name] = css[name];
                        }
                        tmp.push(_tmp);
                    });
                }
                ;
                restore = function() {
                    $hidden.each(function(i) {
                        var _tmp = tmp[i], name;
                        for (name in css) {
                            this.style[name] = _tmp[name];
                        }
                    });
                }
                ;
            }
            fix();
            actual = /(outer)/g.test(method) ? $target[method](configs.includeMargin) : $target[method]();
            restore();
            return actual;
        }
    });
})(jQuery);
(function($, undefined) {
    var excludesFilter, count = 0, selector = {}, className = {}, aps = Array.prototype.slice, arr = function(obj) {
        return $.isArray(obj) ? obj : [obj];
    }
    , id = "id", form = "form", click = "click", submit = "submit", disabled = "disabled", wizard = "wizard", def = "default", num = "number", obj = "object", str = "string", bool = "boolean", afterBackward = "afterBackward", afterForward = "afterForward", afterSelect = "afterSelect", beforeBackward = "beforeBackward", beforeForward = "beforeForward", beforeSelect = "beforeSelect", beforeSubmit = "beforeSubmit";
    $.each("branch form header step wrapper".split(" "), function() {
        selector[this] = "." + (className[this] = wizard + "-" + this);
    });
    $.widget("kf." + wizard, {
        version: "1.0.0-rc2",
        options: {
            animations: {
                show: {
                    options: {
                        duration: 0
                    },
                    properties: {
                        opacity: "show"
                    }
                },
                hide: {
                    options: {
                        duration: 0
                    },
                    properties: {
                        opacity: "hide"
                    }
                }
            },
            backward: ".backward",
            branches: ".branch",
            disabled: false,
            enableSubmit: false,
            forward: ".forward",
            header: ":header:first",
            initialStep: 0,
            stateAttribute: "data-state",
            stepClasses: {
                current: "current",
                exclude: "exclude",
                stop: "stop",
                submit: "submit",
                unidirectional: "unidirectional"
            },
            steps: ".step",
            submit: ":submit",
            transitions: {},
            unidirectional: false,
            afterBackward: null ,
            afterForward: null ,
            afterSelect: null ,
            beforeBackward: null ,
            beforeForward: null ,
            beforeSelect: null 
        },
        _create: function() {
            var $form, $header, self = this, o = self.options, $element = self.element, $steps = $element.find(o.steps), $stepsWrapper = $steps.eq(0).parent();
            if ($element[0].elements) {
                $form = $element;
            } else {
                if (!($form = $element.find(form)).length) {
                    $form = $element.closest(form);
                }
            }
            if (!($header = $element.find(o.header)).length) {
                $header = $form.find(o.header);
            }
            self.elements = {
                form: $form.addClass(className.form),
                submit: $form.find(o.submit),
                forward: $form.find(o.forward),
                backward: $form.find(o.backward),
                header: $header.addClass(className.header),
                steps: $element.find(o.steps).hide().addClass(className.step),
                branches: $element.find(o.branches).add($stepsWrapper).addClass(className.branch),
                stepsWrapper: $stepsWrapper.addClass(className.wrapper),
                wizard: $element.addClass(wizard)
            };
            if (!$stepsWrapper.attr(id)) {
                $stepsWrapper.attr(id, wizard + "-" + (++count));
            }
            self.elements.forward.click(function(event) {
                event.preventDefault();
                self.forward(event);
            });
            self.elements.backward.click(function(event) {
                event.preventDefault();
                self.backward(event);
            });
            self._currentState = {
                branchesActivated: [],
                stepsActivated: []
            };
            self._stepCount = self.elements.steps.length;
            self._lastStepIndex = self._stepCount - 1;
            self._branchLabels = [];
            self.elements.steps.each(function(i) {
                self._branchLabels[i] = $(this).parent().attr(id);
            });
            self._excludesFilter = function() {
                return !$(this).hasClass(o.stepClasses.exclude);
            }
            ;
            if (!o.transitions[def]) {
                o.transitions[def] = function(step) {
                    return self.stepIndex(step.nextAll(selector.step));
                }
                ;
            }
            self.select.apply(self, arr(o.initialStep));
        },
        _fastForward: function(toIndex, relative, callback) {
            var i = 0
              , self = this
              , stepIndex = self._currentState.stepIndex
              , stepsTaken = [stepIndex];
            if ($.isFunction(relative)) {
                callback = relative;
                relative = undefined;
            }
            (function next() {
                self._transition(stepIndex, function(step, branch) {
                    if ((stepIndex = self.stepIndex(step, branch)) === -1) {
                        throw new Error('[_fastForward]: Invalid step "' + step + '"');
                    } else {
                        if ($.inArray(stepIndex, stepsTaken) >= 0) {
                            throw new Error('[_fastForward]: Recursion detected on step "' + step + '"');
                        } else {
                            stepsTaken.push(stepIndex);
                            if (stepIndex === self._lastStepIndex || (relative ? ++i : stepIndex) === toIndex) {
                                callback.call(self, stepIndex, stepsTaken);
                            } else {
                                next();
                            }
                        }
                    }
                });
            })();
        },
        _find: function(needles, haystack, wrap) {
            var i, l, needle, type, found = [], $haystack = haystack instanceof jQuery ? haystack : $(haystack);
            if (needles != undefined && $haystack.length) {
                needles = arr(needles);
                for (i = 0,
                l = needles.length; i < l; i++) {
                    var element;
                    needle = needles[i];
                    type = typeof needle;
                    if (type === num) {
                        element = $haystack.get(needle);
                    } else {
                        if (type === str) {
                            element = document.getElementById(needle.replace("#", ""));
                        } else {
                            if (type === obj) {
                                if (needle instanceof jQuery && needle.length) {
                                    needle = needle[0];
                                }
                                if (needle.nodeType) {
                                    $haystack.each(function() {
                                        if (this === needle) {
                                            return (element = this) && false;
                                        }
                                    });
                                }
                            }
                        }
                    }
                    if (element) {
                        found.push(element);
                    }
                }
            }
            return wrap === false ? found : $(found);
        },
        _move: function(step, branch, relative, history, callback) {
            var self = this
              , current = self._currentState;
            if (typeof branch === bool) {
                callback = history;
                history = relative;
                relative = branch;
                branch = undefined;
            }
            function move(stepIndex, stepsTaken) {
                callback.call(self, stepIndex, $.isArray(history) ? history : history !== false ? stepsTaken : undefined);
            }
            if (relative === true) {
                if (step > 0) {
                    self._fastForward(step, relative, move);
                } else {
                    callback.call(self, current.stepsActivated[Math.max(0, step + (current.stepsActivated.length - 1))]);
                }
            } else {
                if ((step = self.stepIndex(step, branch)) !== -1) {
                    if (step > current.stepIndex) {
                        self._fastForward(step, move);
                    } else {
                        move.call(self, step);
                    }
                }
            }
        },
        _state: function(stepIndex, stepsTaken) {
            if (!this.isValidStepIndex(stepIndex)) {
                return null ;
            }
            var o = this.options
              , state = $.extend(true, {}, this._currentState);
            stepsTaken = arr(stepsTaken || stepIndex);
            state.step = this.elements.steps.eq(stepIndex);
            state.branch = state.step.parent();
            state.branchStepCount = state.branch.children(selector.step).length;
            state.isMovingForward = stepIndex > state.stepIndex;
            state.stepIndexInBranch = state.branch.children(selector.step).index(state.step);
            var branchLabel, indexOfBranch, indexOfStep, i = 0, l = stepsTaken.length;
            for (; i < l; i++) {
                stepIndex = stepsTaken[i];
                branchLabel = this._branchLabels[stepIndex];
                if (!state.stepIndex || state.stepIndex < stepIndex) {
                    if ($.inArray(stepIndex, state.stepsActivated) < 0) {
                        state.stepsActivated.push(stepIndex);
                        if ($.inArray(branchLabel, state.branchesActivated) < 0) {
                            state.branchesActivated.push(branchLabel);
                        }
                    }
                } else {
                    if (state.stepIndex > stepIndex) {
                        indexOfBranch = $.inArray(branchLabel, state.branchesActivated) + 1;
                        indexOfStep = $.inArray(stepIndex, state.stepsActivated) + 1;
                        if (indexOfBranch > 0) {
                            state.branchesActivated.splice(indexOfBranch, state.branchesActivated.length - 1);
                        }
                        if (indexOfStep > 0) {
                            state.stepsActivated.splice(indexOfStep, state.stepsActivated.length - 1);
                        }
                    }
                }
                state.stepIndex = stepIndex;
                state.branchLabel = branchLabel;
            }
            state.stepsComplete = Math.max(0, this._find(state.stepsActivated, this.elements.steps).filter(this._excludesFilter).length - 1);
            state.stepsPossible = Math.max(0, this._find(state.branchesActivated, this.elements.branches).children(selector.step).filter(this._excludesFilter).length - 1);
            $.extend(state, {
                branchLabel: this._branchLabels[stepIndex],
                isFirstStep: stepIndex === 0,
                isFirstStepInBranch: state.stepIndexInBranch === 0,
                isLastStep: stepIndex === this._lastStepIndex,
                isLastStepInBranch: state.stepIndexInBranch === state.branchStepCount - 1,
                percentComplete: (100 * state.stepsComplete / state.stepsPossible),
                stepsRemaining: (state.stepsPossible - state.stepsComplete)
            });
            return state;
        },
        _transition: function(step, branch, action) {
            var self = this;
            if ($.isFunction(step)) {
                action = step;
                step = self._currentState.stepIndex;
                branch = undefined;
            } else {
                if ($.isFunction(branch)) {
                    action = branch;
                    branch = undefined;
                }
            }
            var response, o = self.options, $step = self.step(step, branch), stateName = $step.attr(o.stateAttribute), transitionFunc = stateName ? o.transitions[stateName] : o.transitions[def];
            if ($.isFunction(transitionFunc)) {
                response = transitionFunc.call(self, $step, function() {
                    return action.apply(self, aps.call(arguments));
                });
            } else {
                response = stateName;
            }
            if (response !== undefined && response !== false) {
                action.apply(self, arr(response));
            }
            return response;
        },
        _update: function(event, state) {
            var current = this._currentState
              , o = this.options;
            if (current.step) {
                if (o.disabled || !state || state.stepIndex === current.stepIndex || !this._trigger(beforeSelect, event, state) || (state.isMovingForward && !this._trigger(beforeForward, event, state)) || (!state.isMovingForward && !this._trigger(beforeBackward, event, state))) {
                    return;
                }
                current.step.removeClass(o.stepClasses.current).animate(o.animations.hide.properties, $.extend({}, o.animations.hide.options));
            }
            this._currentState = state;
            state.step.addClass(o.stepClasses.current).animate(o.animations.show.properties, $.extend({}, o.animations.show.options));
            if (state.isFirstStep || o.unidirectional || state.step.hasClass(o.stepClasses.unidirectional)) {
                this.elements.backward.attr(disabled, true);
            } else {
                this.elements.backward.removeAttr(disabled);
            }
            if ((state.isLastStepInBranch && !state.step.attr(o.stateAttribute)) || state.step.hasClass(o.stepClasses.stop)) {
                this.elements.forward.attr(disabled, true);
            } else {
                this.elements.forward.removeAttr(disabled);
            }
            if (o.enableSubmit || state.step.hasClass(o.stepClasses.submit)) {
                this.elements.submit.removeAttr(disabled);
            } else {
                this.elements.submit.attr(disabled, true);
            }
            if (current.step) {
                this._trigger(afterSelect, event, state);
                this._trigger(state.isMovingForward ? afterForward : afterBackward, event, state);
            }
        },
        backward: function(event, howMany) {
            if (typeof event === num) {
                howMany = event;
                event = undefined;
            } else {
                if (howMany === undefined) {
                    howMany = 1;
                }
            }
            if (this._currentState.isFirstStep || typeof howMany !== num) {
                return;
            }
            this._move(-howMany, true, false, function(stepIndex, stepsTaken) {
                this._update(event, this._state(stepIndex, stepsTaken));
            });
        },
        branch: function(branch) {
            return arguments.length ? this._find(branch, this.elements.branches) : this._currentState.branch;
        },
        branches: function(branch) {
            return arguments.length ? this.branch(branch).children(selector.branch) : this.elements.branches;
        },
        branchesActivated: function() {
            return this._find(this._currentState.branchesActivated, this.elements.branches);
        },
        destroy: function() {
            var $elements = this.elements;
            this.element.removeClass(wizard);
            $elements.form.removeClass(className.form);
            $elements.header.removeClass(className.header);
            $elements.steps.show().removeClass(className.step);
            $elements.stepsWrapper.removeClass(className.wrapper);
            $elements.branches.removeClass(className.branch);
            $.Widget.prototype.destroy.call(this);
        },
        form: function() {
            return this.elements.form;
        },
        forward: function(event, howMany, history) {
            if (typeof event === num) {
                history = howMany;
                howMany = event;
                event = undefined;
            } else {
                if (howMany === undefined) {
                    howMany = 1;
                }
            }
            if (this._currentState.isLastStep || typeof howMany !== num) {
                return;
            }
            this._move(howMany, true, history, function(stepIndex, stepsTaken) {
                this._update(event, this._state(stepIndex, stepsTaken));
            });
        },
        isValidStep: function(step, branch) {
            return this.isValidStepIndex(this.stepIndex(step, branch));
        },
        isValidStepIndex: function(stepIndex) {
            return typeof stepIndex === num && stepIndex >= 0 && stepIndex <= this._lastStepIndex;
        },
        length: function() {
            return this._stepCount;
        },
        select: function(event, step, branch, relative, history) {
            if (!(event instanceof $.Event)) {
                history = relative;
                relative = branch;
                branch = step;
                step = event;
                event = undefined;
            }
            if (step == undefined) {
                return;
            }
            if ($.isArray(step)) {
                history = relative;
                relative = branch;
                branch = step[1];
                step = step[0];
            } else {
                if (typeof branch === bool) {
                    history = relative;
                    relative = branch;
                    branch = undefined;
                } else {
                    if ($.isArray(branch)) {
                        history = branch;
                        branch = undefined;
                    }
                }
            }
            this._move(step, branch, relative, history, function(stepIndex, stepsTaken) {
                this._update(event, this._state(stepIndex, stepsTaken));
            });
        },
        state: function(step, branch, stepsTaken) {
            if (!arguments.length) {
                return this._currentState;
            }
            if ($.isArray(step)) {
                stepsTaken = branch;
                branch = step[1];
                step = step[0];
            } else {
                if ($.isArray(branch)) {
                    stepsTaken = branch;
                    branch = undefined;
                }
            }
            return this._state(this.stepIndex(step, branch), stepsTaken);
        },
        step: function(step, branch) {
            if (!arguments.length) {
                return this._currentState.step;
            }
            if ($.isArray(step)) {
                branch = step[1];
                step = step[0];
            }
            var $step, type = typeof step;
            if (type === num) {
                $step = this._find(step, branch !== undefined ? this.steps(branch) : this.elements.steps);
            } else {
                $step = this._find(step, this.elements.steps.add(this.elements.branches));
                if ($step && $step.hasClass(className.branch)) {
                    $step = this._find(branch || 0, this.steps($step));
                }
            }
            return $step;
        },
        stepIndex: function(step, branch, relative) {
            if (!arguments.length) {
                return this._currentState.stepIndex;
            }
            var $step;
            if ($.isArray(step)) {
                relative = branch;
                branch = step[1];
                step = step[0];
            } else {
                if (typeof branch === bool) {
                    relative = branch;
                    branch = undefined;
                }
            }
            return ($step = this.step(step, branch)) ? (relative ? $step.siblings(selector.step).andSelf() : this.elements.steps).index($step) : -1;
        },
        steps: function(branch) {
            return arguments.length ? this.branch(branch).children(selector.step) : this.elements.steps;
        },
        stepsActivated: function() {
            return this._find(this._currentState.stepsActivated, this.elements.steps);
        },
        submit: function() {
            this.elements.form.submit();
        }
    });
})(jQuery);
"use strict";
jQuery.base64 = (function($) {
    var _PADCHAR = "="
      , _ALPHA = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"
      , _VERSION = "1.0";
    function _getbyte64(s, i) {
        var idx = _ALPHA.indexOf(s.charAt(i));
        if (idx === -1) {
            throw "Cannot decode base64";
        }
        return idx;
    }
    function _decode(s) {
        var pads = 0, i, b10, imax = s.length, x = [];
        s = String(s);
        if (imax === 0) {
            return s;
        }
        if (imax % 4 !== 0) {
            throw "Cannot decode base64";
        }
        if (s.charAt(imax - 1) === _PADCHAR) {
            pads = 1;
            if (s.charAt(imax - 2) === _PADCHAR) {
                pads = 2;
            }
            imax -= 4;
        }
        for (i = 0; i < imax; i += 4) {
            b10 = (_getbyte64(s, i) << 18) | (_getbyte64(s, i + 1) << 12) | (_getbyte64(s, i + 2) << 6) | _getbyte64(s, i + 3);
            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255, b10 & 255));
        }
        switch (pads) {
        case 1:
            b10 = (_getbyte64(s, i) << 18) | (_getbyte64(s, i + 1) << 12) | (_getbyte64(s, i + 2) << 6);
            x.push(String.fromCharCode(b10 >> 16, (b10 >> 8) & 255));
            break;
        case 2:
            b10 = (_getbyte64(s, i) << 18) | (_getbyte64(s, i + 1) << 12);
            x.push(String.fromCharCode(b10 >> 16));
            break;
        }
        return x.join("");
    }
    function _getbyte(s, i) {
        var x = s.charCodeAt(i);
        if (x > 255) {
            throw "INVALID_CHARACTER_ERR: DOM Exception 5";
        }
        return x;
    }
    function _encode(s) {
        if (arguments.length !== 1) {
            throw "SyntaxError: exactly one argument required";
        }
        s = String(s);
        var i, b10, x = [], imax = s.length - s.length % 3;
        if (s.length === 0) {
            return s;
        }
        for (i = 0; i < imax; i += 3) {
            b10 = (_getbyte(s, i) << 16) | (_getbyte(s, i + 1) << 8) | _getbyte(s, i + 2);
            x.push(_ALPHA.charAt(b10 >> 18));
            x.push(_ALPHA.charAt((b10 >> 12) & 63));
            x.push(_ALPHA.charAt((b10 >> 6) & 63));
            x.push(_ALPHA.charAt(b10 & 63));
        }
        switch (s.length - imax) {
        case 1:
            b10 = _getbyte(s, i) << 16;
            x.push(_ALPHA.charAt(b10 >> 18) + _ALPHA.charAt((b10 >> 12) & 63) + _PADCHAR + _PADCHAR);
            break;
        case 2:
            b10 = (_getbyte(s, i) << 16) | (_getbyte(s, i + 1) << 8);
            x.push(_ALPHA.charAt(b10 >> 18) + _ALPHA.charAt((b10 >> 12) & 63) + _ALPHA.charAt((b10 >> 6) & 63) + _PADCHAR);
            break;
        }
        return x.join("");
    }
    return {
        decode: _decode,
        encode: _encode,
        VERSION: _VERSION
    };
}(jQuery));
(function(L) {
    var u;
    L.fn.emptyForce = function() {
        for (var ah = 0, ai; (ai = L(this)[ah]) != null ; ah++) {
            if (ai.nodeType === 1) {
                L.cleanData(ai.getElementsByTagName("*"));
            }
            if (L.jqplot.use_excanvas) {
                ai.outerHTML = "";
            } else {
                while (ai.firstChild) {
                    ai.removeChild(ai.firstChild);
                }
            }
            ai = null ;
        }
        return L(this);
    }
    ;
    L.fn.removeChildForce = function(ah) {
        while (ah.firstChild) {
            this.removeChildForce(ah.firstChild);
            ah.removeChild(ah.firstChild);
        }
    }
    ;
    L.fn.jqplot = function() {
        var ah = [];
        var aj = [];
        for (var ak = 0, ai = arguments.length; ak < ai; ak++) {
            if (L.isArray(arguments[ak])) {
                ah.push(arguments[ak]);
            } else {
                if (L.isPlainObject(arguments[ak])) {
                    aj.push(arguments[ak]);
                }
            }
        }
        return this.each(function(an) {
            var at, ar, aq = L(this), am = ah.length, al = aj.length, ap, ao;
            if (an < am) {
                ap = ah[an];
            } else {
                ap = am ? ah[am - 1] : null ;
            }
            if (an < al) {
                ao = aj[an];
            } else {
                ao = al ? aj[al - 1] : null ;
            }
            at = aq.attr("id");
            if (at === u) {
                at = "jqplot_target_" + L.jqplot.targetCounter++;
                aq.attr("id", at);
            }
            ar = L.jqplot(at, ap, ao);
            aq.data("jqplot", ar);
        });
    }
    ;
    L.jqplot = function(an, ak, ai) {
        var aj = null 
          , ah = null ;
        if (arguments.length === 3) {
            aj = ak;
            ah = ai;
        } else {
            if (arguments.length === 2) {
                if (L.isArray(ak)) {
                    aj = ak;
                } else {
                    if (L.isPlainObject(ak)) {
                        ah = ak;
                    }
                }
            }
        }
        if (aj === null  && ah !== null  && ah.data) {
            aj = ah.data;
        }
        var am = new R();
        L("#" + an).removeClass("jqplot-error");
        if (L.jqplot.config.catchErrors) {
            try {
                am.init(an, aj, ah);
                am.draw();
                am.themeEngine.init.call(am);
                return am;
            } catch (al) {
                var ao = L.jqplot.config.errorMessage || al.message;
                L("#" + an).append('<div class="jqplot-error-message">' + ao + "</div>");
                L("#" + an).addClass("jqplot-error");
                document.getElementById(an).style.background = L.jqplot.config.errorBackground;
                document.getElementById(an).style.border = L.jqplot.config.errorBorder;
                document.getElementById(an).style.fontFamily = L.jqplot.config.errorFontFamily;
                document.getElementById(an).style.fontSize = L.jqplot.config.errorFontSize;
                document.getElementById(an).style.fontStyle = L.jqplot.config.errorFontStyle;
                document.getElementById(an).style.fontWeight = L.jqplot.config.errorFontWeight;
            }
        } else {
            am.init(an, aj, ah);
            am.draw();
            am.themeEngine.init.call(am);
            return am;
        }
    }
    ;
    L.jqplot.version = "1.0.7";
    L.jqplot.revision = "1224";
    L.jqplot.targetCounter = 1;
    L.jqplot.CanvasManager = function() {
        if (typeof L.jqplot.CanvasManager.canvases == "undefined") {
            L.jqplot.CanvasManager.canvases = [];
            L.jqplot.CanvasManager.free = [];
        }
        var ah = [];
        this.getCanvas = function() {
            var ak;
            var aj = true;
            if (!L.jqplot.use_excanvas) {
                for (var al = 0, ai = L.jqplot.CanvasManager.canvases.length; al < ai; al++) {
                    if (L.jqplot.CanvasManager.free[al] === true) {
                        aj = false;
                        ak = L.jqplot.CanvasManager.canvases[al];
                        L.jqplot.CanvasManager.free[al] = false;
                        ah.push(al);
                        break;
                    }
                }
            }
            if (aj) {
                ak = document.createElement("canvas");
                ah.push(L.jqplot.CanvasManager.canvases.length);
                L.jqplot.CanvasManager.canvases.push(ak);
                L.jqplot.CanvasManager.free.push(false);
            }
            return ak;
        }
        ;
        this.initCanvas = function(ai) {
            if (L.jqplot.use_excanvas) {
                return window.G_vmlCanvasManager.initElement(ai);
            }
            return ai;
        }
        ;
        this.freeAllCanvases = function() {
            for (var aj = 0, ai = ah.length; aj < ai; aj++) {
                this.freeCanvas(ah[aj]);
            }
            ah = [];
        }
        ;
        this.freeCanvas = function(ai) {
            if (L.jqplot.use_excanvas && window.G_vmlCanvasManager.uninitElement !== u) {
                window.G_vmlCanvasManager.uninitElement(L.jqplot.CanvasManager.canvases[ai]);
                L.jqplot.CanvasManager.canvases[ai] = null ;
            } else {
                var aj = L.jqplot.CanvasManager.canvases[ai];
                aj.getContext("2d").clearRect(0, 0, aj.width, aj.height);
                L(aj).unbind().removeAttr("class").removeAttr("style");
                L(aj).css({
                    left: "",
                    top: "",
                    position: ""
                });
                aj.width = 0;
                aj.height = 0;
                L.jqplot.CanvasManager.free[ai] = true;
            }
        }
        ;
    }
    ;
    L.jqplot.log = function() {
        if (window.console) {
            window.console.log.apply(window.console, arguments);
        }
    }
    ;
    L.jqplot.config = {
        addDomReference: false,
        enablePlugins: false,
        defaultHeight: 300,
        defaultWidth: 400,
        UTCAdjust: false,
        timezoneOffset: new Date(new Date().getTimezoneOffset() * 60000),
        errorMessage: "",
        errorBackground: "",
        errorBorder: "",
        errorFontFamily: "",
        errorFontSize: "",
        errorFontStyle: "",
        errorFontWeight: "",
        catchErrors: false,
        defaultTickFormatString: "%.1f",
        defaultColors: ["#4bb2c5", "#EAA228", "#c5b47f", "#579575", "#839557", "#958c12", "#953579", "#4b5de4", "#d8b83f", "#ff5800", "#0085cc", "#c747a3", "#cddf54", "#FBD178", "#26B4E3", "#bd70c7"],
        defaultNegativeColors: ["#498991", "#C08840", "#9F9274", "#546D61", "#646C4A", "#6F6621", "#6E3F5F", "#4F64B0", "#A89050", "#C45923", "#187399", "#945381", "#959E5C", "#C7AF7B", "#478396", "#907294"],
        dashLength: 4,
        gapLength: 4,
        dotGapLength: 2.5,
        srcLocation: "jqplot/src/",
        pluginLocation: "jqplot/src/plugins/"
    };
    L.jqplot.arrayMax = function(ah) {
        return Math.max.apply(Math, ah);
    }
    ;
    L.jqplot.arrayMin = function(ah) {
        return Math.min.apply(Math, ah);
    }
    ;
    L.jqplot.enablePlugins = L.jqplot.config.enablePlugins;
    L.jqplot.support_canvas = function() {
        if (typeof L.jqplot.support_canvas.result == "undefined") {
            L.jqplot.support_canvas.result = !!document.createElement("canvas").getContext;
        }
        return L.jqplot.support_canvas.result;
    }
    ;
    L.jqplot.support_canvas_text = function() {
        if (typeof L.jqplot.support_canvas_text.result == "undefined") {
            if (window.G_vmlCanvasManager !== u && window.G_vmlCanvasManager._version > 887) {
                L.jqplot.support_canvas_text.result = true;
            } else {
                L.jqplot.support_canvas_text.result = !!(document.createElement("canvas").getContext && typeof document.createElement("canvas").getContext("2d").fillText == "function");
            }
        }
        return L.jqplot.support_canvas_text.result;
    }
    ;
    L.jqplot.use_excanvas = ((!L.support.boxModel || !L.support.objectAll || !$support.leadingWhitespace) && !L.jqplot.support_canvas()) ? true : false;
    L.jqplot.preInitHooks = [];
    L.jqplot.postInitHooks = [];
    L.jqplot.preParseOptionsHooks = [];
    L.jqplot.postParseOptionsHooks = [];
    L.jqplot.preDrawHooks = [];
    L.jqplot.postDrawHooks = [];
    L.jqplot.preDrawSeriesHooks = [];
    L.jqplot.postDrawSeriesHooks = [];
    L.jqplot.preDrawLegendHooks = [];
    L.jqplot.addLegendRowHooks = [];
    L.jqplot.preSeriesInitHooks = [];
    L.jqplot.postSeriesInitHooks = [];
    L.jqplot.preParseSeriesOptionsHooks = [];
    L.jqplot.postParseSeriesOptionsHooks = [];
    L.jqplot.eventListenerHooks = [];
    L.jqplot.preDrawSeriesShadowHooks = [];
    L.jqplot.postDrawSeriesShadowHooks = [];
    L.jqplot.ElemContainer = function() {
        this._elem;
        this._plotWidth;
        this._plotHeight;
        this._plotDimensions = {
            height: null ,
            width: null 
        };
    }
    ;
    L.jqplot.ElemContainer.prototype.createElement = function(ak, am, ai, aj, an) {
        this._offsets = am;
        var ah = ai || "jqplot";
        var al = document.createElement(ak);
        this._elem = L(al);
        this._elem.addClass(ah);
        this._elem.css(aj);
        this._elem.attr(an);
        al = null ;
        return this._elem;
    }
    ;
    L.jqplot.ElemContainer.prototype.getWidth = function() {
        if (this._elem) {
            return this._elem.outerWidth(true);
        } else {
            return null ;
        }
    }
    ;
    L.jqplot.ElemContainer.prototype.getHeight = function() {
        if (this._elem) {
            return this._elem.outerHeight(true);
        } else {
            return null ;
        }
    }
    ;
    L.jqplot.ElemContainer.prototype.getPosition = function() {
        if (this._elem) {
            return this._elem.position();
        } else {
            return {
                top: null ,
                left: null ,
                bottom: null ,
                right: null 
            };
        }
    }
    ;
    L.jqplot.ElemContainer.prototype.getTop = function() {
        return this.getPosition().top;
    }
    ;
    L.jqplot.ElemContainer.prototype.getLeft = function() {
        return this.getPosition().left;
    }
    ;
    L.jqplot.ElemContainer.prototype.getBottom = function() {
        return this._elem.css("bottom");
    }
    ;
    L.jqplot.ElemContainer.prototype.getRight = function() {
        return this._elem.css("right");
    }
    ;
    function w(ah) {
        L.jqplot.ElemContainer.call(this);
        this.name = ah;
        this._series = [];
        this.show = false;
        this.tickRenderer = L.jqplot.AxisTickRenderer;
        this.tickOptions = {};
        this.labelRenderer = L.jqplot.AxisLabelRenderer;
        this.labelOptions = {};
        this.label = null ;
        this.showLabel = true;
        this.min = null ;
        this.max = null ;
        this.autoscale = false;
        this.pad = 1.2;
        this.padMax = null ;
        this.padMin = null ;
        this.ticks = [];
        this.numberTicks;
        this.tickInterval;
        this.renderer = L.jqplot.LinearAxisRenderer;
        this.rendererOptions = {};
        this.showTicks = true;
        this.showTickMarks = true;
        this.showMinorTicks = true;
        this.drawMajorGridlines = true;
        this.drawMinorGridlines = false;
        this.drawMajorTickMarks = true;
        this.drawMinorTickMarks = true;
        this.useSeriesColor = false;
        this.borderWidth = null ;
        this.borderColor = null ;
        this.scaleToHiddenSeries = false;
        this._dataBounds = {
            min: null ,
            max: null 
        };
        this._intervalStats = [];
        this._offsets = {
            min: null ,
            max: null 
        };
        this._ticks = [];
        this._label = null ;
        this.syncTicks = null ;
        this.tickSpacing = 75;
        this._min = null ;
        this._max = null ;
        this._tickInterval = null ;
        this._numberTicks = null ;
        this.__ticks = null ;
        this._options = {};
    }
    w.prototype = new L.jqplot.ElemContainer();
    w.prototype.constructor = w;
    w.prototype.init = function() {
        if (L.isFunction(this.renderer)) {
            this.renderer = new this.renderer();
        }
        this.tickOptions.axis = this.name;
        if (this.tickOptions.showMark == null ) {
            this.tickOptions.showMark = this.showTicks;
        }
        if (this.tickOptions.showMark == null ) {
            this.tickOptions.showMark = this.showTickMarks;
        }
        if (this.tickOptions.showLabel == null ) {
            this.tickOptions.showLabel = this.showTicks;
        }
        if (this.label == null  || this.label == "") {
            this.showLabel = false;
        } else {
            this.labelOptions.label = this.label;
        }
        if (this.showLabel == false) {
            this.labelOptions.show = false;
        }
        if (this.pad == 0) {
            this.pad = 1;
        }
        if (this.padMax == 0) {
            this.padMax = 1;
        }
        if (this.padMin == 0) {
            this.padMin = 1;
        }
        if (this.padMax == null ) {
            this.padMax = (this.pad - 1) / 2 + 1;
        }
        if (this.padMin == null ) {
            this.padMin = (this.pad - 1) / 2 + 1;
        }
        this.pad = this.padMax + this.padMin - 1;
        if (this.min != null  || this.max != null ) {
            this.autoscale = false;
        }
        if (this.syncTicks == null  && this.name.indexOf("y") > -1) {
            this.syncTicks = true;
        } else {
            if (this.syncTicks == null ) {
                this.syncTicks = false;
            }
        }
        this.renderer.init.call(this, this.rendererOptions);
    }
    ;
    w.prototype.draw = function(ah, ai) {
        if (this.__ticks) {
            this.__ticks = null ;
        }
        return this.renderer.draw.call(this, ah, ai);
    }
    ;
    w.prototype.set = function() {
        this.renderer.set.call(this);
    }
    ;
    w.prototype.pack = function(ai, ah) {
        if (this.show) {
            this.renderer.pack.call(this, ai, ah);
        }
        if (this._min == null ) {
            this._min = this.min;
            this._max = this.max;
            this._tickInterval = this.tickInterval;
            this._numberTicks = this.numberTicks;
            this.__ticks = this._ticks;
        }
    }
    ;
    w.prototype.reset = function() {
        this.renderer.reset.call(this);
    }
    ;
    w.prototype.resetScale = function(ah) {
        L.extend(true, this, {
            min: null ,
            max: null ,
            numberTicks: null ,
            tickInterval: null ,
            _ticks: [],
            ticks: []
        }, ah);
        this.resetDataBounds();
    }
    ;
    w.prototype.resetDataBounds = function() {
        var ao = this._dataBounds;
        ao.min = null ;
        ao.max = null ;
        var ai, ap, am;
        var aj = (this.show) ? true : false;
        for (var al = 0; al < this._series.length; al++) {
            ap = this._series[al];
            if (ap.show || this.scaleToHiddenSeries) {
                am = ap._plotData;
                if (ap._type === "line" && ap.renderer.bands.show && this.name.charAt(0) !== "x") {
                    am = [[0, ap.renderer.bands._min], [1, ap.renderer.bands._max]];
                }
                var ah = 1
                  , an = 1;
                if (ap._type != null  && ap._type == "ohlc") {
                    ah = 3;
                    an = 2;
                }
                for (var ak = 0, ai = am.length; ak < ai; ak++) {
                    if (this.name == "xaxis" || this.name == "x2axis") {
                        if ((am[ak][0] != null  && am[ak][0] < ao.min) || ao.min == null ) {
                            ao.min = am[ak][0];
                        }
                        if ((am[ak][0] != null  && am[ak][0] > ao.max) || ao.max == null ) {
                            ao.max = am[ak][0];
                        }
                    } else {
                        if ((am[ak][ah] != null  && am[ak][ah] < ao.min) || ao.min == null ) {
                            ao.min = am[ak][ah];
                        }
                        if ((am[ak][an] != null  && am[ak][an] > ao.max) || ao.max == null ) {
                            ao.max = am[ak][an];
                        }
                    }
                }
                if (aj && ap.renderer.constructor !== L.jqplot.BarRenderer) {
                    aj = false;
                } else {
                    if (aj && this._options.hasOwnProperty("forceTickAt0") && this._options.forceTickAt0 == false) {
                        aj = false;
                    } else {
                        if (aj && ap.renderer.constructor === L.jqplot.BarRenderer) {
                            if (ap.barDirection == "vertical" && this.name != "xaxis" && this.name != "x2axis") {
                                if (this._options.pad != null  || this._options.padMin != null ) {
                                    aj = false;
                                }
                            } else {
                                if (ap.barDirection == "horizontal" && (this.name == "xaxis" || this.name == "x2axis")) {
                                    if (this._options.pad != null  || this._options.padMin != null ) {
                                        aj = false;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        if (aj && this.renderer.constructor === L.jqplot.LinearAxisRenderer && ao.min >= 0) {
            this.padMin = 1;
            this.forceTickAt0 = true;
        }
    }
    ;
    function q(ah) {
        L.jqplot.ElemContainer.call(this);
        this.show = false;
        this.location = "ne";
        this.labels = [];
        this.showLabels = true;
        this.showSwatches = true;
        this.placement = "insideGrid";
        this.xoffset = 0;
        this.yoffset = 0;
        this.border;
        this.background;
        this.textColor;
        this.fontFamily;
        this.fontSize;
        this.rowSpacing = "0.5em";
        this.renderer = L.jqplot.TableLegendRenderer;
        this.rendererOptions = {};
        this.preDraw = false;
        this.marginTop = null ;
        this.marginRight = null ;
        this.marginBottom = null ;
        this.marginLeft = null ;
        this.escapeHtml = false;
        this._series = [];
        L.extend(true, this, ah);
    }
    q.prototype = new L.jqplot.ElemContainer();
    q.prototype.constructor = q;
    q.prototype.setOptions = function(ah) {
        L.extend(true, this, ah);
        if (this.placement == "inside") {
            this.placement = "insideGrid";
        }
        if (this.xoffset > 0) {
            if (this.placement == "insideGrid") {
                switch (this.location) {
                case "nw":
                case "w":
                case "sw":
                    if (this.marginLeft == null ) {
                        this.marginLeft = this.xoffset + "px";
                    }
                    this.marginRight = "0px";
                    break;
                case "ne":
                case "e":
                case "se":
                default:
                    if (this.marginRight == null ) {
                        this.marginRight = this.xoffset + "px";
                    }
                    this.marginLeft = "0px";
                    break;
                }
            } else {
                if (this.placement == "outside") {
                    switch (this.location) {
                    case "nw":
                    case "w":
                    case "sw":
                        if (this.marginRight == null ) {
                            this.marginRight = this.xoffset + "px";
                        }
                        this.marginLeft = "0px";
                        break;
                    case "ne":
                    case "e":
                    case "se":
                    default:
                        if (this.marginLeft == null ) {
                            this.marginLeft = this.xoffset + "px";
                        }
                        this.marginRight = "0px";
                        break;
                    }
                }
            }
            this.xoffset = 0;
        }
        if (this.yoffset > 0) {
            if (this.placement == "outside") {
                switch (this.location) {
                case "sw":
                case "s":
                case "se":
                    if (this.marginTop == null ) {
                        this.marginTop = this.yoffset + "px";
                    }
                    this.marginBottom = "0px";
                    break;
                case "ne":
                case "n":
                case "nw":
                default:
                    if (this.marginBottom == null ) {
                        this.marginBottom = this.yoffset + "px";
                    }
                    this.marginTop = "0px";
                    break;
                }
            } else {
                if (this.placement == "insideGrid") {
                    switch (this.location) {
                    case "sw":
                    case "s":
                    case "se":
                        if (this.marginBottom == null ) {
                            this.marginBottom = this.yoffset + "px";
                        }
                        this.marginTop = "0px";
                        break;
                    case "ne":
                    case "n":
                    case "nw":
                    default:
                        if (this.marginTop == null ) {
                            this.marginTop = this.yoffset + "px";
                        }
                        this.marginBottom = "0px";
                        break;
                    }
                }
            }
            this.yoffset = 0;
        }
    }
    ;
    q.prototype.init = function() {
        if (L.isFunction(this.renderer)) {
            this.renderer = new this.renderer();
        }
        this.renderer.init.call(this, this.rendererOptions);
    }
    ;
    q.prototype.draw = function(ai, aj) {
        for (var ah = 0; ah < L.jqplot.preDrawLegendHooks.length; ah++) {
            L.jqplot.preDrawLegendHooks[ah].call(this, ai);
        }
        return this.renderer.draw.call(this, ai, aj);
    }
    ;
    q.prototype.pack = function(ah) {
        this.renderer.pack.call(this, ah);
    }
    ;
    function y(ah) {
        L.jqplot.ElemContainer.call(this);
        this.text = ah;
        this.show = true;
        this.fontFamily;
        this.fontSize;
        this.textAlign;
        this.textColor;
        this.renderer = L.jqplot.DivTitleRenderer;
        this.rendererOptions = {};
        this.escapeHtml = false;
    }
    y.prototype = new L.jqplot.ElemContainer();
    y.prototype.constructor = y;
    y.prototype.init = function() {
        if (L.isFunction(this.renderer)) {
            this.renderer = new this.renderer();
        }
        this.renderer.init.call(this, this.rendererOptions);
    }
    ;
    y.prototype.draw = function(ah) {
        return this.renderer.draw.call(this, ah);
    }
    ;
    y.prototype.pack = function() {
        this.renderer.pack.call(this);
    }
    ;
    function S(ah) {
        ah = ah || {};
        L.jqplot.ElemContainer.call(this);
        this.show = true;
        this.xaxis = "xaxis";
        this._xaxis;
        this.yaxis = "yaxis";
        this._yaxis;
        this.gridBorderWidth = 2;
        this.renderer = L.jqplot.LineRenderer;
        this.rendererOptions = {};
        this.data = [];
        this.gridData = [];
        this.label = "";
        this.showLabel = true;
        this.color;
        this.negativeColor;
        this.lineWidth = 2.5;
        this.lineJoin = "round";
        this.lineCap = "round";
        this.linePattern = "solid";
        this.shadow = true;
        this.shadowAngle = 45;
        this.shadowOffset = 1.25;
        this.shadowDepth = 3;
        this.shadowAlpha = "0.1";
        this.breakOnNull = false;
        this.markerRenderer = L.jqplot.MarkerRenderer;
        this.markerOptions = {};
        this.showLine = true;
        this.showMarker = true;
        this.index;
        this.fill = false;
        this.fillColor;
        this.fillAlpha;
        this.fillAndStroke = false;
        this.disableStack = false;
        this._stack = false;
        this.neighborThreshold = 4;
        this.fillToZero = false;
        this.fillToValue = 0;
        this.fillAxis = "y";
        this.useNegativeColors = true;
        this._stackData = [];
        this._plotData = [];
        this._plotValues = {
            x: [],
            y: []
        };
        this._intervals = {
            x: {},
            y: {}
        };
        this._prevPlotData = [];
        this._prevGridData = [];
        this._stackAxis = "y";
        this._primaryAxis = "_xaxis";
        this.canvas = new L.jqplot.GenericCanvas();
        this.shadowCanvas = new L.jqplot.GenericCanvas();
        this.plugins = {};
        this._sumy = 0;
        this._sumx = 0;
        this._type = "";
    }
    S.prototype = new L.jqplot.ElemContainer();
    S.prototype.constructor = S;
    S.prototype.init = function(ak, ao, am) {
        this.index = ak;
        this.gridBorderWidth = ao;
        var an = this.data;
        var aj = [], al, ah;
        for (al = 0,
        ah = an.length; al < ah; al++) {
            if (!this.breakOnNull) {
                if (an[al] == null  || an[al][0] == null  || an[al][1] == null ) {
                    continue;
                } else {
                    aj.push(an[al]);
                }
            } else {
                aj.push(an[al]);
            }
        }
        this.data = aj;
        if (!this.color) {
            this.color = am.colorGenerator.get(this.index);
        }
        if (!this.negativeColor) {
            this.negativeColor = am.negativeColorGenerator.get(this.index);
        }
        if (!this.fillColor) {
            this.fillColor = this.color;
        }
        if (this.fillAlpha) {
            var ai = L.jqplot.normalize2rgb(this.fillColor);
            var ai = L.jqplot.getColorComponents(ai);
            this.fillColor = "rgba(" + ai[0] + "," + ai[1] + "," + ai[2] + "," + this.fillAlpha + ")";
        }
        if (L.isFunction(this.renderer)) {
            this.renderer = new this.renderer();
        }
        this.renderer.init.call(this, this.rendererOptions, am);
        this.markerRenderer = new this.markerRenderer();
        if (!this.markerOptions.color) {
            this.markerOptions.color = this.color;
        }
        if (this.markerOptions.show == null ) {
            this.markerOptions.show = this.showMarker;
        }
        this.showMarker = this.markerOptions.show;
        this.markerRenderer.init(this.markerOptions);
    }
    ;
    S.prototype.draw = function(an, ak, am) {
        var ai = (ak == u) ? {} : ak;
        an = (an == u) ? this.canvas._ctx : an;
        var ah, al, aj;
        for (ah = 0; ah < L.jqplot.preDrawSeriesHooks.length; ah++) {
            L.jqplot.preDrawSeriesHooks[ah].call(this, an, ai);
        }
        if (this.show) {
            this.renderer.setGridData.call(this, am);
            if (!ai.preventJqPlotSeriesDrawTrigger) {
                L(an.canvas).trigger("jqplotSeriesDraw", [this.data, this.gridData]);
            }
            al = [];
            if (ai.data) {
                al = ai.data;
            } else {
                if (!this._stack) {
                    al = this.data;
                } else {
                    al = this._plotData;
                }
            }
            aj = ai.gridData || this.renderer.makeGridData.call(this, al, am);
            if (this._type === "line" && this.renderer.smooth && this.renderer._smoothedData.length) {
                aj = this.renderer._smoothedData;
            }
            this.renderer.draw.call(this, an, aj, ai, am);
        }
        for (ah = 0; ah < L.jqplot.postDrawSeriesHooks.length; ah++) {
            L.jqplot.postDrawSeriesHooks[ah].call(this, an, ai, am);
        }
        an = ak = am = ah = al = aj = null ;
    }
    ;
    S.prototype.drawShadow = function(an, ak, am) {
        var ai = (ak == u) ? {} : ak;
        an = (an == u) ? this.shadowCanvas._ctx : an;
        var ah, al, aj;
        for (ah = 0; ah < L.jqplot.preDrawSeriesShadowHooks.length; ah++) {
            L.jqplot.preDrawSeriesShadowHooks[ah].call(this, an, ai);
        }
        if (this.shadow) {
            this.renderer.setGridData.call(this, am);
            al = [];
            if (ai.data) {
                al = ai.data;
            } else {
                if (!this._stack) {
                    al = this.data;
                } else {
                    al = this._plotData;
                }
            }
            aj = ai.gridData || this.renderer.makeGridData.call(this, al, am);
            this.renderer.drawShadow.call(this, an, aj, ai, am);
        }
        for (ah = 0; ah < L.jqplot.postDrawSeriesShadowHooks.length; ah++) {
            L.jqplot.postDrawSeriesShadowHooks[ah].call(this, an, ai);
        }
        an = ak = am = ah = al = aj = null ;
    }
    ;
    S.prototype.toggleDisplay = function(ai, ak) {
        var ah, aj;
        if (ai.data.series) {
            ah = ai.data.series;
        } else {
            ah = this;
        }
        if (ai.data.speed) {
            aj = ai.data.speed;
        }
        if (aj) {
            if (ah.canvas._elem.is(":hidden") || !ah.show) {
                ah.show = true;
                ah.canvas._elem.removeClass("jqplot-series-hidden");
                if (ah.shadowCanvas._elem) {
                    ah.shadowCanvas._elem.fadeIn(aj);
                }
                ah.canvas._elem.fadeIn(aj, ak);
                ah.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-" + ah.index).fadeIn(aj);
            } else {
                ah.show = false;
                ah.canvas._elem.addClass("jqplot-series-hidden");
                if (ah.shadowCanvas._elem) {
                    ah.shadowCanvas._elem.fadeOut(aj);
                }
                ah.canvas._elem.fadeOut(aj, ak);
                ah.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-" + ah.index).fadeOut(aj);
            }
        } else {
            if (ah.canvas._elem.is(":hidden") || !ah.show) {
                ah.show = true;
                ah.canvas._elem.removeClass("jqplot-series-hidden");
                if (ah.shadowCanvas._elem) {
                    ah.shadowCanvas._elem.show();
                }
                ah.canvas._elem.show(0, ak);
                ah.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-" + ah.index).show();
            } else {
                ah.show = false;
                ah.canvas._elem.addClass("jqplot-series-hidden");
                if (ah.shadowCanvas._elem) {
                    ah.shadowCanvas._elem.hide();
                }
                ah.canvas._elem.hide(0, ak);
                ah.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-" + ah.index).hide();
            }
        }
    }
    ;
    function M() {
        L.jqplot.ElemContainer.call(this);
        this.drawGridlines = true;
        this.gridLineColor = "#cccccc";
        this.gridLineWidth = 1;
        this.background = "#fffdf6";
        this.borderColor = "#999999";
        this.borderWidth = 2;
        this.drawBorder = true;
        this.shadow = true;
        this.shadowAngle = 45;
        this.shadowOffset = 1.5;
        this.shadowWidth = 3;
        this.shadowDepth = 3;
        this.shadowColor = null ;
        this.shadowAlpha = "0.07";
        this._left;
        this._top;
        this._right;
        this._bottom;
        this._width;
        this._height;
        this._axes = [];
        this.renderer = L.jqplot.CanvasGridRenderer;
        this.rendererOptions = {};
        this._offsets = {
            top: null ,
            bottom: null ,
            left: null ,
            right: null 
        };
    }
    M.prototype = new L.jqplot.ElemContainer();
    M.prototype.constructor = M;
    M.prototype.init = function() {
        if (L.isFunction(this.renderer)) {
            this.renderer = new this.renderer();
        }
        this.renderer.init.call(this, this.rendererOptions);
    }
    ;
    M.prototype.createElement = function(ah, ai) {
        this._offsets = ah;
        return this.renderer.createElement.call(this, ai);
    }
    ;
    M.prototype.draw = function() {
        this.renderer.draw.call(this);
    }
    ;
    L.jqplot.GenericCanvas = function() {
        L.jqplot.ElemContainer.call(this);
        this._ctx;
    }
    ;
    L.jqplot.GenericCanvas.prototype = new L.jqplot.ElemContainer();
    L.jqplot.GenericCanvas.prototype.constructor = L.jqplot.GenericCanvas;
    L.jqplot.GenericCanvas.prototype.createElement = function(al, aj, ai, am) {
        this._offsets = al;
        var ah = "jqplot";
        if (aj != u) {
            ah = aj;
        }
        var ak;
        ak = am.canvasManager.getCanvas();
        if (ai != null ) {
            this._plotDimensions = ai;
        }
        ak.width = this._plotDimensions.width - this._offsets.left - this._offsets.right;
        ak.height = this._plotDimensions.height - this._offsets.top - this._offsets.bottom;
        this._elem = L(ak);
        this._elem.css({
            position: "absolute",
            left: this._offsets.left,
            top: this._offsets.top
        });
        this._elem.addClass(ah);
        ak = am.canvasManager.initCanvas(ak);
        ak = null ;
        return this._elem;
    }
    ;
    L.jqplot.GenericCanvas.prototype.setContext = function() {
        this._ctx = this._elem.get(0).getContext("2d");
        return this._ctx;
    }
    ;
    L.jqplot.GenericCanvas.prototype.resetCanvas = function() {
        if (this._elem) {
            if (L.jqplot.use_excanvas && window.G_vmlCanvasManager.uninitElement !== u) {
                window.G_vmlCanvasManager.uninitElement(this._elem.get(0));
            }
            this._elem.emptyForce();
        }
        this._ctx = null ;
    }
    ;
    L.jqplot.HooksManager = function() {
        this.hooks = [];
        this.args = [];
    }
    ;
    L.jqplot.HooksManager.prototype.addOnce = function(ak, ai) {
        ai = ai || [];
        var al = false;
        for (var aj = 0, ah = this.hooks.length; aj < ah; aj++) {
            if (this.hooks[aj] == ak) {
                al = true;
            }
        }
        if (!al) {
            this.hooks.push(ak);
            this.args.push(ai);
        }
    }
    ;
    L.jqplot.HooksManager.prototype.add = function(ai, ah) {
        ah = ah || [];
        this.hooks.push(ai);
        this.args.push(ah);
    }
    ;
    L.jqplot.EventListenerManager = function() {
        this.hooks = [];
    }
    ;
    L.jqplot.EventListenerManager.prototype.addOnce = function(al, ak) {
        var am = false, aj, ai;
        for (var ai = 0, ah = this.hooks.length; ai < ah; ai++) {
            aj = this.hooks[ai];
            if (aj[0] == al && aj[1] == ak) {
                am = true;
            }
        }
        if (!am) {
            this.hooks.push([al, ak]);
        }
    }
    ;
    L.jqplot.EventListenerManager.prototype.add = function(ai, ah) {
        this.hooks.push([ai, ah]);
    }
    ;
    var U = ["yMidAxis", "xaxis", "yaxis", "x2axis", "y2axis", "y3axis", "y4axis", "y5axis", "y6axis", "y7axis", "y8axis", "y9axis"];
    function R() {
        this.animate = false;
        this.animateReplot = false;
        this.axes = {
            xaxis: new w("xaxis"),
            yaxis: new w("yaxis"),
            x2axis: new w("x2axis"),
            y2axis: new w("y2axis"),
            y3axis: new w("y3axis"),
            y4axis: new w("y4axis"),
            y5axis: new w("y5axis"),
            y6axis: new w("y6axis"),
            y7axis: new w("y7axis"),
            y8axis: new w("y8axis"),
            y9axis: new w("y9axis"),
            yMidAxis: new w("yMidAxis")
        };
        this.baseCanvas = new L.jqplot.GenericCanvas();
        this.captureRightClick = false;
        this.data = [];
        this.dataRenderer;
        this.dataRendererOptions;
        this.defaults = {
            axesDefaults: {},
            axes: {
                xaxis: {},
                yaxis: {},
                x2axis: {},
                y2axis: {},
                y3axis: {},
                y4axis: {},
                y5axis: {},
                y6axis: {},
                y7axis: {},
                y8axis: {},
                y9axis: {},
                yMidAxis: {}
            },
            seriesDefaults: {},
            series: []
        };
        this.defaultAxisStart = 1;
        this.drawIfHidden = false;
        this.eventCanvas = new L.jqplot.GenericCanvas();
        this.fillBetween = {
            series1: null ,
            series2: null ,
            color: null ,
            baseSeries: 0,
            fill: true
        };
        this.fontFamily;
        this.fontSize;
        this.grid = new M();
        this.legend = new q();
        this.noDataIndicator = {
            show: false,
            indicator: "Loading Data...",
            axes: {
                xaxis: {
                    min: 0,
                    max: 10,
                    tickInterval: 2,
                    show: true
                },
                yaxis: {
                    min: 0,
                    max: 12,
                    tickInterval: 3,
                    show: true
                }
            }
        };
        this.negativeSeriesColors = L.jqplot.config.defaultNegativeColors;
        this.options = {};
        this.previousSeriesStack = [];
        this.plugins = {};
        this.series = [];
        this.seriesStack = [];
        this.seriesColors = L.jqplot.config.defaultColors;
        this.sortData = true;
        this.stackSeries = false;
        this.syncXTicks = true;
        this.syncYTicks = true;
        this.target = null ;
        this.targetId = null ;
        this.textColor;
        this.title = new y();
        this._drawCount = 0;
        this._sumy = 0;
        this._sumx = 0;
        this._stackData = [];
        this._plotData = [];
        this._width = null ;
        this._height = null ;
        this._plotDimensions = {
            height: null ,
            width: null 
        };
        this._gridPadding = {
            top: null ,
            right: null ,
            bottom: null ,
            left: null 
        };
        this._defaultGridPadding = {
            top: 10,
            right: 10,
            bottom: 23,
            left: 10
        };
        this._addDomReference = L.jqplot.config.addDomReference;
        this.preInitHooks = new L.jqplot.HooksManager();
        this.postInitHooks = new L.jqplot.HooksManager();
        this.preParseOptionsHooks = new L.jqplot.HooksManager();
        this.postParseOptionsHooks = new L.jqplot.HooksManager();
        this.preDrawHooks = new L.jqplot.HooksManager();
        this.postDrawHooks = new L.jqplot.HooksManager();
        this.preDrawSeriesHooks = new L.jqplot.HooksManager();
        this.postDrawSeriesHooks = new L.jqplot.HooksManager();
        this.preDrawLegendHooks = new L.jqplot.HooksManager();
        this.addLegendRowHooks = new L.jqplot.HooksManager();
        this.preSeriesInitHooks = new L.jqplot.HooksManager();
        this.postSeriesInitHooks = new L.jqplot.HooksManager();
        this.preParseSeriesOptionsHooks = new L.jqplot.HooksManager();
        this.postParseSeriesOptionsHooks = new L.jqplot.HooksManager();
        this.eventListenerHooks = new L.jqplot.EventListenerManager();
        this.preDrawSeriesShadowHooks = new L.jqplot.HooksManager();
        this.postDrawSeriesShadowHooks = new L.jqplot.HooksManager();
        this.colorGenerator = new L.jqplot.ColorGenerator();
        this.negativeColorGenerator = new L.jqplot.ColorGenerator();
        this.canvasManager = new L.jqplot.CanvasManager();
        this.themeEngine = new L.jqplot.ThemeEngine();
        var aj = 0;
        this.init = function(av, ar, ay) {
            ay = ay || {};
            for (var at = 0; at < L.jqplot.preInitHooks.length; at++) {
                L.jqplot.preInitHooks[at].call(this, av, ar, ay);
            }
            for (var at = 0; at < this.preInitHooks.hooks.length; at++) {
                this.preInitHooks.hooks[at].call(this, av, ar, ay);
            }
            this.targetId = "#" + av;
            this.target = L("#" + av);
            if (this._addDomReference) {
                this.target.data("jqplot", this);
            }
            this.target.removeClass("jqplot-error");
            if (!this.target.get(0)) {
                throw "No plot target specified";
            }
            if (this.target.css("position") == "static") {
                this.target.css("position", "relative");
            }
            if (!this.target.hasClass("jqplot-target")) {
                this.target.addClass("jqplot-target");
            }
            if (!this.target.height()) {
                var au;
                if (ay && ay.height) {
                    au = parseInt(ay.height, 10);
                } else {
                    if (this.target.attr("data-height")) {
                        au = parseInt(this.target.attr("data-height"), 10);
                    } else {
                        au = parseInt(L.jqplot.config.defaultHeight, 10);
                    }
                }
                this._height = au;
                this.target.css("height", au + "px");
            } else {
                this._height = au = this.target.height();
            }
            if (!this.target.width()) {
                var aw;
                if (ay && ay.width) {
                    aw = parseInt(ay.width, 10);
                } else {
                    if (this.target.attr("data-width")) {
                        aw = parseInt(this.target.attr("data-width"), 10);
                    } else {
                        aw = parseInt(L.jqplot.config.defaultWidth, 10);
                    }
                }
                this._width = aw;
                this.target.css("width", aw + "px");
            } else {
                this._width = aw = this.target.width();
            }
            for (var at = 0, ap = U.length; at < ap; at++) {
                this.axes[U[at]] = new w(U[at]);
            }
            this._plotDimensions.height = this._height;
            this._plotDimensions.width = this._width;
            this.grid._plotDimensions = this._plotDimensions;
            this.title._plotDimensions = this._plotDimensions;
            this.baseCanvas._plotDimensions = this._plotDimensions;
            this.eventCanvas._plotDimensions = this._plotDimensions;
            this.legend._plotDimensions = this._plotDimensions;
            if (this._height <= 0 || this._width <= 0 || !this._height || !this._width) {
                throw "Canvas dimension not set";
            }
            if (ay.dataRenderer && L.isFunction(ay.dataRenderer)) {
                if (ay.dataRendererOptions) {
                    this.dataRendererOptions = ay.dataRendererOptions;
                }
                this.dataRenderer = ay.dataRenderer;
                ar = this.dataRenderer(ar, this, this.dataRendererOptions);
            }
            if (ay.noDataIndicator && L.isPlainObject(ay.noDataIndicator)) {
                L.extend(true, this.noDataIndicator, ay.noDataIndicator);
            }
            if (ar == null  || L.isArray(ar) == false || ar.length == 0 || L.isArray(ar[0]) == false || ar[0].length == 0) {
                if (this.noDataIndicator.show == false) {
                    throw "No Data";
                } else {
                    for (var al in this.noDataIndicator.axes) {
                        for (var an in this.noDataIndicator.axes[al]) {
                            this.axes[al][an] = this.noDataIndicator.axes[al][an];
                        }
                    }
                    this.postDrawHooks.add(function() {
                        var aD = this.eventCanvas.getHeight();
                        var aA = this.eventCanvas.getWidth();
                        var az = L('<div class="jqplot-noData-container" style="position:absolute;"></div>');
                        this.target.append(az);
                        az.height(aD);
                        az.width(aA);
                        az.css("top", this.eventCanvas._offsets.top);
                        az.css("left", this.eventCanvas._offsets.left);
                        var aC = L('<div class="jqplot-noData-contents" style="text-align:center; position:relative; margin-left:auto; margin-right:auto;"></div>');
                        az.append(aC);
                        aC.html(this.noDataIndicator.indicator);
                        var aB = aC.height();
                        var ax = aC.width();
                        aC.height(aB);
                        aC.width(ax);
                        aC.css("top", (aD - aB) / 2 + "px");
                    });
                }
            }
            this.data = L.extend(true, [], ar);
            this.parseOptions(ay);
            if (this.textColor) {
                this.target.css("color", this.textColor);
            }
            if (this.fontFamily) {
                this.target.css("font-family", this.fontFamily);
            }
            if (this.fontSize) {
                this.target.css("font-size", this.fontSize);
            }
            this.title.init();
            this.legend.init();
            this._sumy = 0;
            this._sumx = 0;
            this.computePlotData();
            for (var at = 0; at < this.series.length; at++) {
                this.seriesStack.push(at);
                this.previousSeriesStack.push(at);
                this.series[at].shadowCanvas._plotDimensions = this._plotDimensions;
                this.series[at].canvas._plotDimensions = this._plotDimensions;
                for (var aq = 0; aq < L.jqplot.preSeriesInitHooks.length; aq++) {
                    L.jqplot.preSeriesInitHooks[aq].call(this.series[at], av, this.data, this.options.seriesDefaults, this.options.series[at], this);
                }
                for (var aq = 0; aq < this.preSeriesInitHooks.hooks.length; aq++) {
                    this.preSeriesInitHooks.hooks[aq].call(this.series[at], av, this.data, this.options.seriesDefaults, this.options.series[at], this);
                }
                this.series[at]._plotDimensions = this._plotDimensions;
                this.series[at].init(at, this.grid.borderWidth, this);
                for (var aq = 0; aq < L.jqplot.postSeriesInitHooks.length; aq++) {
                    L.jqplot.postSeriesInitHooks[aq].call(this.series[at], av, this.data, this.options.seriesDefaults, this.options.series[at], this);
                }
                for (var aq = 0; aq < this.postSeriesInitHooks.hooks.length; aq++) {
                    this.postSeriesInitHooks.hooks[aq].call(this.series[at], av, this.data, this.options.seriesDefaults, this.options.series[at], this);
                }
                this._sumy += this.series[at]._sumy;
                this._sumx += this.series[at]._sumx;
            }
            var am, ao;
            for (var at = 0, ap = U.length; at < ap; at++) {
                am = U[at];
                ao = this.axes[am];
                ao._plotDimensions = this._plotDimensions;
                ao.init();
                if (this.axes[am].borderColor == null ) {
                    if (am.charAt(0) !== "x" && ao.useSeriesColor === true && ao.show) {
                        ao.borderColor = ao._series[0].color;
                    } else {
                        ao.borderColor = this.grid.borderColor;
                    }
                }
            }
            if (this.sortData) {
                ah(this.series);
            }
            this.grid.init();
            this.grid._axes = this.axes;
            this.legend._series = this.series;
            for (var at = 0; at < L.jqplot.postInitHooks.length; at++) {
                L.jqplot.postInitHooks[at].call(this, av, this.data, ay);
            }
            for (var at = 0; at < this.postInitHooks.hooks.length; at++) {
                this.postInitHooks.hooks[at].call(this, av, this.data, ay);
            }
        }
        ;
        this.resetAxesScale = function(aq, am) {
            var ao = am || {};
            var ap = aq || this.axes;
            if (ap === true) {
                ap = this.axes;
            }
            if (L.isArray(ap)) {
                for (var an = 0; an < ap.length; an++) {
                    this.axes[ap[an]].resetScale(ao[ap[an]]);
                }
            } else {
                if (typeof (ap) === "object") {
                    for (var al in ap) {
                        this.axes[al].resetScale(ao[al]);
                    }
                }
            }
        }
        ;
        this.reInitialize = function(au, al) {
            var ay = L.extend(true, {}, this.options, al);
            var aw = this.targetId.substr(1);
            var ar = (au == null ) ? this.data : au;
            for (var av = 0; av < L.jqplot.preInitHooks.length; av++) {
                L.jqplot.preInitHooks[av].call(this, aw, ar, ay);
            }
            for (var av = 0; av < this.preInitHooks.hooks.length; av++) {
                this.preInitHooks.hooks[av].call(this, aw, ar, ay);
            }
            this._height = this.target.height();
            this._width = this.target.width();
            if (this._height <= 0 || this._width <= 0 || !this._height || !this._width) {
                throw "Target dimension not set";
            }
            this._plotDimensions.height = this._height;
            this._plotDimensions.width = this._width;
            this.grid._plotDimensions = this._plotDimensions;
            this.title._plotDimensions = this._plotDimensions;
            this.baseCanvas._plotDimensions = this._plotDimensions;
            this.eventCanvas._plotDimensions = this._plotDimensions;
            this.legend._plotDimensions = this._plotDimensions;
            var am, ax, at, ao;
            for (var av = 0, aq = U.length; av < aq; av++) {
                am = U[av];
                ao = this.axes[am];
                ax = ao._ticks;
                for (var at = 0, ap = ax.length; at < ap; at++) {
                    var an = ax[at]._elem;
                    if (an) {
                        if (L.jqplot.use_excanvas && window.G_vmlCanvasManager.uninitElement !== u) {
                            window.G_vmlCanvasManager.uninitElement(an.get(0));
                        }
                        an.emptyForce();
                        an = null ;
                        ax._elem = null ;
                    }
                }
                ax = null ;
                delete ao.ticks;
                delete ao._ticks;
                this.axes[am] = new w(am);
                this.axes[am]._plotWidth = this._width;
                this.axes[am]._plotHeight = this._height;
            }
            if (au) {
                if (ay.dataRenderer && L.isFunction(ay.dataRenderer)) {
                    if (ay.dataRendererOptions) {
                        this.dataRendererOptions = ay.dataRendererOptions;
                    }
                    this.dataRenderer = ay.dataRenderer;
                    au = this.dataRenderer(au, this, this.dataRendererOptions);
                }
                this.data = L.extend(true, [], au);
            }
            if (al) {
                this.parseOptions(ay);
            }
            this.title._plotWidth = this._width;
            if (this.textColor) {
                this.target.css("color", this.textColor);
            }
            if (this.fontFamily) {
                this.target.css("font-family", this.fontFamily);
            }
            if (this.fontSize) {
                this.target.css("font-size", this.fontSize);
            }
            this.title.init();
            this.legend.init();
            this._sumy = 0;
            this._sumx = 0;
            this.seriesStack = [];
            this.previousSeriesStack = [];
            this.computePlotData();
            for (var av = 0, aq = this.series.length; av < aq; av++) {
                this.seriesStack.push(av);
                this.previousSeriesStack.push(av);
                this.series[av].shadowCanvas._plotDimensions = this._plotDimensions;
                this.series[av].canvas._plotDimensions = this._plotDimensions;
                for (var at = 0; at < L.jqplot.preSeriesInitHooks.length; at++) {
                    L.jqplot.preSeriesInitHooks[at].call(this.series[av], aw, this.data, this.options.seriesDefaults, this.options.series[av], this);
                }
                for (var at = 0; at < this.preSeriesInitHooks.hooks.length; at++) {
                    this.preSeriesInitHooks.hooks[at].call(this.series[av], aw, this.data, this.options.seriesDefaults, this.options.series[av], this);
                }
                this.series[av]._plotDimensions = this._plotDimensions;
                this.series[av].init(av, this.grid.borderWidth, this);
                for (var at = 0; at < L.jqplot.postSeriesInitHooks.length; at++) {
                    L.jqplot.postSeriesInitHooks[at].call(this.series[av], aw, this.data, this.options.seriesDefaults, this.options.series[av], this);
                }
                for (var at = 0; at < this.postSeriesInitHooks.hooks.length; at++) {
                    this.postSeriesInitHooks.hooks[at].call(this.series[av], aw, this.data, this.options.seriesDefaults, this.options.series[av], this);
                }
                this._sumy += this.series[av]._sumy;
                this._sumx += this.series[av]._sumx;
            }
            for (var av = 0, aq = U.length; av < aq; av++) {
                am = U[av];
                ao = this.axes[am];
                ao._plotDimensions = this._plotDimensions;
                ao.init();
                if (ao.borderColor == null ) {
                    if (am.charAt(0) !== "x" && ao.useSeriesColor === true && ao.show) {
                        ao.borderColor = ao._series[0].color;
                    } else {
                        ao.borderColor = this.grid.borderColor;
                    }
                }
            }
            if (this.sortData) {
                ah(this.series);
            }
            this.grid.init();
            this.grid._axes = this.axes;
            this.legend._series = this.series;
            for (var av = 0, aq = L.jqplot.postInitHooks.length; av < aq; av++) {
                L.jqplot.postInitHooks[av].call(this, aw, this.data, ay);
            }
            for (var av = 0, aq = this.postInitHooks.hooks.length; av < aq; av++) {
                this.postInitHooks.hooks[av].call(this, aw, this.data, ay);
            }
        }
        ;
        this.quickInit = function() {
            this._height = this.target.height();
            this._width = this.target.width();
            if (this._height <= 0 || this._width <= 0 || !this._height || !this._width) {
                throw "Target dimension not set";
            }
            this._plotDimensions.height = this._height;
            this._plotDimensions.width = this._width;
            this.grid._plotDimensions = this._plotDimensions;
            this.title._plotDimensions = this._plotDimensions;
            this.baseCanvas._plotDimensions = this._plotDimensions;
            this.eventCanvas._plotDimensions = this._plotDimensions;
            this.legend._plotDimensions = this._plotDimensions;
            for (var aq in this.axes) {
                this.axes[aq]._plotWidth = this._width;
                this.axes[aq]._plotHeight = this._height;
            }
            this.title._plotWidth = this._width;
            if (this.textColor) {
                this.target.css("color", this.textColor);
            }
            if (this.fontFamily) {
                this.target.css("font-family", this.fontFamily);
            }
            if (this.fontSize) {
                this.target.css("font-size", this.fontSize);
            }
            this._sumy = 0;
            this._sumx = 0;
            this.computePlotData();
            for (var ao = 0; ao < this.series.length; ao++) {
                if (this.series[ao]._type === "line" && this.series[ao].renderer.bands.show) {
                    this.series[ao].renderer.initBands.call(this.series[ao], this.series[ao].renderer.options, this);
                }
                this.series[ao]._plotDimensions = this._plotDimensions;
                this.series[ao].canvas._plotDimensions = this._plotDimensions;
                this._sumy += this.series[ao]._sumy;
                this._sumx += this.series[ao]._sumx;
            }
            var am;
            for (var al = 0; al < 12; al++) {
                am = U[al];
                var an = this.axes[am]._ticks;
                for (var ao = 0; ao < an.length; ao++) {
                    var ap = an[ao]._elem;
                    if (ap) {
                        if (L.jqplot.use_excanvas && window.G_vmlCanvasManager.uninitElement !== u) {
                            window.G_vmlCanvasManager.uninitElement(ap.get(0));
                        }
                        ap.emptyForce();
                        ap = null ;
                        an._elem = null ;
                    }
                }
                an = null ;
                this.axes[am]._plotDimensions = this._plotDimensions;
                this.axes[am]._ticks = [];
            }
            if (this.sortData) {
                ah(this.series);
            }
            this.grid._axes = this.axes;
            this.legend._series = this.series;
        }
        ;
        function ah(ap) {
            var au, av, aw, al, at;
            for (var aq = 0; aq < ap.length; aq++) {
                var am;
                var ar = [ap[aq].data, ap[aq]._stackData, ap[aq]._plotData, ap[aq]._prevPlotData];
                for (var an = 0; an < 4; an++) {
                    am = true;
                    au = ar[an];
                    if (ap[aq]._stackAxis == "x") {
                        for (var ao = 0; ao < au.length; ao++) {
                            if (typeof (au[ao][1]) != "number") {
                                am = false;
                                break;
                            }
                        }
                        if (am) {
                            au.sort(function(ay, ax) {
                                return ay[1] - ax[1];
                            });
                        }
                    } else {
                        for (var ao = 0; ao < au.length; ao++) {
                            if (typeof (au[ao][0]) != "number") {
                                am = false;
                                break;
                            }
                        }
                        if (am) {
                            au.sort(function(ay, ax) {
                                return ay[0] - ax[0];
                            });
                        }
                    }
                }
            }
        }
        this.computePlotData = function() {
            this._plotData = [];
            this._stackData = [];
            var at, au, ao;
            for (au = 0,
            ao = this.series.length; au < ao; au++) {
                at = this.series[au];
                this._plotData.push([]);
                this._stackData.push([]);
                var am = at.data;
                this._plotData[au] = L.extend(true, [], am);
                this._stackData[au] = L.extend(true, [], am);
                at._plotData = this._plotData[au];
                at._stackData = this._stackData[au];
                var ax = {
                    x: [],
                    y: []
                };
                if (this.stackSeries && !at.disableStack) {
                    at._stack = true;
                    var av = (at._stackAxis === "x") ? 0 : 1;
                    for (var ap = 0, al = am.length; ap < al; ap++) {
                        var aw = am[ap][av];
                        if (aw == null ) {
                            aw = 0;
                        }
                        this._plotData[au][ap][av] = aw;
                        this._stackData[au][ap][av] = aw;
                        if (au > 0) {
                            for (var aq = au; aq--; ) {
                                var an = this._plotData[aq][ap][av];
                                if (aw * an >= 0) {
                                    this._plotData[au][ap][av] += an;
                                    this._stackData[au][ap][av] += an;
                                    break;
                                }
                            }
                        }
                    }
                } else {
                    for (var ar = 0; ar < at.data.length; ar++) {
                        ax.x.push(at.data[ar][0]);
                        ax.y.push(at.data[ar][1]);
                    }
                    this._stackData.push(at.data);
                    this.series[au]._stackData = at.data;
                    this._plotData.push(at.data);
                    at._plotData = at.data;
                    at._plotValues = ax;
                }
                if (au > 0) {
                    at._prevPlotData = this.series[au - 1]._plotData;
                }
                at._sumy = 0;
                at._sumx = 0;
                for (ar = at.data.length - 1; ar > -1; ar--) {
                    at._sumy += at.data[ar][1];
                    at._sumx += at.data[ar][0];
                }
            }
        }
        ;
        this.populatePlotData = function(au, av) {
            this._plotData = [];
            this._stackData = [];
            au._stackData = [];
            au._plotData = [];
            var ay = {
                x: [],
                y: []
            };
            if (this.stackSeries && !au.disableStack) {
                au._stack = true;
                var ax = (au._stackAxis === "x") ? 0 : 1;
                var az = L.extend(true, [], au.data);
                var aA = L.extend(true, [], au.data);
                var an, am, ao, aw, al;
                for (var ar = 0; ar < av; ar++) {
                    var ap = this.series[ar].data;
                    for (var aq = 0; aq < ap.length; aq++) {
                        ao = ap[aq];
                        an = (ao[0] != null ) ? ao[0] : 0;
                        am = (ao[1] != null ) ? ao[1] : 0;
                        az[aq][0] += an;
                        az[aq][1] += am;
                        aw = (ax) ? am : an;
                        if (au.data[aq][ax] * aw >= 0) {
                            aA[aq][ax] += aw;
                        }
                    }
                }
                for (var at = 0; at < aA.length; at++) {
                    ay.x.push(aA[at][0]);
                    ay.y.push(aA[at][1]);
                }
                this._plotData.push(aA);
                this._stackData.push(az);
                au._stackData = az;
                au._plotData = aA;
                au._plotValues = ay;
            } else {
                for (var at = 0; at < au.data.length; at++) {
                    ay.x.push(au.data[at][0]);
                    ay.y.push(au.data[at][1]);
                }
                this._stackData.push(au.data);
                this.series[av]._stackData = au.data;
                this._plotData.push(au.data);
                au._plotData = au.data;
                au._plotValues = ay;
            }
            if (av > 0) {
                au._prevPlotData = this.series[av - 1]._plotData;
            }
            au._sumy = 0;
            au._sumx = 0;
            for (at = au.data.length - 1; at > -1; at--) {
                au._sumy += au.data[at][1];
                au._sumx += au.data[at][0];
            }
        }
        ;
        this.getNextSeriesColor = (function(am) {
            var al = 0;
            var an = am.seriesColors;
            return function() {
                if (al < an.length) {
                    return an[al++];
                } else {
                    al = 0;
                    return an[al++];
                }
            }
            ;
        })(this);
        this.parseOptions = function(ay) {
            for (var at = 0; at < this.preParseOptionsHooks.hooks.length; at++) {
                this.preParseOptionsHooks.hooks[at].call(this, ay);
            }
            for (var at = 0; at < L.jqplot.preParseOptionsHooks.length; at++) {
                L.jqplot.preParseOptionsHooks[at].call(this, ay);
            }
            this.options = L.extend(true, {}, this.defaults, ay);
            var am = this.options;
            this.animate = am.animate;
            this.animateReplot = am.animateReplot;
            this.stackSeries = am.stackSeries;
            if (L.isPlainObject(am.fillBetween)) {
                var ax = ["series1", "series2", "color", "baseSeries", "fill"], au;
                for (var at = 0, aq = ax.length; at < aq; at++) {
                    au = ax[at];
                    if (am.fillBetween[au] != null ) {
                        this.fillBetween[au] = am.fillBetween[au];
                    }
                }
            }
            if (am.seriesColors) {
                this.seriesColors = am.seriesColors;
            }
            if (am.negativeSeriesColors) {
                this.negativeSeriesColors = am.negativeSeriesColors;
            }
            if (am.captureRightClick) {
                this.captureRightClick = am.captureRightClick;
            }
            this.defaultAxisStart = (ay && ay.defaultAxisStart != null ) ? ay.defaultAxisStart : this.defaultAxisStart;
            this.colorGenerator.setColors(this.seriesColors);
            this.negativeColorGenerator.setColors(this.negativeSeriesColors);
            L.extend(true, this._gridPadding, am.gridPadding);
            this.sortData = (am.sortData != null ) ? am.sortData : this.sortData;
            for (var at = 0; at < 12; at++) {
                var an = U[at];
                var ap = this.axes[an];
                ap._options = L.extend(true, {}, am.axesDefaults, am.axes[an]);
                L.extend(true, ap, am.axesDefaults, am.axes[an]);
                ap._plotWidth = this._width;
                ap._plotHeight = this._height;
            }
            var aw = function(aD, aB, aE) {
                var aA = [];
                var aC, az;
                aB = aB || "vertical";
                if (!L.isArray(aD[0])) {
                    for (aC = 0,
                    az = aD.length; aC < az; aC++) {
                        if (aB == "vertical") {
                            aA.push([aE + aC, aD[aC]]);
                        } else {
                            aA.push([aD[aC], aE + aC]);
                        }
                    }
                } else {
                    L.extend(true, aA, aD);
                }
                return aA;
            }
            ;
            var av = 0;
            this.series = [];
            for (var at = 0; at < this.data.length; at++) {
                var al = L.extend(true, {
                    index: at
                }, {
                    seriesColors: this.seriesColors,
                    negativeSeriesColors: this.negativeSeriesColors
                }, this.options.seriesDefaults, this.options.series[at], {
                    rendererOptions: {
                        animation: {
                            show: this.animate
                        }
                    }
                });
                var ax = new S(al);
                for (var ar = 0; ar < L.jqplot.preParseSeriesOptionsHooks.length; ar++) {
                    L.jqplot.preParseSeriesOptionsHooks[ar].call(ax, this.options.seriesDefaults, this.options.series[at]);
                }
                for (var ar = 0; ar < this.preParseSeriesOptionsHooks.hooks.length; ar++) {
                    this.preParseSeriesOptionsHooks.hooks[ar].call(ax, this.options.seriesDefaults, this.options.series[at]);
                }
                L.extend(true, ax, al);
                var ao = "vertical";
                if (ax.renderer === L.jqplot.BarRenderer && ax.rendererOptions && ax.rendererOptions.barDirection == "horizontal") {
                    ao = "horizontal";
                    ax._stackAxis = "x";
                    ax._primaryAxis = "_yaxis";
                }
                ax.data = aw(this.data[at], ao, this.defaultAxisStart);
                switch (ax.xaxis) {
                case "xaxis":
                    ax._xaxis = this.axes.xaxis;
                    break;
                case "x2axis":
                    ax._xaxis = this.axes.x2axis;
                    break;
                default:
                    break;
                }
                ax._yaxis = this.axes[ax.yaxis];
                ax._xaxis._series.push(ax);
                ax._yaxis._series.push(ax);
                if (ax.show) {
                    ax._xaxis.show = true;
                    ax._yaxis.show = true;
                } else {
                    if (ax._xaxis.scaleToHiddenSeries) {
                        ax._xaxis.show = true;
                    }
                    if (ax._yaxis.scaleToHiddenSeries) {
                        ax._yaxis.show = true;
                    }
                }
                if (!ax.label) {
                    ax.label = "Series " + (at + 1).toString();
                }
                this.series.push(ax);
                for (var ar = 0; ar < L.jqplot.postParseSeriesOptionsHooks.length; ar++) {
                    L.jqplot.postParseSeriesOptionsHooks[ar].call(this.series[at], this.options.seriesDefaults, this.options.series[at]);
                }
                for (var ar = 0; ar < this.postParseSeriesOptionsHooks.hooks.length; ar++) {
                    this.postParseSeriesOptionsHooks.hooks[ar].call(this.series[at], this.options.seriesDefaults, this.options.series[at]);
                }
            }
            L.extend(true, this.grid, this.options.grid);
            for (var at = 0, aq = U.length; at < aq; at++) {
                var an = U[at];
                var ap = this.axes[an];
                if (ap.borderWidth == null ) {
                    ap.borderWidth = this.grid.borderWidth;
                }
            }
            if (typeof this.options.title == "string") {
                this.title.text = this.options.title;
            } else {
                if (typeof this.options.title == "object") {
                    L.extend(true, this.title, this.options.title);
                }
            }
            this.title._plotWidth = this._width;
            this.legend.setOptions(this.options.legend);
            for (var at = 0; at < L.jqplot.postParseOptionsHooks.length; at++) {
                L.jqplot.postParseOptionsHooks[at].call(this, ay);
            }
            for (var at = 0; at < this.postParseOptionsHooks.hooks.length; at++) {
                this.postParseOptionsHooks.hooks[at].call(this, ay);
            }
        }
        ;
        this.destroy = function() {
            this.canvasManager.freeAllCanvases();
            if (this.eventCanvas && this.eventCanvas._elem) {
                this.eventCanvas._elem.unbind();
            }
            this.target.empty();
            this.target[0].innerHTML = "";
        }
        ;
        this.replot = function(am) {
            var an = am || {};
            var ap = an.data || null ;
            var al = (an.clear === false) ? false : true;
            var ao = an.resetAxes || false;
            delete an.data;
            delete an.clear;
            delete an.resetAxes;
            this.target.trigger("jqplotPreReplot");
            if (al) {
                this.destroy();
            }
            if (ap || !L.isEmptyObject(an)) {
                this.reInitialize(ap, an);
            } else {
                this.quickInit();
            }
            if (ao) {
                this.resetAxesScale(ao, an.axes);
            }
            this.draw();
            this.target.trigger("jqplotPostReplot");
        }
        ;
        this.redraw = function(al) {
            al = (al != null ) ? al : true;
            this.target.trigger("jqplotPreRedraw");
            if (al) {
                this.canvasManager.freeAllCanvases();
                this.eventCanvas._elem.unbind();
                this.target.empty();
            }
            for (var an in this.axes) {
                this.axes[an]._ticks = [];
            }
            this.computePlotData();
            this._sumy = 0;
            this._sumx = 0;
            for (var am = 0, ao = this.series.length; am < ao; am++) {
                this._sumy += this.series[am]._sumy;
                this._sumx += this.series[am]._sumx;
            }
            this.draw();
            this.target.trigger("jqplotPostRedraw");
        }
        ;
        this.draw = function() {
            if (this.drawIfHidden || this.target.is(":visible")) {
                this.target.trigger("jqplotPreDraw");
                var aH, aF, aE, ao;
                for (aH = 0,
                aE = L.jqplot.preDrawHooks.length; aH < aE; aH++) {
                    L.jqplot.preDrawHooks[aH].call(this);
                }
                for (aH = 0,
                aE = this.preDrawHooks.hooks.length; aH < aE; aH++) {
                    this.preDrawHooks.hooks[aH].apply(this, this.preDrawSeriesHooks.args[aH]);
                }
                this.target.append(this.baseCanvas.createElement({
                    left: 0,
                    right: 0,
                    top: 0,
                    bottom: 0
                }, "jqplot-base-canvas", null , this));
                this.baseCanvas.setContext();
                this.target.append(this.title.draw());
                this.title.pack({
                    top: 0,
                    left: 0
                });
                var aL = this.legend.draw({}, this);
                var al = {
                    top: 0,
                    left: 0,
                    bottom: 0,
                    right: 0
                };
                if (this.legend.placement == "outsideGrid") {
                    this.target.append(aL);
                    switch (this.legend.location) {
                    case "n":
                        al.top += this.legend.getHeight();
                        break;
                    case "s":
                        al.bottom += this.legend.getHeight();
                        break;
                    case "ne":
                    case "e":
                    case "se":
                        al.right += this.legend.getWidth();
                        break;
                    case "nw":
                    case "w":
                    case "sw":
                        al.left += this.legend.getWidth();
                        break;
                    default:
                        al.right += this.legend.getWidth();
                        break;
                    }
                    aL = aL.detach();
                }
                var ar = this.axes;
                var aM;
                for (aH = 0; aH < 12; aH++) {
                    aM = U[aH];
                    this.target.append(ar[aM].draw(this.baseCanvas._ctx, this));
                    ar[aM].set();
                }
                if (ar.yaxis.show) {
                    al.left += ar.yaxis.getWidth();
                }
                var aG = ["y2axis", "y3axis", "y4axis", "y5axis", "y6axis", "y7axis", "y8axis", "y9axis"];
                var az = [0, 0, 0, 0, 0, 0, 0, 0];
                var aC = 0;
                var aB;
                for (aB = 0; aB < 8; aB++) {
                    if (ar[aG[aB]].show) {
                        aC += ar[aG[aB]].getWidth();
                        az[aB] = aC;
                    }
                }
                al.right += aC;
                if (ar.x2axis.show) {
                    al.top += ar.x2axis.getHeight();
                }
                if (this.title.show) {
                    al.top += this.title.getHeight();
                }
                if (ar.xaxis.show) {
                    al.bottom += ar.xaxis.getHeight();
                }
                if (this.options.gridDimensions && L.isPlainObject(this.options.gridDimensions)) {
                    var at = parseInt(this.options.gridDimensions.width, 10) || 0;
                    var aI = parseInt(this.options.gridDimensions.height, 10) || 0;
                    var an = (this._width - al.left - al.right - at) / 2;
                    var aK = (this._height - al.top - al.bottom - aI) / 2;
                    if (aK >= 0 && an >= 0) {
                        al.top += aK;
                        al.bottom += aK;
                        al.left += an;
                        al.right += an;
                    }
                }
                var am = ["top", "bottom", "left", "right"];
                for (var aB in am) {
                    if (this._gridPadding[am[aB]] == null  && al[am[aB]] > 0) {
                        this._gridPadding[am[aB]] = al[am[aB]];
                    } else {
                        if (this._gridPadding[am[aB]] == null ) {
                            this._gridPadding[am[aB]] = this._defaultGridPadding[am[aB]];
                        }
                    }
                }
                var aA = this._gridPadding;
                if (this.legend.placement === "outsideGrid") {
                    aA = {
                        top: this.title.getHeight(),
                        left: 0,
                        right: 0,
                        bottom: 0
                    };
                    if (this.legend.location === "s") {
                        aA.left = this._gridPadding.left;
                        aA.right = this._gridPadding.right;
                    }
                }
                ar.xaxis.pack({
                    position: "absolute",
                    bottom: this._gridPadding.bottom - ar.xaxis.getHeight(),
                    left: 0,
                    width: this._width
                }, {
                    min: this._gridPadding.left,
                    max: this._width - this._gridPadding.right
                });
                ar.yaxis.pack({
                    position: "absolute",
                    top: 0,
                    left: this._gridPadding.left - ar.yaxis.getWidth(),
                    height: this._height
                }, {
                    min: this._height - this._gridPadding.bottom,
                    max: this._gridPadding.top
                });
                ar.x2axis.pack({
                    position: "absolute",
                    top: this._gridPadding.top - ar.x2axis.getHeight(),
                    left: 0,
                    width: this._width
                }, {
                    min: this._gridPadding.left,
                    max: this._width - this._gridPadding.right
                });
                for (aH = 8; aH > 0; aH--) {
                    ar[aG[aH - 1]].pack({
                        position: "absolute",
                        top: 0,
                        right: this._gridPadding.right - az[aH - 1]
                    }, {
                        min: this._height - this._gridPadding.bottom,
                        max: this._gridPadding.top
                    });
                }
                var au = (this._width - this._gridPadding.left - this._gridPadding.right) / 2 + this._gridPadding.left - ar.yMidAxis.getWidth() / 2;
                ar.yMidAxis.pack({
                    position: "absolute",
                    top: 0,
                    left: au,
                    zIndex: 9,
                    textAlign: "center"
                }, {
                    min: this._height - this._gridPadding.bottom,
                    max: this._gridPadding.top
                });
                this.target.append(this.grid.createElement(this._gridPadding, this));
                this.grid.draw();
                var aq = this.series;
                var aJ = aq.length;
                for (aH = 0,
                aE = aJ; aH < aE; aH++) {
                    aF = this.seriesStack[aH];
                    this.target.append(aq[aF].shadowCanvas.createElement(this._gridPadding, "jqplot-series-shadowCanvas", null , this));
                    aq[aF].shadowCanvas.setContext();
                    aq[aF].shadowCanvas._elem.data("seriesIndex", aF);
                }
                for (aH = 0,
                aE = aJ; aH < aE; aH++) {
                    aF = this.seriesStack[aH];
                    this.target.append(aq[aF].canvas.createElement(this._gridPadding, "jqplot-series-canvas", null , this));
                    aq[aF].canvas.setContext();
                    aq[aF].canvas._elem.data("seriesIndex", aF);
                }
                this.target.append(this.eventCanvas.createElement(this._gridPadding, "jqplot-event-canvas", null , this));
                this.eventCanvas.setContext();
                this.eventCanvas._ctx.fillStyle = "rgba(0,0,0,0)";
                this.eventCanvas._ctx.fillRect(0, 0, this.eventCanvas._ctx.canvas.width, this.eventCanvas._ctx.canvas.height);
                this.bindCustomEvents();
                if (this.legend.preDraw) {
                    this.eventCanvas._elem.before(aL);
                    this.legend.pack(aA);
                    if (this.legend._elem) {
                        this.drawSeries({
                            legendInfo: {
                                location: this.legend.location,
                                placement: this.legend.placement,
                                width: this.legend.getWidth(),
                                height: this.legend.getHeight(),
                                xoffset: this.legend.xoffset,
                                yoffset: this.legend.yoffset
                            }
                        });
                    } else {
                        this.drawSeries();
                    }
                } else {
                    this.drawSeries();
                    if (aJ) {
                        L(aq[aJ - 1].canvas._elem).after(aL);
                    }
                    this.legend.pack(aA);
                }
                for (var aH = 0, aE = L.jqplot.eventListenerHooks.length; aH < aE; aH++) {
                    this.eventCanvas._elem.bind(L.jqplot.eventListenerHooks[aH][0], {
                        plot: this
                    }, L.jqplot.eventListenerHooks[aH][1]);
                }
                for (var aH = 0, aE = this.eventListenerHooks.hooks.length; aH < aE; aH++) {
                    this.eventCanvas._elem.bind(this.eventListenerHooks.hooks[aH][0], {
                        plot: this
                    }, this.eventListenerHooks.hooks[aH][1]);
                }
                var ay = this.fillBetween;
                if (ay.fill && ay.series1 !== ay.series2 && ay.series1 < aJ && ay.series2 < aJ && aq[ay.series1]._type === "line" && aq[ay.series2]._type === "line") {
                    this.doFillBetweenLines();
                }
                for (var aH = 0, aE = L.jqplot.postDrawHooks.length; aH < aE; aH++) {
                    L.jqplot.postDrawHooks[aH].call(this);
                }
                for (var aH = 0, aE = this.postDrawHooks.hooks.length; aH < aE; aH++) {
                    this.postDrawHooks.hooks[aH].apply(this, this.postDrawHooks.args[aH]);
                }
                if (this.target.is(":visible")) {
                    this._drawCount += 1;
                }
                var av, aw, aD, ap;
                for (aH = 0,
                aE = aJ; aH < aE; aH++) {
                    av = aq[aH];
                    aw = av.renderer;
                    aD = ".jqplot-point-label.jqplot-series-" + aH;
                    if (aw.animation && aw.animation._supported && aw.animation.show && (this._drawCount < 2 || this.animateReplot)) {
                        ap = this.target.find(aD);
                        ap.stop(true, true).hide();
                        av.canvas._elem.stop(true, true).hide();
                        av.shadowCanvas._elem.stop(true, true).hide();
                        av.canvas._elem.jqplotEffect("blind", {
                            mode: "show",
                            direction: aw.animation.direction
                        }, aw.animation.speed);
                        av.shadowCanvas._elem.jqplotEffect("blind", {
                            mode: "show",
                            direction: aw.animation.direction
                        }, aw.animation.speed);
                        ap.fadeIn(aw.animation.speed * 0.8);
                    }
                }
                ap = null ;
                this.target.trigger("jqplotPostDraw", [this]);
            }
        }
        ;
        R.prototype.doFillBetweenLines = function() {
            var an = this.fillBetween;
            var ax = an.series1;
            var av = an.series2;
            var aw = (ax < av) ? ax : av;
            var au = (av > ax) ? av : ax;
            var ar = this.series[aw];
            var aq = this.series[au];
            if (aq.renderer.smooth) {
                var ap = aq.renderer._smoothedData.slice(0).reverse();
            } else {
                var ap = aq.gridData.slice(0).reverse();
            }
            if (ar.renderer.smooth) {
                var at = ar.renderer._smoothedData.concat(ap);
            } else {
                var at = ar.gridData.concat(ap);
            }
            var ao = (an.color !== null ) ? an.color : this.series[ax].fillColor;
            var ay = (an.baseSeries !== null ) ? an.baseSeries : aw;
            var am = this.series[ay].renderer.shapeRenderer;
            var al = {
                fillStyle: ao,
                fill: true,
                closePath: true
            };
            am.draw(ar.shadowCanvas._ctx, at, al);
        }
        ;
        this.bindCustomEvents = function() {
            this.eventCanvas._elem.bind("click", {
                plot: this
            }, this.onClick);
            this.eventCanvas._elem.bind("dblclick", {
                plot: this
            }, this.onDblClick);
            this.eventCanvas._elem.bind("mousedown", {
                plot: this
            }, this.onMouseDown);
            this.eventCanvas._elem.bind("mousemove", {
                plot: this
            }, this.onMouseMove);
            this.eventCanvas._elem.bind("mouseenter", {
                plot: this
            }, this.onMouseEnter);
            this.eventCanvas._elem.bind("mouseleave", {
                plot: this
            }, this.onMouseLeave);
            if (this.captureRightClick) {
                this.eventCanvas._elem.bind("mouseup", {
                    plot: this
                }, this.onRightClick);
                this.eventCanvas._elem.get(0).oncontextmenu = function() {
                    return false;
                }
                ;
            } else {
                this.eventCanvas._elem.bind("mouseup", {
                    plot: this
                }, this.onMouseUp);
            }
        }
        ;
        function ai(av) {
            var au = av.data.plot;
            var ap = au.eventCanvas._elem.offset();
            var at = {
                x: av.pageX - ap.left,
                y: av.pageY - ap.top
            };
            var aq = {
                xaxis: null ,
                yaxis: null ,
                x2axis: null ,
                y2axis: null ,
                y3axis: null ,
                y4axis: null ,
                y5axis: null ,
                y6axis: null ,
                y7axis: null ,
                y8axis: null ,
                y9axis: null ,
                yMidAxis: null 
            };
            var ar = ["xaxis", "yaxis", "x2axis", "y2axis", "y3axis", "y4axis", "y5axis", "y6axis", "y7axis", "y8axis", "y9axis", "yMidAxis"];
            var al = au.axes;
            var am, ao;
            for (am = 11; am > 0; am--) {
                ao = ar[am - 1];
                if (al[ao].show) {
                    aq[ao] = al[ao].series_p2u(at[ao.charAt(0)]);
                }
            }
            return {
                offsets: ap,
                gridPos: at,
                dataPos: aq
            };
        }
        function ak(al, am) {
            var aq = am.series;
            var aW, aU, aT, aO, aP, aJ, aI, aw, au, az, aA, aK;
            var aS, aX, aQ, ar, aH, aM, aV;
            var an, aN;
            for (aT = am.seriesStack.length - 1; aT >= 0; aT--) {
                aW = am.seriesStack[aT];
                aO = aq[aW];
                aV = aO._highlightThreshold;
                switch (aO.renderer.constructor) {
                case L.jqplot.BarRenderer:
                    aJ = al.x;
                    aI = al.y;
                    for (aU = 0; aU < aO._barPoints.length; aU++) {
                        aH = aO._barPoints[aU];
                        aQ = aO.gridData[aU];
                        if (aJ > aH[0][0] && aJ < aH[2][0] && aI > aH[2][1] && aI < aH[0][1]) {
                            return {
                                seriesIndex: aO.index,
                                pointIndex: aU,
                                gridData: aQ,
                                data: aO.data[aU],
                                points: aO._barPoints[aU]
                            };
                        }
                    }
                    break;
                case L.jqplot.PyramidRenderer:
                    aJ = al.x;
                    aI = al.y;
                    for (aU = 0; aU < aO._barPoints.length; aU++) {
                        aH = aO._barPoints[aU];
                        aQ = aO.gridData[aU];
                        if (aJ > aH[0][0] + aV[0][0] && aJ < aH[2][0] + aV[2][0] && aI > aH[2][1] && aI < aH[0][1]) {
                            return {
                                seriesIndex: aO.index,
                                pointIndex: aU,
                                gridData: aQ,
                                data: aO.data[aU],
                                points: aO._barPoints[aU]
                            };
                        }
                    }
                    break;
                case L.jqplot.DonutRenderer:
                    az = aO.startAngle / 180 * Math.PI;
                    aJ = al.x - aO._center[0];
                    aI = al.y - aO._center[1];
                    aP = Math.sqrt(Math.pow(aJ, 2) + Math.pow(aI, 2));
                    if (aJ > 0 && -aI >= 0) {
                        aw = 2 * Math.PI - Math.atan(-aI / aJ);
                    } else {
                        if (aJ > 0 && -aI < 0) {
                            aw = -Math.atan(-aI / aJ);
                        } else {
                            if (aJ < 0) {
                                aw = Math.PI - Math.atan(-aI / aJ);
                            } else {
                                if (aJ == 0 && -aI > 0) {
                                    aw = 3 * Math.PI / 2;
                                } else {
                                    if (aJ == 0 && -aI < 0) {
                                        aw = Math.PI / 2;
                                    } else {
                                        if (aJ == 0 && aI == 0) {
                                            aw = 0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (az) {
                        aw -= az;
                        if (aw < 0) {
                            aw += 2 * Math.PI;
                        } else {
                            if (aw > 2 * Math.PI) {
                                aw -= 2 * Math.PI;
                            }
                        }
                    }
                    au = aO.sliceMargin / 180 * Math.PI;
                    if (aP < aO._radius && aP > aO._innerRadius) {
                        for (aU = 0; aU < aO.gridData.length; aU++) {
                            aA = (aU > 0) ? aO.gridData[aU - 1][1] + au : au;
                            aK = aO.gridData[aU][1];
                            if (aw > aA && aw < aK) {
                                return {
                                    seriesIndex: aO.index,
                                    pointIndex: aU,
                                    gridData: aO.gridData[aU],
                                    data: aO.data[aU]
                                };
                            }
                        }
                    }
                    break;
                case L.jqplot.PieRenderer:
                    az = aO.startAngle / 180 * Math.PI;
                    aJ = al.x - aO._center[0];
                    aI = al.y - aO._center[1];
                    aP = Math.sqrt(Math.pow(aJ, 2) + Math.pow(aI, 2));
                    if (aJ > 0 && -aI >= 0) {
                        aw = 2 * Math.PI - Math.atan(-aI / aJ);
                    } else {
                        if (aJ > 0 && -aI < 0) {
                            aw = -Math.atan(-aI / aJ);
                        } else {
                            if (aJ < 0) {
                                aw = Math.PI - Math.atan(-aI / aJ);
                            } else {
                                if (aJ == 0 && -aI > 0) {
                                    aw = 3 * Math.PI / 2;
                                } else {
                                    if (aJ == 0 && -aI < 0) {
                                        aw = Math.PI / 2;
                                    } else {
                                        if (aJ == 0 && aI == 0) {
                                            aw = 0;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    if (az) {
                        aw -= az;
                        if (aw < 0) {
                            aw += 2 * Math.PI;
                        } else {
                            if (aw > 2 * Math.PI) {
                                aw -= 2 * Math.PI;
                            }
                        }
                    }
                    au = aO.sliceMargin / 180 * Math.PI;
                    if (aP < aO._radius) {
                        for (aU = 0; aU < aO.gridData.length; aU++) {
                            aA = (aU > 0) ? aO.gridData[aU - 1][1] + au : au;
                            aK = aO.gridData[aU][1];
                            if (aw > aA && aw < aK) {
                                return {
                                    seriesIndex: aO.index,
                                    pointIndex: aU,
                                    gridData: aO.gridData[aU],
                                    data: aO.data[aU]
                                };
                            }
                        }
                    }
                    break;
                case L.jqplot.BubbleRenderer:
                    aJ = al.x;
                    aI = al.y;
                    var aF = null ;
                    if (aO.show) {
                        for (var aU = 0; aU < aO.gridData.length; aU++) {
                            aQ = aO.gridData[aU];
                            aX = Math.sqrt((aJ - aQ[0]) * (aJ - aQ[0]) + (aI - aQ[1]) * (aI - aQ[1]));
                            if (aX <= aQ[2] && (aX <= aS || aS == null )) {
                                aS = aX;
                                aF = {
                                    seriesIndex: aW,
                                    pointIndex: aU,
                                    gridData: aQ,
                                    data: aO.data[aU]
                                };
                            }
                        }
                        if (aF != null ) {
                            return aF;
                        }
                    }
                    break;
                case L.jqplot.FunnelRenderer:
                    aJ = al.x;
                    aI = al.y;
                    var aL = aO._vertices, ap = aL[0], ao = aL[aL.length - 1], at, aE, ay;
                    function aR(a0, a2, a1) {
                        var aZ = (a2[1] - a1[1]) / (a2[0] - a1[0]);
                        var aY = a2[1] - aZ * a2[0];
                        var a3 = a0 + a2[1];
                        return [(a3 - aY) / aZ, a3];
                    }
                    at = aR(aI, ap[0], ao[3]);
                    aE = aR(aI, ap[1], ao[2]);
                    for (aU = 0; aU < aL.length; aU++) {
                        ay = aL[aU];
                        if (aI >= ay[0][1] && aI <= ay[3][1] && aJ >= at[0] && aJ <= aE[0]) {
                            return {
                                seriesIndex: aO.index,
                                pointIndex: aU,
                                gridData: null ,
                                data: aO.data[aU]
                            };
                        }
                    }
                    break;
                case L.jqplot.LineRenderer:
                    aJ = al.x;
                    aI = al.y;
                    aP = aO.renderer;
                    if (aO.show) {
                        if ((aO.fill || (aO.renderer.bands.show && aO.renderer.bands.fill)) && (!am.plugins.highlighter || !am.plugins.highlighter.show)) {
                            var ax = false;
                            if (aJ > aO._boundingBox[0][0] && aJ < aO._boundingBox[1][0] && aI > aO._boundingBox[1][1] && aI < aO._boundingBox[0][1]) {
                                var aD = aO._areaPoints.length;
                                var aG;
                                var aU = aD - 1;
                                for (var aG = 0; aG < aD; aG++) {
                                    var aC = [aO._areaPoints[aG][0], aO._areaPoints[aG][1]];
                                    var aB = [aO._areaPoints[aU][0], aO._areaPoints[aU][1]];
                                    if (aC[1] < aI && aB[1] >= aI || aB[1] < aI && aC[1] >= aI) {
                                        if (aC[0] + (aI - aC[1]) / (aB[1] - aC[1]) * (aB[0] - aC[0]) < aJ) {
                                            ax = !ax;
                                        }
                                    }
                                    aU = aG;
                                }
                            }
                            if (ax) {
                                return {
                                    seriesIndex: aW,
                                    pointIndex: null ,
                                    gridData: aO.gridData,
                                    data: aO.data,
                                    points: aO._areaPoints
                                };
                            }
                            break;
                        } else {
                            aN = aO.markerRenderer.size / 2 + aO.neighborThreshold;
                            an = (aN > 0) ? aN : 0;
                            for (var aU = 0; aU < aO.gridData.length; aU++) {
                                aQ = aO.gridData[aU];
                                if (aP.constructor == L.jqplot.OHLCRenderer) {
                                    if (aP.candleStick) {
                                        var av = aO._yaxis.series_u2p;
                                        if (aJ >= aQ[0] - aP._bodyWidth / 2 && aJ <= aQ[0] + aP._bodyWidth / 2 && aI >= av(aO.data[aU][2]) && aI <= av(aO.data[aU][3])) {
                                            return {
                                                seriesIndex: aW,
                                                pointIndex: aU,
                                                gridData: aQ,
                                                data: aO.data[aU]
                                            };
                                        }
                                    } else {
                                        if (!aP.hlc) {
                                            var av = aO._yaxis.series_u2p;
                                            if (aJ >= aQ[0] - aP._tickLength && aJ <= aQ[0] + aP._tickLength && aI >= av(aO.data[aU][2]) && aI <= av(aO.data[aU][3])) {
                                                return {
                                                    seriesIndex: aW,
                                                    pointIndex: aU,
                                                    gridData: aQ,
                                                    data: aO.data[aU]
                                                };
                                            }
                                        } else {
                                            var av = aO._yaxis.series_u2p;
                                            if (aJ >= aQ[0] - aP._tickLength && aJ <= aQ[0] + aP._tickLength && aI >= av(aO.data[aU][1]) && aI <= av(aO.data[aU][2])) {
                                                return {
                                                    seriesIndex: aW,
                                                    pointIndex: aU,
                                                    gridData: aQ,
                                                    data: aO.data[aU]
                                                };
                                            }
                                        }
                                    }
                                } else {
                                    if (aQ[0] != null  && aQ[1] != null ) {
                                        aX = Math.sqrt((aJ - aQ[0]) * (aJ - aQ[0]) + (aI - aQ[1]) * (aI - aQ[1]));
                                        if (aX <= an && (aX <= aS || aS == null )) {
                                            aS = aX;
                                            return {
                                                seriesIndex: aW,
                                                pointIndex: aU,
                                                gridData: aQ,
                                                data: aO.data[aU]
                                            };
                                        }
                                    }
                                }
                            }
                        }
                    }
                    break;
                default:
                    aJ = al.x;
                    aI = al.y;
                    aP = aO.renderer;
                    if (aO.show) {
                        aN = aO.markerRenderer.size / 2 + aO.neighborThreshold;
                        an = (aN > 0) ? aN : 0;
                        for (var aU = 0; aU < aO.gridData.length; aU++) {
                            aQ = aO.gridData[aU];
                            if (aP.constructor == L.jqplot.OHLCRenderer) {
                                if (aP.candleStick) {
                                    var av = aO._yaxis.series_u2p;
                                    if (aJ >= aQ[0] - aP._bodyWidth / 2 && aJ <= aQ[0] + aP._bodyWidth / 2 && aI >= av(aO.data[aU][2]) && aI <= av(aO.data[aU][3])) {
                                        return {
                                            seriesIndex: aW,
                                            pointIndex: aU,
                                            gridData: aQ,
                                            data: aO.data[aU]
                                        };
                                    }
                                } else {
                                    if (!aP.hlc) {
                                        var av = aO._yaxis.series_u2p;
                                        if (aJ >= aQ[0] - aP._tickLength && aJ <= aQ[0] + aP._tickLength && aI >= av(aO.data[aU][2]) && aI <= av(aO.data[aU][3])) {
                                            return {
                                                seriesIndex: aW,
                                                pointIndex: aU,
                                                gridData: aQ,
                                                data: aO.data[aU]
                                            };
                                        }
                                    } else {
                                        var av = aO._yaxis.series_u2p;
                                        if (aJ >= aQ[0] - aP._tickLength && aJ <= aQ[0] + aP._tickLength && aI >= av(aO.data[aU][1]) && aI <= av(aO.data[aU][2])) {
                                            return {
                                                seriesIndex: aW,
                                                pointIndex: aU,
                                                gridData: aQ,
                                                data: aO.data[aU]
                                            };
                                        }
                                    }
                                }
                            } else {
                                aX = Math.sqrt((aJ - aQ[0]) * (aJ - aQ[0]) + (aI - aQ[1]) * (aI - aQ[1]));
                                if (aX <= an && (aX <= aS || aS == null )) {
                                    aS = aX;
                                    return {
                                        seriesIndex: aW,
                                        pointIndex: aU,
                                        gridData: aQ,
                                        data: aO.data[aU]
                                    };
                                }
                            }
                        }
                    }
                    break;
                }
            }
            return null ;
        }
        this.onClick = function(an) {
            var am = ai(an);
            var ap = an.data.plot;
            var ao = ak(am.gridPos, ap);
            var al = L.Event("jqplotClick");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
        }
        ;
        this.onDblClick = function(an) {
            var am = ai(an);
            var ap = an.data.plot;
            var ao = ak(am.gridPos, ap);
            var al = L.Event("jqplotDblClick");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
        }
        ;
        this.onMouseDown = function(an) {
            var am = ai(an);
            var ap = an.data.plot;
            var ao = ak(am.gridPos, ap);
            var al = L.Event("jqplotMouseDown");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
        }
        ;
        this.onMouseUp = function(an) {
            var am = ai(an);
            var al = L.Event("jqplotMouseUp");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            L(this).trigger(al, [am.gridPos, am.dataPos, null , an.data.plot]);
        }
        ;
        this.onRightClick = function(an) {
            var am = ai(an);
            var ap = an.data.plot;
            var ao = ak(am.gridPos, ap);
            if (ap.captureRightClick) {
                if (an.which == 3) {
                    var al = L.Event("jqplotRightClick");
                    al.pageX = an.pageX;
                    al.pageY = an.pageY;
                    L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
                } else {
                    var al = L.Event("jqplotMouseUp");
                    al.pageX = an.pageX;
                    al.pageY = an.pageY;
                    L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
                }
            }
        }
        ;
        this.onMouseMove = function(an) {
            var am = ai(an);
            var ap = an.data.plot;
            var ao = ak(am.gridPos, ap);
            var al = L.Event("jqplotMouseMove");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            L(this).trigger(al, [am.gridPos, am.dataPos, ao, ap]);
        }
        ;
        this.onMouseEnter = function(an) {
            var am = ai(an);
            var ao = an.data.plot;
            var al = L.Event("jqplotMouseEnter");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            al.relatedTarget = an.relatedTarget;
            L(this).trigger(al, [am.gridPos, am.dataPos, null , ao]);
        }
        ;
        this.onMouseLeave = function(an) {
            var am = ai(an);
            var ao = an.data.plot;
            var al = L.Event("jqplotMouseLeave");
            al.pageX = an.pageX;
            al.pageY = an.pageY;
            al.relatedTarget = an.relatedTarget;
            L(this).trigger(al, [am.gridPos, am.dataPos, null , ao]);
        }
        ;
        this.drawSeries = function(an, al) {
            var ap, ao, am;
            al = (typeof (an) === "number" && al == null ) ? an : al;
            an = (typeof (an) === "object") ? an : {};
            if (al != u) {
                ao = this.series[al];
                am = ao.shadowCanvas._ctx;
                am.clearRect(0, 0, am.canvas.width, am.canvas.height);
                ao.drawShadow(am, an, this);
                am = ao.canvas._ctx;
                am.clearRect(0, 0, am.canvas.width, am.canvas.height);
                ao.draw(am, an, this);
                if (ao.renderer.constructor == L.jqplot.BezierCurveRenderer) {
                    if (al < this.series.length - 1) {
                        this.drawSeries(al + 1);
                    }
                }
            } else {
                for (ap = 0; ap < this.series.length; ap++) {
                    ao = this.series[ap];
                    am = ao.shadowCanvas._ctx;
                    am.clearRect(0, 0, am.canvas.width, am.canvas.height);
                    ao.drawShadow(am, an, this);
                    am = ao.canvas._ctx;
                    am.clearRect(0, 0, am.canvas.width, am.canvas.height);
                    ao.draw(am, an, this);
                }
            }
            an = al = ap = ao = am = null ;
        }
        ;
        this.moveSeriesToFront = function(am) {
            am = parseInt(am, 10);
            var ap = L.inArray(am, this.seriesStack);
            if (ap == -1) {
                return;
            }
            if (ap == this.seriesStack.length - 1) {
                this.previousSeriesStack = this.seriesStack.slice(0);
                return;
            }
            var al = this.seriesStack[this.seriesStack.length - 1];
            var ao = this.series[am].canvas._elem.detach();
            var an = this.series[am].shadowCanvas._elem.detach();
            this.series[al].shadowCanvas._elem.after(an);
            this.series[al].canvas._elem.after(ao);
            this.previousSeriesStack = this.seriesStack.slice(0);
            this.seriesStack.splice(ap, 1);
            this.seriesStack.push(am);
        }
        ;
        this.moveSeriesToBack = function(am) {
            am = parseInt(am, 10);
            var ap = L.inArray(am, this.seriesStack);
            if (ap == 0 || ap == -1) {
                return;
            }
            var al = this.seriesStack[0];
            var ao = this.series[am].canvas._elem.detach();
            var an = this.series[am].shadowCanvas._elem.detach();
            this.series[al].shadowCanvas._elem.before(an);
            this.series[al].canvas._elem.before(ao);
            this.previousSeriesStack = this.seriesStack.slice(0);
            this.seriesStack.splice(ap, 1);
            this.seriesStack.unshift(am);
        }
        ;
        this.restorePreviousSeriesOrder = function() {
            var ar, aq, ap, ao, an, al, am;
            if (this.seriesStack == this.previousSeriesStack) {
                return;
            }
            for (ar = 1; ar < this.previousSeriesStack.length; ar++) {
                al = this.previousSeriesStack[ar];
                am = this.previousSeriesStack[ar - 1];
                ap = this.series[al].canvas._elem.detach();
                ao = this.series[al].shadowCanvas._elem.detach();
                this.series[am].shadowCanvas._elem.after(ao);
                this.series[am].canvas._elem.after(ap);
            }
            an = this.seriesStack.slice(0);
            this.seriesStack = this.previousSeriesStack.slice(0);
            this.previousSeriesStack = an;
        }
        ;
        this.restoreOriginalSeriesOrder = function() {
            var ap, ao, al = [], an, am;
            for (ap = 0; ap < this.series.length; ap++) {
                al.push(ap);
            }
            if (this.seriesStack == al) {
                return;
            }
            this.previousSeriesStack = this.seriesStack.slice(0);
            this.seriesStack = al;
            for (ap = 1; ap < this.seriesStack.length; ap++) {
                an = this.series[ap].canvas._elem.detach();
                am = this.series[ap].shadowCanvas._elem.detach();
                this.series[ap - 1].shadowCanvas._elem.after(am);
                this.series[ap - 1].canvas._elem.after(an);
            }
        }
        ;
        this.activateTheme = function(al) {
            this.themeEngine.activate(this, al);
        }
        ;
    }
    L.jqplot.computeHighlightColors = function(ai) {
        var ak;
        if (L.isArray(ai)) {
            ak = [];
            for (var am = 0; am < ai.length; am++) {
                var al = L.jqplot.getColorComponents(ai[am]);
                var ah = [al[0], al[1], al[2]];
                var an = ah[0] + ah[1] + ah[2];
                for (var aj = 0; aj < 3; aj++) {
                    ah[aj] = (an > 660) ? ah[aj] * 0.85 : 0.73 * ah[aj] + 90;
                    ah[aj] = parseInt(ah[aj], 10);
                    (ah[aj] > 255) ? 255 : ah[aj];
                }
                ah[3] = 0.3 + 0.35 * al[3];
                ak.push("rgba(" + ah[0] + "," + ah[1] + "," + ah[2] + "," + ah[3] + ")");
            }
        } else {
            var al = L.jqplot.getColorComponents(ai);
            var ah = [al[0], al[1], al[2]];
            var an = ah[0] + ah[1] + ah[2];
            for (var aj = 0; aj < 3; aj++) {
                ah[aj] = (an > 660) ? ah[aj] * 0.85 : 0.73 * ah[aj] + 90;
                ah[aj] = parseInt(ah[aj], 10);
                (ah[aj] > 255) ? 255 : ah[aj];
            }
            ah[3] = 0.3 + 0.35 * al[3];
            ak = "rgba(" + ah[0] + "," + ah[1] + "," + ah[2] + "," + ah[3] + ")";
        }
        return ak;
    }
    ;
    L.jqplot.ColorGenerator = function(ai) {
        ai = ai || L.jqplot.config.defaultColors;
        var ah = 0;
        this.next = function() {
            if (ah < ai.length) {
                return ai[ah++];
            } else {
                ah = 0;
                return ai[ah++];
            }
        }
        ;
        this.previous = function() {
            if (ah > 0) {
                return ai[ah--];
            } else {
                ah = ai.length - 1;
                return ai[ah];
            }
        }
        ;
        this.get = function(ak) {
            var aj = ak - ai.length * Math.floor(ak / ai.length);
            return ai[aj];
        }
        ;
        this.setColors = function(aj) {
            ai = aj;
        }
        ;
        this.reset = function() {
            ah = 0;
        }
        ;
        this.getIndex = function() {
            return ah;
        }
        ;
        this.setIndex = function(aj) {
            ah = aj;
        }
        ;
    }
    ;
    L.jqplot.hex2rgb = function(aj, ah) {
        aj = aj.replace("#", "");
        if (aj.length == 3) {
            aj = aj.charAt(0) + aj.charAt(0) + aj.charAt(1) + aj.charAt(1) + aj.charAt(2) + aj.charAt(2);
        }
        var ai;
        ai = "rgba(" + parseInt(aj.slice(0, 2), 16) + ", " + parseInt(aj.slice(2, 4), 16) + ", " + parseInt(aj.slice(4, 6), 16);
        if (ah) {
            ai += ", " + ah;
        }
        ai += ")";
        return ai;
    }
    ;
    L.jqplot.rgb2hex = function(am) {
        var aj = /rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *(?:, *[0-9.]*)?\)/;
        var ah = am.match(aj);
        var al = "#";
        for (var ak = 1; ak < 4; ak++) {
            var ai;
            if (ah[ak].search(/%/) != -1) {
                ai = parseInt(255 * ah[ak] / 100, 10).toString(16);
                if (ai.length == 1) {
                    ai = "0" + ai;
                }
            } else {
                ai = parseInt(ah[ak], 10).toString(16);
                if (ai.length == 1) {
                    ai = "0" + ai;
                }
            }
            al += ai;
        }
        return al;
    }
    ;
    L.jqplot.normalize2rgb = function(ai, ah) {
        if (ai.search(/^ *rgba?\(/) != -1) {
            return ai;
        } else {
            if (ai.search(/^ *#?[0-9a-fA-F]?[0-9a-fA-F]/) != -1) {
                return L.jqplot.hex2rgb(ai, ah);
            } else {
                throw "invalid color spec";
            }
        }
    }
    ;
    L.jqplot.getColorComponents = function(am) {
        am = L.jqplot.colorKeywordMap[am] || am;
        var ak = L.jqplot.normalize2rgb(am);
        var aj = /rgba?\( *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *, *([0-9]{1,3}\.?[0-9]*%?) *,? *([0-9.]* *)?\)/;
        var ah = ak.match(aj);
        var ai = [];
        for (var al = 1; al < 4; al++) {
            if (ah[al].search(/%/) != -1) {
                ai[al - 1] = parseInt(255 * ah[al] / 100, 10);
            } else {
                ai[al - 1] = parseInt(ah[al], 10);
            }
        }
        ai[3] = parseFloat(ah[4]) ? parseFloat(ah[4]) : 1;
        return ai;
    }
    ;
    L.jqplot.colorKeywordMap = {
        aliceblue: "rgb(240, 248, 255)",
        antiquewhite: "rgb(250, 235, 215)",
        aqua: "rgb( 0, 255, 255)",
        aquamarine: "rgb(127, 255, 212)",
        azure: "rgb(240, 255, 255)",
        beige: "rgb(245, 245, 220)",
        bisque: "rgb(255, 228, 196)",
        black: "rgb( 0, 0, 0)",
        blanchedalmond: "rgb(255, 235, 205)",
        blue: "rgb( 0, 0, 255)",
        blueviolet: "rgb(138, 43, 226)",
        brown: "rgb(165, 42, 42)",
        burlywood: "rgb(222, 184, 135)",
        cadetblue: "rgb( 95, 158, 160)",
        chartreuse: "rgb(127, 255, 0)",
        chocolate: "rgb(210, 105, 30)",
        coral: "rgb(255, 127, 80)",
        cornflowerblue: "rgb(100, 149, 237)",
        cornsilk: "rgb(255, 248, 220)",
        crimson: "rgb(220, 20, 60)",
        cyan: "rgb( 0, 255, 255)",
        darkblue: "rgb( 0, 0, 139)",
        darkcyan: "rgb( 0, 139, 139)",
        darkgoldenrod: "rgb(184, 134, 11)",
        darkgray: "rgb(169, 169, 169)",
        darkgreen: "rgb( 0, 100, 0)",
        darkgrey: "rgb(169, 169, 169)",
        darkkhaki: "rgb(189, 183, 107)",
        darkmagenta: "rgb(139, 0, 139)",
        darkolivegreen: "rgb( 85, 107, 47)",
        darkorange: "rgb(255, 140, 0)",
        darkorchid: "rgb(153, 50, 204)",
        darkred: "rgb(139, 0, 0)",
        darksalmon: "rgb(233, 150, 122)",
        darkseagreen: "rgb(143, 188, 143)",
        darkslateblue: "rgb( 72, 61, 139)",
        darkslategray: "rgb( 47, 79, 79)",
        darkslategrey: "rgb( 47, 79, 79)",
        darkturquoise: "rgb( 0, 206, 209)",
        darkviolet: "rgb(148, 0, 211)",
        deeppink: "rgb(255, 20, 147)",
        deepskyblue: "rgb( 0, 191, 255)",
        dimgray: "rgb(105, 105, 105)",
        dimgrey: "rgb(105, 105, 105)",
        dodgerblue: "rgb( 30, 144, 255)",
        firebrick: "rgb(178, 34, 34)",
        floralwhite: "rgb(255, 250, 240)",
        forestgreen: "rgb( 34, 139, 34)",
        fuchsia: "rgb(255, 0, 255)",
        gainsboro: "rgb(220, 220, 220)",
        ghostwhite: "rgb(248, 248, 255)",
        gold: "rgb(255, 215, 0)",
        goldenrod: "rgb(218, 165, 32)",
        gray: "rgb(128, 128, 128)",
        grey: "rgb(128, 128, 128)",
        green: "rgb( 0, 128, 0)",
        greenyellow: "rgb(173, 255, 47)",
        honeydew: "rgb(240, 255, 240)",
        hotpink: "rgb(255, 105, 180)",
        indianred: "rgb(205, 92, 92)",
        indigo: "rgb( 75, 0, 130)",
        ivory: "rgb(255, 255, 240)",
        khaki: "rgb(240, 230, 140)",
        lavender: "rgb(230, 230, 250)",
        lavenderblush: "rgb(255, 240, 245)",
        lawngreen: "rgb(124, 252, 0)",
        lemonchiffon: "rgb(255, 250, 205)",
        lightblue: "rgb(173, 216, 230)",
        lightcoral: "rgb(240, 128, 128)",
        lightcyan: "rgb(224, 255, 255)",
        lightgoldenrodyellow: "rgb(250, 250, 210)",
        lightgray: "rgb(211, 211, 211)",
        lightgreen: "rgb(144, 238, 144)",
        lightgrey: "rgb(211, 211, 211)",
        lightpink: "rgb(255, 182, 193)",
        lightsalmon: "rgb(255, 160, 122)",
        lightseagreen: "rgb( 32, 178, 170)",
        lightskyblue: "rgb(135, 206, 250)",
        lightslategray: "rgb(119, 136, 153)",
        lightslategrey: "rgb(119, 136, 153)",
        lightsteelblue: "rgb(176, 196, 222)",
        lightyellow: "rgb(255, 255, 224)",
        lime: "rgb( 0, 255, 0)",
        limegreen: "rgb( 50, 205, 50)",
        linen: "rgb(250, 240, 230)",
        magenta: "rgb(255, 0, 255)",
        maroon: "rgb(128, 0, 0)",
        mediumaquamarine: "rgb(102, 205, 170)",
        mediumblue: "rgb( 0, 0, 205)",
        mediumorchid: "rgb(186, 85, 211)",
        mediumpurple: "rgb(147, 112, 219)",
        mediumseagreen: "rgb( 60, 179, 113)",
        mediumslateblue: "rgb(123, 104, 238)",
        mediumspringgreen: "rgb( 0, 250, 154)",
        mediumturquoise: "rgb( 72, 209, 204)",
        mediumvioletred: "rgb(199, 21, 133)",
        midnightblue: "rgb( 25, 25, 112)",
        mintcream: "rgb(245, 255, 250)",
        mistyrose: "rgb(255, 228, 225)",
        moccasin: "rgb(255, 228, 181)",
        navajowhite: "rgb(255, 222, 173)",
        navy: "rgb( 0, 0, 128)",
        oldlace: "rgb(253, 245, 230)",
        olive: "rgb(128, 128, 0)",
        olivedrab: "rgb(107, 142, 35)",
        orange: "rgb(255, 165, 0)",
        orangered: "rgb(255, 69, 0)",
        orchid: "rgb(218, 112, 214)",
        palegoldenrod: "rgb(238, 232, 170)",
        palegreen: "rgb(152, 251, 152)",
        paleturquoise: "rgb(175, 238, 238)",
        palevioletred: "rgb(219, 112, 147)",
        papayawhip: "rgb(255, 239, 213)",
        peachpuff: "rgb(255, 218, 185)",
        peru: "rgb(205, 133, 63)",
        pink: "rgb(255, 192, 203)",
        plum: "rgb(221, 160, 221)",
        powderblue: "rgb(176, 224, 230)",
        purple: "rgb(128, 0, 128)",
        red: "rgb(255, 0, 0)",
        rosybrown: "rgb(188, 143, 143)",
        royalblue: "rgb( 65, 105, 225)",
        saddlebrown: "rgb(139, 69, 19)",
        salmon: "rgb(250, 128, 114)",
        sandybrown: "rgb(244, 164, 96)",
        seagreen: "rgb( 46, 139, 87)",
        seashell: "rgb(255, 245, 238)",
        sienna: "rgb(160, 82, 45)",
        silver: "rgb(192, 192, 192)",
        skyblue: "rgb(135, 206, 235)",
        slateblue: "rgb(106, 90, 205)",
        slategray: "rgb(112, 128, 144)",
        slategrey: "rgb(112, 128, 144)",
        snow: "rgb(255, 250, 250)",
        springgreen: "rgb( 0, 255, 127)",
        steelblue: "rgb( 70, 130, 180)",
        tan: "rgb(210, 180, 140)",
        teal: "rgb( 0, 128, 128)",
        thistle: "rgb(216, 191, 216)",
        tomato: "rgb(255, 99, 71)",
        turquoise: "rgb( 64, 224, 208)",
        violet: "rgb(238, 130, 238)",
        wheat: "rgb(245, 222, 179)",
        white: "rgb(255, 255, 255)",
        whitesmoke: "rgb(245, 245, 245)",
        yellow: "rgb(255, 255, 0)",
        yellowgreen: "rgb(154, 205, 50)"
    };
    L.jqplot.AxisLabelRenderer = function(ah) {
        L.jqplot.ElemContainer.call(this);
        this.axis;
        this.show = true;
        this.label = "";
        this.fontFamily = null ;
        this.fontSize = null ;
        this.textColor = null ;
        this._elem;
        this.escapeHTML = false;
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.AxisLabelRenderer.prototype = new L.jqplot.ElemContainer();
    L.jqplot.AxisLabelRenderer.prototype.constructor = L.jqplot.AxisLabelRenderer;
    L.jqplot.AxisLabelRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.AxisLabelRenderer.prototype.draw = function(ah, ai) {
        if (this._elem) {
            this._elem.emptyForce();
            this._elem = null ;
        }
        this._elem = L('<div style="position:absolute;" class="jqplot-' + this.axis + '-label"></div>');
        if (Number(this.label)) {
            this._elem.css("white-space", "nowrap");
        }
        if (!this.escapeHTML) {
            this._elem.html(this.label);
        } else {
            this._elem.text(this.label);
        }
        if (this.fontFamily) {
            this._elem.css("font-family", this.fontFamily);
        }
        if (this.fontSize) {
            this._elem.css("font-size", this.fontSize);
        }
        if (this.textColor) {
            this._elem.css("color", this.textColor);
        }
        return this._elem;
    }
    ;
    L.jqplot.AxisLabelRenderer.prototype.pack = function() {}
    ;
    L.jqplot.AxisTickRenderer = function(ah) {
        L.jqplot.ElemContainer.call(this);
        this.mark = "outside";
        this.axis;
        this.showMark = true;
        this.showGridline = true;
        this.isMinorTick = false;
        this.size = 4;
        this.markSize = 6;
        this.show = true;
        this.showLabel = true;
        this.label = null ;
        this.value = null ;
        this._styles = {};
        this.formatter = L.jqplot.DefaultTickFormatter;
        this.prefix = "";
        this.suffix = "";
        this.formatString = "";
        this.fontFamily;
        this.fontSize;
        this.textColor;
        this.escapeHTML = false;
        this._elem;
        this._breakTick = false;
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.AxisTickRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.AxisTickRenderer.prototype = new L.jqplot.ElemContainer();
    L.jqplot.AxisTickRenderer.prototype.constructor = L.jqplot.AxisTickRenderer;
    L.jqplot.AxisTickRenderer.prototype.setTick = function(ah, aj, ai) {
        this.value = ah;
        this.axis = aj;
        if (ai) {
            this.isMinorTick = true;
        }
        return this;
    }
    ;
    L.jqplot.AxisTickRenderer.prototype.draw = function() {
        if (this.label === null ) {
            this.label = this.prefix + this.formatter(this.formatString, this.value) + this.suffix;
        }
        var ai = {
            position: "absolute"
        };
        if (Number(this.label)) {
            ai.whitSpace = "nowrap";
        }
        if (this._elem) {
            this._elem.emptyForce();
            this._elem = null ;
        }
        this._elem = L(document.createElement("div"));
        this._elem.addClass("jqplot-" + this.axis + "-tick");
        if (!this.escapeHTML) {
            this._elem.html(this.label);
        } else {
            this._elem.text(this.label);
        }
        this._elem.css(ai);
        for (var ah in this._styles) {
            this._elem.css(ah, this._styles[ah]);
        }
        if (this.fontFamily) {
            this._elem.css("font-family", this.fontFamily);
        }
        if (this.fontSize) {
            this._elem.css("font-size", this.fontSize);
        }
        if (this.textColor) {
            this._elem.css("color", this.textColor);
        }
        if (this._breakTick) {
            this._elem.addClass("jqplot-breakTick");
        }
        return this._elem;
    }
    ;
    L.jqplot.DefaultTickFormatter = function(ah, ai) {
        if (typeof ai == "number") {
            if (!ah) {
                ah = L.jqplot.config.defaultTickFormatString;
            }
            return L.jqplot.sprintf(ah, ai);
        } else {
            return String(ai);
        }
    }
    ;
    L.jqplot.PercentTickFormatter = function(ah, ai) {
        if (typeof ai == "number") {
            ai = 100 * ai;
            if (!ah) {
                ah = L.jqplot.config.defaultTickFormatString;
            }
            return L.jqplot.sprintf(ah, ai);
        } else {
            return String(ai);
        }
    }
    ;
    L.jqplot.AxisTickRenderer.prototype.pack = function() {}
    ;
    L.jqplot.CanvasGridRenderer = function() {
        this.shadowRenderer = new L.jqplot.ShadowRenderer();
    }
    ;
    L.jqplot.CanvasGridRenderer.prototype.init = function(ai) {
        this._ctx;
        L.extend(true, this, ai);
        var ah = {
            lineJoin: "miter",
            lineCap: "round",
            fill: false,
            isarc: false,
            angle: this.shadowAngle,
            offset: this.shadowOffset,
            alpha: this.shadowAlpha,
            depth: this.shadowDepth,
            lineWidth: this.shadowWidth,
            closePath: false,
            strokeStyle: this.shadowColor
        };
        this.renderer.shadowRenderer.init(ah);
    }
    ;
    L.jqplot.CanvasGridRenderer.prototype.createElement = function(ak) {
        var aj;
        if (this._elem) {
            if (L.jqplot.use_excanvas && window.G_vmlCanvasManager.uninitElement !== u) {
                aj = this._elem.get(0);
                window.G_vmlCanvasManager.uninitElement(aj);
                aj = null ;
            }
            this._elem.emptyForce();
            this._elem = null ;
        }
        aj = ak.canvasManager.getCanvas();
        var ah = this._plotDimensions.width;
        var ai = this._plotDimensions.height;
        aj.width = ah;
        aj.height = ai;
        this._elem = L(aj);
        this._elem.addClass("jqplot-grid-canvas");
        this._elem.css({
            position: "absolute",
            left: 0,
            top: 0
        });
        aj = ak.canvasManager.initCanvas(aj);
        this._top = this._offsets.top;
        this._bottom = ai - this._offsets.bottom;
        this._left = this._offsets.left;
        this._right = ah - this._offsets.right;
        this._width = this._right - this._left;
        this._height = this._bottom - this._top;
        aj = null ;
        return this._elem;
    }
    ;
    L.jqplot.CanvasGridRenderer.prototype.draw = function() {
        this._ctx = this._elem.get(0).getContext("2d");
        var at = this._ctx;
        var aw = this._axes;
        at.save();
        at.clearRect(0, 0, this._plotDimensions.width, this._plotDimensions.height);
        at.fillStyle = this.backgroundColor || this.background;
        at.fillRect(this._left, this._top, this._width, this._height);
        at.save();
        at.lineJoin = "miter";
        at.lineCap = "butt";
        at.lineWidth = this.gridLineWidth;
        at.strokeStyle = this.gridLineColor;
        var aA, az, ap, aq;
        var am = ["xaxis", "yaxis", "x2axis", "y2axis"];
        for (var ay = 4; ay > 0; ay--) {
            var aD = am[ay - 1];
            var ah = aw[aD];
            var aB = ah._ticks;
            var ar = aB.length;
            if (ah.show) {
                if (ah.drawBaseline) {
                    var aC = {};
                    if (ah.baselineWidth !== null ) {
                        aC.lineWidth = ah.baselineWidth;
                    }
                    if (ah.baselineColor !== null ) {
                        aC.strokeStyle = ah.baselineColor;
                    }
                    switch (aD) {
                    case "xaxis":
                        ao(this._left, this._bottom, this._right, this._bottom, aC);
                        break;
                    case "yaxis":
                        ao(this._left, this._bottom, this._left, this._top, aC);
                        break;
                    case "x2axis":
                        ao(this._left, this._bottom, this._right, this._bottom, aC);
                        break;
                    case "y2axis":
                        ao(this._right, this._bottom, this._right, this._top, aC);
                        break;
                    }
                }
                for (var au = ar; au > 0; au--) {
                    var an = aB[au - 1];
                    if (an.show) {
                        var ak = Math.round(ah.u2p(an.value)) + 0.5;
                        switch (aD) {
                        case "xaxis":
                            if (an.showGridline && this.drawGridlines && ((!an.isMinorTick && ah.drawMajorGridlines) || (an.isMinorTick && ah.drawMinorGridlines))) {
                                ao(ak, this._top, ak, this._bottom);
                            }
                            if (an.showMark && an.mark && ((!an.isMinorTick && ah.drawMajorTickMarks) || (an.isMinorTick && ah.drawMinorTickMarks))) {
                                ap = an.markSize;
                                aq = an.mark;
                                var ak = Math.round(ah.u2p(an.value)) + 0.5;
                                switch (aq) {
                                case "outside":
                                    aA = this._bottom;
                                    az = this._bottom + ap;
                                    break;
                                case "inside":
                                    aA = this._bottom - ap;
                                    az = this._bottom;
                                    break;
                                case "cross":
                                    aA = this._bottom - ap;
                                    az = this._bottom + ap;
                                    break;
                                default:
                                    aA = this._bottom;
                                    az = this._bottom + ap;
                                    break;
                                }
                                if (this.shadow) {
                                    this.renderer.shadowRenderer.draw(at, [[ak, aA], [ak, az]], {
                                        lineCap: "butt",
                                        lineWidth: this.gridLineWidth,
                                        offset: this.gridLineWidth * 0.75,
                                        depth: 2,
                                        fill: false,
                                        closePath: false
                                    });
                                }
                                ao(ak, aA, ak, az);
                            }
                            break;
                        case "yaxis":
                            if (an.showGridline && this.drawGridlines && ((!an.isMinorTick && ah.drawMajorGridlines) || (an.isMinorTick && ah.drawMinorGridlines))) {
                                ao(this._right, ak, this._left, ak);
                            }
                            if (an.showMark && an.mark && ((!an.isMinorTick && ah.drawMajorTickMarks) || (an.isMinorTick && ah.drawMinorTickMarks))) {
                                ap = an.markSize;
                                aq = an.mark;
                                var ak = Math.round(ah.u2p(an.value)) + 0.5;
                                switch (aq) {
                                case "outside":
                                    aA = this._left - ap;
                                    az = this._left;
                                    break;
                                case "inside":
                                    aA = this._left;
                                    az = this._left + ap;
                                    break;
                                case "cross":
                                    aA = this._left - ap;
                                    az = this._left + ap;
                                    break;
                                default:
                                    aA = this._left - ap;
                                    az = this._left;
                                    break;
                                }
                                if (this.shadow) {
                                    this.renderer.shadowRenderer.draw(at, [[aA, ak], [az, ak]], {
                                        lineCap: "butt",
                                        lineWidth: this.gridLineWidth * 1.5,
                                        offset: this.gridLineWidth * 0.75,
                                        fill: false,
                                        closePath: false
                                    });
                                }
                                ao(aA, ak, az, ak, {
                                    strokeStyle: ah.borderColor
                                });
                            }
                            break;
                        case "x2axis":
                            if (an.showGridline && this.drawGridlines && ((!an.isMinorTick && ah.drawMajorGridlines) || (an.isMinorTick && ah.drawMinorGridlines))) {
                                ao(ak, this._bottom, ak, this._top);
                            }
                            if (an.showMark && an.mark && ((!an.isMinorTick && ah.drawMajorTickMarks) || (an.isMinorTick && ah.drawMinorTickMarks))) {
                                ap = an.markSize;
                                aq = an.mark;
                                var ak = Math.round(ah.u2p(an.value)) + 0.5;
                                switch (aq) {
                                case "outside":
                                    aA = this._top - ap;
                                    az = this._top;
                                    break;
                                case "inside":
                                    aA = this._top;
                                    az = this._top + ap;
                                    break;
                                case "cross":
                                    aA = this._top - ap;
                                    az = this._top + ap;
                                    break;
                                default:
                                    aA = this._top - ap;
                                    az = this._top;
                                    break;
                                }
                                if (this.shadow) {
                                    this.renderer.shadowRenderer.draw(at, [[ak, aA], [ak, az]], {
                                        lineCap: "butt",
                                        lineWidth: this.gridLineWidth,
                                        offset: this.gridLineWidth * 0.75,
                                        depth: 2,
                                        fill: false,
                                        closePath: false
                                    });
                                }
                                ao(ak, aA, ak, az);
                            }
                            break;
                        case "y2axis":
                            if (an.showGridline && this.drawGridlines && ((!an.isMinorTick && ah.drawMajorGridlines) || (an.isMinorTick && ah.drawMinorGridlines))) {
                                ao(this._left, ak, this._right, ak);
                            }
                            if (an.showMark && an.mark && ((!an.isMinorTick && ah.drawMajorTickMarks) || (an.isMinorTick && ah.drawMinorTickMarks))) {
                                ap = an.markSize;
                                aq = an.mark;
                                var ak = Math.round(ah.u2p(an.value)) + 0.5;
                                switch (aq) {
                                case "outside":
                                    aA = this._right;
                                    az = this._right + ap;
                                    break;
                                case "inside":
                                    aA = this._right - ap;
                                    az = this._right;
                                    break;
                                case "cross":
                                    aA = this._right - ap;
                                    az = this._right + ap;
                                    break;
                                default:
                                    aA = this._right;
                                    az = this._right + ap;
                                    break;
                                }
                                if (this.shadow) {
                                    this.renderer.shadowRenderer.draw(at, [[aA, ak], [az, ak]], {
                                        lineCap: "butt",
                                        lineWidth: this.gridLineWidth * 1.5,
                                        offset: this.gridLineWidth * 0.75,
                                        fill: false,
                                        closePath: false
                                    });
                                }
                                ao(aA, ak, az, ak, {
                                    strokeStyle: ah.borderColor
                                });
                            }
                            break;
                        default:
                            break;
                        }
                    }
                }
                an = null ;
            }
            ah = null ;
            aB = null ;
        }
        am = ["y3axis", "y4axis", "y5axis", "y6axis", "y7axis", "y8axis", "y9axis", "yMidAxis"];
        for (var ay = 7; ay > 0; ay--) {
            var ah = aw[am[ay - 1]];
            var aB = ah._ticks;
            if (ah.show) {
                var ai = aB[ah.numberTicks - 1];
                var al = aB[0];
                var aj = ah.getLeft();
                var av = [[aj, ai.getTop() + ai.getHeight() / 2], [aj, al.getTop() + al.getHeight() / 2 + 1]];
                if (this.shadow) {
                    this.renderer.shadowRenderer.draw(at, av, {
                        lineCap: "butt",
                        fill: false,
                        closePath: false
                    });
                }
                ao(av[0][0], av[0][1], av[1][0], av[1][1], {
                    lineCap: "butt",
                    strokeStyle: ah.borderColor,
                    lineWidth: ah.borderWidth
                });
                for (var au = aB.length; au > 0; au--) {
                    var an = aB[au - 1];
                    ap = an.markSize;
                    aq = an.mark;
                    var ak = Math.round(ah.u2p(an.value)) + 0.5;
                    if (an.showMark && an.mark) {
                        switch (aq) {
                        case "outside":
                            aA = aj;
                            az = aj + ap;
                            break;
                        case "inside":
                            aA = aj - ap;
                            az = aj;
                            break;
                        case "cross":
                            aA = aj - ap;
                            az = aj + ap;
                            break;
                        default:
                            aA = aj;
                            az = aj + ap;
                            break;
                        }
                        av = [[aA, ak], [az, ak]];
                        if (this.shadow) {
                            this.renderer.shadowRenderer.draw(at, av, {
                                lineCap: "butt",
                                lineWidth: this.gridLineWidth * 1.5,
                                offset: this.gridLineWidth * 0.75,
                                fill: false,
                                closePath: false
                            });
                        }
                        ao(aA, ak, az, ak, {
                            strokeStyle: ah.borderColor
                        });
                    }
                    an = null ;
                }
                al = null ;
            }
            ah = null ;
            aB = null ;
        }
        at.restore();
        function ao(aH, aG, aE, ax, aF) {
            at.save();
            aF = aF || {};
            if (aF.lineWidth == null  || aF.lineWidth != 0) {
                L.extend(true, at, aF);
                at.beginPath();
                at.moveTo(aH, aG);
                at.lineTo(aE, ax);
                at.stroke();
                at.restore();
            }
        }
        if (this.shadow) {
            var av = [[this._left, this._bottom], [this._right, this._bottom], [this._right, this._top]];
            this.renderer.shadowRenderer.draw(at, av);
        }
        if (this.borderWidth != 0 && this.drawBorder) {
            ao(this._left, this._top, this._right, this._top, {
                lineCap: "round",
                strokeStyle: aw.x2axis.borderColor,
                lineWidth: aw.x2axis.borderWidth
            });
            ao(this._right, this._top, this._right, this._bottom, {
                lineCap: "round",
                strokeStyle: aw.y2axis.borderColor,
                lineWidth: aw.y2axis.borderWidth
            });
            ao(this._right, this._bottom, this._left, this._bottom, {
                lineCap: "round",
                strokeStyle: aw.xaxis.borderColor,
                lineWidth: aw.xaxis.borderWidth
            });
            ao(this._left, this._bottom, this._left, this._top, {
                lineCap: "round",
                strokeStyle: aw.yaxis.borderColor,
                lineWidth: aw.yaxis.borderWidth
            });
        }
        at.restore();
        at = null ;
        aw = null ;
    }
    ;
    L.jqplot.DivTitleRenderer = function() {}
    ;
    L.jqplot.DivTitleRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.DivTitleRenderer.prototype.draw = function() {
        if (this._elem) {
            this._elem.emptyForce();
            this._elem = null ;
        }
        var ak = this.renderer;
        var aj = document.createElement("div");
        this._elem = L(aj);
        this._elem.addClass("jqplot-title");
        if (!this.text) {
            this.show = false;
            this._elem.height(0);
            this._elem.width(0);
        } else {
            if (this.text) {
                var ah;
                if (this.color) {
                    ah = this.color;
                } else {
                    if (this.textColor) {
                        ah = this.textColor;
                    }
                }
                var ai = {
                    position: "absolute",
                    top: "0px",
                    left: "0px"
                };
                if (this._plotWidth) {
                    ai.width = this._plotWidth + "px";
                }
                if (this.fontSize) {
                    ai.fontSize = this.fontSize;
                }
                if (typeof this.textAlign === "string") {
                    ai.textAlign = this.textAlign;
                } else {
                    ai.textAlign = "center";
                }
                if (ah) {
                    ai.color = ah;
                }
                if (this.paddingBottom) {
                    ai.paddingBottom = this.paddingBottom;
                }
                if (this.fontFamily) {
                    ai.fontFamily = this.fontFamily;
                }
                this._elem.css(ai);
                if (this.escapeHtml) {
                    this._elem.text(this.text);
                } else {
                    this._elem.html(this.text);
                }
            }
        }
        aj = null ;
        return this._elem;
    }
    ;
    L.jqplot.DivTitleRenderer.prototype.pack = function() {}
    ;
    var r = 0.1;
    L.jqplot.LinePattern = function(aw, aq) {
        var ap = {
            dotted: [r, L.jqplot.config.dotGapLength],
            dashed: [L.jqplot.config.dashLength, L.jqplot.config.gapLength],
            solid: null 
        };
        if (typeof aq === "string") {
            if (aq[0] === "." || aq[0] === "-") {
                var ax = aq;
                aq = [];
                for (var ao = 0, al = ax.length; ao < al; ao++) {
                    if (ax[ao] === ".") {
                        aq.push(r);
                    } else {
                        if (ax[ao] === "-") {
                            aq.push(L.jqplot.config.dashLength);
                        } else {
                            continue;
                        }
                    }
                    aq.push(L.jqplot.config.gapLength);
                }
            } else {
                aq = ap[aq];
            }
        }
        if (!(aq && aq.length)) {
            return aw;
        }
        var ak = 0;
        var ar = aq[0];
        var au = 0;
        var at = 0;
        var an = 0;
        var ah = 0;
        var av = function(ay, az) {
            aw.moveTo(ay, az);
            au = ay;
            at = az;
            an = ay;
            ah = az;
        }
        ;
        var aj = function(ay, aE) {
            var aC = aw.lineWidth;
            var aA = ay - au;
            var az = aE - at;
            var aB = Math.sqrt(aA * aA + az * az);
            if ((aB > 0) && (aC > 0)) {
                aA /= aB;
                az /= aB;
                while (true) {
                    var aD = aC * ar;
                    if (aD < aB) {
                        au += aD * aA;
                        at += aD * az;
                        if ((ak & 1) == 0) {
                            aw.lineTo(au, at);
                        } else {
                            aw.moveTo(au, at);
                        }
                        aB -= aD;
                        ak++;
                        if (ak >= aq.length) {
                            ak = 0;
                        }
                        ar = aq[ak];
                    } else {
                        au = ay;
                        at = aE;
                        if ((ak & 1) == 0) {
                            aw.lineTo(au, at);
                        } else {
                            aw.moveTo(au, at);
                        }
                        ar -= aB / aC;
                        break;
                    }
                }
            }
        }
        ;
        var ai = function() {
            aw.beginPath();
        }
        ;
        var am = function() {
            aj(an, ah);
        }
        ;
        return {
            moveTo: av,
            lineTo: aj,
            beginPath: ai,
            closePath: am
        };
    }
    ;
    L.jqplot.LineRenderer = function() {
        this.shapeRenderer = new L.jqplot.ShapeRenderer();
        this.shadowRenderer = new L.jqplot.ShadowRenderer();
    }
    ;
    L.jqplot.LineRenderer.prototype.init = function(ai, an) {
        ai = ai || {};
        this._type = "line";
        this.renderer.animation = {
            show: false,
            direction: "left",
            speed: 2500,
            _supported: true
        };
        this.renderer.smooth = false;
        this.renderer.tension = null ;
        this.renderer.constrainSmoothing = true;
        this.renderer._smoothedData = [];
        this.renderer._smoothedPlotData = [];
        this.renderer._hiBandGridData = [];
        this.renderer._lowBandGridData = [];
        this.renderer._hiBandSmoothedData = [];
        this.renderer._lowBandSmoothedData = [];
        this.renderer.bandData = [];
        this.renderer.bands = {
            show: false,
            hiData: [],
            lowData: [],
            color: this.color,
            showLines: false,
            fill: true,
            fillColor: null ,
            _min: null ,
            _max: null ,
            interval: "3%"
        };
        var al = {
            highlightMouseOver: ai.highlightMouseOver,
            highlightMouseDown: ai.highlightMouseDown,
            highlightColor: ai.highlightColor
        };
        delete (ai.highlightMouseOver);
        delete (ai.highlightMouseDown);
        delete (ai.highlightColor);
        L.extend(true, this.renderer, ai);
        this.renderer.options = ai;
        if (this.renderer.bandData.length > 1 && (!ai.bands || ai.bands.show == null )) {
            this.renderer.bands.show = true;
        } else {
            if (ai.bands && ai.bands.show == null  && ai.bands.interval != null ) {
                this.renderer.bands.show = true;
            }
        }
        if (this.fill) {
            this.renderer.bands.show = false;
        }
        if (this.renderer.bands.show) {
            this.renderer.initBands.call(this, this.renderer.options, an);
        }
        if (this._stack) {
            this.renderer.smooth = false;
        }
        var am = {
            lineJoin: this.lineJoin,
            lineCap: this.lineCap,
            fill: this.fill,
            isarc: false,
            strokeStyle: this.color,
            fillStyle: this.fillColor,
            lineWidth: this.lineWidth,
            linePattern: this.linePattern,
            closePath: this.fill
        };
        this.renderer.shapeRenderer.init(am);
        var aj = ai.shadowOffset;
        if (aj == null ) {
            if (this.lineWidth > 2.5) {
                aj = 1.25 * (1 + (Math.atan((this.lineWidth / 2.5)) / 0.785398163 - 1) * 0.6);
            } else {
                aj = 1.25 * Math.atan((this.lineWidth / 2.5)) / 0.785398163;
            }
        }
        var ah = {
            lineJoin: this.lineJoin,
            lineCap: this.lineCap,
            fill: this.fill,
            isarc: false,
            angle: this.shadowAngle,
            offset: aj,
            alpha: this.shadowAlpha,
            depth: this.shadowDepth,
            lineWidth: this.lineWidth,
            linePattern: this.linePattern,
            closePath: this.fill
        };
        this.renderer.shadowRenderer.init(ah);
        this._areaPoints = [];
        this._boundingBox = [[], []];
        if (!this.isTrendline && this.fill || this.renderer.bands.show) {
            this.highlightMouseOver = true;
            this.highlightMouseDown = false;
            this.highlightColor = null ;
            if (al.highlightMouseDown && al.highlightMouseOver == null ) {
                al.highlightMouseOver = false;
            }
            L.extend(true, this, {
                highlightMouseOver: al.highlightMouseOver,
                highlightMouseDown: al.highlightMouseDown,
                highlightColor: al.highlightColor
            });
            if (!this.highlightColor) {
                var ak = (this.renderer.bands.show) ? this.renderer.bands.fillColor : this.fillColor;
                this.highlightColor = L.jqplot.computeHighlightColors(ak);
            }
            if (this.highlighter) {
                this.highlighter.show = false;
            }
        }
        if (!this.isTrendline && an) {
            an.plugins.lineRenderer = {};
            an.postInitHooks.addOnce(z);
            an.postDrawHooks.addOnce(af);
            an.eventListenerHooks.addOnce("jqplotMouseMove", h);
            an.eventListenerHooks.addOnce("jqplotMouseDown", e);
            an.eventListenerHooks.addOnce("jqplotMouseUp", ad);
            an.eventListenerHooks.addOnce("jqplotClick", g);
            an.eventListenerHooks.addOnce("jqplotRightClick", s);
        }
    }
    ;
    L.jqplot.LineRenderer.prototype.initBands = function(ak, av) {
        var al = ak.bandData || [];
        var an = this.renderer.bands;
        an.hiData = [];
        an.lowData = [];
        var aB = this.data;
        an._max = null ;
        an._min = null ;
        if (al.length == 2) {
            if (L.isArray(al[0][0])) {
                var ao;
                var ah = 0
                  , ar = 0;
                for (var aw = 0, at = al[0].length; aw < at; aw++) {
                    ao = al[0][aw];
                    if ((ao[1] != null  && ao[1] > an._max) || an._max == null ) {
                        an._max = ao[1];
                    }
                    if ((ao[1] != null  && ao[1] < an._min) || an._min == null ) {
                        an._min = ao[1];
                    }
                }
                for (var aw = 0, at = al[1].length; aw < at; aw++) {
                    ao = al[1][aw];
                    if ((ao[1] != null  && ao[1] > an._max) || an._max == null ) {
                        an._max = ao[1];
                        ar = 1;
                    }
                    if ((ao[1] != null  && ao[1] < an._min) || an._min == null ) {
                        an._min = ao[1];
                        ah = 1;
                    }
                }
                if (ar === ah) {
                    an.show = false;
                }
                an.hiData = al[ar];
                an.lowData = al[ah];
            } else {
                if (al[0].length === aB.length && al[1].length === aB.length) {
                    var aj = (al[0][0] > al[1][0]) ? 0 : 1;
                    var aC = (aj) ? 0 : 1;
                    for (var aw = 0, at = aB.length; aw < at; aw++) {
                        an.hiData.push([aB[aw][0], al[aj][aw]]);
                        an.lowData.push([aB[aw][0], al[aC][aw]]);
                    }
                } else {
                    an.show = false;
                }
            }
        } else {
            if (al.length > 2 && !L.isArray(al[0][0])) {
                var aj = (al[0][0] > al[0][1]) ? 0 : 1;
                var aC = (aj) ? 0 : 1;
                for (var aw = 0, at = al.length; aw < at; aw++) {
                    an.hiData.push([aB[aw][0], al[aw][aj]]);
                    an.lowData.push([aB[aw][0], al[aw][aC]]);
                }
            } else {
                var aq = an.interval;
                var aA = null ;
                var az = null ;
                var ai = null ;
                var au = null ;
                if (L.isArray(aq)) {
                    aA = aq[0];
                    az = aq[1];
                } else {
                    aA = aq;
                }
                if (isNaN(aA)) {
                    if (aA.charAt(aA.length - 1) === "%") {
                        ai = "multiply";
                        aA = parseFloat(aA) / 100 + 1;
                    }
                } else {
                    aA = parseFloat(aA);
                    ai = "add";
                }
                if (az !== null  && isNaN(az)) {
                    if (az.charAt(az.length - 1) === "%") {
                        au = "multiply";
                        az = parseFloat(az) / 100 + 1;
                    }
                } else {
                    if (az !== null ) {
                        az = parseFloat(az);
                        au = "add";
                    }
                }
                if (aA !== null ) {
                    if (az === null ) {
                        az = -aA;
                        au = ai;
                        if (au === "multiply") {
                            az += 2;
                        }
                    }
                    if (aA < az) {
                        var ax = aA;
                        aA = az;
                        az = ax;
                        ax = ai;
                        ai = au;
                        au = ax;
                    }
                    for (var aw = 0, at = aB.length; aw < at; aw++) {
                        switch (ai) {
                        case "add":
                            an.hiData.push([aB[aw][0], aB[aw][1] + aA]);
                            break;
                        case "multiply":
                            an.hiData.push([aB[aw][0], aB[aw][1] * aA]);
                            break;
                        }
                        switch (au) {
                        case "add":
                            an.lowData.push([aB[aw][0], aB[aw][1] + az]);
                            break;
                        case "multiply":
                            an.lowData.push([aB[aw][0], aB[aw][1] * az]);
                            break;
                        }
                    }
                } else {
                    an.show = false;
                }
            }
        }
        var am = an.hiData;
        var ap = an.lowData;
        for (var aw = 0, at = am.length; aw < at; aw++) {
            if ((am[aw][1] != null  && am[aw][1] > an._max) || an._max == null ) {
                an._max = am[aw][1];
            }
        }
        for (var aw = 0, at = ap.length; aw < at; aw++) {
            if ((ap[aw][1] != null  && ap[aw][1] < an._min) || an._min == null ) {
                an._min = ap[aw][1];
            }
        }
        if (an.fillColor === null ) {
            var ay = L.jqplot.getColorComponents(an.color);
            ay[3] = ay[3] * 0.5;
            an.fillColor = "rgba(" + ay[0] + ", " + ay[1] + ", " + ay[2] + ", " + ay[3] + ")";
        }
    }
    ;
    function K(ai, ah) {
        return (3.4182054 + ah) * Math.pow(ai, -0.3534992);
    }
    function n(aj, ai) {
        var ah = Math.sqrt(Math.pow((ai[0] - aj[0]), 2) + Math.pow((ai[1] - aj[1]), 2));
        return 5.7648 * Math.log(ah) + 7.4456;
    }
    function A(ah) {
        var ai = (Math.exp(2 * ah) - 1) / (Math.exp(2 * ah) + 1);
        return ai;
    }
    function J(aJ) {
        var at = this.renderer.smooth;
        var aD = this.canvas.getWidth();
        var an = this._xaxis.series_p2u;
        var aG = this._yaxis.series_p2u;
        var aF = null ;
        var am = null ;
        var az = aJ.length / aD;
        var aj = [];
        var ay = [];
        if (!isNaN(parseFloat(at))) {
            aF = parseFloat(at);
        } else {
            aF = K(az, 0.5);
        }
        var aw = [];
        var ak = [];
        for (var aE = 0, aA = aJ.length; aE < aA; aE++) {
            aw.push(aJ[aE][1]);
            ak.push(aJ[aE][0]);
        }
        function av(aK, aL) {
            if (aK - aL == 0) {
                return Math.pow(10, 10);
            } else {
                return aK - aL;
            }
        }
        var ax, ar, aq, ap;
        var ah = aJ.length - 1;
        for (var al = 1, aB = aJ.length; al < aB; al++) {
            var ai = [];
            var au = [];
            for (var aC = 0; aC < 2; aC++) {
                var aE = al - 1 + aC;
                if (aE == 0 || aE == ah) {
                    ai[aC] = Math.pow(10, 10);
                } else {
                    if (aw[aE + 1] - aw[aE] == 0 || aw[aE] - aw[aE - 1] == 0) {
                        ai[aC] = 0;
                    } else {
                        if (((ak[aE + 1] - ak[aE]) / (aw[aE + 1] - aw[aE]) + (ak[aE] - ak[aE - 1]) / (aw[aE] - aw[aE - 1])) == 0) {
                            ai[aC] = 0;
                        } else {
                            if ((aw[aE + 1] - aw[aE]) * (aw[aE] - aw[aE - 1]) < 0) {
                                ai[aC] = 0;
                            } else {
                                ai[aC] = 2 / (av(ak[aE + 1], ak[aE]) / (aw[aE + 1] - aw[aE]) + av(ak[aE], ak[aE - 1]) / (aw[aE] - aw[aE - 1]));
                            }
                        }
                    }
                }
            }
            if (al == 1) {
                ai[0] = 3 / 2 * (aw[1] - aw[0]) / av(ak[1], ak[0]) - ai[1] / 2;
            } else {
                if (al == ah) {
                    ai[1] = 3 / 2 * (aw[ah] - aw[ah - 1]) / av(ak[ah], ak[ah - 1]) - ai[0] / 2;
                }
            }
            au[0] = -2 * (ai[1] + 2 * ai[0]) / av(ak[al], ak[al - 1]) + 6 * (aw[al] - aw[al - 1]) / Math.pow(av(ak[al], ak[al - 1]), 2);
            au[1] = 2 * (2 * ai[1] + ai[0]) / av(ak[al], ak[al - 1]) - 6 * (aw[al] - aw[al - 1]) / Math.pow(av(ak[al], ak[al - 1]), 2);
            ap = 1 / 6 * (au[1] - au[0]) / av(ak[al], ak[al - 1]);
            aq = 1 / 2 * (ak[al] * au[0] - ak[al - 1] * au[1]) / av(ak[al], ak[al - 1]);
            ar = (aw[al] - aw[al - 1] - aq * (Math.pow(ak[al], 2) - Math.pow(ak[al - 1], 2)) - ap * (Math.pow(ak[al], 3) - Math.pow(ak[al - 1], 3))) / av(ak[al], ak[al - 1]);
            ax = aw[al - 1] - ar * ak[al - 1] - aq * Math.pow(ak[al - 1], 2) - ap * Math.pow(ak[al - 1], 3);
            var aI = (ak[al] - ak[al - 1]) / aF;
            var aH, ao;
            for (var aC = 0, aA = aF; aC < aA; aC++) {
                aH = [];
                ao = ak[al - 1] + aC * aI;
                aH.push(ao);
                aH.push(ax + ar * ao + aq * Math.pow(ao, 2) + ap * Math.pow(ao, 3));
                aj.push(aH);
                ay.push([an(aH[0]), aG(aH[1])]);
            }
        }
        aj.push(aJ[aE]);
        ay.push([an(aJ[aE][0]), aG(aJ[aE][1])]);
        return [aj, ay];
    }
    function F(ap) {
        var ao = this.renderer.smooth;
        var aU = this.renderer.tension;
        var ah = this.canvas.getWidth();
        var aH = this._xaxis.series_p2u;
        var aq = this._yaxis.series_p2u;
        var aI = null ;
        var aJ = null ;
        var aT = null ;
        var aO = null ;
        var aM = null ;
        var at = null ;
        var aR = null ;
        var am = null ;
        var aK, aL, aD, aC, aA, ay;
        var ak, ai, av, au;
        var aB, az, aN;
        var aw = [];
        var aj = [];
        var al = ap.length / ah;
        var aS, ax, aF, aG, aE;
        var ar = [];
        var an = [];
        if (!isNaN(parseFloat(ao))) {
            aI = parseFloat(ao);
        } else {
            aI = K(al, 0.5);
        }
        if (!isNaN(parseFloat(aU))) {
            aU = parseFloat(aU);
        }
        for (var aQ = 0, aP = ap.length - 1; aQ < aP; aQ++) {
            if (aU === null ) {
                at = Math.abs((ap[aQ + 1][1] - ap[aQ][1]) / (ap[aQ + 1][0] - ap[aQ][0]));
                aS = 0.3;
                ax = 0.6;
                aF = (ax - aS) / 2;
                aG = 2.5;
                aE = -1.4;
                am = at / aG + aE;
                aO = aF * A(am) - aF * A(aE) + aS;
                if (aQ > 0) {
                    aR = Math.abs((ap[aQ][1] - ap[aQ - 1][1]) / (ap[aQ][0] - ap[aQ - 1][0]));
                }
                am = aR / aG + aE;
                aM = aF * A(am) - aF * A(aE) + aS;
                aT = (aO + aM) / 2;
            } else {
                aT = aU;
            }
            for (aK = 0; aK < aI; aK++) {
                aL = aK / aI;
                aD = (1 + 2 * aL) * Math.pow((1 - aL), 2);
                aC = aL * Math.pow((1 - aL), 2);
                aA = Math.pow(aL, 2) * (3 - 2 * aL);
                ay = Math.pow(aL, 2) * (aL - 1);
                if (ap[aQ - 1]) {
                    ak = aT * (ap[aQ + 1][0] - ap[aQ - 1][0]);
                    ai = aT * (ap[aQ + 1][1] - ap[aQ - 1][1]);
                } else {
                    ak = aT * (ap[aQ + 1][0] - ap[aQ][0]);
                    ai = aT * (ap[aQ + 1][1] - ap[aQ][1]);
                }
                if (ap[aQ + 2]) {
                    av = aT * (ap[aQ + 2][0] - ap[aQ][0]);
                    au = aT * (ap[aQ + 2][1] - ap[aQ][1]);
                } else {
                    av = aT * (ap[aQ + 1][0] - ap[aQ][0]);
                    au = aT * (ap[aQ + 1][1] - ap[aQ][1]);
                }
                aB = aD * ap[aQ][0] + aA * ap[aQ + 1][0] + aC * ak + ay * av;
                az = aD * ap[aQ][1] + aA * ap[aQ + 1][1] + aC * ai + ay * au;
                aN = [aB, az];
                ar.push(aN);
                an.push([aH(aB), aq(az)]);
            }
        }
        ar.push(ap[aP]);
        an.push([aH(ap[aP][0]), aq(ap[aP][1])]);
        return [ar, an];
    }
    L.jqplot.LineRenderer.prototype.setGridData = function(ap) {
        var al = this._xaxis.series_u2p;
        var ah = this._yaxis.series_u2p;
        var am = this._plotData;
        var aq = this._prevPlotData;
        this.gridData = [];
        this._prevGridData = [];
        this.renderer._smoothedData = [];
        this.renderer._smoothedPlotData = [];
        this.renderer._hiBandGridData = [];
        this.renderer._lowBandGridData = [];
        this.renderer._hiBandSmoothedData = [];
        this.renderer._lowBandSmoothedData = [];
        var ak = this.renderer.bands;
        var ai = false;
        for (var an = 0, aj = am.length; an < aj; an++) {
            if (am[an][0] != null  && am[an][1] != null ) {
                this.gridData.push([al.call(this._xaxis, am[an][0]), ah.call(this._yaxis, am[an][1])]);
            } else {
                if (am[an][0] == null ) {
                    ai = true;
                    this.gridData.push([null , ah.call(this._yaxis, am[an][1])]);
                } else {
                    if (am[an][1] == null ) {
                        ai = true;
                        this.gridData.push([al.call(this._xaxis, am[an][0]), null ]);
                    }
                }
            }
            if (aq[an] != null  && aq[an][0] != null  && aq[an][1] != null ) {
                this._prevGridData.push([al.call(this._xaxis, aq[an][0]), ah.call(this._yaxis, aq[an][1])]);
            } else {
                if (aq[an] != null  && aq[an][0] == null ) {
                    this._prevGridData.push([null , ah.call(this._yaxis, aq[an][1])]);
                } else {
                    if (aq[an] != null  && aq[an][0] != null  && aq[an][1] == null ) {
                        this._prevGridData.push([al.call(this._xaxis, aq[an][0]), null ]);
                    }
                }
            }
        }
        if (ai) {
            this.renderer.smooth = false;
            if (this._type === "line") {
                ak.show = false;
            }
        }
        if (this._type === "line" && ak.show) {
            for (var an = 0, aj = ak.hiData.length; an < aj; an++) {
                this.renderer._hiBandGridData.push([al.call(this._xaxis, ak.hiData[an][0]), ah.call(this._yaxis, ak.hiData[an][1])]);
            }
            for (var an = 0, aj = ak.lowData.length; an < aj; an++) {
                this.renderer._lowBandGridData.push([al.call(this._xaxis, ak.lowData[an][0]), ah.call(this._yaxis, ak.lowData[an][1])]);
            }
        }
        if (this._type === "line" && this.renderer.smooth && this.gridData.length > 2) {
            var ao;
            if (this.renderer.constrainSmoothing) {
                ao = J.call(this, this.gridData);
                this.renderer._smoothedData = ao[0];
                this.renderer._smoothedPlotData = ao[1];
                if (ak.show) {
                    ao = J.call(this, this.renderer._hiBandGridData);
                    this.renderer._hiBandSmoothedData = ao[0];
                    ao = J.call(this, this.renderer._lowBandGridData);
                    this.renderer._lowBandSmoothedData = ao[0];
                }
                ao = null ;
            } else {
                ao = F.call(this, this.gridData);
                this.renderer._smoothedData = ao[0];
                this.renderer._smoothedPlotData = ao[1];
                if (ak.show) {
                    ao = F.call(this, this.renderer._hiBandGridData);
                    this.renderer._hiBandSmoothedData = ao[0];
                    ao = F.call(this, this.renderer._lowBandGridData);
                    this.renderer._lowBandSmoothedData = ao[0];
                }
                ao = null ;
            }
        }
    }
    ;
    L.jqplot.LineRenderer.prototype.makeGridData = function(ao, aq) {
        var am = this._xaxis.series_u2p;
        var ah = this._yaxis.series_u2p;
        var ar = [];
        var aj = [];
        this.renderer._smoothedData = [];
        this.renderer._smoothedPlotData = [];
        this.renderer._hiBandGridData = [];
        this.renderer._lowBandGridData = [];
        this.renderer._hiBandSmoothedData = [];
        this.renderer._lowBandSmoothedData = [];
        var al = this.renderer.bands;
        var ai = false;
        for (var an = 0; an < ao.length; an++) {
            if (ao[an][0] != null  && ao[an][1] != null ) {
                ar.push([am.call(this._xaxis, ao[an][0]), ah.call(this._yaxis, ao[an][1])]);
            } else {
                if (ao[an][0] == null ) {
                    ai = true;
                    ar.push([null , ah.call(this._yaxis, ao[an][1])]);
                } else {
                    if (ao[an][1] == null ) {
                        ai = true;
                        ar.push([am.call(this._xaxis, ao[an][0]), null ]);
                    }
                }
            }
        }
        if (ai) {
            this.renderer.smooth = false;
            if (this._type === "line") {
                al.show = false;
            }
        }
        if (this._type === "line" && al.show) {
            for (var an = 0, ak = al.hiData.length; an < ak; an++) {
                this.renderer._hiBandGridData.push([am.call(this._xaxis, al.hiData[an][0]), ah.call(this._yaxis, al.hiData[an][1])]);
            }
            for (var an = 0, ak = al.lowData.length; an < ak; an++) {
                this.renderer._lowBandGridData.push([am.call(this._xaxis, al.lowData[an][0]), ah.call(this._yaxis, al.lowData[an][1])]);
            }
        }
        if (this._type === "line" && this.renderer.smooth && ar.length > 2) {
            var ap;
            if (this.renderer.constrainSmoothing) {
                ap = J.call(this, ar);
                this.renderer._smoothedData = ap[0];
                this.renderer._smoothedPlotData = ap[1];
                if (al.show) {
                    ap = J.call(this, this.renderer._hiBandGridData);
                    this.renderer._hiBandSmoothedData = ap[0];
                    ap = J.call(this, this.renderer._lowBandGridData);
                    this.renderer._lowBandSmoothedData = ap[0];
                }
                ap = null ;
            } else {
                ap = F.call(this, ar);
                this.renderer._smoothedData = ap[0];
                this.renderer._smoothedPlotData = ap[1];
                if (al.show) {
                    ap = F.call(this, this.renderer._hiBandGridData);
                    this.renderer._hiBandSmoothedData = ap[0];
                    ap = F.call(this, this.renderer._lowBandGridData);
                    this.renderer._lowBandSmoothedData = ap[0];
                }
                ap = null ;
            }
        }
        return ar;
    }
    ;
    L.jqplot.LineRenderer.prototype.draw = function(ax, aI, ai, aB) {
        var aC;
        var aq = L.extend(true, {}, ai);
        var ak = (aq.shadow != u) ? aq.shadow : this.shadow;
        var aJ = (aq.showLine != u) ? aq.showLine : this.showLine;
        var aA = (aq.fill != u) ? aq.fill : this.fill;
        var ah = (aq.fillAndStroke != u) ? aq.fillAndStroke : this.fillAndStroke;
        var ar, ay, av, aE;
        ax.save();
        if (aI.length) {
            if (aJ) {
                if (aA) {
                    if (this.fillToZero) {
                        var aF = this.negativeColor;
                        if (!this.useNegativeColors) {
                            aF = aq.fillStyle;
                        }
                        var ao = false;
                        var ap = aq.fillStyle;
                        if (ah) {
                            var aH = aI.slice(0);
                        }
                        if (this.index == 0 || !this._stack) {
                            var aw = [];
                            var aL = (this.renderer.smooth) ? this.renderer._smoothedPlotData : this._plotData;
                            this._areaPoints = [];
                            var aG = this._yaxis.series_u2p(this.fillToValue);
                            var aj = this._xaxis.series_u2p(this.fillToValue);
                            aq.closePath = true;
                            if (this.fillAxis == "y") {
                                aw.push([aI[0][0], aG]);
                                this._areaPoints.push([aI[0][0], aG]);
                                for (var aC = 0; aC < aI.length - 1; aC++) {
                                    aw.push(aI[aC]);
                                    this._areaPoints.push(aI[aC]);
                                    if (aL[aC][1] * aL[aC + 1][1] < 0) {
                                        if (aL[aC][1] < 0) {
                                            ao = true;
                                            aq.fillStyle = aF;
                                        } else {
                                            ao = false;
                                            aq.fillStyle = ap;
                                        }
                                        var an = aI[aC][0] + (aI[aC + 1][0] - aI[aC][0]) * (aG - aI[aC][1]) / (aI[aC + 1][1] - aI[aC][1]);
                                        aw.push([an, aG]);
                                        this._areaPoints.push([an, aG]);
                                        if (ak) {
                                            this.renderer.shadowRenderer.draw(ax, aw, aq);
                                        }
                                        this.renderer.shapeRenderer.draw(ax, aw, aq);
                                        aw = [[an, aG]];
                                    }
                                }
                                if (aL[aI.length - 1][1] < 0) {
                                    ao = true;
                                    aq.fillStyle = aF;
                                } else {
                                    ao = false;
                                    aq.fillStyle = ap;
                                }
                                aw.push(aI[aI.length - 1]);
                                this._areaPoints.push(aI[aI.length - 1]);
                                aw.push([aI[aI.length - 1][0], aG]);
                                this._areaPoints.push([aI[aI.length - 1][0], aG]);
                            }
                            if (ak) {
                                this.renderer.shadowRenderer.draw(ax, aw, aq);
                            }
                            this.renderer.shapeRenderer.draw(ax, aw, aq);
                        } else {
                            var au = this._prevGridData;
                            for (var aC = au.length; aC > 0; aC--) {
                                aI.push(au[aC - 1]);
                            }
                            if (ak) {
                                this.renderer.shadowRenderer.draw(ax, aI, aq);
                            }
                            this._areaPoints = aI;
                            this.renderer.shapeRenderer.draw(ax, aI, aq);
                        }
                    } else {
                        if (ah) {
                            var aH = aI.slice(0);
                        }
                        if (this.index == 0 || !this._stack) {
                            var al = ax.canvas.height;
                            aI.unshift([aI[0][0], al]);
                            var aD = aI.length;
                            aI.push([aI[aD - 1][0], al]);
                        } else {
                            var au = this._prevGridData;
                            for (var aC = au.length; aC > 0; aC--) {
                                aI.push(au[aC - 1]);
                            }
                        }
                        this._areaPoints = aI;
                        if (ak) {
                            this.renderer.shadowRenderer.draw(ax, aI, aq);
                        }
                        this.renderer.shapeRenderer.draw(ax, aI, aq);
                    }
                    if (ah) {
                        var az = L.extend(true, {}, aq, {
                            fill: false,
                            closePath: false
                        });
                        this.renderer.shapeRenderer.draw(ax, aH, az);
                        if (this.markerRenderer.show) {
                            if (this.renderer.smooth) {
                                aH = this.gridData;
                            }
                            for (aC = 0; aC < aH.length; aC++) {
                                this.markerRenderer.draw(aH[aC][0], aH[aC][1], ax, aq.markerOptions);
                            }
                        }
                    }
                } else {
                    if (this.renderer.bands.show) {
                        var am;
                        var aK = L.extend(true, {}, aq);
                        if (this.renderer.bands.showLines) {
                            am = (this.renderer.smooth) ? this.renderer._hiBandSmoothedData : this.renderer._hiBandGridData;
                            this.renderer.shapeRenderer.draw(ax, am, aq);
                            am = (this.renderer.smooth) ? this.renderer._lowBandSmoothedData : this.renderer._lowBandGridData;
                            this.renderer.shapeRenderer.draw(ax, am, aK);
                        }
                        if (this.renderer.bands.fill) {
                            if (this.renderer.smooth) {
                                am = this.renderer._hiBandSmoothedData.concat(this.renderer._lowBandSmoothedData.reverse());
                            } else {
                                am = this.renderer._hiBandGridData.concat(this.renderer._lowBandGridData.reverse());
                            }
                            this._areaPoints = am;
                            aK.closePath = true;
                            aK.fill = true;
                            aK.fillStyle = this.renderer.bands.fillColor;
                            this.renderer.shapeRenderer.draw(ax, am, aK);
                        }
                    }
                    if (ak) {
                        this.renderer.shadowRenderer.draw(ax, aI, aq);
                    }
                    this.renderer.shapeRenderer.draw(ax, aI, aq);
                }
            }
            var ar = av = ay = aE = null ;
            for (aC = 0; aC < this._areaPoints.length; aC++) {
                var at = this._areaPoints[aC];
                if (ar > at[0] || ar == null ) {
                    ar = at[0];
                }
                if (aE < at[1] || aE == null ) {
                    aE = at[1];
                }
                if (av < at[0] || av == null ) {
                    av = at[0];
                }
                if (ay > at[1] || ay == null ) {
                    ay = at[1];
                }
            }
            if (this.type === "line" && this.renderer.bands.show) {
                aE = this._yaxis.series_u2p(this.renderer.bands._min);
                ay = this._yaxis.series_u2p(this.renderer.bands._max);
            }
            this._boundingBox = [[ar, aE], [av, ay]];
            if (this.markerRenderer.show && !aA) {
                if (this.renderer.smooth) {
                    aI = this.gridData;
                }
                for (aC = 0; aC < aI.length; aC++) {
                    if (aI[aC][0] != null  && aI[aC][1] != null ) {
                        this.markerRenderer.draw(aI[aC][0], aI[aC][1], ax, aq.markerOptions);
                    }
                }
            }
        }
        ax.restore();
    }
    ;
    L.jqplot.LineRenderer.prototype.drawShadow = function(ah, aj, ai) {}
    ;
    function z(ak, aj, ah) {
        for (var ai = 0; ai < this.series.length; ai++) {
            if (this.series[ai].renderer.constructor == L.jqplot.LineRenderer) {
                if (this.series[ai].highlightMouseOver) {
                    this.series[ai].highlightMouseDown = false;
                }
            }
        }
    }
    function af() {
        if (this.plugins.lineRenderer && this.plugins.lineRenderer.highlightCanvas) {
            this.plugins.lineRenderer.highlightCanvas.resetCanvas();
            this.plugins.lineRenderer.highlightCanvas = null ;
        }
        this.plugins.lineRenderer.highlightedSeriesIndex = null ;
        this.plugins.lineRenderer.highlightCanvas = new L.jqplot.GenericCanvas();
        this.eventCanvas._elem.before(this.plugins.lineRenderer.highlightCanvas.createElement(this._gridPadding, "jqplot-lineRenderer-highlight-canvas", this._plotDimensions, this));
        this.plugins.lineRenderer.highlightCanvas.setContext();
        this.eventCanvas._elem.bind("mouseleave", {
            plot: this
        }, function(ah) {
            aa(ah.data.plot);
        });
    }
    function ac(an, am, ak, aj) {
        var ai = an.series[am];
        var ah = an.plugins.lineRenderer.highlightCanvas;
        ah._ctx.clearRect(0, 0, ah._ctx.canvas.width, ah._ctx.canvas.height);
        ai._highlightedPoint = ak;
        an.plugins.lineRenderer.highlightedSeriesIndex = am;
        var al = {
            fillStyle: ai.highlightColor
        };
        if (ai.type === "line" && ai.renderer.bands.show) {
            al.fill = true;
            al.closePath = true;
        }
        ai.renderer.shapeRenderer.draw(ah._ctx, aj, al);
        ah = null ;
    }
    function aa(aj) {
        var ah = aj.plugins.lineRenderer.highlightCanvas;
        ah._ctx.clearRect(0, 0, ah._ctx.canvas.width, ah._ctx.canvas.height);
        for (var ai = 0; ai < aj.series.length; ai++) {
            aj.series[ai]._highlightedPoint = null ;
        }
        aj.plugins.lineRenderer.highlightedSeriesIndex = null ;
        aj.target.trigger("jqplotDataUnhighlight");
        ah = null ;
    }
    function h(al, ak, ao, an, am) {
        if (an) {
            var aj = [an.seriesIndex, an.pointIndex, an.data];
            var ai = jQuery.Event("jqplotDataMouseOver");
            ai.pageX = al.pageX;
            ai.pageY = al.pageY;
            am.target.trigger(ai, aj);
            if (am.series[aj[0]].highlightMouseOver && !(aj[0] == am.plugins.lineRenderer.highlightedSeriesIndex)) {
                var ah = jQuery.Event("jqplotDataHighlight");
                ah.which = al.which;
                ah.pageX = al.pageX;
                ah.pageY = al.pageY;
                am.target.trigger(ah, aj);
                ac(am, an.seriesIndex, an.pointIndex, an.points);
            }
        } else {
            if (an == null ) {
                aa(am);
            }
        }
    }
    function e(ak, aj, an, am, al) {
        if (am) {
            var ai = [am.seriesIndex, am.pointIndex, am.data];
            if (al.series[ai[0]].highlightMouseDown && !(ai[0] == al.plugins.lineRenderer.highlightedSeriesIndex)) {
                var ah = jQuery.Event("jqplotDataHighlight");
                ah.which = ak.which;
                ah.pageX = ak.pageX;
                ah.pageY = ak.pageY;
                al.target.trigger(ah, ai);
                ac(al, am.seriesIndex, am.pointIndex, am.points);
            }
        } else {
            if (am == null ) {
                aa(al);
            }
        }
    }
    function ad(aj, ai, am, al, ak) {
        var ah = ak.plugins.lineRenderer.highlightedSeriesIndex;
        if (ah != null  && ak.series[ah].highlightMouseDown) {
            aa(ak);
        }
    }
    function g(ak, aj, an, am, al) {
        if (am) {
            var ai = [am.seriesIndex, am.pointIndex, am.data];
            var ah = jQuery.Event("jqplotDataClick");
            ah.which = ak.which;
            ah.pageX = ak.pageX;
            ah.pageY = ak.pageY;
            al.target.trigger(ah, ai);
        }
    }
    function s(al, ak, ao, an, am) {
        if (an) {
            var aj = [an.seriesIndex, an.pointIndex, an.data];
            var ah = am.plugins.lineRenderer.highlightedSeriesIndex;
            if (ah != null  && am.series[ah].highlightMouseDown) {
                aa(am);
            }
            var ai = jQuery.Event("jqplotDataRightClick");
            ai.which = al.which;
            ai.pageX = al.pageX;
            ai.pageY = al.pageY;
            am.target.trigger(ai, aj);
        }
    }
    L.jqplot.LinearAxisRenderer = function() {}
    ;
    L.jqplot.LinearAxisRenderer.prototype.init = function(ah) {
        this.breakPoints = null ;
        this.breakTickLabel = "&asymp;";
        this.drawBaseline = true;
        this.baselineWidth = null ;
        this.baselineColor = null ;
        this.forceTickAt0 = false;
        this.forceTickAt100 = false;
        this.tickInset = 0;
        this.minorTicks = 0;
        this.alignTicks = false;
        this._autoFormatString = "";
        this._overrideFormatString = false;
        this._scalefact = 1;
        L.extend(true, this, ah);
        if (this.breakPoints) {
            if (!L.isArray(this.breakPoints)) {
                this.breakPoints = null ;
            } else {
                if (this.breakPoints.length < 2 || this.breakPoints[1] <= this.breakPoints[0]) {
                    this.breakPoints = null ;
                }
            }
        }
        if (this.numberTicks != null  && this.numberTicks < 2) {
            this.numberTicks = 2;
        }
        this.resetDataBounds();
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.draw = function(ah, ao) {
        if (this.show) {
            this.renderer.createTicks.call(this, ao);
            var an = 0;
            var ai;
            if (this._elem) {
                this._elem.emptyForce();
                this._elem = null ;
            }
            this._elem = L(document.createElement("div"));
            this._elem.addClass("jqplot-axis jqplot-" + this.name);
            this._elem.css("position", "absolute");
            if (this.name == "xaxis" || this.name == "x2axis") {
                this._elem.width(this._plotDimensions.width);
            } else {
                this._elem.height(this._plotDimensions.height);
            }
            this.labelOptions.axis = this.name;
            this._label = new this.labelRenderer(this.labelOptions);
            if (this._label.show) {
                var am = this._label.draw(ah, ao);
                am.appendTo(this._elem);
                am = null ;
            }
            var al = this._ticks;
            var ak;
            for (var aj = 0; aj < al.length; aj++) {
                ak = al[aj];
                if (ak.show && ak.showLabel && (!ak.isMinorTick || this.showMinorTicks)) {
                    this._elem.append(ak.draw(ah, ao));
                }
            }
            ak = null ;
            al = null ;
        }
        return this._elem;
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.reset = function() {
        this.min = this._options.min;
        this.max = this._options.max;
        this.tickInterval = this._options.tickInterval;
        this.numberTicks = this._options.numberTicks;
        this._autoFormatString = "";
        if (this._overrideFormatString && this.tickOptions && this.tickOptions.formatString) {
            this.tickOptions.formatString = "";
        }
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.set = function() {
        var ao = 0;
        var aj;
        var ai = 0;
        var an = 0;
        var ah = (this._label == null ) ? false : this._label.show;
        if (this.show) {
            var am = this._ticks;
            var al;
            for (var ak = 0; ak < am.length; ak++) {
                al = am[ak];
                if (!al._breakTick && al.show && al.showLabel && (!al.isMinorTick || this.showMinorTicks)) {
                    if (this.name == "xaxis" || this.name == "x2axis") {
                        aj = al._elem.outerHeight(true);
                    } else {
                        aj = al._elem.outerWidth(true);
                    }
                    if (aj > ao) {
                        ao = aj;
                    }
                }
            }
            al = null ;
            am = null ;
            if (ah) {
                ai = this._label._elem.outerWidth(true);
                an = this._label._elem.outerHeight(true);
            }
            if (this.name == "xaxis") {
                ao = ao + an;
                this._elem.css({
                    height: ao + "px",
                    left: "0px",
                    bottom: "0px"
                });
            } else {
                if (this.name == "x2axis") {
                    ao = ao + an;
                    this._elem.css({
                        height: ao + "px",
                        left: "0px",
                        top: "0px"
                    });
                } else {
                    if (this.name == "yaxis") {
                        ao = ao + ai;
                        this._elem.css({
                            width: ao + "px",
                            left: "0px",
                            top: "0px"
                        });
                        if (ah && this._label.constructor == L.jqplot.AxisLabelRenderer) {
                            this._label._elem.css("width", ai + "px");
                        }
                    } else {
                        ao = ao + ai;
                        this._elem.css({
                            width: ao + "px",
                            right: "0px",
                            top: "0px"
                        });
                        if (ah && this._label.constructor == L.jqplot.AxisLabelRenderer) {
                            this._label._elem.css("width", ai + "px");
                        }
                    }
                }
            }
        }
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.createTicks = function(aj) {
        var aT = this._ticks;
        var aK = this.ticks;
        var az = this.name;
        var aB = this._dataBounds;
        var ah = (this.name.charAt(0) === "x") ? this._plotDimensions.width : this._plotDimensions.height;
        var an;
        var a6, aI;
        var ap, ao;
        var a4, a0;
        var aH = this.min;
        var a5 = this.max;
        var aW = this.numberTicks;
        var ba = this.tickInterval;
        var am = 30;
        this._scalefact = (Math.max(ah, am + 1) - am) / 300;
        if (aK.length) {
            for (a0 = 0; a0 < aK.length; a0++) {
                var aO = aK[a0];
                var aU = new this.tickRenderer(this.tickOptions);
                if (L.isArray(aO)) {
                    aU.value = aO[0];
                    if (this.breakPoints) {
                        if (aO[0] == this.breakPoints[0]) {
                            aU.label = this.breakTickLabel;
                            aU._breakTick = true;
                            aU.showGridline = false;
                            aU.showMark = false;
                        } else {
                            if (aO[0] > this.breakPoints[0] && aO[0] <= this.breakPoints[1]) {
                                aU.show = false;
                                aU.showGridline = false;
                                aU.label = aO[1];
                            } else {
                                aU.label = aO[1];
                            }
                        }
                    } else {
                        aU.label = aO[1];
                    }
                    aU.setTick(aO[0], this.name);
                    this._ticks.push(aU);
                } else {
                    if (L.isPlainObject(aO)) {
                        L.extend(true, aU, aO);
                        aU.axis = this.name;
                        this._ticks.push(aU);
                    } else {
                        aU.value = aO;
                        if (this.breakPoints) {
                            if (aO == this.breakPoints[0]) {
                                aU.label = this.breakTickLabel;
                                aU._breakTick = true;
                                aU.showGridline = false;
                                aU.showMark = false;
                            } else {
                                if (aO > this.breakPoints[0] && aO <= this.breakPoints[1]) {
                                    aU.show = false;
                                    aU.showGridline = false;
                                }
                            }
                        }
                        aU.setTick(aO, this.name);
                        this._ticks.push(aU);
                    }
                }
            }
            this.numberTicks = aK.length;
            this.min = this._ticks[0].value;
            this.max = this._ticks[this.numberTicks - 1].value;
            this.tickInterval = (this.max - this.min) / (this.numberTicks - 1);
        } else {
            if (az == "xaxis" || az == "x2axis") {
                ah = this._plotDimensions.width;
            } else {
                ah = this._plotDimensions.height;
            }
            var ax = this.numberTicks;
            if (this.alignTicks) {
                if (this.name === "x2axis" && aj.axes.xaxis.show) {
                    ax = aj.axes.xaxis.numberTicks;
                } else {
                    if (this.name.charAt(0) === "y" && this.name !== "yaxis" && this.name !== "yMidAxis" && aj.axes.yaxis.show) {
                        ax = aj.axes.yaxis.numberTicks;
                    }
                }
            }
            a6 = ((this.min != null ) ? this.min : aB.min);
            aI = ((this.max != null ) ? this.max : aB.max);
            var av = aI - a6;
            var aS, ay;
            var at;
            if (this.tickOptions == null  || !this.tickOptions.formatString) {
                this._overrideFormatString = true;
            }
            if (this.min == null  || this.max == null  && this.tickInterval == null  && !this.autoscale) {
                if (this.forceTickAt0) {
                    if (a6 > 0) {
                        a6 = 0;
                    }
                    if (aI < 0) {
                        aI = 0;
                    }
                }
                if (this.forceTickAt100) {
                    if (a6 > 100) {
                        a6 = 100;
                    }
                    if (aI < 100) {
                        aI = 100;
                    }
                }
                var aE = false
                  , a1 = false;
                if (this.min != null ) {
                    aE = true;
                } else {
                    if (this.max != null ) {
                        a1 = true;
                    }
                }
                var aP = L.jqplot.LinearTickGenerator(a6, aI, this._scalefact, ax, aE, a1);
                var aw = (this.min != null ) ? a6 : a6 + av * (this.padMin - 1);
                var aQ = (this.max != null ) ? aI : aI - av * (this.padMax - 1);
                if (a6 < aw || aI > aQ) {
                    aw = (this.min != null ) ? a6 : a6 - av * (this.padMin - 1);
                    aQ = (this.max != null ) ? aI : aI + av * (this.padMax - 1);
                    aP = L.jqplot.LinearTickGenerator(aw, aQ, this._scalefact, ax, aE, a1);
                }
                this.min = aP[0];
                this.max = aP[1];
                this.numberTicks = aP[2];
                this._autoFormatString = aP[3];
                this.tickInterval = aP[4];
            } else {
                if (a6 == aI) {
                    var ai = 0.05;
                    if (a6 > 0) {
                        ai = Math.max(Math.log(a6) / Math.LN10, 0.05);
                    }
                    a6 -= ai;
                    aI += ai;
                }
                if (this.autoscale && this.min == null  && this.max == null ) {
                    var ak, al, ar;
                    var aC = false;
                    var aN = false;
                    var aA = {
                        min: null ,
                        max: null ,
                        average: null ,
                        stddev: null 
                    };
                    for (var a0 = 0; a0 < this._series.length; a0++) {
                        var aV = this._series[a0];
                        var aD = (aV.fillAxis == "x") ? aV._xaxis.name : aV._yaxis.name;
                        if (this.name == aD) {
                            var aR = aV._plotValues[aV.fillAxis];
                            var aG = aR[0];
                            var a2 = aR[0];
                            for (var aZ = 1; aZ < aR.length; aZ++) {
                                if (aR[aZ] < aG) {
                                    aG = aR[aZ];
                                } else {
                                    if (aR[aZ] > a2) {
                                        a2 = aR[aZ];
                                    }
                                }
                            }
                            var au = (a2 - aG) / a2;
                            if (aV.renderer.constructor == L.jqplot.BarRenderer) {
                                if (aG >= 0 && (aV.fillToZero || au > 0.1)) {
                                    aC = true;
                                } else {
                                    aC = false;
                                    if (aV.fill && aV.fillToZero && aG < 0 && a2 > 0) {
                                        aN = true;
                                    } else {
                                        aN = false;
                                    }
                                }
                            } else {
                                if (aV.fill) {
                                    if (aG >= 0 && (aV.fillToZero || au > 0.1)) {
                                        aC = true;
                                    } else {
                                        if (aG < 0 && a2 > 0 && aV.fillToZero) {
                                            aC = false;
                                            aN = true;
                                        } else {
                                            aC = false;
                                            aN = false;
                                        }
                                    }
                                } else {
                                    if (aG < 0) {
                                        aC = false;
                                    }
                                }
                            }
                        }
                    }
                    if (aC) {
                        this.numberTicks = 2 + Math.ceil((ah - (this.tickSpacing - 1)) / this.tickSpacing);
                        this.min = 0;
                        aH = 0;
                        al = aI / (this.numberTicks - 1);
                        at = Math.pow(10, Math.abs(Math.floor(Math.log(al) / Math.LN10)));
                        if (al / at == parseInt(al / at, 10)) {
                            al += at;
                        }
                        this.tickInterval = Math.ceil(al / at) * at;
                        this.max = this.tickInterval * (this.numberTicks - 1);
                    } else {
                        if (aN) {
                            this.numberTicks = 2 + Math.ceil((ah - (this.tickSpacing - 1)) / this.tickSpacing);
                            var aJ = Math.ceil(Math.abs(a6) / av * (this.numberTicks - 1));
                            var a9 = this.numberTicks - 1 - aJ;
                            al = Math.max(Math.abs(a6 / aJ), Math.abs(aI / a9));
                            at = Math.pow(10, Math.abs(Math.floor(Math.log(al) / Math.LN10)));
                            this.tickInterval = Math.ceil(al / at) * at;
                            this.max = this.tickInterval * a9;
                            this.min = -this.tickInterval * aJ;
                        } else {
                            if (this.numberTicks == null ) {
                                if (this.tickInterval) {
                                    this.numberTicks = 3 + Math.ceil(av / this.tickInterval);
                                } else {
                                    this.numberTicks = 2 + Math.ceil((ah - (this.tickSpacing - 1)) / this.tickSpacing);
                                }
                            }
                            if (this.tickInterval == null ) {
                                al = av / (this.numberTicks - 1);
                                if (al < 1) {
                                    at = Math.pow(10, Math.abs(Math.floor(Math.log(al) / Math.LN10)));
                                } else {
                                    at = 1;
                                }
                                this.tickInterval = Math.ceil(al * at * this.pad) / at;
                            } else {
                                at = 1 / this.tickInterval;
                            }
                            ak = this.tickInterval * (this.numberTicks - 1);
                            ar = (ak - av) / 2;
                            if (this.min == null ) {
                                this.min = Math.floor(at * (a6 - ar)) / at;
                            }
                            if (this.max == null ) {
                                this.max = this.min + ak;
                            }
                        }
                    }
                    var aF = L.jqplot.getSignificantFigures(this.tickInterval);
                    var aM;
                    if (aF.digitsLeft >= aF.significantDigits) {
                        aM = "%d";
                    } else {
                        var at = Math.max(0, 5 - aF.digitsLeft);
                        at = Math.min(at, aF.digitsRight);
                        aM = "%." + at + "f";
                    }
                    this._autoFormatString = aM;
                } else {
                    aS = (this.min != null ) ? this.min : a6 - av * (this.padMin - 1);
                    ay = (this.max != null ) ? this.max : aI + av * (this.padMax - 1);
                    av = ay - aS;
                    if (this.numberTicks == null ) {
                        if (this.tickInterval != null ) {
                            this.numberTicks = Math.ceil((ay - aS) / this.tickInterval) + 1;
                        } else {
                            if (ah > 100) {
                                this.numberTicks = parseInt(3 + (ah - 100) / 75, 10);
                            } else {
                                this.numberTicks = 2;
                            }
                        }
                    }
                    if (this.tickInterval == null ) {
                        this.tickInterval = av / (this.numberTicks - 1);
                    }
                    if (this.max == null ) {
                        ay = aS + this.tickInterval * (this.numberTicks - 1);
                    }
                    if (this.min == null ) {
                        aS = ay - this.tickInterval * (this.numberTicks - 1);
                    }
                    var aF = L.jqplot.getSignificantFigures(this.tickInterval);
                    var aM;
                    if (aF.digitsLeft >= aF.significantDigits) {
                        aM = "%d";
                    } else {
                        var at = Math.max(0, 5 - aF.digitsLeft);
                        at = Math.min(at, aF.digitsRight);
                        aM = "%." + at + "f";
                    }
                    this._autoFormatString = aM;
                    this.min = aS;
                    this.max = ay;
                }
                if (this.renderer.constructor == L.jqplot.LinearAxisRenderer && this._autoFormatString == "") {
                    av = this.max - this.min;
                    var a7 = new this.tickRenderer(this.tickOptions);
                    var aL = a7.formatString || L.jqplot.config.defaultTickFormatString;
                    var aL = aL.match(L.jqplot.sprintf.regex)[0];
                    var a3 = 0;
                    if (aL) {
                        if (aL.search(/[fFeEgGpP]/) > -1) {
                            var aY = aL.match(/\%\.(\d{0,})?[eEfFgGpP]/);
                            if (aY) {
                                a3 = parseInt(aY[1], 10);
                            } else {
                                a3 = 6;
                            }
                        } else {
                            if (aL.search(/[di]/) > -1) {
                                a3 = 0;
                            }
                        }
                        var aq = Math.pow(10, -a3);
                        if (this.tickInterval < aq) {
                            if (aW == null  && ba == null ) {
                                this.tickInterval = aq;
                                if (a5 == null  && aH == null ) {
                                    this.min = Math.floor(this._dataBounds.min / aq) * aq;
                                    if (this.min == this._dataBounds.min) {
                                        this.min = this._dataBounds.min - this.tickInterval;
                                    }
                                    this.max = Math.ceil(this._dataBounds.max / aq) * aq;
                                    if (this.max == this._dataBounds.max) {
                                        this.max = this._dataBounds.max + this.tickInterval;
                                    }
                                    var aX = (this.max - this.min) / this.tickInterval;
                                    aX = aX.toFixed(11);
                                    aX = Math.ceil(aX);
                                    this.numberTicks = aX + 1;
                                } else {
                                    if (a5 == null ) {
                                        var aX = (this._dataBounds.max - this.min) / this.tickInterval;
                                        aX = aX.toFixed(11);
                                        this.numberTicks = Math.ceil(aX) + 2;
                                        this.max = this.min + this.tickInterval * (this.numberTicks - 1);
                                    } else {
                                        if (aH == null ) {
                                            var aX = (this.max - this._dataBounds.min) / this.tickInterval;
                                            aX = aX.toFixed(11);
                                            this.numberTicks = Math.ceil(aX) + 2;
                                            this.min = this.max - this.tickInterval * (this.numberTicks - 1);
                                        } else {
                                            this.numberTicks = Math.ceil((a5 - aH) / this.tickInterval) + 1;
                                            this.min = Math.floor(aH * Math.pow(10, a3)) / Math.pow(10, a3);
                                            this.max = Math.ceil(a5 * Math.pow(10, a3)) / Math.pow(10, a3);
                                            this.numberTicks = Math.ceil((this.max - this.min) / this.tickInterval) + 1;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            if (this._overrideFormatString && this._autoFormatString != "") {
                this.tickOptions = this.tickOptions || {};
                this.tickOptions.formatString = this._autoFormatString;
            }
            var aU, a8;
            for (var a0 = 0; a0 < this.numberTicks; a0++) {
                a4 = this.min + a0 * this.tickInterval;
                aU = new this.tickRenderer(this.tickOptions);
                aU.setTick(a4, this.name);
                this._ticks.push(aU);
                if (a0 < this.numberTicks - 1) {
                    for (var aZ = 0; aZ < this.minorTicks; aZ++) {
                        a4 += this.tickInterval / (this.minorTicks + 1);
                        a8 = L.extend(true, {}, this.tickOptions, {
                            name: this.name,
                            value: a4,
                            label: "",
                            isMinorTick: true
                        });
                        aU = new this.tickRenderer(a8);
                        this._ticks.push(aU);
                    }
                }
                aU = null ;
            }
        }
        if (this.tickInset) {
            this.min = this.min - this.tickInset * this.tickInterval;
            this.max = this.max + this.tickInset * this.tickInterval;
        }
        aT = null ;
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.resetTickValues = function(aj) {
        if (L.isArray(aj) && aj.length == this._ticks.length) {
            var ai;
            for (var ah = 0; ah < aj.length; ah++) {
                ai = this._ticks[ah];
                ai.value = aj[ah];
                ai.label = ai.formatter(ai.formatString, aj[ah]);
                ai.label = ai.prefix + ai.label;
                ai._elem.html(ai.label);
            }
            ai = null ;
            this.min = L.jqplot.arrayMin(aj);
            this.max = L.jqplot.arrayMax(aj);
            this.pack();
        }
    }
    ;
    L.jqplot.LinearAxisRenderer.prototype.pack = function(aj, ai) {
        aj = aj || {};
        ai = ai || this._offsets;
        var ay = this._ticks;
        var au = this.max;
        var at = this.min;
        var ao = ai.max;
        var am = ai.min;
        var aq = (this._label == null ) ? false : this._label.show;
        for (var ar in aj) {
            this._elem.css(ar, aj[ar]);
        }
        this._offsets = ai;
        var ak = ao - am;
        var al = au - at;
        if (this.breakPoints) {
            al = al - this.breakPoints[1] + this.breakPoints[0];
            this.p2u = function(aA) {
                return (aA - am) * al / ak + at;
            }
            ;
            this.u2p = function(aA) {
                if (aA > this.breakPoints[0] && aA < this.breakPoints[1]) {
                    aA = this.breakPoints[0];
                }
                if (aA <= this.breakPoints[0]) {
                    return (aA - at) * ak / al + am;
                } else {
                    return (aA - this.breakPoints[1] + this.breakPoints[0] - at) * ak / al + am;
                }
            }
            ;
            if (this.name.charAt(0) == "x") {
                this.series_u2p = function(aA) {
                    if (aA > this.breakPoints[0] && aA < this.breakPoints[1]) {
                        aA = this.breakPoints[0];
                    }
                    if (aA <= this.breakPoints[0]) {
                        return (aA - at) * ak / al;
                    } else {
                        return (aA - this.breakPoints[1] + this.breakPoints[0] - at) * ak / al;
                    }
                }
                ;
                this.series_p2u = function(aA) {
                    return aA * al / ak + at;
                }
                ;
            } else {
                this.series_u2p = function(aA) {
                    if (aA > this.breakPoints[0] && aA < this.breakPoints[1]) {
                        aA = this.breakPoints[0];
                    }
                    if (aA >= this.breakPoints[1]) {
                        return (aA - au) * ak / al;
                    } else {
                        return (aA + this.breakPoints[1] - this.breakPoints[0] - au) * ak / al;
                    }
                }
                ;
                this.series_p2u = function(aA) {
                    return aA * al / ak + au;
                }
                ;
            }
        } else {
            this.p2u = function(aA) {
                return (aA - am) * al / ak + at;
            }
            ;
            this.u2p = function(aA) {
                return (aA - at) * ak / al + am;
            }
            ;
            if (this.name == "xaxis" || this.name == "x2axis") {
                this.series_u2p = function(aA) {
                    return (aA - at) * ak / al;
                }
                ;
                this.series_p2u = function(aA) {
                    return aA * al / ak + at;
                }
                ;
            } else {
                this.series_u2p = function(aA) {
                    return (aA - au) * ak / al;
                }
                ;
                this.series_p2u = function(aA) {
                    return aA * al / ak + au;
                }
                ;
            }
        }
        if (this.show) {
            if (this.name == "xaxis" || this.name == "x2axis") {
                for (var av = 0; av < ay.length; av++) {
                    var ap = ay[av];
                    if (ap.show && ap.showLabel) {
                        var ah;
                        if (ap.constructor == L.jqplot.CanvasAxisTickRenderer && ap.angle) {
                            var ax = (this.name == "xaxis") ? 1 : -1;
                            switch (ap.labelPosition) {
                            case "auto":
                                if (ax * ap.angle < 0) {
                                    ah = -ap.getWidth() + ap._textRenderer.height * Math.sin(-ap._textRenderer.angle) / 2;
                                } else {
                                    ah = -ap._textRenderer.height * Math.sin(ap._textRenderer.angle) / 2;
                                }
                                break;
                            case "end":
                                ah = -ap.getWidth() + ap._textRenderer.height * Math.sin(-ap._textRenderer.angle) / 2;
                                break;
                            case "start":
                                ah = -ap._textRenderer.height * Math.sin(ap._textRenderer.angle) / 2;
                                break;
                            case "middle":
                                ah = -ap.getWidth() / 2 + ap._textRenderer.height * Math.sin(-ap._textRenderer.angle) / 2;
                                break;
                            default:
                                ah = -ap.getWidth() / 2 + ap._textRenderer.height * Math.sin(-ap._textRenderer.angle) / 2;
                                break;
                            }
                        } else {
                            ah = -ap.getWidth() / 2;
                        }
                        var az = this.u2p(ap.value) + ah + "px";
                        ap._elem.css("left", az);
                        ap.pack();
                    }
                }
                if (aq) {
                    var an = this._label._elem.outerWidth(true);
                    this._label._elem.css("left", am + ak / 2 - an / 2 + "px");
                    if (this.name == "xaxis") {
                        this._label._elem.css("bottom", "0px");
                    } else {
                        this._label._elem.css("top", "0px");
                    }
                    this._label.pack();
                }
            } else {
                for (var av = 0; av < ay.length; av++) {
                    var ap = ay[av];
                    if (ap.show && ap.showLabel) {
                        var ah;
                        if (ap.constructor == L.jqplot.CanvasAxisTickRenderer && ap.angle) {
                            var ax = (this.name == "yaxis") ? 1 : -1;
                            switch (ap.labelPosition) {
                            case "auto":
                            case "end":
                                if (ax * ap.angle < 0) {
                                    ah = -ap._textRenderer.height * Math.cos(-ap._textRenderer.angle) / 2;
                                } else {
                                    ah = -ap.getHeight() + ap._textRenderer.height * Math.cos(ap._textRenderer.angle) / 2;
                                }
                                break;
                            case "start":
                                if (ap.angle > 0) {
                                    ah = -ap._textRenderer.height * Math.cos(-ap._textRenderer.angle) / 2;
                                } else {
                                    ah = -ap.getHeight() + ap._textRenderer.height * Math.cos(ap._textRenderer.angle) / 2;
                                }
                                break;
                            case "middle":
                                ah = -ap.getHeight() / 2;
                                break;
                            default:
                                ah = -ap.getHeight() / 2;
                                break;
                            }
                        } else {
                            ah = -ap.getHeight() / 2;
                        }
                        var az = this.u2p(ap.value) + ah + "px";
                        ap._elem.css("top", az);
                        ap.pack();
                    }
                }
                if (aq) {
                    var aw = this._label._elem.outerHeight(true);
                    this._label._elem.css("top", ao - ak / 2 - aw / 2 + "px");
                    if (this.name == "yaxis") {
                        this._label._elem.css("left", "0px");
                    } else {
                        this._label._elem.css("right", "0px");
                    }
                    this._label.pack();
                }
            }
        }
        ay = null ;
    }
    ;
    function i(ai) {
        var ah;
        ai = Math.abs(ai);
        if (ai >= 10) {
            ah = "%d";
        } else {
            if (ai > 1) {
                if (ai === parseInt(ai, 10)) {
                    ah = "%d";
                } else {
                    ah = "%.1f";
                }
            } else {
                var aj = -Math.floor(Math.log(ai) / Math.LN10);
                ah = "%." + aj + "f";
            }
        }
        return ah;
    }
    var b = [0.1, 0.2, 0.3, 0.4, 0.5, 0.8, 1, 2, 3, 4, 5];
    var c = function(ai) {
        var ah = b.indexOf(ai);
        if (ah > 0) {
            return b[ah - 1];
        } else {
            return b[b.length - 1] / 100;
        }
    }
    ;
    var k = function(ai) {
        var ah = b.indexOf(ai);
        if (ah < b.length - 1) {
            return b[ah + 1];
        } else {
            return b[0] * 100;
        }
    }
    ;
    function d(al, au, at) {
        var aq = Math.floor(at / 2);
        var ai = Math.ceil(at * 1.5);
        var ak = Number.MAX_VALUE;
        var ah = (au - al);
        var ax;
        var ap;
        var ar;
        var ay = L.jqplot.getSignificantFigures;
        var aw;
        var an;
        var ao;
        var av;
        for (var am = 0, aj = ai - aq + 1; am < aj; am++) {
            ao = aq + am;
            ax = ah / (ao - 1);
            ap = ay(ax);
            ax = Math.abs(at - ao) + ap.digitsRight;
            if (ax < ak) {
                ak = ax;
                ar = ao;
                av = ap.digitsRight;
            } else {
                if (ax === ak) {
                    if (ap.digitsRight < av) {
                        ar = ao;
                        av = ap.digitsRight;
                    }
                }
            }
        }
        aw = Math.max(av, Math.max(ay(al).digitsRight, ay(au).digitsRight));
        if (aw === 0) {
            an = "%d";
        } else {
            an = "%." + aw + "f";
        }
        ax = ah / (ar - 1);
        return [al, au, ar, an, ax];
    }
    function W(ai, al) {
        al = al || 7;
        var ak = ai / (al - 1);
        var aj = Math.pow(10, Math.floor(Math.log(ak) / Math.LN10));
        var am = ak / aj;
        var ah;
        if (aj < 1) {
            if (am > 5) {
                ah = 10 * aj;
            } else {
                if (am > 2) {
                    ah = 5 * aj;
                } else {
                    if (am > 1) {
                        ah = 2 * aj;
                    } else {
                        ah = aj;
                    }
                }
            }
        } else {
            if (am > 5) {
                ah = 10 * aj;
            } else {
                if (am > 4) {
                    ah = 5 * aj;
                } else {
                    if (am > 3) {
                        ah = 4 * aj;
                    } else {
                        if (am > 2) {
                            ah = 3 * aj;
                        } else {
                            if (am > 1) {
                                ah = 2 * aj;
                            } else {
                                ah = aj;
                            }
                        }
                    }
                }
            }
        }
        return ah;
    }
    function Q(ai, ah) {
        ah = ah || 1;
        var ak = Math.floor(Math.log(ai) / Math.LN10);
        var am = Math.pow(10, ak);
        var al = ai / am;
        var aj;
        al = al / ah;
        if (al <= 0.38) {
            aj = 0.1;
        } else {
            if (al <= 1.6) {
                aj = 0.2;
            } else {
                if (al <= 4) {
                    aj = 0.5;
                } else {
                    if (al <= 8) {
                        aj = 1;
                    } else {
                        if (al <= 16) {
                            aj = 2;
                        } else {
                            aj = 5;
                        }
                    }
                }
            }
        }
        return aj * am;
    }
    function x(aj, ai) {
        var al = Math.floor(Math.log(aj) / Math.LN10);
        var an = Math.pow(10, al);
        var am = aj / an;
        var ah;
        var ak;
        am = am / ai;
        if (am <= 0.38) {
            ak = 0.1;
        } else {
            if (am <= 1.6) {
                ak = 0.2;
            } else {
                if (am <= 4) {
                    ak = 0.5;
                } else {
                    if (am <= 8) {
                        ak = 1;
                    } else {
                        if (am <= 16) {
                            ak = 2;
                        } else {
                            ak = 5;
                        }
                    }
                }
            }
        }
        ah = ak * an;
        return [ah, ak, an];
    }
    L.jqplot.LinearTickGenerator = function(an, aq, aj, ak, ao, ar) {
        ao = (ao === null ) ? false : ao;
        ar = (ar === null  || ao) ? false : ar;
        if (an === aq) {
            aq = (aq) ? 0 : 1;
        }
        aj = aj || 1;
        if (aq < an) {
            var at = aq;
            aq = an;
            an = at;
        }
        var ai = [];
        var aw = Q(aq - an, aj);
        var av = L.jqplot.getSignificantFigures;
        if (ak == null ) {
            if (!ao && !ar) {
                ai[0] = Math.floor(an / aw) * aw;
                ai[1] = Math.ceil(aq / aw) * aw;
                ai[2] = Math.round((ai[1] - ai[0]) / aw + 1);
                ai[3] = i(aw);
                ai[4] = aw;
            } else {
                if (ao) {
                    ai[0] = an;
                    ai[2] = Math.ceil((aq - an) / aw + 1);
                    ai[1] = an + (ai[2] - 1) * aw;
                    var au = av(an).digitsRight;
                    var ap = av(aw).digitsRight;
                    if (au < ap) {
                        ai[3] = i(aw);
                    } else {
                        ai[3] = "%." + au + "f";
                    }
                    ai[4] = aw;
                } else {
                    if (ar) {
                        ai[1] = aq;
                        ai[2] = Math.ceil((aq - an) / aw + 1);
                        ai[0] = aq - (ai[2] - 1) * aw;
                        var al = av(aq).digitsRight;
                        var ap = av(aw).digitsRight;
                        if (al < ap) {
                            ai[3] = i(aw);
                        } else {
                            ai[3] = "%." + al + "f";
                        }
                        ai[4] = aw;
                    }
                }
            }
        } else {
            var am = [];
            am[0] = Math.floor(an / aw) * aw;
            am[1] = Math.ceil(aq / aw) * aw;
            am[2] = Math.round((am[1] - am[0]) / aw + 1);
            am[3] = i(aw);
            am[4] = aw;
            if (am[2] === ak) {
                ai = am;
            } else {
                var ah = W(am[1] - am[0], ak);
                ai[0] = am[0];
                ai[2] = ak;
                ai[4] = ah;
                ai[3] = i(ah);
                ai[1] = ai[0] + (ai[2] - 1) * ai[4];
            }
        }
        return ai;
    }
    ;
    L.jqplot.LinearTickGenerator.bestLinearInterval = Q;
    L.jqplot.LinearTickGenerator.bestInterval = W;
    L.jqplot.LinearTickGenerator.bestLinearComponents = x;
    L.jqplot.LinearTickGenerator.bestConstrainedInterval = d;
    L.jqplot.MarkerRenderer = function(ah) {
        this.show = true;
        this.style = "filledCircle";
        this.lineWidth = 2;
        this.size = 9;
        this.color = "#666666";
        this.shadow = true;
        this.shadowAngle = 45;
        this.shadowOffset = 1;
        this.shadowDepth = 3;
        this.shadowAlpha = "0.07";
        this.shadowRenderer = new L.jqplot.ShadowRenderer();
        this.shapeRenderer = new L.jqplot.ShapeRenderer();
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
        var aj = {
            angle: this.shadowAngle,
            offset: this.shadowOffset,
            alpha: this.shadowAlpha,
            lineWidth: this.lineWidth,
            depth: this.shadowDepth,
            closePath: true
        };
        if (this.style.indexOf("filled") != -1) {
            aj.fill = true;
        }
        if (this.style.indexOf("ircle") != -1) {
            aj.isarc = true;
            aj.closePath = false;
        }
        this.shadowRenderer.init(aj);
        var ai = {
            fill: false,
            isarc: false,
            strokeStyle: this.color,
            fillStyle: this.color,
            lineWidth: this.lineWidth,
            closePath: true
        };
        if (this.style.indexOf("filled") != -1) {
            ai.fill = true;
        }
        if (this.style.indexOf("ircle") != -1) {
            ai.isarc = true;
            ai.closePath = false;
        }
        this.shapeRenderer.init(ai);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawDiamond = function(aj, ai, am, al, ao) {
        var ah = 1.2;
        var ap = this.size / 2 / ah;
        var an = this.size / 2 * ah;
        var ak = [[aj - ap, ai], [aj, ai + an], [aj + ap, ai], [aj, ai - an]];
        if (this.shadow) {
            this.shadowRenderer.draw(am, ak);
        }
        this.shapeRenderer.draw(am, ak, ao);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawPlus = function(ak, aj, an, am, aq) {
        var ai = 1;
        var ar = this.size / 2 * ai;
        var ao = this.size / 2 * ai;
        var ap = [[ak, aj - ao], [ak, aj + ao]];
        var al = [[ak + ar, aj], [ak - ar, aj]];
        var ah = L.extend(true, {}, this.options, {
            closePath: false
        });
        if (this.shadow) {
            this.shadowRenderer.draw(an, ap, {
                closePath: false
            });
            this.shadowRenderer.draw(an, al, {
                closePath: false
            });
        }
        this.shapeRenderer.draw(an, ap, ah);
        this.shapeRenderer.draw(an, al, ah);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawX = function(ak, aj, an, am, aq) {
        var ai = 1;
        var ar = this.size / 2 * ai;
        var ao = this.size / 2 * ai;
        var ah = L.extend(true, {}, this.options, {
            closePath: false
        });
        var ap = [[ak - ar, aj - ao], [ak + ar, aj + ao]];
        var al = [[ak - ar, aj + ao], [ak + ar, aj - ao]];
        if (this.shadow) {
            this.shadowRenderer.draw(an, ap, {
                closePath: false
            });
            this.shadowRenderer.draw(an, al, {
                closePath: false
            });
        }
        this.shapeRenderer.draw(an, ap, ah);
        this.shapeRenderer.draw(an, al, ah);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawDash = function(aj, ai, am, al, ao) {
        var ah = 1;
        var ap = this.size / 2 * ah;
        var an = this.size / 2 * ah;
        var ak = [[aj - ap, ai], [aj + ap, ai]];
        if (this.shadow) {
            this.shadowRenderer.draw(am, ak);
        }
        this.shapeRenderer.draw(am, ak, ao);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawLine = function(am, al, ah, ak, ai) {
        var aj = [am, al];
        if (this.shadow) {
            this.shadowRenderer.draw(ah, aj);
        }
        this.shapeRenderer.draw(ah, aj, ai);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawSquare = function(aj, ai, am, al, ao) {
        var ah = 1;
        var ap = this.size / 2 / ah;
        var an = this.size / 2 * ah;
        var ak = [[aj - ap, ai - an], [aj - ap, ai + an], [aj + ap, ai + an], [aj + ap, ai - an]];
        if (this.shadow) {
            this.shadowRenderer.draw(am, ak);
        }
        this.shapeRenderer.draw(am, ak, ao);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.drawCircle = function(ai, ao, ak, an, al) {
        var ah = this.size / 2;
        var aj = 2 * Math.PI;
        var am = [ai, ao, ah, 0, aj, true];
        if (this.shadow) {
            this.shadowRenderer.draw(ak, am);
        }
        this.shapeRenderer.draw(ak, am, al);
    }
    ;
    L.jqplot.MarkerRenderer.prototype.draw = function(ah, ak, ai, aj) {
        aj = aj || {};
        if (aj.show == null  || aj.show != false) {
            if (aj.color && !aj.fillStyle) {
                aj.fillStyle = aj.color;
            }
            if (aj.color && !aj.strokeStyle) {
                aj.strokeStyle = aj.color;
            }
            switch (this.style) {
            case "diamond":
                this.drawDiamond(ah, ak, ai, false, aj);
                break;
            case "filledDiamond":
                this.drawDiamond(ah, ak, ai, true, aj);
                break;
            case "circle":
                this.drawCircle(ah, ak, ai, false, aj);
                break;
            case "filledCircle":
                this.drawCircle(ah, ak, ai, true, aj);
                break;
            case "square":
                this.drawSquare(ah, ak, ai, false, aj);
                break;
            case "filledSquare":
                this.drawSquare(ah, ak, ai, true, aj);
                break;
            case "x":
                this.drawX(ah, ak, ai, true, aj);
                break;
            case "plus":
                this.drawPlus(ah, ak, ai, true, aj);
                break;
            case "dash":
                this.drawDash(ah, ak, ai, true, aj);
                break;
            case "line":
                this.drawLine(ah, ak, ai, false, aj);
                break;
            default:
                this.drawDiamond(ah, ak, ai, false, aj);
                break;
            }
        }
    }
    ;
    L.jqplot.ShadowRenderer = function(ah) {
        this.angle = 45;
        this.offset = 1;
        this.alpha = 0.07;
        this.lineWidth = 1.5;
        this.lineJoin = "miter";
        this.lineCap = "round";
        this.closePath = false;
        this.fill = false;
        this.depth = 3;
        this.strokeStyle = "rgba(0,0,0,0.1)";
        this.isarc = false;
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.ShadowRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.ShadowRenderer.prototype.draw = function(av, at, ax) {
        av.save();
        var ah = (ax != null ) ? ax : {};
        var au = (ah.fill != null ) ? ah.fill : this.fill;
        var ap = (ah.fillRect != null ) ? ah.fillRect : this.fillRect;
        var ao = (ah.closePath != null ) ? ah.closePath : this.closePath;
        var al = (ah.offset != null ) ? ah.offset : this.offset;
        var aj = (ah.alpha != null ) ? ah.alpha : this.alpha;
        var an = (ah.depth != null ) ? ah.depth : this.depth;
        var aw = (ah.isarc != null ) ? ah.isarc : this.isarc;
        var aq = (ah.linePattern != null ) ? ah.linePattern : this.linePattern;
        av.lineWidth = (ah.lineWidth != null ) ? ah.lineWidth : this.lineWidth;
        av.lineJoin = (ah.lineJoin != null ) ? ah.lineJoin : this.lineJoin;
        av.lineCap = (ah.lineCap != null ) ? ah.lineCap : this.lineCap;
        av.strokeStyle = ah.strokeStyle || this.strokeStyle || "rgba(0,0,0," + aj + ")";
        av.fillStyle = ah.fillStyle || this.fillStyle || "rgba(0,0,0," + aj + ")";
        for (var ak = 0; ak < an; ak++) {
            var ar = L.jqplot.LinePattern(av, aq);
            av.translate(Math.cos(this.angle * Math.PI / 180) * al, Math.sin(this.angle * Math.PI / 180) * al);
            ar.beginPath();
            if (aw) {
                av.arc(at[0], at[1], at[2], at[3], at[4], true);
            } else {
                if (ap) {
                    if (ap) {
                        av.fillRect(at[0], at[1], at[2], at[3]);
                    }
                } else {
                    if (at && at.length) {
                        var ai = true;
                        for (var am = 0; am < at.length; am++) {
                            if (at[am][0] != null  && at[am][1] != null ) {
                                if (ai) {
                                    ar.moveTo(at[am][0], at[am][1]);
                                    ai = false;
                                } else {
                                    ar.lineTo(at[am][0], at[am][1]);
                                }
                            } else {
                                ai = true;
                            }
                        }
                    }
                }
            }
            if (ao) {
                ar.closePath();
            }
            if (au) {
                av.fill();
            } else {
                av.stroke();
            }
        }
        av.restore();
    }
    ;
    L.jqplot.ShapeRenderer = function(ah) {
        this.lineWidth = 1.5;
        this.linePattern = "solid";
        this.lineJoin = "miter";
        this.lineCap = "round";
        this.closePath = false;
        this.fill = false;
        this.isarc = false;
        this.fillRect = false;
        this.strokeRect = false;
        this.clearRect = false;
        this.strokeStyle = "#999999";
        this.fillStyle = "#999999";
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.ShapeRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.ShapeRenderer.prototype.draw = function(at, aq, av) {
        at.save();
        var ah = (av != null ) ? av : {};
        var ar = (ah.fill != null ) ? ah.fill : this.fill;
        var am = (ah.closePath != null ) ? ah.closePath : this.closePath;
        var an = (ah.fillRect != null ) ? ah.fillRect : this.fillRect;
        var ak = (ah.strokeRect != null ) ? ah.strokeRect : this.strokeRect;
        var ai = (ah.clearRect != null ) ? ah.clearRect : this.clearRect;
        var au = (ah.isarc != null ) ? ah.isarc : this.isarc;
        var ao = (ah.linePattern != null ) ? ah.linePattern : this.linePattern;
        var ap = L.jqplot.LinePattern(at, ao);
        at.lineWidth = ah.lineWidth || this.lineWidth;
        at.lineJoin = ah.lineJoin || this.lineJoin;
        at.lineCap = ah.lineCap || this.lineCap;
        at.strokeStyle = (ah.strokeStyle || ah.color) || this.strokeStyle;
        at.fillStyle = ah.fillStyle || this.fillStyle;
        at.beginPath();
        if (au) {
            at.arc(aq[0], aq[1], aq[2], aq[3], aq[4], true);
            if (am) {
                at.closePath();
            }
            if (ar) {
                at.fill();
            } else {
                at.stroke();
            }
            at.restore();
            return;
        } else {
            if (ai) {
                at.clearRect(aq[0], aq[1], aq[2], aq[3]);
                at.restore();
                return;
            } else {
                if (an || ak) {
                    if (an) {
                        at.fillRect(aq[0], aq[1], aq[2], aq[3]);
                    }
                    if (ak) {
                        at.strokeRect(aq[0], aq[1], aq[2], aq[3]);
                        at.restore();
                        return;
                    }
                } else {
                    if (aq && aq.length) {
                        var aj = true;
                        for (var al = 0; al < aq.length; al++) {
                            if (aq[al][0] != null  && aq[al][1] != null ) {
                                if (aj) {
                                    ap.moveTo(aq[al][0], aq[al][1]);
                                    aj = false;
                                } else {
                                    ap.lineTo(aq[al][0], aq[al][1]);
                                }
                            } else {
                                aj = true;
                            }
                        }
                        if (am) {
                            ap.closePath();
                        }
                        if (ar) {
                            at.fill();
                        } else {
                            at.stroke();
                        }
                    }
                }
            }
        }
        at.restore();
    }
    ;
    L.jqplot.TableLegendRenderer = function() {}
    ;
    L.jqplot.TableLegendRenderer.prototype.init = function(ah) {
        L.extend(true, this, ah);
    }
    ;
    L.jqplot.TableLegendRenderer.prototype.addrow = function(aq, ak, ah, ao) {
        var al = (ah) ? this.rowSpacing + "px" : "0px";
        var ap;
        var aj;
        var ai;
        var an;
        var am;
        ai = document.createElement("tr");
        ap = L(ai);
        ap.addClass("jqplot-table-legend");
        ai = null ;
        if (ao) {
            ap.prependTo(this._elem);
        } else {
            ap.appendTo(this._elem);
        }
        if (this.showSwatches) {
            aj = L(document.createElement("td"));
            aj.addClass("jqplot-table-legend jqplot-table-legend-swatch");
            aj.css({
                textAlign: "center",
                paddingTop: al
            });
            an = L(document.createElement("div"));
            an.addClass("jqplot-table-legend-swatch-outline");
            am = L(document.createElement("div"));
            am.addClass("jqplot-table-legend-swatch");
            am.css({
                backgroundColor: ak,
                borderColor: ak
            });
            ap.append(aj.append(an.append(am)));
        }
        if (this.showLabels) {
            aj = L(document.createElement("td"));
            aj.addClass("jqplot-table-legend jqplot-table-legend-label");
            aj.css("paddingTop", al);
            ap.append(aj);
            if (this.escapeHtml) {
                aj.text(aq);
            } else {
                aj.html(aq);
            }
        }
        aj = null ;
        an = null ;
        am = null ;
        ap = null ;
        ai = null ;
    }
    ;
    L.jqplot.TableLegendRenderer.prototype.draw = function() {
        if (this._elem) {
            this._elem.emptyForce();
            this._elem = null ;
        }
        if (this.show) {
            var am = this._series;
            var ai = document.createElement("table");
            this._elem = L(ai);
            this._elem.addClass("jqplot-table-legend");
            var ar = {
                position: "absolute"
            };
            if (this.background) {
                ar.background = this.background;
            }
            if (this.border) {
                ar.border = this.border;
            }
            if (this.fontSize) {
                ar.fontSize = this.fontSize;
            }
            if (this.fontFamily) {
                ar.fontFamily = this.fontFamily;
            }
            if (this.textColor) {
                ar.textColor = this.textColor;
            }
            if (this.marginTop != null ) {
                ar.marginTop = this.marginTop;
            }
            if (this.marginBottom != null ) {
                ar.marginBottom = this.marginBottom;
            }
            if (this.marginLeft != null ) {
                ar.marginLeft = this.marginLeft;
            }
            if (this.marginRight != null ) {
                ar.marginRight = this.marginRight;
            }
            var ah = false, ao = false, aq;
            for (var an = 0; an < am.length; an++) {
                aq = am[an];
                if (aq._stack || aq.renderer.constructor == L.jqplot.BezierCurveRenderer) {
                    ao = true;
                }
                if (aq.show && aq.showLabel) {
                    var al = this.labels[an] || aq.label.toString();
                    if (al) {
                        var aj = aq.color;
                        if (ao && an < am.length - 1) {
                            ah = true;
                        } else {
                            if (ao && an == am.length - 1) {
                                ah = false;
                            }
                        }
                        this.renderer.addrow.call(this, al, aj, ah, ao);
                        ah = true;
                    }
                    for (var ak = 0; ak < L.jqplot.addLegendRowHooks.length; ak++) {
                        var ap = L.jqplot.addLegendRowHooks[ak].call(this, aq);
                        if (ap) {
                            this.renderer.addrow.call(this, ap.label, ap.color, ah);
                            ah = true;
                        }
                    }
                    al = null ;
                }
            }
        }
        return this._elem;
    }
    ;
    L.jqplot.TableLegendRenderer.prototype.pack = function(aj) {
        if (this.show) {
            if (this.placement == "insideGrid") {
                switch (this.location) {
                case "nw":
                    var ai = aj.left;
                    var ah = aj.top;
                    this._elem.css("left", ai);
                    this._elem.css("top", ah);
                    break;
                case "n":
                    var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                    var ah = aj.top;
                    this._elem.css("left", ai);
                    this._elem.css("top", ah);
                    break;
                case "ne":
                    var ai = aj.right;
                    var ah = aj.top;
                    this._elem.css({
                        right: ai,
                        top: ah
                    });
                    break;
                case "e":
                    var ai = aj.right;
                    var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                    this._elem.css({
                        right: ai,
                        top: ah
                    });
                    break;
                case "se":
                    var ai = aj.right;
                    var ah = aj.bottom;
                    this._elem.css({
                        right: ai,
                        bottom: ah
                    });
                    break;
                case "s":
                    var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                    var ah = aj.bottom;
                    this._elem.css({
                        left: ai,
                        bottom: ah
                    });
                    break;
                case "sw":
                    var ai = aj.left;
                    var ah = aj.bottom;
                    this._elem.css({
                        left: ai,
                        bottom: ah
                    });
                    break;
                case "w":
                    var ai = aj.left;
                    var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                    this._elem.css({
                        left: ai,
                        top: ah
                    });
                    break;
                default:
                    var ai = aj.right;
                    var ah = aj.bottom;
                    this._elem.css({
                        right: ai,
                        bottom: ah
                    });
                    break;
                }
            } else {
                if (this.placement == "outside") {
                    switch (this.location) {
                    case "nw":
                        var ai = this._plotDimensions.width - aj.left;
                        var ah = aj.top;
                        this._elem.css("right", ai);
                        this._elem.css("top", ah);
                        break;
                    case "n":
                        var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                        var ah = this._plotDimensions.height - aj.top;
                        this._elem.css("left", ai);
                        this._elem.css("bottom", ah);
                        break;
                    case "ne":
                        var ai = this._plotDimensions.width - aj.right;
                        var ah = aj.top;
                        this._elem.css({
                            left: ai,
                            top: ah
                        });
                        break;
                    case "e":
                        var ai = this._plotDimensions.width - aj.right;
                        var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                        this._elem.css({
                            left: ai,
                            top: ah
                        });
                        break;
                    case "se":
                        var ai = this._plotDimensions.width - aj.right;
                        var ah = aj.bottom;
                        this._elem.css({
                            left: ai,
                            bottom: ah
                        });
                        break;
                    case "s":
                        var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                        var ah = this._plotDimensions.height - aj.bottom;
                        this._elem.css({
                            left: ai,
                            top: ah
                        });
                        break;
                    case "sw":
                        var ai = this._plotDimensions.width - aj.left;
                        var ah = aj.bottom;
                        this._elem.css({
                            right: ai,
                            bottom: ah
                        });
                        break;
                    case "w":
                        var ai = this._plotDimensions.width - aj.left;
                        var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                        this._elem.css({
                            right: ai,
                            top: ah
                        });
                        break;
                    default:
                        var ai = aj.right;
                        var ah = aj.bottom;
                        this._elem.css({
                            right: ai,
                            bottom: ah
                        });
                        break;
                    }
                } else {
                    switch (this.location) {
                    case "nw":
                        this._elem.css({
                            left: 0,
                            top: aj.top
                        });
                        break;
                    case "n":
                        var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                        this._elem.css({
                            left: ai,
                            top: aj.top
                        });
                        break;
                    case "ne":
                        this._elem.css({
                            right: 0,
                            top: aj.top
                        });
                        break;
                    case "e":
                        var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                        this._elem.css({
                            right: aj.right,
                            top: ah
                        });
                        break;
                    case "se":
                        this._elem.css({
                            right: aj.right,
                            bottom: aj.bottom
                        });
                        break;
                    case "s":
                        var ai = (aj.left + (this._plotDimensions.width - aj.right)) / 2 - this.getWidth() / 2;
                        this._elem.css({
                            left: ai,
                            bottom: aj.bottom
                        });
                        break;
                    case "sw":
                        this._elem.css({
                            left: aj.left,
                            bottom: aj.bottom
                        });
                        break;
                    case "w":
                        var ah = (aj.top + (this._plotDimensions.height - aj.bottom)) / 2 - this.getHeight() / 2;
                        this._elem.css({
                            left: aj.left,
                            top: ah
                        });
                        break;
                    default:
                        this._elem.css({
                            right: aj.right,
                            bottom: aj.bottom
                        });
                        break;
                    }
                }
            }
        }
    }
    ;
    L.jqplot.ThemeEngine = function() {
        this.themes = {};
        this.activeTheme = null ;
    }
    ;
    L.jqplot.ThemeEngine.prototype.init = function() {
        var ak = new L.jqplot.Theme({
            _name: "Default"
        });
        var an, ai, am;
        for (an in ak.target) {
            if (an == "textColor") {
                ak.target[an] = this.target.css("color");
            } else {
                ak.target[an] = this.target.css(an);
            }
        }
        if (this.title.show && this.title._elem) {
            for (an in ak.title) {
                if (an == "textColor") {
                    ak.title[an] = this.title._elem.css("color");
                } else {
                    ak.title[an] = this.title._elem.css(an);
                }
            }
        }
        for (an in ak.grid) {
            ak.grid[an] = this.grid[an];
        }
        if (ak.grid.backgroundColor == null  && this.grid.background != null ) {
            ak.grid.backgroundColor = this.grid.background;
        }
        if (this.legend.show && this.legend._elem) {
            for (an in ak.legend) {
                if (an == "textColor") {
                    ak.legend[an] = this.legend._elem.css("color");
                } else {
                    ak.legend[an] = this.legend._elem.css(an);
                }
            }
        }
        var aj;
        for (ai = 0; ai < this.series.length; ai++) {
            aj = this.series[ai];
            if (aj.renderer.constructor == L.jqplot.LineRenderer) {
                ak.series.push(new p());
            } else {
                if (aj.renderer.constructor == L.jqplot.BarRenderer) {
                    ak.series.push(new T());
                } else {
                    if (aj.renderer.constructor == L.jqplot.PieRenderer) {
                        ak.series.push(new f());
                    } else {
                        if (aj.renderer.constructor == L.jqplot.DonutRenderer) {
                            ak.series.push(new G());
                        } else {
                            if (aj.renderer.constructor == L.jqplot.FunnelRenderer) {
                                ak.series.push(new Z());
                            } else {
                                if (aj.renderer.constructor == L.jqplot.MeterGaugeRenderer) {
                                    ak.series.push(new D());
                                } else {
                                    ak.series.push({});
                                }
                            }
                        }
                    }
                }
            }
            for (an in ak.series[ai]) {
                ak.series[ai][an] = aj[an];
            }
        }
        var ah, al;
        for (an in this.axes) {
            al = this.axes[an];
            ah = ak.axes[an] = new P();
            ah.borderColor = al.borderColor;
            ah.borderWidth = al.borderWidth;
            if (al._ticks && al._ticks[0]) {
                for (am in ah.ticks) {
                    if (al._ticks[0].hasOwnProperty(am)) {
                        ah.ticks[am] = al._ticks[0][am];
                    } else {
                        if (al._ticks[0]._elem) {
                            ah.ticks[am] = al._ticks[0]._elem.css(am);
                        }
                    }
                }
            }
            if (al._label && al._label.show) {
                for (am in ah.label) {
                    if (al._label[am]) {
                        ah.label[am] = al._label[am];
                    } else {
                        if (al._label._elem) {
                            if (am == "textColor") {
                                ah.label[am] = al._label._elem.css("color");
                            } else {
                                ah.label[am] = al._label._elem.css(am);
                            }
                        }
                    }
                }
            }
        }
        this.themeEngine._add(ak);
        this.themeEngine.activeTheme = this.themeEngine.themes[ak._name];
    }
    ;
    L.jqplot.ThemeEngine.prototype.get = function(ah) {
        if (!ah) {
            return this.activeTheme;
        } else {
            return this.themes[ah];
        }
    }
    ;
    function O(ai, ah) {
        return ai - ah;
    }
    L.jqplot.ThemeEngine.prototype.getThemeNames = function() {
        var ah = [];
        for (var ai in this.themes) {
            ah.push(ai);
        }
        return ah.sort(O);
    }
    ;
    L.jqplot.ThemeEngine.prototype.getThemes = function() {
        var ai = [];
        var ah = [];
        for (var ak in this.themes) {
            ai.push(ak);
        }
        ai.sort(O);
        for (var aj = 0; aj < ai.length; aj++) {
            ah.push(this.themes[ai[aj]]);
        }
        return ah;
    }
    ;
    L.jqplot.ThemeEngine.prototype.activate = function(av, aB) {
        var ah = false;
        if (!aB && this.activeTheme && this.activeTheme._name) {
            aB = this.activeTheme._name;
        }
        if (!this.themes.hasOwnProperty(aB)) {
            throw new Error("No theme of that name");
        } else {
            var am = this.themes[aB];
            this.activeTheme = am;
            var aA, at = false, ar = false;
            var ai = ["xaxis", "x2axis", "yaxis", "y2axis"];
            for (aw = 0; aw < ai.length; aw++) {
                var an = ai[aw];
                if (am.axesStyles.borderColor != null ) {
                    av.axes[an].borderColor = am.axesStyles.borderColor;
                }
                if (am.axesStyles.borderWidth != null ) {
                    av.axes[an].borderWidth = am.axesStyles.borderWidth;
                }
            }
            for (var az in av.axes) {
                var ak = av.axes[az];
                if (ak.show) {
                    var aq = am.axes[az] || {};
                    var ao = am.axesStyles;
                    var al = L.jqplot.extend(true, {}, aq, ao);
                    aA = (am.axesStyles.borderColor != null ) ? am.axesStyles.borderColor : al.borderColor;
                    if (al.borderColor != null ) {
                        ak.borderColor = al.borderColor;
                        ah = true;
                    }
                    aA = (am.axesStyles.borderWidth != null ) ? am.axesStyles.borderWidth : al.borderWidth;
                    if (al.borderWidth != null ) {
                        ak.borderWidth = al.borderWidth;
                        ah = true;
                    }
                    if (ak._ticks && ak._ticks[0]) {
                        for (var aj in al.ticks) {
                            aA = al.ticks[aj];
                            if (aA != null ) {
                                ak.tickOptions[aj] = aA;
                                ak._ticks = [];
                                ah = true;
                            }
                        }
                    }
                    if (ak._label && ak._label.show) {
                        for (var aj in al.label) {
                            aA = al.label[aj];
                            if (aA != null ) {
                                ak.labelOptions[aj] = aA;
                                ah = true;
                            }
                        }
                    }
                }
            }
            for (var au in am.grid) {
                if (am.grid[au] != null ) {
                    av.grid[au] = am.grid[au];
                }
            }
            if (!ah) {
                av.grid.draw();
            }
            if (av.legend.show) {
                for (au in am.legend) {
                    if (am.legend[au] != null ) {
                        av.legend[au] = am.legend[au];
                    }
                }
            }
            if (av.title.show) {
                for (au in am.title) {
                    if (am.title[au] != null ) {
                        av.title[au] = am.title[au];
                    }
                }
            }
            var aw;
            for (aw = 0; aw < am.series.length; aw++) {
                var ap = {};
                var ay = false;
                for (au in am.series[aw]) {
                    aA = (am.seriesStyles[au] != null ) ? am.seriesStyles[au] : am.series[aw][au];
                    if (aA != null ) {
                        ap[au] = aA;
                        if (au == "color") {
                            av.series[aw].renderer.shapeRenderer.fillStyle = aA;
                            av.series[aw].renderer.shapeRenderer.strokeStyle = aA;
                            av.series[aw][au] = aA;
                        } else {
                            if ((au == "lineWidth") || (au == "linePattern")) {
                                av.series[aw].renderer.shapeRenderer[au] = aA;
                                av.series[aw][au] = aA;
                            } else {
                                if (au == "markerOptions") {
                                    V(av.series[aw].markerOptions, aA);
                                    V(av.series[aw].markerRenderer, aA);
                                } else {
                                    av.series[aw][au] = aA;
                                }
                            }
                        }
                        ah = true;
                    }
                }
            }
            if (ah) {
                av.target.empty();
                av.draw();
            }
            for (au in am.target) {
                if (am.target[au] != null ) {
                    av.target.css(au, am.target[au]);
                }
            }
        }
    }
    ;
    L.jqplot.ThemeEngine.prototype._add = function(ai, ah) {
        if (ah) {
            ai._name = ah;
        }
        if (!ai._name) {
            ai._name = Date.parse(new Date());
        }
        if (!this.themes.hasOwnProperty(ai._name)) {
            this.themes[ai._name] = ai;
        } else {
            throw new Error("jqplot.ThemeEngine Error: Theme already in use");
        }
    }
    ;
    L.jqplot.ThemeEngine.prototype.remove = function(ah) {
        if (ah == "Default") {
            return false;
        }
        return delete this.themes[ah];
    }
    ;
    L.jqplot.ThemeEngine.prototype.newTheme = function(ah, aj) {
        if (typeof (ah) == "object") {
            aj = aj || ah;
            ah = null ;
        }
        if (aj && aj._name) {
            ah = aj._name;
        } else {
            ah = ah || Date.parse(new Date());
        }
        var ai = this.copy(this.themes.Default._name, ah);
        L.jqplot.extend(ai, aj);
        return ai;
    }
    ;
    function B(aj) {
        if (aj == null  || typeof (aj) != "object") {
            return aj;
        }
        var ah = new aj.constructor();
        for (var ai in aj) {
            ah[ai] = B(aj[ai]);
        }
        return ah;
    }
    L.jqplot.clone = B;
    function V(aj, ai) {
        if (ai == null  || typeof (ai) != "object") {
            return;
        }
        for (var ah in ai) {
            if (ah == "highlightColors") {
                aj[ah] = B(ai[ah]);
            }
            if (ai[ah] != null  && typeof (ai[ah]) == "object") {
                if (!aj.hasOwnProperty(ah)) {
                    aj[ah] = {};
                }
                V(aj[ah], ai[ah]);
            } else {
                aj[ah] = ai[ah];
            }
        }
    }
    L.jqplot.merge = V;
    L.jqplot.extend = function() {
        var am = arguments[0] || {}, ak = 1, al = arguments.length, ah = false, aj;
        if (typeof am === "boolean") {
            ah = am;
            am = arguments[1] || {};
            ak = 2;
        }
        if (typeof am !== "object" && !toString.call(am) === "[object Function]") {
            am = {};
        }
        for (; ak < al; ak++) {
            if ((aj = arguments[ak]) != null ) {
                for (var ai in aj) {
                    var an = am[ai]
                      , ao = aj[ai];
                    if (am === ao) {
                        continue;
                    }
                    if (ah && ao && typeof ao === "object" && !ao.nodeType) {
                        am[ai] = L.jqplot.extend(ah, an || (ao.length != null  ? [] : {}), ao);
                    } else {
                        if (ao !== u) {
                            am[ai] = ao;
                        }
                    }
                }
            }
        }
        return am;
    }
    ;
    L.jqplot.ThemeEngine.prototype.rename = function(ai, ah) {
        if (ai == "Default" || ah == "Default") {
            throw new Error("jqplot.ThemeEngine Error: Cannot rename from/to Default");
        }
        if (this.themes.hasOwnProperty(ah)) {
            throw new Error("jqplot.ThemeEngine Error: New name already in use.");
        } else {
            if (this.themes.hasOwnProperty(ai)) {
                var aj = this.copy(ai, ah);
                this.remove(ai);
                return aj;
            }
        }
        throw new Error("jqplot.ThemeEngine Error: Old name or new name invalid");
    }
    ;
    L.jqplot.ThemeEngine.prototype.copy = function(ah, aj, al) {
        if (aj == "Default") {
            throw new Error("jqplot.ThemeEngine Error: Cannot copy over Default theme");
        }
        if (!this.themes.hasOwnProperty(ah)) {
            var ai = "jqplot.ThemeEngine Error: Source name invalid";
            throw new Error(ai);
        }
        if (this.themes.hasOwnProperty(aj)) {
            var ai = "jqplot.ThemeEngine Error: Target name invalid";
            throw new Error(ai);
        } else {
            var ak = B(this.themes[ah]);
            ak._name = aj;
            L.jqplot.extend(true, ak, al);
            this._add(ak);
            return ak;
        }
    }
    ;
    L.jqplot.Theme = function(ah, ai) {
        if (typeof (ah) == "object") {
            ai = ai || ah;
            ah = null ;
        }
        ah = ah || Date.parse(new Date());
        this._name = ah;
        this.target = {
            backgroundColor: null 
        };
        this.legend = {
            textColor: null ,
            fontFamily: null ,
            fontSize: null ,
            border: null ,
            background: null 
        };
        this.title = {
            textColor: null ,
            fontFamily: null ,
            fontSize: null ,
            textAlign: null 
        };
        this.seriesStyles = {};
        this.series = [];
        this.grid = {
            drawGridlines: null ,
            gridLineColor: null ,
            gridLineWidth: null ,
            backgroundColor: null ,
            borderColor: null ,
            borderWidth: null ,
            shadow: null 
        };
        this.axesStyles = {
            label: {},
            ticks: {}
        };
        this.axes = {};
        if (typeof (ai) == "string") {
            this._name = ai;
        } else {
            if (typeof (ai) == "object") {
                L.jqplot.extend(true, this, ai);
            }
        }
    }
    ;
    var P = function() {
        this.borderColor = null ;
        this.borderWidth = null ;
        this.ticks = new o();
        this.label = new t();
    }
    ;
    var o = function() {
        this.show = null ;
        this.showGridline = null ;
        this.showLabel = null ;
        this.showMark = null ;
        this.size = null ;
        this.textColor = null ;
        this.whiteSpace = null ;
        this.fontSize = null ;
        this.fontFamily = null ;
    }
    ;
    var t = function() {
        this.textColor = null ;
        this.whiteSpace = null ;
        this.fontSize = null ;
        this.fontFamily = null ;
        this.fontWeight = null ;
    }
    ;
    var p = function() {
        this.color = null ;
        this.lineWidth = null ;
        this.linePattern = null ;
        this.shadow = null ;
        this.fillColor = null ;
        this.showMarker = null ;
        this.markerOptions = new I();
    }
    ;
    var I = function() {
        this.show = null ;
        this.style = null ;
        this.lineWidth = null ;
        this.size = null ;
        this.color = null ;
        this.shadow = null ;
    }
    ;
    var T = function() {
        this.color = null ;
        this.seriesColors = null ;
        this.lineWidth = null ;
        this.shadow = null ;
        this.barPadding = null ;
        this.barMargin = null ;
        this.barWidth = null ;
        this.highlightColors = null ;
    }
    ;
    var f = function() {
        this.seriesColors = null ;
        this.padding = null ;
        this.sliceMargin = null ;
        this.fill = null ;
        this.shadow = null ;
        this.startAngle = null ;
        this.lineWidth = null ;
        this.highlightColors = null ;
    }
    ;
    var G = function() {
        this.seriesColors = null ;
        this.padding = null ;
        this.sliceMargin = null ;
        this.fill = null ;
        this.shadow = null ;
        this.startAngle = null ;
        this.lineWidth = null ;
        this.innerDiameter = null ;
        this.thickness = null ;
        this.ringMargin = null ;
        this.highlightColors = null ;
    }
    ;
    var Z = function() {
        this.color = null ;
        this.lineWidth = null ;
        this.shadow = null ;
        this.padding = null ;
        this.sectionMargin = null ;
        this.seriesColors = null ;
        this.highlightColors = null ;
    }
    ;
    var D = function() {
        this.padding = null ;
        this.backgroundColor = null ;
        this.ringColor = null ;
        this.tickColor = null ;
        this.ringWidth = null ;
        this.intervalColors = null ;
        this.intervalInnerRadius = null ;
        this.intervalOuterRadius = null ;
        this.hubRadius = null ;
        this.needleThickness = null ;
        this.needlePad = null ;
    }
    ;
    L.fn.jqplotChildText = function() {
        return L(this).contents().filter(function() {
            return this.nodeType == 3;
        }).text();
    }
    ;
    L.fn.jqplotGetComputedFontStyle = function() {
        var ak = window.getComputedStyle ? window.getComputedStyle(this[0], "") : this[0].currentStyle;
        var ai = ak["font-style"] ? ["font-style", "font-weight", "font-size", "font-family"] : ["fontStyle", "fontWeight", "fontSize", "fontFamily"];
        var al = [];
        for (var aj = 0; aj < ai.length; ++aj) {
            var ah = String(ak[ai[aj]]);
            if (ah && ah != "normal") {
                al.push(ah);
            }
        }
        return al.join(" ");
    }
    ;
    L.fn.jqplotToImageCanvas = function(aj) {
        aj = aj || {};
        var av = (aj.x_offset == null ) ? 0 : aj.x_offset;
        var ax = (aj.y_offset == null ) ? 0 : aj.y_offset;
        var al = (aj.backgroundColor == null ) ? "rgb(255,255,255)" : aj.backgroundColor;
        if (L(this).width() == 0 || L(this).height() == 0) {
            return null ;
        }
        if (L.jqplot.use_excanvas) {
            return null ;
        }
        var an = document.createElement("canvas");
        var aA = L(this).outerHeight(true);
        var at = L(this).outerWidth(true);
        var am = L(this).offset();
        var ao = am.left;
        var aq = am.top;
        var au = 0
          , ar = 0;
        var ay = ["jqplot-table-legend", "jqplot-xaxis-tick", "jqplot-x2axis-tick", "jqplot-yaxis-tick", "jqplot-y2axis-tick", "jqplot-y3axis-tick", "jqplot-y4axis-tick", "jqplot-y5axis-tick", "jqplot-y6axis-tick", "jqplot-y7axis-tick", "jqplot-y8axis-tick", "jqplot-y9axis-tick", "jqplot-xaxis-label", "jqplot-x2axis-label", "jqplot-yaxis-label", "jqplot-y2axis-label", "jqplot-y3axis-label", "jqplot-y4axis-label", "jqplot-y5axis-label", "jqplot-y6axis-label", "jqplot-y7axis-label", "jqplot-y8axis-label", "jqplot-y9axis-label"];
        var ap, ah, ai, aB;
        for (var az = 0; az < ay.length; az++) {
            L(this).find("." + ay[az]).each(function() {
                ap = L(this).offset().top - aq;
                ah = L(this).offset().left - ao;
                aB = ah + L(this).outerWidth(true) + au;
                ai = ap + L(this).outerHeight(true) + ar;
                if (ah < -au) {
                    at = at - au - ah;
                    au = -ah;
                }
                if (ap < -ar) {
                    aA = aA - ar - ap;
                    ar = -ap;
                }
                if (aB > at) {
                    at = aB;
                }
                if (ai > aA) {
                    aA = ai;
                }
            });
        }
        an.width = at + Number(av);
        an.height = aA + Number(ax);
        var ak = an.getContext("2d");
        ak.save();
        ak.fillStyle = al;
        ak.fillRect(0, 0, an.width, an.height);
        ak.restore();
        ak.translate(au, ar);
        ak.textAlign = "left";
        ak.textBaseline = "top";
        function aC(aE) {
            var aF = parseInt(L(aE).css("line-height"), 10);
            if (isNaN(aF)) {
                aF = parseInt(L(aE).css("font-size"), 10) * 1.2;
            }
            return aF;
        }
        function aD(aF, aE, aS, aG, aO, aH) {
            var aQ = aC(aF);
            var aK = L(aF).innerWidth();
            var aL = L(aF).innerHeight();
            var aN = aS.split(/\s+/);
            var aR = aN.length;
            var aP = "";
            var aM = [];
            var aU = aO;
            var aT = aG;
            for (var aJ = 0; aJ < aR; aJ++) {
                aP += aN[aJ];
                if (aE.measureText(aP).width > aK) {
                    aM.push(aJ);
                    aP = "";
                    aJ--;
                }
            }
            if (aM.length === 0) {
                if (L(aF).css("textAlign") === "center") {
                    aT = aG + (aH - aE.measureText(aP).width) / 2 - au;
                }
                aE.fillText(aS, aT, aO);
            } else {
                aP = aN.slice(0, aM[0]).join(" ");
                if (L(aF).css("textAlign") === "center") {
                    aT = aG + (aH - aE.measureText(aP).width) / 2 - au;
                }
                aE.fillText(aP, aT, aU);
                aU += aQ;
                for (var aJ = 1, aI = aM.length; aJ < aI; aJ++) {
                    aP = aN.slice(aM[aJ - 1], aM[aJ]).join(" ");
                    if (L(aF).css("textAlign") === "center") {
                        aT = aG + (aH - aE.measureText(aP).width) / 2 - au;
                    }
                    aE.fillText(aP, aT, aU);
                    aU += aQ;
                }
                aP = aN.slice(aM[aJ - 1], aN.length).join(" ");
                if (L(aF).css("textAlign") === "center") {
                    aT = aG + (aH - aE.measureText(aP).width) / 2 - au;
                }
                aE.fillText(aP, aT, aU);
            }
        }
        function aw(aG, aJ, aE) {
            var aN = aG.tagName.toLowerCase();
            var aF = L(aG).position();
            var aK = window.getComputedStyle ? window.getComputedStyle(aG, "") : aG.currentStyle;
            var aI = aJ + aF.left + parseInt(aK.marginLeft, 10) + parseInt(aK.borderLeftWidth, 10) + parseInt(aK.paddingLeft, 10);
            var aL = aE + aF.top + parseInt(aK.marginTop, 10) + parseInt(aK.borderTopWidth, 10) + parseInt(aK.paddingTop, 10);
            var aM = an.width;
            if ((aN == "div" || aN == "span") && !L(aG).hasClass("jqplot-highlighter-tooltip")) {
                L(aG).children().each(function() {
                    aw(this, aI, aL);
                });
                var aO = L(aG).jqplotChildText();
                if (aO) {
                    ak.font = L(aG).jqplotGetComputedFontStyle();
                    ak.fillStyle = L(aG).css("color");
                    aD(aG, ak, aO, aI, aL, aM);
                }
            } else {
                if (aN === "table" && L(aG).hasClass("jqplot-table-legend")) {
                    ak.strokeStyle = L(aG).css("border-top-color");
                    ak.fillStyle = L(aG).css("background-color");
                    ak.fillRect(aI, aL, L(aG).innerWidth(), L(aG).innerHeight());
                    if (parseInt(L(aG).css("border-top-width"), 10) > 0) {
                        ak.strokeRect(aI, aL, L(aG).innerWidth(), L(aG).innerHeight());
                    }
                    L(aG).find("div.jqplot-table-legend-swatch-outline").each(function() {
                        var aU = L(this);
                        ak.strokeStyle = aU.css("border-top-color");
                        var aQ = aI + aU.position().left;
                        var aR = aL + aU.position().top;
                        ak.strokeRect(aQ, aR, aU.innerWidth(), aU.innerHeight());
                        aQ += parseInt(aU.css("padding-left"), 10);
                        aR += parseInt(aU.css("padding-top"), 10);
                        var aT = aU.innerHeight() - 2 * parseInt(aU.css("padding-top"), 10);
                        var aP = aU.innerWidth() - 2 * parseInt(aU.css("padding-left"), 10);
                        var aS = aU.children("div.jqplot-table-legend-swatch");
                        ak.fillStyle = aS.css("background-color");
                        ak.fillRect(aQ, aR, aP, aT);
                    });
                    L(aG).find("td.jqplot-table-legend-label").each(function() {
                        var aR = L(this);
                        var aP = aI + aR.position().left;
                        var aQ = aL + aR.position().top + parseInt(aR.css("padding-top"), 10);
                        ak.font = aR.jqplotGetComputedFontStyle();
                        ak.fillStyle = aR.css("color");
                        aD(aR, ak, aR.text(), aP, aQ, aM);
                    });
                    var aH = null ;
                } else {
                    if (aN == "canvas") {
                        ak.drawImage(aG, aI, aL);
                    }
                }
            }
        }
        L(this).children().each(function() {
            aw(this, av, ax);
        });
        return an;
    }
    ;
    L.fn.jqplotToImageStr = function(ai) {
        var ah = L(this).jqplotToImageCanvas(ai);
        if (ah) {
            return ah.toDataURL("image/png");
        } else {
            return null ;
        }
    }
    ;
    L.fn.jqplotToImageElem = function(ah) {
        var ai = document.createElement("img");
        var aj = L(this).jqplotToImageStr(ah);
        ai.src = aj;
        return ai;
    }
    ;
    L.fn.jqplotToImageElemStr = function(ah) {
        var ai = "<img src=" + L(this).jqplotToImageStr(ah) + " />";
        return ai;
    }
    ;
    L.fn.jqplotSaveImage = function() {
        var ah = L(this).jqplotToImageStr({});
        if (ah) {
            window.location.href = ah.replace("image/png", "image/octet-stream");
        }
    }
    ;
    L.fn.jqplotViewImage = function() {
        var ai = L(this).jqplotToImageElemStr({});
        var aj = L(this).jqplotToImageStr({});
        if (ai) {
            var ah = window.open("");
            ah.document.open("image/png");
            ah.document.write(ai);
            ah.document.close();
            ah = null ;
        }
    }
    ;
    var ag = function() {
        this.syntax = ag.config.syntax;
        this._type = "jsDate";
        this.proxy = new Date();
        this.options = {};
        this.locale = ag.regional.getLocale();
        this.formatString = "";
        this.defaultCentury = ag.config.defaultCentury;
        switch (arguments.length) {
        case 0:
            break;
        case 1:
            if (l(arguments[0]) == "[object Object]" && arguments[0]._type != "jsDate") {
                var aj = this.options = arguments[0];
                this.syntax = aj.syntax || this.syntax;
                this.defaultCentury = aj.defaultCentury || this.defaultCentury;
                this.proxy = ag.createDate(aj.date);
            } else {
                this.proxy = ag.createDate(arguments[0]);
            }
            break;
        default:
            var ah = [];
            for (var ai = 0; ai < arguments.length; ai++) {
                ah.push(arguments[ai]);
            }
            this.proxy = new Date();
            this.proxy.setFullYear.apply(this.proxy, ah.slice(0, 3));
            if (ah.slice(3).length) {
                this.proxy.setHours.apply(this.proxy, ah.slice(3));
            }
            break;
        }
    }
    ;
    ag.config = {
        defaultLocale: "en",
        syntax: "perl",
        defaultCentury: 1900
    };
    ag.prototype.add = function(aj, ai) {
        var ah = E[ai] || E.day;
        if (typeof ah == "number") {
            this.proxy.setTime(this.proxy.getTime() + (ah * aj));
        } else {
            ah.add(this, aj);
        }
        return this;
    }
    ;
    ag.prototype.clone = function() {
        return new ag(this.proxy.getTime());
    }
    ;
    ag.prototype.getUtcOffset = function() {
        return this.proxy.getTimezoneOffset() * 60000;
    }
    ;
    ag.prototype.diff = function(ai, al, ah) {
        ai = new ag(ai);
        if (ai === null ) {
            return null ;
        }
        var aj = E[al] || E.day;
        if (typeof aj == "number") {
            var ak = (this.proxy.getTime() - ai.proxy.getTime()) / aj;
        } else {
            var ak = aj.diff(this.proxy, ai.proxy);
        }
        return ( ah ? ak : Math[ak > 0 ? "floor" : "ceil"](ak)) ;
    }
    ;
    ag.prototype.getAbbrDayName = function() {
        return ag.regional[this.locale]["dayNamesShort"][this.proxy.getDay()];
    }
    ;
    ag.prototype.getAbbrMonthName = function() {
        return ag.regional[this.locale]["monthNamesShort"][this.proxy.getMonth()];
    }
    ;
    ag.prototype.getAMPM = function() {
        return this.proxy.getHours() >= 12 ? "PM" : "AM";
    }
    ;
    ag.prototype.getAmPm = function() {
        return this.proxy.getHours() >= 12 ? "pm" : "am";
    }
    ;
    ag.prototype.getCentury = function() {
        return parseInt(this.proxy.getFullYear() / 100, 10);
    }
    ;
    ag.prototype.getDate = function() {
        return this.proxy.getDate();
    }
    ;
    ag.prototype.getDay = function() {
        return this.proxy.getDay();
    }
    ;
    ag.prototype.getDayOfWeek = function() {
        var ah = this.proxy.getDay();
        return ah === 0 ? 7 : ah;
    }
    ;
    ag.prototype.getDayOfYear = function() {
        var ai = this.proxy;
        var ah = ai - new Date("" + ai.getFullYear() + "/1/1 GMT");
        ah += ai.getTimezoneOffset() * 60000;
        ai = null ;
        return parseInt(ah / 60000 / 60 / 24, 10) + 1;
    }
    ;
    ag.prototype.getDayName = function() {
        return ag.regional[this.locale]["dayNames"][this.proxy.getDay()];
    }
    ;
    ag.prototype.getFullWeekOfYear = function() {
        var ak = this.proxy;
        var ah = this.getDayOfYear();
        var aj = 6 - ak.getDay();
        var ai = parseInt((ah + aj) / 7, 10);
        return ai;
    }
    ;
    ag.prototype.getFullYear = function() {
        return this.proxy.getFullYear();
    }
    ;
    ag.prototype.getGmtOffset = function() {
        var ah = this.proxy.getTimezoneOffset() / 60;
        var ai = ah < 0 ? "+" : "-";
        ah = Math.abs(ah);
        return ai + N(Math.floor(ah), 2) + ":" + N((ah % 1) * 60, 2);
    }
    ;
    ag.prototype.getHours = function() {
        return this.proxy.getHours();
    }
    ;
    ag.prototype.getHours12 = function() {
        var ah = this.proxy.getHours();
        return ah > 12 ? ah - 12 : (ah == 0 ? 12 : ah);
    }
    ;
    ag.prototype.getIsoWeek = function() {
        var ak = this.proxy;
        var aj = this.getWeekOfYear();
        var ah = (new Date("" + ak.getFullYear() + "/1/1")).getDay();
        var ai = aj + (ah > 4 || ah <= 1 ? 0 : 1);
        if (ai == 53 && (new Date("" + ak.getFullYear() + "/12/31")).getDay() < 4) {
            ai = 1;
        } else {
            if (ai === 0) {
                ak = new ag(new Date("" + (ak.getFullYear() - 1) + "/12/31"));
                ai = ak.getIsoWeek();
            }
        }
        ak = null ;
        return ai;
    }
    ;
    ag.prototype.getMilliseconds = function() {
        return this.proxy.getMilliseconds();
    }
    ;
    ag.prototype.getMinutes = function() {
        return this.proxy.getMinutes();
    }
    ;
    ag.prototype.getMonth = function() {
        return this.proxy.getMonth();
    }
    ;
    ag.prototype.getMonthName = function() {
        return ag.regional[this.locale]["monthNames"][this.proxy.getMonth()];
    }
    ;
    ag.prototype.getMonthNumber = function() {
        return this.proxy.getMonth() + 1;
    }
    ;
    ag.prototype.getSeconds = function() {
        return this.proxy.getSeconds();
    }
    ;
    ag.prototype.getShortYear = function() {
        return this.proxy.getYear() % 100;
    }
    ;
    ag.prototype.getTime = function() {
        return this.proxy.getTime();
    }
    ;
    ag.prototype.getTimezoneAbbr = function() {
        return this.proxy.toString().replace(/^.*\(([^)]+)\)$/, "$1");
    }
    ;
    ag.prototype.getTimezoneName = function() {
        var ah = /(?:\((.+)\)$| ([A-Z]{3}) )/.exec(this.toString());
        return ah[1] || ah[2] || "GMT" + this.getGmtOffset();
    }
    ;
    ag.prototype.getTimezoneOffset = function() {
        return this.proxy.getTimezoneOffset();
    }
    ;
    ag.prototype.getWeekOfYear = function() {
        var ah = this.getDayOfYear();
        var aj = 7 - this.getDayOfWeek();
        var ai = parseInt((ah + aj) / 7, 10);
        return ai;
    }
    ;
    ag.prototype.getUnix = function() {
        return Math.round(this.proxy.getTime() / 1000, 0);
    }
    ;
    ag.prototype.getYear = function() {
        return this.proxy.getYear();
    }
    ;
    ag.prototype.next = function(ah) {
        ah = ah || "day";
        return this.clone().add(1, ah);
    }
    ;
    ag.prototype.set = function() {
        switch (arguments.length) {
        case 0:
            this.proxy = new Date();
            break;
        case 1:
            if (l(arguments[0]) == "[object Object]" && arguments[0]._type != "jsDate") {
                var aj = this.options = arguments[0];
                this.syntax = aj.syntax || this.syntax;
                this.defaultCentury = aj.defaultCentury || this.defaultCentury;
                this.proxy = ag.createDate(aj.date);
            } else {
                this.proxy = ag.createDate(arguments[0]);
            }
            break;
        default:
            var ah = [];
            for (var ai = 0; ai < arguments.length; ai++) {
                ah.push(arguments[ai]);
            }
            this.proxy = new Date();
            this.proxy.setFullYear.apply(this.proxy, ah.slice(0, 3));
            if (ah.slice(3).length) {
                this.proxy.setHours.apply(this.proxy, ah.slice(3));
            }
            break;
        }
        return this;
    }
    ;
    ag.prototype.setDate = function(ah) {
        this.proxy.setDate(ah);
        return this;
    }
    ;
    ag.prototype.setFullYear = function() {
        this.proxy.setFullYear.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.setHours = function() {
        this.proxy.setHours.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.setMilliseconds = function(ah) {
        this.proxy.setMilliseconds(ah);
        return this;
    }
    ;
    ag.prototype.setMinutes = function() {
        this.proxy.setMinutes.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.setMonth = function() {
        this.proxy.setMonth.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.setSeconds = function() {
        this.proxy.setSeconds.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.setTime = function(ah) {
        this.proxy.setTime(ah);
        return this;
    }
    ;
    ag.prototype.setYear = function() {
        this.proxy.setYear.apply(this.proxy, arguments);
        return this;
    }
    ;
    ag.prototype.strftime = function(ah) {
        ah = ah || this.formatString || ag.regional[this.locale]["formatString"];
        return ag.strftime(this, ah, this.syntax);
    }
    ;
    ag.prototype.toString = function() {
        return this.proxy.toString();
    }
    ;
    ag.prototype.toYmdInt = function() {
        return (this.proxy.getFullYear() * 10000) + (this.getMonthNumber() * 100) + this.proxy.getDate();
    }
    ;
    ag.regional = {
        en: {
            monthNames: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
            monthNamesShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            dayNames: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
            dayNamesShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        fr: {
            monthNames: ["Janvier", "Fvrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Aot", "Septembre", "Octobre", "Novembre", "Dcembre"],
            monthNamesShort: ["Jan", "Fv", "Mar", "Avr", "Mai", "Jun", "Jul", "Ao", "Sep", "Oct", "Nov", "Dc"],
            dayNames: ["Dimanche", "Lundi", "Mardi", "Mercredi", "Jeudi", "Vendredi", "Samedi"],
            dayNamesShort: ["Dim", "Lun", "Mar", "Mer", "Jeu", "Ven", "Sam"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        de: {
            monthNames: ["Januar", "Februar", "Mrz", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"],
            monthNamesShort: ["Jan", "Feb", "Mr", "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"],
            dayNames: ["Sonntag", "Montag", "Dienstag", "Mittwoch", "Donnerstag", "Freitag", "Samstag"],
            dayNamesShort: ["So", "Mo", "Di", "Mi", "Do", "Fr", "Sa"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        es: {
            monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"],
            monthNamesShort: ["Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"],
            dayNames: ["Domingo", "Lunes", "Martes", "Mi&eacute;rcoles", "Jueves", "Viernes", "S&aacute;bado"],
            dayNamesShort: ["Dom", "Lun", "Mar", "Mi&eacute;", "Juv", "Vie", "S&aacute;b"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        ru: {
            monthNames: ["??", "??", "???", "???", "?", "???", "???", "????", "????", "?????", "????", "???"],
            monthNamesShort: ["", "", "??", "??", "?", "??", "??", "?", "", "??", "??", "?"],
            dayNames: ["????", "?", "??", "??", "???", "???", "???"],
            dayNamesShort: ["?", "", "??", "??", "??", "?", "??"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        ar: {
            monthNames: ["???? ???", "", "", "???", "", "??", "??", "", "????", "?? ???", "?? ???", "???? ???"],
            monthNamesShort: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12"],
            dayNames: ["?", "?", "????", "??", "?", "???", "??"],
            dayNamesShort: ["", "", "???", "?", "", "??", "?"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        pt: {
            monthNames: ["Janeiro", "Fevereiro", "Mar&ccedil;o", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
            monthNamesShort: ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"],
            dayNames: ["Domingo", "Segunda-feira", "Ter&ccedil;a-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "S&aacute;bado"],
            dayNamesShort: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "S&aacute;b"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        "pt-BR": {
            monthNames: ["Janeiro", "Fevereiro", "Mar&ccedil;o", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"],
            monthNamesShort: ["Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez"],
            dayNames: ["Domingo", "Segunda-feira", "Ter&ccedil;a-feira", "Quarta-feira", "Quinta-feira", "Sexta-feira", "S&aacute;bado"],
            dayNamesShort: ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "S&aacute;b"],
            formatString: "%Y-%m-%d %H:%M:%S"
        },
        pl: {
            monthNames: ["Stycze?", "Luty", "Marzec", "Kwiecie?", "Maj", "Czerwiec", "Lipiec", "Sierpie?", "Wrzesie?", "Padziernik", "Listopad", "Grudzie?"],
            monthNamesShort: ["Sty", "Lut", "Mar", "Kwi", "Maj", "Cze", "Lip", "Sie", "Wrz", "Pa", "Lis", "Gru"],
            dayNames: ["Niedziela", "Poniedzia?ek", "Wtorek", "?roda", "Czwartek", "Pi?tek", "Sobota"],
            dayNamesShort: ["Ni", "Pn", "Wt", "?r", "Cz", "Pt", "Sb"],
            formatString: "%Y-%m-%d %H:%M:%S"
        }
    };
    ag.regional["en-US"] = ag.regional["en-GB"] = ag.regional.en;
    ag.regional.getLocale = function() {
        var ah = ag.config.defaultLocale;
        if (document && document.getElementsByTagName("html") && document.getElementsByTagName("html")[0].lang) {
            ah = document.getElementsByTagName("html")[0].lang;
            if (!ag.regional.hasOwnProperty(ah)) {
                ah = ag.config.defaultLocale;
            }
        }
        return ah;
    }
    ;
    var C = 24 * 60 * 60 * 1000;
    var N = function(ah, ak) {
        ah = String(ah);
        var ai = ak - ah.length;
        var aj = String(Math.pow(10, ai)).slice(1);
        return aj.concat(ah);
    }
    ;
    var E = {
        millisecond: 1,
        second: 1000,
        minute: 60 * 1000,
        hour: 60 * 60 * 1000,
        day: C,
        week: 7 * C,
        month: {
            add: function(aj, ah) {
                E.year.add(aj, Math[ah > 0 ? "floor" : "ceil"](ah / 12));
                var ai = aj.getMonth() + (ah % 12);
                if (ai == 12) {
                    ai = 0;
                    aj.setYear(aj.getFullYear() + 1);
                } else {
                    if (ai == -1) {
                        ai = 11;
                        aj.setYear(aj.getFullYear() - 1);
                    }
                }
                aj.setMonth(ai);
            },
            diff: function(al, aj) {
                var ah = al.getFullYear() - aj.getFullYear();
                var ai = al.getMonth() - aj.getMonth() + (ah * 12);
                var ak = al.getDate() - aj.getDate();
                return ai + (ak / 30);
            }
        },
        year: {
            add: function(ai, ah) {
                ai.setYear(ai.getFullYear() + Math[ah > 0 ? "floor" : "ceil"](ah));
            },
            diff: function(ai, ah) {
                return E.month.diff(ai, ah) / 12;
            }
        }
    };
    for (var Y in E) {
        if (Y.substring(Y.length - 1) != "s") {
            E[Y + "s"] = E[Y];
        }
    }
    var H = function(al, ak, ai) {
        if (ag.formats[ai]["shortcuts"][ak]) {
            return ag.strftime(al, ag.formats[ai]["shortcuts"][ak], ai);
        } else {
            var ah = (ag.formats[ai]["codes"][ak] || "").split(".");
            var aj = al["get" + ah[0]] ? al["get" + ah[0]]() : "";
            if (ah[1]) {
                aj = N(aj, ah[1]);
            }
            return aj;
        }
    }
    ;
    ag.strftime = function(an, ak, aj, ao) {
        var ai = "perl";
        var am = ag.regional.getLocale();
        if (aj && ag.formats.hasOwnProperty(aj)) {
            ai = aj;
        } else {
            if (aj && ag.regional.hasOwnProperty(aj)) {
                am = aj;
            }
        }
        if (ao && ag.formats.hasOwnProperty(ao)) {
            ai = ao;
        } else {
            if (ao && ag.regional.hasOwnProperty(ao)) {
                am = ao;
            }
        }
        if (l(an) != "[object Object]" || an._type != "jsDate") {
            an = new ag(an);
            an.locale = am;
        }
        if (!ak) {
            ak = an.formatString || ag.regional[am]["formatString"];
        }
        var ah = ak || "%Y-%m-%d", ap = "", al;
        while (ah.length > 0) {
            if (al = ah.match(ag.formats[ai].codes.matcher)) {
                ap += ah.slice(0, al.index);
                ap += (al[1] || "") + H(an, al[2], ai);
                ah = ah.slice(al.index + al[0].length);
            } else {
                ap += ah;
                ah = "";
            }
        }
        return ap;
    }
    ;
    ag.formats = {
        ISO: "%Y-%m-%dT%H:%M:%S.%N%G",
        SQL: "%Y-%m-%d %H:%M:%S"
    };
    ag.formats.perl = {
        codes: {
            matcher: /()%(#?(%|[a-z]))/i,
            Y: "FullYear",
            y: "ShortYear.2",
            m: "MonthNumber.2",
            "#m": "MonthNumber",
            B: "MonthName",
            b: "AbbrMonthName",
            d: "Date.2",
            "#d": "Date",
            e: "Date",
            A: "DayName",
            a: "AbbrDayName",
            w: "Day",
            H: "Hours.2",
            "#H": "Hours",
            I: "Hours12.2",
            "#I": "Hours12",
            p: "AMPM",
            M: "Minutes.2",
            "#M": "Minutes",
            S: "Seconds.2",
            "#S": "Seconds",
            s: "Unix",
            N: "Milliseconds.3",
            "#N": "Milliseconds",
            O: "TimezoneOffset",
            Z: "TimezoneName",
            G: "GmtOffset"
        },
        shortcuts: {
            F: "%Y-%m-%d",
            T: "%H:%M:%S",
            X: "%H:%M:%S",
            x: "%m/%d/%y",
            D: "%m/%d/%y",
            "#c": "%a %b %e %H:%M:%S %Y",
            v: "%e-%b-%Y",
            R: "%H:%M",
            r: "%I:%M:%S %p",
            t: "\t",
            n: "\n",
            "%": "%"
        }
    };
    ag.formats.php = {
        codes: {
            matcher: /()%((%|[a-z]))/i,
            a: "AbbrDayName",
            A: "DayName",
            d: "Date.2",
            e: "Date",
            j: "DayOfYear.3",
            u: "DayOfWeek",
            w: "Day",
            U: "FullWeekOfYear.2",
            V: "IsoWeek.2",
            W: "WeekOfYear.2",
            b: "AbbrMonthName",
            B: "MonthName",
            m: "MonthNumber.2",
            h: "AbbrMonthName",
            C: "Century.2",
            y: "ShortYear.2",
            Y: "FullYear",
            H: "Hours.2",
            I: "Hours12.2",
            l: "Hours12",
            p: "AMPM",
            P: "AmPm",
            M: "Minutes.2",
            S: "Seconds.2",
            s: "Unix",
            O: "TimezoneOffset",
            z: "GmtOffset",
            Z: "TimezoneAbbr"
        },
        shortcuts: {
            D: "%m/%d/%y",
            F: "%Y-%m-%d",
            T: "%H:%M:%S",
            X: "%H:%M:%S",
            x: "%m/%d/%y",
            R: "%H:%M",
            r: "%I:%M:%S %p",
            t: "\t",
            n: "\n",
            "%": "%"
        }
    };
    ag.createDate = function(aj) {
        if (aj == null ) {
            return new Date();
        }
        if (aj instanceof Date) {
            return aj;
        }
        if (typeof aj == "number") {
            return new Date(aj);
        }
        var ao = String(aj).replace(/^\s*(.+)\s*$/g, "$1");
        ao = ao.replace(/^([0-9]{1,4})-([0-9]{1,2})-([0-9]{1,4})/, "$1/$2/$3");
        ao = ao.replace(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{4})/i, "$1 $2 $3");
        var an = ao.match(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{2})\D*/i);
        if (an && an.length > 3) {
            var at = parseFloat(an[3]);
            var am = ag.config.defaultCentury + at;
            am = String(am);
            ao = ao.replace(/^(3[01]|[0-2]?\d)[-\/]([a-z]{3,})[-\/](\d{2})\D*/i, an[1] + " " + an[2] + " " + am);
        }
        an = ao.match(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})[^0-9]/);
        function ar(ax, aw) {
            var aC = parseFloat(aw[1]);
            var aB = parseFloat(aw[2]);
            var aA = parseFloat(aw[3]);
            var az = ag.config.defaultCentury;
            var av, au, aD, ay;
            if (aC > 31) {
                au = aA;
                aD = aB;
                av = az + aC;
            } else {
                au = aB;
                aD = aC;
                av = az + aA;
            }
            ay = aD + "/" + au + "/" + av;
            return ax.replace(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})/, ay);
        }
        if (an && an.length > 3) {
            ao = ar(ao, an);
        }
        var an = ao.match(/^([0-9]{1,2})[-\/]([0-9]{1,2})[-\/]([0-9]{1,2})$/);
        if (an && an.length > 3) {
            ao = ar(ao, an);
        }
        var al = 0;
        var ai = ag.matchers.length;
        var aq, ah, ap = ao, ak;
        while (al < ai) {
            ah = Date.parse(ap);
            if (!isNaN(ah)) {
                return new Date(ah);
            }
            aq = ag.matchers[al];
            if (typeof aq == "function") {
                ak = aq.call(ag, ap);
                if (ak instanceof Date) {
                    return ak;
                }
            } else {
                ap = ao.replace(aq[0], aq[1]);
            }
            al++;
        }
        return NaN;
    }
    ;
    ag.daysInMonth = function(ah, ai) {
        if (ai == 2) {
            return new Date(ah,1,29).getDate() == 29 ? 29 : 28;
        }
        return [u, 31, u, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][ai];
    }
    ;
    ag.matchers = [[/(3[01]|[0-2]\d)\s*\.\s*(1[0-2]|0\d)\s*\.\s*([1-9]\d{3})/, "$2/$1/$3"], [/([1-9]\d{3})\s*-\s*(1[0-2]|0\d)\s*-\s*(3[01]|[0-2]\d)/, "$2/$3/$1"], function(ak) {
        var ai = ak.match(/^(?:(.+)\s+)?([012]?\d)(?:\s*\:\s*(\d\d))?(?:\s*\:\s*(\d\d(\.\d*)?))?\s*(am|pm)?\s*$/i);
        if (ai) {
            if (ai[1]) {
                var aj = this.createDate(ai[1]);
                if (isNaN(aj)) {
                    return;
                }
            } else {
                var aj = new Date();
                aj.setMilliseconds(0);
            }
            var ah = parseFloat(ai[2]);
            if (ai[6]) {
                ah = ai[6].toLowerCase() == "am" ? (ah == 12 ? 0 : ah) : (ah == 12 ? 12 : ah + 12);
            }
            aj.setHours(ah, parseInt(ai[3] || 0, 10), parseInt(ai[4] || 0, 10), ((parseFloat(ai[5] || 0)) || 0) * 1000);
            return aj;
        } else {
            return ak;
        }
    }
    , function(ak) {
        var ai = ak.match(/^(?:(.+))[T|\s+]([012]\d)(?:\:(\d\d))(?:\:(\d\d))(?:\.\d+)([\+\-]\d\d\:\d\d)$/i);
        if (ai) {
            if (ai[1]) {
                var aj = this.createDate(ai[1]);
                if (isNaN(aj)) {
                    return;
                }
            } else {
                var aj = new Date();
                aj.setMilliseconds(0);
            }
            var ah = parseFloat(ai[2]);
            aj.setHours(ah, parseInt(ai[3], 10), parseInt(ai[4], 10), parseFloat(ai[5]) * 1000);
            return aj;
        } else {
            return ak;
        }
    }
    , function(al) {
        var aj = al.match(/^([0-3]?\d)\s*[-\/.\s]{1}\s*([a-zA-Z]{3,9})\s*[-\/.\s]{1}\s*([0-3]?\d)$/);
        if (aj) {
            var ak = new Date();
            var am = ag.config.defaultCentury;
            var ao = parseFloat(aj[1]);
            var an = parseFloat(aj[3]);
            var ai, ah, ap;
            if (ao > 31) {
                ah = an;
                ai = am + ao;
            } else {
                ah = ao;
                ai = am + an;
            }
            var ap = ab(aj[2], ag.regional[ag.regional.getLocale()]["monthNamesShort"]);
            if (ap == -1) {
                ap = ab(aj[2], ag.regional[ag.regional.getLocale()]["monthNames"]);
            }
            ak.setFullYear(ai, ap, ah);
            ak.setHours(0, 0, 0, 0);
            return ak;
        } else {
            return al;
        }
    }
    ];
    function ab(aj, ak) {
        if (ak.indexOf) {
            return ak.indexOf(aj);
        }
        for (var ah = 0, ai = ak.length; ah < ai; ah++) {
            if (ak[ah] === aj) {
                return ah;
            }
        }
        return -1;
    }
    function l(ah) {
        if (ah === null ) {
            return "[object Null]";
        }
        return Object.prototype.toString.call(ah);
    }
    L.jsDate = ag;
    L.jqplot.sprintf = function() {
        function an(au, ap, aq, at) {
            var ar = (au.length >= ap) ? "" : Array(1 + ap - au.length >>> 0).join(aq);
            return at ? au + ar : ar + au;
        }
        function ak(ar) {
            var aq = new String(ar);
            for (var ap = 10; ap > 0; ap--) {
                if (aq == (aq = aq.replace(/^(\d+)(\d{3})/, "$1" + L.jqplot.sprintf.thousandsSeparator + "$2"))) {
                    break;
                }
            }
            return aq;
        }
        function aj(av, au, ax, ar, at, aq) {
            var aw = ar - av.length;
            if (aw > 0) {
                var ap = " ";
                if (aq) {
                    ap = "&nbsp;";
                }
                if (ax || !at) {
                    av = an(av, ar, ap, ax);
                } else {
                    av = av.slice(0, au.length) + an("", aw, "0", true) + av.slice(au.length);
                }
            }
            return av;
        }
        function ao(ay, aq, aw, ar, ap, av, ax, au) {
            var at = ay >>> 0;
            aw = aw && at && {
                "2": "0b",
                "8": "0",
                "16": "0x"
            }[aq] || "";
            ay = aw + an(at.toString(aq), av || 0, "0", false);
            return aj(ay, aw, ar, ap, ax, au);
        }
        function ah(au, av, ar, ap, at, aq) {
            if (ap != null ) {
                au = au.slice(0, ap);
            }
            return aj(au, "", av, ar, at, aq);
        }
        var ai = arguments
          , al = 0
          , am = ai[al++];
        return am.replace(L.jqplot.sprintf.regex, function(aM, ax, ay, aB, aO, aJ, av) {
            if (aM == "%%") {
                return "%";
            }
            var aD = false
              , az = ""
              , aA = false
              , aL = false
              , aw = false
              , au = false;
            for (var aI = 0; ay && aI < ay.length; aI++) {
                switch (ay.charAt(aI)) {
                case " ":
                    az = " ";
                    break;
                case "+":
                    az = "+";
                    break;
                case "-":
                    aD = true;
                    break;
                case "0":
                    aA = true;
                    break;
                case "#":
                    aL = true;
                    break;
                case "&":
                    aw = true;
                    break;
                case "'":
                    au = true;
                    break;
                }
            }
            if (!aB) {
                aB = 0;
            } else {
                if (aB == "*") {
                    aB = +ai[al++];
                } else {
                    if (aB.charAt(0) == "*") {
                        aB = +ai[aB.slice(1, -1)];
                    } else {
                        aB = +aB;
                    }
                }
            }
            if (aB < 0) {
                aB = -aB;
                aD = true;
            }
            if (!isFinite(aB)) {
                throw new Error("$.jqplot.sprintf: (minimum-)width must be finite");
            }
            if (!aJ) {
                aJ = "fFeE".indexOf(av) > -1 ? 6 : (av == "d") ? 0 : void (0);
            } else {
                if (aJ == "*") {
                    aJ = +ai[al++];
                } else {
                    if (aJ.charAt(0) == "*") {
                        aJ = +ai[aJ.slice(1, -1)];
                    } else {
                        aJ = +aJ;
                    }
                }
            }
            var aF = ax ? ai[ax.slice(0, -1)] : ai[al++];
            switch (av) {
            case "s":
                if (aF == null ) {
                    return "";
                }
                return ah(String(aF), aD, aB, aJ, aA, aw);
            case "c":
                return ah(String.fromCharCode(+aF), aD, aB, aJ, aA, aw);
            case "b":
                return ao(aF, 2, aL, aD, aB, aJ, aA, aw);
            case "o":
                return ao(aF, 8, aL, aD, aB, aJ, aA, aw);
            case "x":
                return ao(aF, 16, aL, aD, aB, aJ, aA, aw);
            case "X":
                return ao(aF, 16, aL, aD, aB, aJ, aA, aw).toUpperCase();
            case "u":
                return ao(aF, 10, aL, aD, aB, aJ, aA, aw);
            case "i":
                var ar = parseInt(+aF, 10);
                if (isNaN(ar)) {
                    return "";
                }
                var aH = ar < 0 ? "-" : az;
                var aK = au ? ak(String(Math.abs(ar))) : String(Math.abs(ar));
                aF = aH + an(aK, aJ, "0", false);
                return aj(aF, aH, aD, aB, aA, aw);
            case "d":
                var ar = Math.round(+aF);
                if (isNaN(ar)) {
                    return "";
                }
                var aH = ar < 0 ? "-" : az;
                var aK = au ? ak(String(Math.abs(ar))) : String(Math.abs(ar));
                aF = aH + an(aK, aJ, "0", false);
                return aj(aF, aH, aD, aB, aA, aw);
            case "e":
            case "E":
            case "f":
            case "F":
            case "g":
            case "G":
                var ar = +aF;
                if (isNaN(ar)) {
                    return "";
                }
                var aH = ar < 0 ? "-" : az;
                var at = ["toExponential", "toFixed", "toPrecision"]["efg".indexOf(av.toLowerCase())];
                var aN = ["toString", "toUpperCase"]["eEfFgG".indexOf(av) % 2];
                var aK = Math.abs(ar)[at](aJ);
                var aE = aK.toString().split(".");
                aE[0] = au ? ak(aE[0]) : aE[0];
                aK = aE.join(L.jqplot.sprintf.decimalMark);
                aF = aH + aK;
                var aC = aj(aF, aH, aD, aB, aA, aw)[aN]();
                return aC;
            case "p":
            case "P":
                var ar = +aF;
                if (isNaN(ar)) {
                    return "";
                }
                var aH = ar < 0 ? "-" : az;
                var aE = String(Number(Math.abs(ar)).toExponential()).split(/e|E/);
                var aq = (aE[0].indexOf(".") != -1) ? aE[0].length - 1 : String(ar).length;
                var aG = (aE[1] < 0) ? -aE[1] - 1 : 0;
                if (Math.abs(ar) < 1) {
                    if (aq + aG <= aJ) {
                        aF = aH + Math.abs(ar).toPrecision(aq);
                    } else {
                        if (aq <= aJ - 1) {
                            aF = aH + Math.abs(ar).toExponential(aq - 1);
                        } else {
                            aF = aH + Math.abs(ar).toExponential(aJ - 1);
                        }
                    }
                } else {
                    var ap = (aq <= aJ) ? aq : aJ;
                    aF = aH + Math.abs(ar).toPrecision(ap);
                }
                var aN = ["toString", "toUpperCase"]["pP".indexOf(av) % 2];
                return aj(aF, aH, aD, aB, aA, aw)[aN]();
            case "n":
                return "";
            default:
                return aM;
            }
        });
    }
    ;
    L.jqplot.sprintf.thousandsSeparator = ",";
    L.jqplot.sprintf.decimalMark = ".";
    L.jqplot.sprintf.regex = /%%|%(\d+\$)?([-+#0&\' ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([nAscboxXuidfegpEGP])/g;
    L.jqplot.getSignificantFigures = function(al) {
        var an = String(Number(Math.abs(al)).toExponential()).split(/e|E/);
        var am = (an[0].indexOf(".") != -1) ? an[0].length - 1 : an[0].length;
        var ai = (an[1] < 0) ? -an[1] - 1 : 0;
        var ah = parseInt(an[1], 10);
        var aj = (ah + 1 > 0) ? ah + 1 : 0;
        var ak = (am <= aj) ? 0 : am - ah - 1;
        return {
            significantDigits: am,
            digitsLeft: aj,
            digitsRight: ak,
            zeros: ai,
            exponent: ah
        };
    }
    ;
    L.jqplot.getPrecision = function(ah) {
        return L.jqplot.getSignificantFigures(ah).digitsRight;
    }
    ;
    var X = L.uiBackCompat !== false;
    L.jqplot.effects = {
        effect: {}
    };
    var m = "jqplot.storage.";
    L.extend(L.jqplot.effects, {
        version: "1.9pre",
        save: function(ai, aj) {
            for (var ah = 0; ah < aj.length; ah++) {
                if (aj[ah] !== null ) {
                    ai.data(m + aj[ah], ai[0].style[aj[ah]]);
                }
            }
        },
        restore: function(ai, aj) {
            for (var ah = 0; ah < aj.length; ah++) {
                if (aj[ah] !== null ) {
                    ai.css(aj[ah], ai.data(m + aj[ah]));
                }
            }
        },
        setMode: function(ah, ai) {
            if (ai === "toggle") {
                ai = ah.is(":hidden") ? "show" : "hide";
            }
            return ai;
        },
        createWrapper: function(ai) {
            if (ai.parent().is(".ui-effects-wrapper")) {
                return ai.parent();
            }
            var aj = {
                width: ai.outerWidth(true),
                height: ai.outerHeight(true),
                "float": ai.css("float")
            }
              , al = L("<div></div>").addClass("ui-effects-wrapper").css({
                fontSize: "100%",
                background: "transparent",
                border: "none",
                margin: 0,
                padding: 0
            })
              , ah = {
                width: ai.width(),
                height: ai.height()
            }
              , ak = document.activeElement;
            ai.wrap(al);
            if (ai[0] === ak || L.contains(ai[0], ak)) {
                L(ak).focus();
            }
            al = ai.parent();
            if (ai.css("position") === "static") {
                al.css({
                    position: "relative"
                });
                ai.css({
                    position: "relative"
                });
            } else {
                L.extend(aj, {
                    position: ai.css("position"),
                    zIndex: ai.css("z-index")
                });
                L.each(["top", "left", "bottom", "right"], function(am, an) {
                    aj[an] = ai.css(an);
                    if (isNaN(parseInt(aj[an], 10))) {
                        aj[an] = "auto";
                    }
                });
                ai.css({
                    position: "relative",
                    top: 0,
                    left: 0,
                    right: "auto",
                    bottom: "auto"
                });
            }
            ai.css(ah);
            return al.css(aj).show();
        },
        removeWrapper: function(ah) {
            var ai = document.activeElement;
            if (ah.parent().is(".ui-effects-wrapper")) {
                ah.parent().replaceWith(ah);
                if (ah[0] === ai || L.contains(ah[0], ai)) {
                    L(ai).focus();
                }
            }
            return ah;
        }
    });
    function j(ai, ah, aj, ak) {
        if (L.isPlainObject(ai)) {
            return ai;
        }
        ai = {
            effect: ai
        };
        if (ah === u) {
            ah = {};
        }
        if (L.isFunction(ah)) {
            ak = ah;
            aj = null ;
            ah = {};
        }
        if (L.type(ah) === "number" || L.fx.speeds[ah]) {
            ak = aj;
            aj = ah;
            ah = {};
        }
        if (L.isFunction(aj)) {
            ak = aj;
            aj = null ;
        }
        if (ah) {
            L.extend(ai, ah);
        }
        aj = aj || ah.duration;
        ai.duration = L.fx.off ? 0 : typeof aj === "number" ? aj : aj in L.fx.speeds ? L.fx.speeds[aj] : L.fx.speeds._default;
        ai.complete = ak || ah.complete;
        return ai;
    }
    function ae(ah) {
        if (!ah || typeof ah === "number" || L.fx.speeds[ah]) {
            return true;
        }
        if (typeof ah === "string" && !L.jqplot.effects.effect[ah]) {
            if (X && L.jqplot.effects[ah]) {
                return false;
            }
            return true;
        }
        return false;
    }
    L.fn.extend({
        jqplotEffect: function(ap, aq, ai, ao) {
            var an = j.apply(this, arguments)
              , ak = an.mode
              , al = an.queue
              , am = L.jqplot.effects.effect[an.effect]
              , ah = !am && X && L.jqplot.effects[an.effect];
            if (L.fx.off || !(am || ah)) {
                if (ak) {
                    return this[ak](an.duration, an.complete);
                } else {
                    return this.each(function() {
                        if (an.complete) {
                            an.complete.call(this);
                        }
                    });
                }
            }
            function aj(au) {
                var av = L(this)
                  , at = an.complete
                  , aw = an.mode;
                function ar() {
                    if (L.isFunction(at)) {
                        at.call(av[0]);
                    }
                    if (L.isFunction(au)) {
                        au();
                    }
                }
                if (av.is(":hidden") ? aw === "hide" : aw === "show") {
                    ar();
                } else {
                    am.call(av[0], an, ar);
                }
            }
            if (am) {
                return al === false ? this.each(aj) : this.queue(al || "fx", aj);
            } else {
                return ah.call(this, {
                    options: an,
                    duration: an.duration,
                    callback: an.complete,
                    mode: an.mode
                });
            }
        }
    });
    var a = /up|down|vertical/
      , v = /up|left|vertical|horizontal/;
    L.jqplot.effects.effect.blind = function(aj, ao) {
        var ak = L(this), ar = ["position", "top", "bottom", "left", "right", "height", "width"], ap = L.jqplot.effects.setMode(ak, aj.mode || "hide"), au = aj.direction || "up", am = a.test(au), al = am ? "height" : "width", aq = am ? "top" : "left", aw = v.test(au), an = {}, av = ap === "show", ai, ah, at;
        if (ak.parent().is(".ui-effects-wrapper")) {
            L.jqplot.effects.save(ak.parent(), ar);
        } else {
            L.jqplot.effects.save(ak, ar);
        }
        ak.show();
        at = parseInt(ak.css("top"), 10);
        ai = L.jqplot.effects.createWrapper(ak).css({
            overflow: "hidden"
        });
        ah = am ? ai[al]() + at : ai[al]();
        an[al] = av ? String(ah) : "0";
        if (!aw) {
            ak.css(am ? "bottom" : "right", 0).css(am ? "top" : "left", "").css({
                position: "absolute"
            });
            an[aq] = av ? "0" : String(ah);
        }
        if (av) {
            ai.css(al, 0);
            if (!aw) {
                ai.css(aq, ah);
            }
        }
        ai.animate(an, {
            duration: aj.duration,
            easing: aj.easing,
            queue: false,
            complete: function() {
                if (ap === "hide") {
                    ak.hide();
                }
                L.jqplot.effects.restore(ak, ar);
                L.jqplot.effects.removeWrapper(ak);
                ao();
            }
        });
    }
    ;
})(jQuery);
(function(e) {
    e.jqplot.DonutRenderer = function() {
        e.jqplot.LineRenderer.call(this);
    }
    ;
    e.jqplot.DonutRenderer.prototype = new e.jqplot.LineRenderer();
    e.jqplot.DonutRenderer.prototype.constructor = e.jqplot.DonutRenderer;
    e.jqplot.DonutRenderer.prototype.init = function(p, t) {
        this.diameter = null ;
        this.innerDiameter = null ;
        this.thickness = null ;
        this.padding = 20;
        this.sliceMargin = 0;
        this.ringMargin = null ;
        this.fill = true;
        this.shadowOffset = 2;
        this.shadowAlpha = 0.07;
        this.shadowDepth = 5;
        this.highlightMouseOver = true;
        this.highlightMouseDown = false;
        this.highlightColors = [];
        this.dataLabels = "percent";
        this.showDataLabels = false;
        this.dataLabelFormatString = null ;
        this.dataLabelThreshold = 3;
        this.dataLabelPositionFactor = 0.4;
        this.dataLabelNudge = 0;
        this.startAngle = 0;
        this.tickRenderer = e.jqplot.DonutTickRenderer;
        this._drawData = true;
        this._type = "donut";
        if (p.highlightMouseDown && p.highlightMouseOver == null ) {
            p.highlightMouseOver = false;
        }
        e.extend(true, this, p);
        if (this.diameter != null ) {
            this.diameter = this.diameter - this.sliceMargin;
        }
        this._diameter = null ;
        this._innerDiameter = null ;
        this._radius = null ;
        this._innerRadius = null ;
        this._thickness = null ;
        this._previousSeries = [];
        this._numberSeries = 1;
        this._sliceAngles = [];
        this._highlightedPoint = null ;
        if (this.highlightColors.length == 0) {
            for (var r = 0; r < this.seriesColors.length; r++) {
                var q = e.jqplot.getColorComponents(this.seriesColors[r]);
                var n = [q[0], q[1], q[2]];
                var s = n[0] + n[1] + n[2];
                for (var o = 0; o < 3; o++) {
                    n[o] = (s > 570) ? n[o] * 0.8 : n[o] + 0.3 * (255 - n[o]);
                    n[o] = parseInt(n[o], 10);
                }
                this.highlightColors.push("rgb(" + n[0] + "," + n[1] + "," + n[2] + ")");
            }
        }
        t.postParseOptionsHooks.addOnce(l);
        t.postInitHooks.addOnce(g);
        t.eventListenerHooks.addOnce("jqplotMouseMove", b);
        t.eventListenerHooks.addOnce("jqplotMouseDown", a);
        t.eventListenerHooks.addOnce("jqplotMouseUp", j);
        t.eventListenerHooks.addOnce("jqplotClick", f);
        t.eventListenerHooks.addOnce("jqplotRightClick", m);
        t.postDrawHooks.addOnce(h);
    }
    ;
    e.jqplot.DonutRenderer.prototype.setGridData = function(s) {
        var o = [];
        var t = [];
        var n = this.startAngle / 180 * Math.PI;
        var r = 0;
        this._drawData = false;
        for (var q = 0; q < this.data.length; q++) {
            if (this.data[q][1] != 0) {
                this._drawData = true;
            }
            o.push(this.data[q][1]);
            t.push([this.data[q][0]]);
            if (q > 0) {
                o[q] += o[q - 1];
            }
            r += this.data[q][1];
        }
        var p = Math.PI * 2 / o[o.length - 1];
        for (var q = 0; q < o.length; q++) {
            t[q][1] = o[q] * p;
            t[q][2] = this.data[q][1] / r;
        }
        this.gridData = t;
    }
    ;
    e.jqplot.DonutRenderer.prototype.makeGridData = function(s, t) {
        var o = [];
        var u = [];
        var r = 0;
        var n = this.startAngle / 180 * Math.PI;
        this._drawData = false;
        for (var q = 0; q < s.length; q++) {
            if (this.data[q][1] != 0) {
                this._drawData = true;
            }
            o.push(s[q][1]);
            u.push([s[q][0]]);
            if (q > 0) {
                o[q] += o[q - 1];
            }
            r += s[q][1];
        }
        var p = Math.PI * 2 / o[o.length - 1];
        for (var q = 0; q < o.length; q++) {
            u[q][1] = o[q] * p;
            u[q][2] = s[q][1] / r;
        }
        return u;
    }
    ;
    e.jqplot.DonutRenderer.prototype.drawSlice = function(x, u, t, p, s) {
        var n = this._diameter / 2;
        var v = n - this._thickness;
        var w = this.fill;
        x.save();
        x.translate(this._center[0], this._center[1]);
        if (s) {
            for (var q = 0; q < this.shadowDepth; q++) {
                x.save();
                x.translate(this.shadowOffset * Math.cos(this.shadowAngle / 180 * Math.PI), this.shadowOffset * Math.sin(this.shadowAngle / 180 * Math.PI));
                o();
            }
        } else {
            o();
        }
        function o() {
            if (t > 6.282 + this.startAngle) {
                t = 6.282 + this.startAngle;
                if (u > t) {
                    u = 6.281 + this.startAngle;
                }
            }
            if (u >= t) {
                return;
            }
            x.beginPath();
            x.fillStyle = p;
            x.strokeStyle = p;
            x.arc(0, 0, n, u, t, false);
            x.lineTo(v * Math.cos(t), v * Math.sin(t));
            x.arc(0, 0, v, t, u, true);
            x.closePath();
            if (w) {
                x.fill();
            } else {
                x.stroke();
            }
        }
        if (s) {
            for (var q = 0; q < this.shadowDepth; q++) {
                x.restore();
            }
        }
        x.restore();
    }
    ;
    e.jqplot.DonutRenderer.prototype.draw = function(N, V, t, P) {
        var Q;
        var J = (t != undefined) ? t : {};
        var q = 0;
        var p = 0;
        var u = 1;
        if (t.legendInfo && t.legendInfo.placement == "insideGrid") {
            var I = t.legendInfo;
            switch (I.location) {
            case "nw":
                q = I.width + I.xoffset;
                break;
            case "w":
                q = I.width + I.xoffset;
                break;
            case "sw":
                q = I.width + I.xoffset;
                break;
            case "ne":
                q = I.width + I.xoffset;
                u = -1;
                break;
            case "e":
                q = I.width + I.xoffset;
                u = -1;
                break;
            case "se":
                q = I.width + I.xoffset;
                u = -1;
                break;
            case "n":
                p = I.height + I.yoffset;
                break;
            case "s":
                p = I.height + I.yoffset;
                u = -1;
                break;
            default:
                break;
            }
        }
        var B = (J.shadow != undefined) ? J.shadow : this.shadow;
        var W = (J.showLine != undefined) ? J.showLine : this.showLine;
        var O = (J.fill != undefined) ? J.fill : this.fill;
        var s = N.canvas.width;
        var H = N.canvas.height;
        var G = s - q - 2 * this.padding;
        var R = H - p - 2 * this.padding;
        var v = Math.min(G, R);
        var T = v;
        var X = (this.ringMargin == null ) ? this.sliceMargin * 2 : this.ringMargin;
        for (var Q = 0; Q < this._previousSeries.length; Q++) {
            T -= 2 * this._previousSeries[Q]._thickness + 2 * X;
        }
        this._diameter = this.diameter || T;
        if (this.innerDiameter != null ) {
            var M = (this._numberSeries > 1 && this.index > 0) ? this._previousSeries[0]._diameter : this._diameter;
            this._thickness = this.thickness || (M - this.innerDiameter - 2 * X * this._numberSeries) / this._numberSeries / 2;
        } else {
            this._thickness = this.thickness || v / 2 / (this._numberSeries + 1) * 0.85;
        }
        var K = this._radius = this._diameter / 2;
        this._innerRadius = this._radius - this._thickness;
        var o = this.startAngle / 180 * Math.PI;
        this._center = [(s - u * q) / 2 + u * q, (H - u * p) / 2 + u * p];
        if (this.shadow) {
            var L = "rgba(0,0,0," + this.shadowAlpha + ")";
            for (var Q = 0; Q < V.length; Q++) {
                var A = (Q == 0) ? o : V[Q - 1][1] + o;
                A += this.sliceMargin / 180 * Math.PI;
                this.renderer.drawSlice.call(this, N, A, V[Q][1] + o, L, true);
            }
        }
        for (var Q = 0; Q < V.length; Q++) {
            var A = (Q == 0) ? o : V[Q - 1][1] + o;
            A += this.sliceMargin / 180 * Math.PI;
            var z = V[Q][1] + o;
            this._sliceAngles.push([A, z]);
            this.renderer.drawSlice.call(this, N, A, z, this.seriesColors[Q], false);
            if (this.showDataLabels && V[Q][2] * 100 >= this.dataLabelThreshold) {
                var S, U = (A + z) / 2, C;
                if (this.dataLabels == "label") {
                    S = this.dataLabelFormatString || "%s";
                    C = e.jqplot.sprintf(S, V[Q][0]);
                } else {
                    if (this.dataLabels == "value") {
                        S = this.dataLabelFormatString || "%d";
                        C = e.jqplot.sprintf(S, this.data[Q][1]);
                    } else {
                        if (this.dataLabels == "percent") {
                            S = this.dataLabelFormatString || "%d%%";
                            C = e.jqplot.sprintf(S, V[Q][2] * 100);
                        } else {
                            if (this.dataLabels.constructor == Array) {
                                S = this.dataLabelFormatString || "%s";
                                C = e.jqplot.sprintf(S, this.dataLabels[Q]);
                            }
                        }
                    }
                }
                var n = this._innerRadius + this._thickness * this.dataLabelPositionFactor + this.sliceMargin + this.dataLabelNudge;
                var F = this._center[0] + Math.cos(U) * n + this.canvas._offsets.left;
                var E = this._center[1] + Math.sin(U) * n + this.canvas._offsets.top;
                var D = e('<span class="jqplot-donut-series jqplot-data-label" style="position:absolute;">' + C + "</span>").insertBefore(P.eventCanvas._elem);
                F -= D.width() / 2;
                E -= D.height() / 2;
                F = Math.round(F);
                E = Math.round(E);
                D.css({
                    left: F,
                    top: E
                });
            }
        }
    }
    ;
    e.jqplot.DonutAxisRenderer = function() {
        e.jqplot.LinearAxisRenderer.call(this);
    }
    ;
    e.jqplot.DonutAxisRenderer.prototype = new e.jqplot.LinearAxisRenderer();
    e.jqplot.DonutAxisRenderer.prototype.constructor = e.jqplot.DonutAxisRenderer;
    e.jqplot.DonutAxisRenderer.prototype.init = function(n) {
        this.tickRenderer = e.jqplot.DonutTickRenderer;
        e.extend(true, this, n);
        this._dataBounds = {
            min: 0,
            max: 100
        };
        this.min = 0;
        this.max = 100;
        this.showTicks = false;
        this.ticks = [];
        this.showMark = false;
        this.show = false;
    }
    ;
    e.jqplot.DonutLegendRenderer = function() {
        e.jqplot.TableLegendRenderer.call(this);
    }
    ;
    e.jqplot.DonutLegendRenderer.prototype = new e.jqplot.TableLegendRenderer();
    e.jqplot.DonutLegendRenderer.prototype.constructor = e.jqplot.DonutLegendRenderer;
    e.jqplot.DonutLegendRenderer.prototype.init = function(n) {
        this.numberRows = null ;
        this.numberColumns = null ;
        e.extend(true, this, n);
    }
    ;
    e.jqplot.DonutLegendRenderer.prototype.draw = function() {
        var q = this;
        if (this.show) {
            var y = this._series;
            var B = "position:absolute;";
            B += (this.background) ? "background:" + this.background + ";" : "";
            B += (this.border) ? "border:" + this.border + ";" : "";
            B += (this.fontSize) ? "font-size:" + this.fontSize + ";" : "";
            B += (this.fontFamily) ? "font-family:" + this.fontFamily + ";" : "";
            B += (this.textColor) ? "color:" + this.textColor + ";" : "";
            B += (this.marginTop != null ) ? "margin-top:" + this.marginTop + ";" : "";
            B += (this.marginBottom != null ) ? "margin-bottom:" + this.marginBottom + ";" : "";
            B += (this.marginLeft != null ) ? "margin-left:" + this.marginLeft + ";" : "";
            B += (this.marginRight != null ) ? "margin-right:" + this.marginRight + ";" : "";
            this._elem = e('<table class="jqplot-table-legend" style="' + B + '"></table>');
            var F = false, x = false, n, v;
            var z = y[0];
            var o = new e.jqplot.ColorGenerator(z.seriesColors);
            if (z.show) {
                var G = z.data;
                if (this.numberRows) {
                    n = this.numberRows;
                    if (!this.numberColumns) {
                        v = Math.ceil(G.length / n);
                    } else {
                        v = this.numberColumns;
                    }
                } else {
                    if (this.numberColumns) {
                        v = this.numberColumns;
                        n = Math.ceil(G.length / this.numberColumns);
                    } else {
                        n = G.length;
                        v = 1;
                    }
                }
                var E, D, p, t, r, u, w, C;
                var A = 0;
                for (E = 0; E < n; E++) {
                    if (x) {
                        p = e('<tr class="jqplot-table-legend"></tr>').prependTo(this._elem);
                    } else {
                        p = e('<tr class="jqplot-table-legend"></tr>').appendTo(this._elem);
                    }
                    for (D = 0; D < v; D++) {
                        if (A < G.length) {
                            u = this.labels[A] || G[A][0].toString();
                            C = o.next();
                            if (!x) {
                                if (E > 0) {
                                    F = true;
                                } else {
                                    F = false;
                                }
                            } else {
                                if (E == n - 1) {
                                    F = false;
                                } else {
                                    F = true;
                                }
                            }
                            w = (F) ? this.rowSpacing : "0";
                            t = e('<td class="jqplot-table-legend" style="text-align:center;padding-top:' + w + ';"><div><div class="jqplot-table-legend-swatch" style="border-color:' + C + ';"></div></div></td>');
                            r = e('<td class="jqplot-table-legend" style="padding-top:' + w + ';"></td>');
                            if (this.escapeHtml) {
                                r.text(u);
                            } else {
                                r.html(u);
                            }
                            if (x) {
                                r.prependTo(p);
                                t.prependTo(p);
                            } else {
                                t.appendTo(p);
                                r.appendTo(p);
                            }
                            F = true;
                        }
                        A++;
                    }
                }
            }
        }
        return this._elem;
    }
    ;
    function c(r, q, o) {
        o = o || {};
        o.axesDefaults = o.axesDefaults || {};
        o.legend = o.legend || {};
        o.seriesDefaults = o.seriesDefaults || {};
        var n = false;
        if (o.seriesDefaults.renderer == e.jqplot.DonutRenderer) {
            n = true;
        } else {
            if (o.series) {
                for (var p = 0; p < o.series.length; p++) {
                    if (o.series[p].renderer == e.jqplot.DonutRenderer) {
                        n = true;
                    }
                }
            }
        }
        if (n) {
            o.axesDefaults.renderer = e.jqplot.DonutAxisRenderer;
            o.legend.renderer = e.jqplot.DonutLegendRenderer;
            o.legend.preDraw = true;
            o.seriesDefaults.pointLabels = {
                show: false
            };
        }
    }
    function g(r, q, o) {
        for (var p = 1; p < this.series.length; p++) {
            if (!this.series[p]._previousSeries.length) {
                for (var n = 0; n < p; n++) {
                    if (this.series[p].renderer.constructor == e.jqplot.DonutRenderer && this.series[n].renderer.constructor == e.jqplot.DonutRenderer) {
                        this.series[p]._previousSeries.push(this.series[n]);
                    }
                }
            }
        }
        for (p = 0; p < this.series.length; p++) {
            if (this.series[p].renderer.constructor == e.jqplot.DonutRenderer) {
                this.series[p]._numberSeries = this.series.length;
                if (this.series[p].highlightMouseOver) {
                    this.series[p].highlightMouseDown = false;
                }
            }
        }
    }
    var k = false;
    function l(n) {
        for (var o = 0; o < this.series.length; o++) {
            this.series[o].seriesColors = this.seriesColors;
            this.series[o].colorGenerator = e.jqplot.colorGenerator;
        }
    }
    function d(r, q, p) {
        var o = r.series[q];
        var n = r.plugins.donutRenderer.highlightCanvas;
        n._ctx.clearRect(0, 0, n._ctx.canvas.width, n._ctx.canvas.height);
        o._highlightedPoint = p;
        r.plugins.donutRenderer.highlightedSeriesIndex = q;
        o.renderer.drawSlice.call(o, n._ctx, o._sliceAngles[p][0], o._sliceAngles[p][1], o.highlightColors[p], false);
    }
    function i(p) {
        var n = p.plugins.donutRenderer.highlightCanvas;
        n._ctx.clearRect(0, 0, n._ctx.canvas.width, n._ctx.canvas.height);
        for (var o = 0; o < p.series.length; o++) {
            p.series[o]._highlightedPoint = null ;
        }
        p.plugins.donutRenderer.highlightedSeriesIndex = null ;
        p.target.trigger("jqplotDataUnhighlight");
    }
    function b(r, q, u, t, s) {
        if (t) {
            var p = [t.seriesIndex, t.pointIndex, t.data];
            var o = jQuery.Event("jqplotDataMouseOver");
            o.pageX = r.pageX;
            o.pageY = r.pageY;
            s.target.trigger(o, p);
            if (s.series[p[0]].highlightMouseOver && !(p[0] == s.plugins.donutRenderer.highlightedSeriesIndex && p[1] == s.series[p[0]]._highlightedPoint)) {
                var n = jQuery.Event("jqplotDataHighlight");
                n.which = r.which;
                n.pageX = r.pageX;
                n.pageY = r.pageY;
                s.target.trigger(n, p);
                d(s, p[0], p[1]);
            }
        } else {
            if (t == null ) {
                i(s);
            }
        }
    }
    function a(q, p, t, s, r) {
        if (s) {
            var o = [s.seriesIndex, s.pointIndex, s.data];
            if (r.series[o[0]].highlightMouseDown && !(o[0] == r.plugins.donutRenderer.highlightedSeriesIndex && o[1] == r.series[o[0]]._highlightedPoint)) {
                var n = jQuery.Event("jqplotDataHighlight");
                n.which = q.which;
                n.pageX = q.pageX;
                n.pageY = q.pageY;
                r.target.trigger(n, o);
                d(r, o[0], o[1]);
            }
        } else {
            if (s == null ) {
                i(r);
            }
        }
    }
    function j(p, o, s, r, q) {
        var n = q.plugins.donutRenderer.highlightedSeriesIndex;
        if (n != null  && q.series[n].highlightMouseDown) {
            i(q);
        }
    }
    function f(q, p, t, s, r) {
        if (s) {
            var o = [s.seriesIndex, s.pointIndex, s.data];
            var n = jQuery.Event("jqplotDataClick");
            n.which = q.which;
            n.pageX = q.pageX;
            n.pageY = q.pageY;
            r.target.trigger(n, o);
        }
    }
    function m(r, q, u, t, s) {
        if (t) {
            var p = [t.seriesIndex, t.pointIndex, t.data];
            var n = s.plugins.donutRenderer.highlightedSeriesIndex;
            if (n != null  && s.series[n].highlightMouseDown) {
                i(s);
            }
            var o = jQuery.Event("jqplotDataRightClick");
            o.which = r.which;
            o.pageX = r.pageX;
            o.pageY = r.pageY;
            s.target.trigger(o, p);
        }
    }
    function h() {
        if (this.plugins.donutRenderer && this.plugins.donutRenderer.highlightCanvas) {
            this.plugins.donutRenderer.highlightCanvas.resetCanvas();
            this.plugins.donutRenderer.highlightCanvas = null ;
        }
        this.plugins.donutRenderer = {
            highlightedSeriesIndex: null 
        };
        this.plugins.donutRenderer.highlightCanvas = new e.jqplot.GenericCanvas();
        var o = e(this.targetId + " .jqplot-data-label");
        if (o.length) {
            e(o[0]).before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding, "jqplot-donutRenderer-highlight-canvas", this._plotDimensions, this));
        } else {
            this.eventCanvas._elem.before(this.plugins.donutRenderer.highlightCanvas.createElement(this._gridPadding, "jqplot-donutRenderer-highlight-canvas", this._plotDimensions, this));
        }
        var n = this.plugins.donutRenderer.highlightCanvas.setContext();
        this.eventCanvas._elem.bind("mouseleave", {
            plot: this
        }, function(p) {
            i(p.data.plot);
        });
    }
    e.jqplot.preInitHooks.push(c);
    e.jqplot.DonutTickRenderer = function() {
        e.jqplot.AxisTickRenderer.call(this);
    }
    ;
    e.jqplot.DonutTickRenderer.prototype = new e.jqplot.AxisTickRenderer();
    e.jqplot.DonutTickRenderer.prototype.constructor = e.jqplot.DonutTickRenderer;
})(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function($) {
    $.support.touch = "ontouchend" in document;
    if (!$.support.touch) {
        return;
    }
    var mouseProto = $.ui.mouse.prototype, _mouseInit = mouseProto._mouseInit, touchHandled;
    function simulateMouseEvent(event, simulatedType) {
        if (event.originalEvent.touches.length > 1) {
            return;
        }
        event.preventDefault();
        var touch = event.originalEvent.changedTouches[0]
          , simulatedEvent = document.createEvent("MouseEvents");
        simulatedEvent.initMouseEvent(simulatedType, true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null );
        event.target.dispatchEvent(simulatedEvent);
    }
    mouseProto._touchStart = function(event) {
        var self = this;
        if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
            return;
        }
        touchHandled = true;
        self._touchMoved = false;
        simulateMouseEvent(event, "mouseover");
        simulateMouseEvent(event, "mousemove");
        simulateMouseEvent(event, "mousedown");
    }
    ;
    mouseProto._touchMove = function(event) {
        if (!touchHandled) {
            return;
        }
        this._touchMoved = true;
        simulateMouseEvent(event, "mousemove");
    }
    ;
    mouseProto._touchEnd = function(event) {
        if (!touchHandled) {
            return;
        }
        simulateMouseEvent(event, "mouseup");
        simulateMouseEvent(event, "mouseout");
        if (!this._touchMoved) {
            simulateMouseEvent(event, "click");
        }
        touchHandled = false;
    }
    ;
    mouseProto._mouseInit = function() {
        var self = this;
        self.element.bind("touchstart", $.proxy(self, "_touchStart")).bind("touchmove", $.proxy(self, "_touchMove")).bind("touchend", $.proxy(self, "_touchEnd"));
        _mouseInit.call(self);
    }
    ;
})(jQuery);
(function(e, c) {
    var i = !1
      , l = null 
      , p = parseFloat
      , m = Math.min
      , n = /(-?\d+\.?\d*)$/g
      , h = /(\d+\.?\d*)$/g
      , k = []
      , g = []
      , b = function(q) {
        return typeof q == "string";
    }
      , f = function(u, t) {
        var q = u.length, s = q, r;
        while (s--) {
            r = q - s - 1;
            t(u[r], r);
        }
    }
      , o = Array.prototype.indexOf || function(s) {
        var q = this.length
          , r = Number(arguments[1]) || 0;
        r = r < 0 ? Math.ceil(r) : Math.floor(r);
        if (r < 0) {
            r += q;
        }
        for (; r < q; r++) {
            if (r in this && this[r] === s) {
                return r;
            }
        }
        return -1;
    }
    ;
    e.tinysort = {
        id: "TinySort",
        version: "1.5.5",
        copyright: "Copyright (c) 2008-2013 Ron Valstar",
        uri: "http://tinysort.sjeiti.com/",
        licensed: {
            MIT: "http://www.opensource.org/licenses/mit-license.php",
            GPL: "http://www.gnu.org/licenses/gpl.html"
        },
        plugin: (function() {
            var q = function(r, s) {
                k.push(r);
                g.push(s);
            }
            ;
            q.indexOf = o;
            return q;
        })(),
        defaults: {
            order: "asc",
            attr: l,
            data: l,
            useVal: i,
            place: "start",
            returns: i,
            cases: i,
            forceStrings: i,
            ignoreDashes: i,
            sortFunction: l
        }
    };
    e.fn.extend({
        tinysort: function() {
            var E, D, G = this, t = [], s = [], H = [], I = [], w = 0, r, C = [], y = [], z = function(J) {
                f(k, function(K) {
                    K.call(K, J);
                });
            }
            , A = function(K, J) {
                if (typeof J == "string") {
                    if (!K.cases) {
                        J = a(J);
                    }
                    J = J.replace(/^\s*(.*?)\s*$/i, "$1");
                }
                return J;
            }
            , x = function(U, S) {
                var J = 0;
                if (w !== 0) {
                    w = 0;
                }
                while (J === 0 && w < r) {
                    var Q = I[w]
                      , N = Q.oSettings
                      , R = N.ignoreDashes ? h : n;
                    z(N);
                    if (N.sortFunction) {
                        J = N.sortFunction(U, S);
                    } else {
                        if (N.order == "rand") {
                            J = Math.random() < 0.5 ? 1 : -1;
                        } else {
                            var T = i
                              , M = A(N, U.s[w])
                              , L = A(N, S.s[w]);
                            if (!N.forceStrings) {
                                var K = b(M) ? M && M.match(R) : i
                                  , V = b(L) ? L && L.match(R) : i;
                                if (K && V) {
                                    var P = M.substr(0, M.length - K[0].length)
                                      , O = L.substr(0, L.length - V[0].length);
                                    if (P == O) {
                                        T = !i;
                                        M = p(K[0]);
                                        L = p(V[0]);
                                    }
                                }
                            }
                            J = Q.iAsc * (M < L ? -1 : (M > L ? 1 : 0));
                        }
                    }
                    f(g, function(W) {
                        J = W.call(W, T, M, L, J);
                    });
                    if (J === 0) {
                        w++;
                    }
                }
                return J;
            }
            ;
            for (E = 0,
            D = arguments.length; E < D; E++) {
                var B = arguments[E];
                if (b(B)) {
                    if (C.push(B) - 1 > y.length) {
                        y.length = C.length - 1;
                    }
                } else {
                    if (y.push(B) > C.length) {
                        C.length = y.length;
                    }
                }
            }
            if (C.length > y.length) {
                y.length = C.length;
            }
            r = C.length;
            if (r === 0) {
                r = C.length = 1;
                y.push({});
            }
            for (E = 0,
            D = r; E < D; E++) {
                var F = C[E]
                  , u = e.extend({}, e.tinysort.defaults, y[E])
                  , v = !(!F || F == "")
                  , q = v && F[0] == ":";
                I.push({
                    sFind: F,
                    oSettings: u,
                    bFind: v,
                    bAttr: !(u.attr === l || u.attr == ""),
                    bData: u.data !== l,
                    bFilter: q,
                    $Filter: q ? G.filter(F) : G,
                    fnSort: u.sortFunction,
                    iAsc: u.order == "asc" ? 1 : -1
                });
            }
            G.each(function(Q, J) {
                var M = e(J), K = M.parent().get(0), L, P = [];
                for (j = 0; j < r; j++) {
                    var R = I[j]
                      , N = R.bFind ? (R.bFilter ? R.$Filter.filter(J) : M.find(R.sFind)) : M;
                    P.push(R.bData ? N.data(R.oSettings.data) : (R.bAttr ? N.attr(R.oSettings.attr) : (R.oSettings.useVal ? N.val() : N.text())));
                    if (L === c) {
                        L = N;
                    }
                }
                var O = o.call(H, K);
                if (O < 0) {
                    O = H.push(K) - 1;
                    s[O] = {
                        s: [],
                        n: []
                    };
                }
                if (L.length > 0) {
                    s[O].s.push({
                        s: P,
                        e: M,
                        n: Q
                    });
                } else {
                    s[O].n.push({
                        e: M,
                        n: Q
                    });
                }
            });
            f(s, function(J) {
                J.s.sort(x);
            });
            f(s, function(K) {
                var Q = K.s
                  , J = K.n
                  , S = Q.length
                  , O = J.length
                  , T = S + O
                  , L = []
                  , N = T
                  , M = [0, 0];
                switch (u.place) {
                case "first":
                    f(Q, function(V) {
                        N = m(N, V.n);
                    });
                    break;
                case "org":
                    f(Q, function(V) {
                        L.push(V.n);
                    });
                    break;
                case "end":
                    N = O;
                    break;
                default:
                    N = 0;
                }
                for (E = 0; E < T; E++) {
                    var P = d(L, E) ? !i : E >= N && E < N + S
                      , R = P ? 0 : 1
                      , U = (P ? Q : J)[M[R]].e;
                    U.parent().append(U);
                    if (P || !u.returns) {
                        t.push(U.get(0));
                    }
                    M[R]++;
                }
            });
            G.length = 0;
            Array.prototype.push.apply(G, t);
            return G;
        }
    });
    function a(q) {
        return q && q.toLowerCase ? q.toLowerCase() : q;
    }
    function d(r, t) {
        for (var s = 0, q = r.length; s < q; s++) {
            if (r[s] == t) {
                return !i;
            }
        }
        return i;
    }
    e.fn.TinySort = e.fn.Tinysort = e.fn.tsort = e.fn.tinysort;
})(jQuery);
var debug_ajax = false;
var ajaxWindow = null ;
(function($) {
    $.extend({
        ajaxAPI: function(arguments) {
            var settings = {
                "type": "GET",
                "urlPrefix": apiUrlPrefix,
                "url": null ,
                "timeout": 120000,
                "data": null ,
                "success": null ,
                "error": null ,
                "complete": null ,
                "before": null ,
                "after": null ,
                "contentType": undefined,
                "debug": debug_ajax,
                "dataType": "text",
                "cache": false
            };
            var handler = {
                call: function() {
                    var url = settings.urlPrefix + settings.url;
                    if (settings.before != null ) {
                        settings.before.apply($(this));
                    }
                    var time = 0;
                    return $.ajax({
                        "url": url,
                        "type": settings.type.toUpperCase(),
                        "data": settings.data,
                        "dataType": settings.dataType,
                        "contentType": settings.contentType,
                        "timeout": settings.timeout,
                        "cache": settings.cache,
                        "crossDomain": false,
                        "beforeSend": function() {
                            var startTime = new Date();
                            time = startTime.getTime();
                        },
                        "success": function(xmlData, textStatus, jqXHR) {
                            if (settings.debug) {
                                var endTime = new Date();
                                endTime = endTime.getTime();
                                time = ((endTime - time) / 1000).toFixed(2);
                                $(ajaxWindow.document.body).find("#easter_egg_area").html($(ajaxWindow.document.body).find("#easter_egg_area").html() + url + "::" + settings.type.toUpperCase() + "::" + time + " sec<br/>");
                            }
                            if (settings.success != null ) {
                                if (settings.dataType == "json" || settings.dataType == "jsonp") {
                                    settings.success(xmlData, textStatus, jqXHR);
                                } else {
                                    var xotree = new XML.ObjTree();
                                    var data = xotree.parseXML(xmlData);
                                    settings.success(data, textStatus, jqXHR);
                                }
                            }
                        },
                        "error": function(request, status, error) {
                            if ((request.status.toString() == "401") && (settings.url != "local_login")) {
                                if (authenticationHandler != null ) {
                                    authenticationHandler.addItemToProcessAfterAuth(function() {
                                        $.ajaxAPI(settings);
                                    });
                                    if (authenticationHandler.isRunning() == false) {
                                        authenticationHandler.checkUsers();
                                    }
                                }
                            } else {
                                if (settings.error != null ) {
                                    settings.error(request, status, error);
                                }
                            }
                        },
                        "complete": function(jqXHR, textStatus) {
                            if ((jqXHR.status.toString() != "401") || (settings.url == "local_login")) {
                                if (settings.complete != null ) {
                                    settings.complete(jqXHR, textStatus);
                                }
                                if (settings.after != null ) {
                                    settings.after(this);
                                }
                            }
                        }
                    });
                }
            };
            $.extend(settings, arguments);
            return handler.call();
        }
    });
})(jQuery);
(function($) {
    $.extend({
        ajaxQueue: function(arguments) {
            var settings = {
                "connections": 2,
                "queues": {
                    "high": [],
                    "normal": [],
                    "low": []
                },
                "ajaxCalls": [],
                "clearCalled": false,
                "processCalled": false
            };
            var handler = {
                init: function() {
                    return this;
                },
                add: function(ajaxOptions, priority, callProcess) {
                    if (typeof priority == "undefined" || priority == null ) {
                        priority = "normal";
                    }
                    if (typeof callProcess == "undefined" || callProcess == null ) {
                        callProcess = false;
                    }
                    settings.queues[priority].push(ajaxOptions);
                    if (callProcess) {
                        handler.process();
                    }
                    return this;
                },
                clear: function() {
                    settings.clearCalled = true;
                    settings.queues.high.length = 0;
                    settings.queues.normal.length = 0;
                    settings.queues.low.length = 0;
                    for (var i in settings.ajaxCalls) {
                        settings.ajaxCalls[i].abort();
                    }
                    settings.ajaxCalls.length = 0;
                    settings.clearCalled = false;
                    return this;
                },
                process: function() {
                    if (!settings.processCalled) {
                        settings.processCalled = true;
                        while (!settings.clearCalled && settings.ajaxCalls.length < settings.connections) {
                            var options = settings.queues.high.shift();
                            if (options == null ) {
                                options = settings.queues.normal.shift();
                            }
                            if (options == null ) {
                                options = settings.queues.low.shift();
                            }
                            if (options != null ) {
                                var optionsClone = jQuery.extend(true, {}, options);
                                settings.ajaxCalls.push($.ajaxAPI($.extend(options, {
                                    "complete": function(jqXHR, success) {
                                        if (optionsClone.complete != null ) {
                                            optionsClone.complete(jqXHR, success);
                                        }
                                        handler.remove(this);
                                        handler.process();
                                    }
                                })));
                            } else {
                                break;
                            }
                        }
                    }
                    settings.processCalled = false;
                    return this;
                },
                remove: function(ajaxCall) {
                    for (var i in settings.ajaxCalls) {
                        if (ajaxCall = settings.ajaxCalls[i]) {
                            settings.ajaxCalls.splice(i, 1);
                            break;
                        }
                    }
                    return this;
                }
            };
            $.extend(settings, arguments);
            return handler.init();
        }
    });
})(jQuery);
var ajaxQueue = $.ajaxQueue();
(function($) {
    $.extend({
        authentication: function(arguments) {
            var settings = {
                adminUsers: null ,
                hideEula: null ,
                displayLoading: null ,
                hideLoading: null ,
                processError: null ,
                showEula: null ,
                hideEula: null ,
                showLogin: null ,
                hideLogin: null ,
                hideCreatePassword: null ,
                processEulaAcceptanceError: null ,
                showInvalidPasswordError: null ,
                showPublicMode: null ,
                eulaAcceptanceCallback: null ,
                itemsToProcess: null ,
                firstTime: true,
                isRunning: false,
                logout: false,
                creatingPassword: false,
                flagAcceptedEula: false,
                flagIsOnboarding: false,
                beforeCheckUsers: null 
            };
            var handler = {
                init: function() {
                    settings.adminUsers = new Array();
                    settings.itemsToProcess = new Array();
                    return this;
                },
                checkEula: function() {
                    $.ajaxAPI({
                        "url": "eula_acceptance",
                        "success": function(data) {
                            handler.checkUsers();
                        },
                        "error": function(request, status, error) {
                            if (request.status == 404) {
                                if (settings.hideLoading != null ) {
                                    settings.hideLoading();
                                }
                                if (settings.showEula != null ) {
                                    settings.showEula();
                                }
                            } else {
                                if (settings.processEulaError != null ) {
                                    settings.processEulaError(request.responseText, "get_eula_acceptance", request.status);
                                }
                            }
                        }
                    });
                },
                flagStartOnboarding: function(){
                	settings.flagIsOnboarding = true;
                },
                acceptEula: function() {
                    $.ajaxAPI({
                        "url": "eula_acceptance",
                        "data": {
                            "accepted": "yes"
                        },
                        "type": "POST",
                        "success": function(data) {
                            if (settings.hideEula != null ) {
                                settings.hideEula();
                            }
                            if (settings.eulaAcceptanceCallback != null ) {
                                settings.eulaAcceptanceCallback();
                            }
                            settings.flagAcceptedEula = true;
                            //settings.flagIsOnboarding = true;
                            handler.checkUsers();
                        },
                        "error": function(request, status, error) {
                            if (settings.processEulaAcceptanceError != null ) {
                                settings.processEulaAcceptanceError();
                            }
                        }
                    });
                },
                authenticate: function(username, password, useDefault) {
                    if (useDefault) {
                        username = settings.adminUsers[0];
                    }
                    if (handler.validateAdmin(username)) {
                        settings.isRunning = true;
                        $.ajaxAPI({
                            "url": "local_login",
                            "data": {
                                "username": username,
                                "password": password
                            },
                            "success": function(data) {
                                if (settings.hideLogin != null  && !settings.flagIsOnboarding) {
                                	if($("#eula_container").css("display") == "none"){
                                    settings.hideLogin(settings.logout);
                                }
                                }
                                if (settings.creatingPassword) {
                                    settings.creatingPassword = false;
                                }
                                while (settings.itemsToProcess.length > 0) {
                                    settings.itemsToProcess.pop()();
                                }
                            },
                            "error": function(request, status, error) {
                                settings.showInvalidPasswordError();
                            },
                            "complete": function() {
                                settings.isRunning = false;
                                settings.logout = false;
                            }
                        });
                    } else {
                        if (settings.showInvalidPasswordError != null ) {
                            settings.showInvalidPasswordError();
                        }
                    }
                },
                validateAdmin: function(username) {
                    for (var i = 0; i < settings.adminUsers.length; i++) {
                        if (settings.adminUsers[i] == username) {
                            return true;
                        }
                    }
                    return false;
                },
                createPassword: function() {
                    settings.creatingPassword = true;
                    settings.showCreateNetworkPassword(settings.adminUsers[0]);
                },
                finishOnboarding: function() {
                    settings.flagIsOnboarding = false;
                },
                checkUsers: function() {
                    if (settings.beforeCheckUsers != null ) {
                        settings.beforeCheckUsers();
                    }
                    var deviceSecured = false;
                    settings.isRunning = true;
                    $.ajaxAPI({
                        "url": "users",
                        "success": function(data) {
                            if (data != null  && data.users != null  && data.users.user != null ) {
                                if (data.users.user.username != null ) {
                                    if (data.users.user.is_admin.toLowerCase() == "true") {
                                        settings.adminUsers.push(data.users.user.username);
                                        if (data.users.user.is_password.toLowerCase() == "true") {
                                            deviceSecured = true;
                                        }
                                    }
                                } else {
                                    for (var i in data.users.user) {
                                        if (data.users.user[i].is_admin.toLowerCase() == "true") {
                                            settings.adminUsers.push(admin = data.users.user[i].username);
                                            if (data.users.user[i].is_password.toLowerCase() == "true") {
                                                deviceSecured = true;
                                            }
                                        }
                                    }
                                }
                            }
                            if (deviceSecured) {
                                if (settings.showLogin != null ) {
                                    settings.showLogin(settings.adminUsers[0]);
                                    settings.isRunning = false;
                                }
                            } else {
                                if (settings.flagAcceptedEula) {
                                    settings.creatingPassword = true;
                                    //add_eula_grayOut();
                                    //settings.showCreateNetworkPassword(settings.adminUsers[0]);
                                    $("#main_nav_container").hide();
                		    $("#page").show()

                                    settings.showPublicMode(settings.firstTime);
                                    settings.flagAcceptedEula = false;
                                    settings.firstTime = false;
                                } else {
                                    settings.showPublicMode(settings.firstTime);
                                    settings.firstTime = false;
                                }
                            }
                        },
                        "error": function(request, status, error) {
                            settings.showLogin();
                            settings.isRunning = false;
                        }
                    });
                },
                logout: function() {
                    $.ajaxAPI({
                        "url": "logout",
                        "error": function(request, status, error) {},
                        "complete": function(jqXHR, textStatus) {
                            settings.showLogin();
                            settings.logout = true;
                        }
                    });
                },
                addItemToProcessAfterAuth: function(item) {
                    settings.itemsToProcess.push(item);
                },
                hideLoading: function() {
                    if (settings.hideLoading != null ) {
                        settings.hideLoading();
                    }
                },
                isRunning: function() {
                    return settings.isRunning;
                }
            };
            $.extend(settings, arguments);
            return handler.init();
        }
    });
})(jQuery);
(function($) {
	$.fn.test = function(method){
		var $this;
		var methods = {
			init: function(options){
				alert()	
			}	
		}
	}	
	
})(jQuery);
(function($) {
    $.fn.restForm = function(method) {
        var $arguments = arguments;
        var $this;
        var methods = {
            init: function(options) {
                if ($this.data("formInitialized")) {
                    return;
                } else {
                    $this.data("formInitialized", true);
                }
                var checkboxOptions = {
                    cls: "jquery-checkbox2",
                    checkedLabel: "",
                    uncheckedLabel: ""
                };
                if (typeof options != "undefined" && typeof options.normalCheckboxOptions != "undefined") {
                    $.extend(checkboxOptions, options.normalCheckboxOptions);
                }
                $this.find("input:checkbox.normal_checkbox").checkbox(checkboxOptions);
                $this.find($("select")).each(function() {
                    var additionalWidth = 0;
                    if (navigator.userAgent.indexOf("Safari") != -1) {
                        additionalWidth = 25;
                    } else {
                        if ((navigator.userAgent.indexOf("Firefox") != -1) && (navigator.userAgent.indexOf("Mac") != -1)) {
                            additionalWidth = 45;
                        }
                    }
                    if($(this).context.id == "wifi_edit_config_form_activity_network")
                    	additionalWidth += 40;
                    var selectMenuOptions = {
                        style: "dropdown",
                        width: $(this).actual("width") + 45 + additionalWidth,
                        wrapperElement: "<div class='selectMenuBlack upfront'/>"
                    };
                    if (typeof options != "undefined" && typeof options.selectMenuOptions != "undefined") {
                        $.extend(selectMenuOptions, options.selectMenuOptions);
                    }
                    $(this).selectmenu(selectMenuOptions);
                });
                var onOffCheckboxOptions = {};
                if (typeof options != "undefined" && typeof options.onOffCheckboxOptions != "undefined") {
                    $.extend(onOffCheckboxOptions, options.onOffCheckboxOptions);
                }
                $this.find("input:checkbox.onoffswitch").checkbox(onOffCheckboxOptions);
                settings = $.extend(settings, options);
                $this.data("restFormSettings", settings);
                $this.find("input[type=text]").each(function() {
                    var curInput = $(this);
                    curInput.wrap('<span class="deleteicon" />').after($('<span class="deletebutton"/>').click(function() {
                        curInput.val(curInput[0].defaultValue ? curInput[0].defaultValue : "").focus();
                        $(this).hide();
                        if ($this.find("input").not("input[type=submit]").not("input[type=hidden]").length == 1) {
                            methods.hideFormControls.apply($this);
                        }
                    }));
                    curInput.after('<span class="spacer"/>');
                    curInput.bind("blur keyup", function(event) {
                        if ($(this).val() !== $(this)[0].defaultValue) {
                            $this.data("restFormSettings").inputTextChangeCallback.apply($(this));
                            $(this).siblings(".deletebutton").show();
                        }
                    });
                });
                $this.find("select").bind("change", function(event) {
                    settings.inputSelectChangeCallback.apply($(this));
                });
                $this.find("input[type=password]").bind("blur keyup", function(event) {
                    settings.inputPasswordChangeCallback.apply($(this));
                });
                $this.find("input[type=radio]").bind("click", function(event) {
                    settings.inputRadioCheckboxChangeCallback.apply($(this));
                });
                $this.find("input[type=checkbox]").bind("toggle", function(event) {
                    settings.inputRadioCheckboxChangeCallback.apply($(this));
                });
                $this.find("textarea").bind("keyup", function(event) {
                    settings.inputTextAreaChangeCallback.apply($(this));
                });
                $this.find("input[type=button].reset_form").bind("click", function(event) {
                    event.preventDefault();
                    methods.reset.apply($(this));
                });
                $this.submit(function(event) {
                    event.preventDefault();
                    if (methods.validateForm() == true) {
                        methods.showProcessing(false, false, true);
                        methods.beforeProcessForm.apply($this);
                        settings.processFormCallback.apply($(this));
                    }
                });
            },
            showFormControls: function() {
                if ($this.data("restFormSettings").showFormControlsCallback != null ) {
                    $this.data("restFormSettings").showFormControlsCallback.apply($this);
                }
            },
            _showFormControls: function() {
                $this.find(".form_controls").show();
            },
            hideFormControls: function() {
                if ($this.data("restFormSettings").hideFormControlsCallback != null ) {
                    $this.data("restFormSettings").hideFormControlsCallback.apply($this);
                }
            },
            _hideFormControls: function() {
                $this.find(".form_controls").hide();
                $this.find("input[type=text]").each(function() {
                    $this.find("span.deletebutton").css("display", "none");
                });
            },
            showProcessing: function(ignoreChildren, disableElements, showLoading) {
                if ($this.data("restFormSettings").showProcessingCallback != null ) {
                    $this.data("restFormSettings").showProcessingCallback.apply($this, [ignoreChildren, disableElements, showLoading]);
                } else {
                    methods._showProcessing(ignoreChildren, disableElements, showLoading);
                }
            },
            _showProcessing: function(ignoreChildren, disableElements, showLoading) {
                if (typeof showLoading != "undefined" && showLoading == true) {
                    displayLoading();
                }
                $this.find("select").addClass("ui-state-disabled");
                $this.find("select").selectmenu("disable");
                $this.find("button").addClass("ui-state-disabled");
                $this.find("input").addClass("ui-state-disabled");
                $this.find("input:checkbox").checkbox("disable");
                $this.find("textarea").addClass("ui-state-disabled");
                if (typeof disableElements != "undefined" && disableElements == true) {
                    $this.find("select").attr("disabled", "disabled");
                    $this.find("button").attr("disabled", "disabled");
                    $this.find("input").attr("disabled", "disabled");
                    $this.find("textarea").attr("disabled", "disabled");
                }
                if ((typeof ignoreChildren == "undefined" || ignoreChildren == false) && $this.data("restFormSettings").relatedForms != null ) {
                    for (var i in $this.data("restFormSettings").relatedForms) {
                        $("#" + $this.data("restFormSettings").relatedForms[i]).restForm("showProcessing", true, disableElements);
                    }
                }
            },
            hideProcessing: function(ignoreChildren, hideLoading) {
                if ($this.data("restFormSettings").hideProcessingCallback != null ) {
                    $this.data("restFormSettings").hideProcessingCallback.apply($this, [ignoreChildren, hideLoading]);
                } else {
                    methods._hideProcessing(ignoreChildren, hideLoading);
                }
            },
            _hideProcessing: function(ignoreChildren, hideLoadingDisplay) {
                $this.find("select").removeClass("ui-state-disabled");
                $this.find("select").removeAttr("disabled");
                $this.find("select").selectmenu("enable");
                $this.find("button").removeClass("ui-state-disabled");
                $this.find("button").removeAttr("disabled");
                $this.find("input").removeClass("ui-state-disabled");
                $this.find("input:checkbox").checkbox("enable");
                $this.find("input").removeAttr("disabled");
                $this.find("textarea").removeClass("ui-state-disabled");
                $this.find("textarea").removeAttr("disabled");
                if ((typeof ignoreChildren == "undefined" || ignoreChildren == false) && $this.data("restFormSettings").relatedForms != null ) {
                    for (var i in $this.data("restFormSettings").relatedForms) {
                        $("#" + $this.data("restFormSettings").relatedForms[i]).restForm("hideProcessing", true, false);
                    }
                }
                if (typeof hideLoadingDisplay != "undefined" && hideLoadingDisplay == true) {
                    hideLoading();
                }
            },
            validateForm: function() {
                $this.data("restFormSettings").validateFormCallback.apply($(this));
                return $this.data("validForm");
            },
            _validateForm: function(showToolTip) {
                if (typeof showToolTip == "undefined" || showToolTip == null ) {
                    showToolTip = false;
                }
                var formID = $this.attr("id");
                var skipValidation = false;
                var form = "#" + formID;
                if (!skipValidation) {
                    var formErrors = validate(form, true, showToolTip);
                    if (formErrors !== true) {
                        methods.showError(formErrors);
                        $this.data("validForm", false);
                        return false;
                    }
                }
                $this.data("validForm", true);
                return true;
            },
            beforeProcessForm: function() {
                if ($this.data("restFormSettings").beforeProcessForm != null ) {
                    $this.data("restFormSettings").beforeProcessForm.apply($this);
                }
            },
            processForm: function() {
                var ajaxApiOptions = {
                    "url": $this.attr("action"),
                    "type": $this.attr("method"),
                    "dataType": $this.attr("format"),
                    "contentType": $this.attr("inputType"),
                    "data": settings.getDataCallback.call(),
                    "timeout": settings.timeout,
                    "success": function(xmlData, textStatus, jqXHR) {
                        settings.processFormSuccessCallback.apply($this, [xmlData, textStatus, jqXHR]);
                    },
                    "error": function(request, status, error) {
                        settings.processFormErrorCallback.apply($this, [request, status, error]);
                    },
                    "complete": function(jqXHR, textStatus) {
                        settings.processFormCompleteCallback.apply($this, [jqXHR, textStatus]);
                    },
                    "after": function() {
                        if (settings.afterProcessForm != null ) {
                            settings.afterProcessForm.apply($this);
                        }
                    }
                };
                if (settings.useStubs) {
                    $.extend(ajaxApiOptions, {
                        "urlPrefix": settings.stubPrefix
                    });
                }
                $this.data("restFormSettings").processFormAjaxCall = $.ajaxAPI(ajaxApiOptions);
            },
            processFormSuccess: function(data, textStatus, jqXHR) {
                var error = methods.parseDataForErrors(data);
                if (error == false) {
                    methods.setDefaultFormData.apply($(this), $.makeArray(data));
                    methods.setDefaultRelatedFormsData.apply($this);
                    $this.data("restFormSettings").hideButtonControlsCallback.apply($(this));
                    methods.reset.apply($(this));
                } else {
                    methods.showError(error);
                }
            },
            parseDataForErrors: function(data, errorkey) {
                var errorFound = false;
                if (errorkey == null ) {
                    errorkey = "error_id";
                }
                for (var key in data) {
                    if (key == "#text") {
                        continue;
                    }
                    if (data[key] instanceof Object) {
                        return methods.parseDataForErrors(data[key], errorkey);
                    } else {
                        if (key == errorkey) {
                            return data[key];
                        }
                    }
                }
                return false;
            },
            setDefaultFormData: function(data) {
                if ($this.data("restFormSettings").setDefaultFormDataCallback != null ) {
                    $this.data("restFormSettings").setDefaultFormDataCallback.apply($this, $.makeArray(data));
                }
            },
            _setDefaultFormData: function(data) {
                $this.find("input:hidden").each(function() {
                    if ($this.find("[name=" + $(this).attr("id") + "]").length == 1) {
                        $(this)[0].defaultValue = $(this).val();
                    }
                });
                $this.find("input:text").each(function() {
                    $(this)[0].defaultValue = $(this).val();
                });
                $this.find("select").each(function() {
                    var currentSelectMenu = $(this);
                    var currentVal = $(this).val();
                    $(this).find("option").each(function() {
                        $(this)[0].defaultSelected = false;
                    });
                    $(this).find('option[value="' + currentVal + '"]').each(function() {
                        $(this)[0].defaultSelected = true;
                        currentSelectMenu.selectmenu("value", $(this).val());
                    });
                });
                $this.find("input:checkbox").each(function() {
                    $(this)[0].defaultChecked = $(this).attr("checked") == "checked";
                });
                $this.find("input:radio").each(function() {
                    $(this)[0].defaultChecked = $(this).attr("checked") == "checked";
                });
            },
            setDefaultRelatedFormsData: function() {
                if ($this.data("restFormSettings").setDefaultRelatedFormsDataCallback != null ) {
                    $this.data("restFormSettings").setDefaultRelatedFormsDataCallback.apply($this);
                }
            },
            _setDefaultRelatedFormsData: function(data) {
                if ($this.data("restFormSettings").relatedForms != null ) {
                    if (typeof (data) == "undefined") {
                        var data = {};
                    }
                    $this.find("input").each(function() {
                        if ($(this).attr("type") != "hidden" && typeof ($(this).attr("name")) != "undefined") {
                            data[$(this).attr("name")] = $(this).val();
                        }
                    });
                    if (!$.isEmptyObject(data)) {
                        for (var i in $this.data("restFormSettings").relatedForms) {
                            $("#" + $this.data("restFormSettings").relatedForms[i]).restForm("refreshData", data, false);
                        }
                    }
                }
            },
            refreshData: function(data, performReset) {
                if ($this.data("restFormSettings").refreshDataCallback != null ) {
                    $this.data("restFormSettings").refreshDataCallback.apply($this, $.makeArray(data));
                }
                if (typeof performReset == "undefined" || performReset == null ) {
                    performReset = true;
                }
                if (performReset) {
                    methods.reset.apply($this);
                }
            },
            _refreshData: function(data) {
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        if (typeof data[key] == "string" || typeof data[key] == "number") {
                            var elm = $this.find('[name="' + key + '"]');
                            if (elm.length == 1) {
                                if (elm.is("input:text")) {
                                    elm[0].defaultValue = data[key];
                                    elm.next(".deletebutton").hide();
                                } else {
                                    if (elm.is("input:hidden")) {
                                        elm[0].defaultValue = data[key];
                                        $(this).val(data[key]);
                                    } else {
                                        if (elm.is("select")) {
                                            elm.find("option").each(function() {
                                                if ($(this).val() == data[key]) {
                                                    $(this)[0].defaultSelected = true;
                                                    $(this).selectmenu("value", data[key]);
                                                } else {
                                                    $(this)[0].defaultSelected = false;
                                                }
                                            });
                                        } else {
                                            if (elm.is("input:checkbox")) {
                                                if (elm.val() == data[key]) {
                                                    elm[0].defaultChecked = true;
                                                } else {
                                                    elm[0].defaultChecked = false;
                                                }
                                            }
                                        }
                                    }
                                }
                            } else {
                                if (elm.length > 1) {
                                    elm.each(function() {
                                        if ($(this).is("input:radio")) {
                                            if ($(this).val() == data[key]) {
                                                $(this)[0].defaultChecked = true;
                                            } else {
                                                $(this)[0].defaultChecked = false;
                                            }
                                        } else {
                                            if ($(this).is("input:checkbox")) {
                                                if ($(this).val() == data[key]) {
                                                    $(this)[0].defaultChecked = true;
                                                } else {
                                                    $(this)[0].defaultChecked = false;
                                                }
                                            }
                                        }
                                    });
                                }
                            }
                        } else {
                            if (typeof data[key] == "object") {
                                methods._refreshData(data[key]);
                            }
                        }
                    }
                }
            },
            processFormError: function(request, status, error) {
                var xotree = new XML.ObjTree();
                var data = xotree.parseXML(request.responseText);
                var formMethod = $this.attr("method").toLowerCase();
                var formAction = $this.attr("action").toLowerCase();
                var errorKey;
                var error_id = methods.parseDataForErrors(data);
                if (error_id) {
                    errorKey = formMethod + "_" + formAction + "_error_id_" + error_id;
                    if (errorsList[errorKey] != undefined) {
                        methods.showError(errorKey);
                    } else {
                        methods.showError("error_id_" + error_id);
                    }
                } else {
                    var error_code = methods.parseDataForErrors(data, "error_code");
                    if (error_code) {
                        errorKey = formMethod + "_" + formAction + "_http_" + error_code;
                        if (errorsList[errorKey] != undefined) {
                            methods.showError(errorKey);
                        } else {
                            methods.showError("http_" + error_code, errorKey);
                        }
                    } else {
                        processAjaxError($this.attr("id"), status);
                    }
                }
            },
            processFormComplete: function(jqXHR, textStatus) {
                if (!$this.data("redirect")) {
                    methods.hideProcessing(false, true);
                }
            },
            showError: function(error, msg) {
                if ($this.data("restFormSettings").showErrorCallback != null ) {
                    $this.data("restFormSettings").showErrorCallback.apply($this, [error]);
                } else {
                    showError(error, msg);
                }
            },
            reset: function() {
                $this.data("restFormSettings").resetCallback.apply($(this));
            },
            _reset: function() {
                $this[0].reset();
                $this.find("span.deleteicon span.deletebutton").each(function() {
                    $(this).hide();
                });
                $this.find("select").each(function() {
                    $(this).selectmenu("value", $(this).find("option:selected").val());
                });
                $this.find(".error").removeClass("error");
                $this.data("restFormSettings").hideButtonControlsCallback.apply($(this));
            },
            refreshForm: function(useQueue, queuePriority) {
                var refreshUrl = $this.data("restFormSettings").refreshUrl;
                if (refreshUrl == null ) {
                    refreshUrl = $this.attr("action");
                }
                var ajaxApiOptions = {
                    "url": refreshUrl,
                    "before": function() {
                        methods.showProcessing(false, true);
                    },
                    "success": function(xmlData, textStatus, jqXHR) {
                        methods.refreshData.apply($this, [xmlData, textStatus, jqXHR]);
                        methods.refreshRelatedForms.apply($this, [xmlData]);
                    },
                    "error": function(request, status, error) {
                        $this.data("restFormSettings").processFormErrorCallback.apply($this, [request, status, error]);
                    },
                    "complete": function(jqXHR, textStatus) {
                        $this.data("restFormSettings").processFormCompleteCallback.apply($this, [jqXHR, textStatus]);
                    }
                };
                if ($this.data("restFormSettings").useStubs) {
                    $.extend(ajaxApiOptions, {
                        "urlPrefix": $this.data("restFormSettings").stubPrefix
                    });
                }
                if (typeof useQueue != "undefined" && useQueue == true) {
                    ajaxQueue.add(ajaxApiOptions, queuePriority);
                } else {
                    $this.data("restFormSettings").refreshFormAjaxCall = $.ajaxAPI(ajaxApiOptions);
                }
            },
            refreshRelatedForms: function(data) {
                if ($this.data("restFormSettings").relatedForms != null ) {
                    for (var i in $this.data("restFormSettings").relatedForms) {
                        $("#" + $this.data("restFormSettings").relatedForms[i]).restForm("refreshData", data);
                    }
                }
            },
            cancelProcessFormCall: function() {
                if ($this.data("restFormSettings").processFormAjaxCall != null ) {
                    $this.data("restFormSettings").processFormAjaxCall.abort();
                }
            },
            cancelRefreshFormCall: function() {
                if ($this.data("restFormSettings").refreshFormAjaxCall != null ) {
                    $this.data("restFormSettings").refreshFormAjaxCall.abort();
                }
            }
        };
        var settings = {
            "showButtonControlsCallback": methods.showFormControls,
            "hideButtonControlsCallback": methods.hideFormControls,
            "showProcessingCallback": null ,
            "hideProcessingCallback": null ,
            "processFormCallback": methods.processForm,
            "processFormSuccessCallback": methods.processFormSuccess,
            "processFormErrorCallback": methods.processFormError,
            "processFormCompleteCallback": methods.processFormComplete,
            "showErrorCallback": null ,
            "getDataCallback": function serializeForm() {
                return $this.serialize();
            },
            "setDefaultFormDataCallback": methods._setDefaultFormData,
            "resetCallback": methods._reset,
            "validateFormCallback": methods._validateForm,
            "refreshUrl": null ,
            "showFormControlsCallback": methods._showFormControls,
            "hideFormControlsCallback": methods._hideFormControls,
            "refreshDataCallback": methods._refreshData,
            "beforeProcessForm": null ,
            "afterProcessForm": null ,
            "useStubs": false,
            "timeout": 120000,
            "stubPrefix": "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/",
            "relatedForms": null ,
            "setDefaultRelatedFormsDataCallback": methods._setDefaultRelatedFormsData,
            "processFormAjaxCall": null ,
            "refreshFormAjaxCall": null 
        };
        $.extend(settings, {
            "inputTextChangeCallback": settings.showButtonControlsCallback,
            "inputPasswordChangeCallback": settings.showButtonControlsCallback,
            "inputRadioCheckboxChangeCallback": settings.showButtonControlsCallback,
            "inputTextAreaChangeCallback": settings.showButtonControlsCallback,
            "inputSelectChangeCallback": settings.showButtonControlsCallback
        });
        return this.each(function() {
            $this = $(this);
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call($arguments, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return methods.init.apply(this, $arguments);
                }
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.restFormDialog = function(method) {
        var args = arguments;
        var $this;
        var settings = {
            "validateFormCallback": function() {
                $this.find(".error_tooltip_container").remove();
                $this.restForm("_validateForm", true);
            },
            "dialogName": null ,
            "resetCallback": function() {
                $this.restForm("_reset");
                $this.find(".error_tooltip_container").remove();
            },
            "showErrorCallback": function(error) {
                if (error != false) {
                    if (Object.prototype.toString.call(error) != "[object Array]") {
                        error = $.makeArray(error);
                    }
                    $("#acknowledgement_down_message ul li").remove();
                    for (var i in error) {
                        var inputBox = $this.find("#" + error[i]);
                        var errorMsg = errorsList["unk"];
                        if (errorsList[error[i]] != undefined) {
                            errorMsg = errorsList[error[i]];
                        }
                        if (inputBox.length > 0) {
                            $("#acknowledgement_down_message ul").append("<li>" + errorMsg + "</li>");
                        } else {
                            $("#acknowledgement_down_message ul").append("<li>" + errorMsg + "</li>");
                        }
                    }
                    if ($("#acknowledgement_down_message ul li").length > 0) {
                        $("#acknowledgement_down").css("top", $("#" + settings.dialogName + " .mochi_dialog_content_container").offset().top + "px");
                        $("#loading_back").show();
                        $("#acknowledgement_down").show();
                        $("#acknowledgement_down_controls_ok").focus();
                    }
                }
            },
            "processFormCompleteCallback": function(jqXHR, textStatus) {
                if (jqXHR.status == 200 || jqXHR.status == 201) {
                    $this.restForm("processFormComplete", jqXHR, textStatus);
                } else {
                    $this.restForm("hideProcessing", false, false);
                    $("#loading").slideUp("slow");
                }
            }
        };
        return this.each(function() {
            $this = $(this);
            if (typeof method === "object" || !method) {
                return $(this).restForm("init", $.extend(settings, method));
            } else {
                return $(this).restForm(method, Array.prototype.slice.call(args, 1));
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.carouselNav = function(options) {
        var navLeftInterval;
        var navRightInterval;
        var itemWidth;
        var displayWidth;
        var totalItems;
        var currentIndex = 0;
        var settings = $.extend({
            "nav_left_scroll_cls": "nav_left_scroll",
            "nav_right_scroll_cls": "nav_right_scroll",
            "nav_cls": "top_nav",
            "nav_ul_cls": "nav_ul"
        }, options);
        var methods = {
            scrollNavLeft: function() {
                if (currentIndex > 0) {
                    var left_indent = (currentIndex - 1) * itemWidth * -1;
                    --currentIndex;
                    $(this).find("." + settings.nav_ul_cls).animate({
                        "left": left_indent
                    }, {
                        queue: false,
                        duration: 100
                    }, function() {
                        $(this).find("." + settings.nav_ul_cls).css({
                            "left": "-" + itemWidth + "px"
                        });
                    });
                }
            },
            scrollNavRight: function() {
                if (currentIndex < totalItems - displayWidth / itemWidth) {
                    var left_indent = (currentIndex + 1) * itemWidth * -1;
                    ++currentIndex;
                    $(this).find("." + settings.nav_ul_cls).animate({
                        "left": left_indent
                    }, {
                        queue: false,
                        duration: 100
                    }, function() {
                        $(this).find("." + settings.nav_ul_cls).css({
                            "left": "-" + itemWidth + "px"
                        });
                    });
                }
            }
        };
        return this.each(function() {
            var $this = $(this);
            $(this).find(".nav_left_scroll").remove();
            $(this).find(".nav_right_scroll").remove();
            $(this).data("carouselChecked", true);
            itemWidth = $(this).find("." + settings.nav_ul_cls + " li").outerWidth();
            displayWidth = $(this).find("." + settings.nav_cls).width();
            totalItems = $(this).find("." + settings.nav_ul_cls + " li").length;
            if (itemWidth * totalItems > displayWidth) {
                var navLeftScroll = $('<div class="' + settings.nav_left_scroll_cls + '"><a href="#">&lt;</a></div>');
                var navRightScroll = $('<div class="' + settings.nav_right_scroll_cls + '"><a href="#">&gt;</a></div>');
                $(this).prepend(navLeftScroll);
                $(this).append(navRightScroll);
                navLeftScroll.find("a").click(function(event) {
                    event.preventDefault();
                    methods["scrollNavLeft"].apply($this, Array.prototype.slice.call(arguments, 1));
                });
                navRightScroll.find("a").click(function(event) {
                    event.preventDefault();
                    methods["scrollNavRight"].apply($this, Array.prototype.slice.call(arguments, 1));
                });
                $(this).touchwipe({
                    wipeLeft: function() {
                        methods["scrollNavRight"].apply($this, Array.prototype.slice.call(arguments, 1));
                    },
                    wipeRight: function() {
                        methods["scrollNavLeft"].apply($this, Array.prototype.slice.call(arguments, 1));
                    },
                    min_move_x: 20,
                    min_move_y: 20,
                    preventDefaultEvents: true
                });
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.ferrisWheelNav = function(options) {
        var navUpInterval;
        var navDownInterval;
        var itemHeight;
        var displayHeight;
        var totalItems;
        var currentIndex = 0;
        var settings = $.extend({
            "nav_up_scroll_cls": "nav_up_scroll",
            "nav_down_scroll_cls": "nav_down_scroll",
            "nav_cls": "top_nav",
            "nav_ul_cls": "nav_ul",
            "selected_li_cls": "selected"
        }, options);
        var methods = {
            scrollNavUp: function() {
                if (currentIndex > 0) {
                    var left_indent = (currentIndex - 1) * itemHeight * -1;
                    --currentIndex;
                    $(this).find("." + settings.nav_ul_cls).animate({
                        "top": left_indent
                    }, {
                        queue: false,
                        duration: 100
                    }, function() {
                        $(this).find("." + settings.nav_ul_cls).css({
                            "top": "-" + itemHeight + "px"
                        });
                    });
                    var upButton = $(this).find("." + settings.nav_up_scroll_cls);
                    if (!upButton.hasClass("ui-state-disabled") && currentIndex <= 0) {
                        upButton.addClass("ui-state-disabled");
                    }
                    $(this).find("." + settings.nav_down_scroll_cls).removeClass("ui-state-disabled");
                }
            },
            scrollNavDown: function() {
                if (currentIndex < totalItems - displayHeight / itemHeight) {
                    var left_indent = (currentIndex + 1) * itemHeight * -1;
                    ++currentIndex;
                    $(this).find("." + settings.nav_ul_cls).animate({
                        "top": left_indent
                    }, {
                        queue: false,
                        duration: 100
                    }, function() {
                        $(this).find("." + settings.nav_ul_cls).css({
                            "top": "-" + itemHeight + "px"
                        });
                    });
                    var downButton = $(this).find("." + settings.nav_down_scroll_cls);
                    if (!downButton.hasClass("ui-state-disabled") && currentIndex >= totalItems - displayHeight / itemHeight) {
                        downButton.addClass("ui-state-disabled");
                    }
                    $(this).find("." + settings.nav_up_scroll_cls).removeClass("ui-state-disabled");
                }
            }
        };
        return this.each(function() {
            var $this = $(this);
            itemHeight = $(this).find("." + settings.nav_ul_cls + " li").outerHeight() + 1;
            totalItems = $(this).find("." + settings.nav_ul_cls + " li:visible").length;
            displayHeight = $(this).find("." + settings.nav_cls).height() + totalItems;
            if (itemHeight * totalItems > displayHeight) {
                var navUpScroll = $('<div class="' + settings.nav_up_scroll_cls + '"><a href="#"></a></div>');
                var navDownScroll = $('<div class="' + settings.nav_down_scroll_cls + '"><a href="#"></a></div>');
                if ($(this).find("." + settings.nav_up_scroll_cls).length == 0) {
                    $(this).prepend(navUpScroll);
                    $(this).append(navDownScroll);
                } else {
                    navUpScroll = $(this).find("." + settings.nav_up_scroll_cls);
                    navDownScroll = $(this).find("." + settings.nav_down_scroll_cls);
                    navUpScroll.removeClass("ui-state-disabled");
                    navDownScroll.removeClass("ui-state-disabled");
                    navUpScroll.find("a").unbind("click");
                    navDownScroll.find("a").unbind("click");
                }
                navDownScroll.find("a").click(function(event) {
                    event.preventDefault();
                    methods["scrollNavDown"].apply($this, Array.prototype.slice.call(arguments, 1));
                });
                navUpScroll.find("a").click(function(event) {
                    event.preventDefault();
                    methods["scrollNavUp"].apply($this, Array.prototype.slice.call(arguments, 1));
                });
                var selectedLi = $(this).find("li." + settings.selected_li_cls + ":visible");
                if (selectedLi.length > 0) {
                    var lis = $(this).find("li:visible");
                    var selectedLiIndex;
                    for (var i = 0; i < lis.length; ++i) {
                        if (lis[i] == selectedLi[0]) {
                            selectedLiIndex = i;
                            break;
                        }
                    }
                    while (selectedLiIndex > totalItems - Math.floor(displayHeight / itemHeight)) {
                        --selectedLiIndex;
                    }
                    var left_indent;
                    left_indent = selectedLiIndex * itemHeight * -1;
                    currentIndex = selectedLiIndex;
                    $(this).find("." + settings.nav_ul_cls).animate({
                        "top": left_indent
                    }, {
                        queue: false,
                        duration: 100
                    }, function() {
                        $(this).find("." + settings.nav_ul_cls).css({
                            "top": "-" + itemHeight + "px"
                        });
                    });
                    if (!navUpScroll.hasClass("ui-state-disabled") && currentIndex <= 0) {
                        navUpScroll.addClass("ui-state-disabled");
                    } else {
                        if (!navDownScroll.hasClass("ui-state-disabled") && currentIndex >= totalItems - displayHeight / itemHeight) {
                            navDownScroll.addClass("ui-state-disabled");
                        }
                    }
                } else {
                    $(this).find("." + settings.nav_up_scroll_cls).addClass("ui-state-disabled");
                }
                $(this).touchwipe({
                    wipeUp: function() {
                        methods["scrollNavUp"].apply($this, Array.prototype.slice.call(arguments, 1));
                    },
                    wipeDown: function() {
                        methods["scrollNavDown"].apply($this, Array.prototype.slice.call(arguments, 1));
                    },
                    min_move_x: 20,
                    min_move_y: 20,
                    preventDefaultEvents: true
                });
            } else {
                $(this).find("." + settings.nav_up_scroll_cls).remove();
                $(this).find("." + settings.nav_down_scroll_cls).remove();
                $(this).find("." + settings.nav_ul_cls).animate({
                    "top": 0
                }, {
                    queue: false,
                    duration: 100
                }, function() {
                    $(this).find("." + settings.nav_ul_cls).css({
                        "top": "-" + itemHeight + "px"
                    });
                });
            }
        });
    }
    ;
})(jQuery);
var contentToBeShown;
(function($) {
    $.fn.navItem = function(method) {
        var $arguments = arguments;
        var $this;
        var methods = {
            init: function(options) {
                if (!$(this).data("navItemInitialized")) {
                    $(this).data("navItemInitialized", true);
                    if (typeof options != "undefined" && typeof options.contentId != "undefined") {
                        $.extend(settings, options);
                        $this.data("navItemSettings", settings);
                        $(this).click(function(e) {
                            e.preventDefault();
                            if (!$("#" + settings.containerId + " #" + settings.contentId).is(":visible")) {
                                settings.displayLoadingCallback.apply($(this));
                                var linkHref = $(this).attr("href");
                                var listItemElement = null ;
                                listItemElement = $(this).parent();
                                while (listItemElement.length > 0 && !listItemElement.is("li")) {
                                    listItemElement = listItemElement.parent();
                                }
                                if (listItemElement.length == 0) {
                                    listItemElement = $(this).parent();
                                }
                                listItemElement.siblings("." + settings.selectedClass).removeClass(settings.selectedClass).find(".right_arrow").hide();
                                listItemElement.addClass(settings.selectedClass).find(".right_arrow").show();
                                var contentToHide = $("#" + settings.containerId + " >:visible");
                                var extraContent = null ;
                                if (contentToHide.length > 1) {
                                    extraContent = contentToHide;
                                    contentToHide = contentToHide.first();
                                }
                                if (contentToBeShown != null ) {
                                    contentToBeShown.stop(true, true).hide();
                                    contentToBeShown = null ;
                                }
                                contentToHide.hide("fast", function() {
                                    if (contentToBeShown != null ) {
                                        contentToBeShown.stop(true, true).hide();
                                        contentToBeShown = null ;
                                    }
                                    contentToBeShown = $("#" + settings.containerId + " #" + settings.contentId);
                                    if ($("#" + settings.containerId + " #" + settings.contentId).length == 1) {
                                        $("#" + settings.containerId + " #" + settings.contentId).show("slide", {
                                            direction: "right"
                                        }, 200, function() {
                                            contentToBeShown = null ;
                                            if (settings.childContent != null ) {
                                                $("#" + settings.containerId + " #" + settings.contentId + " #" + settings.childContent).show();
                                                $("#" + settings.containerId + " #" + settings.contentId + " #" + settings.childContent).siblings().hide();
                                                if (settings.childContentDisplayCall != null ) {
                                                    settings.childContentDisplayCall.apply($(this));//wifi list have no childContentDisplayCall
                                                }
                                            }
                                        });
                                        methods.refreshData();//here go to refreshData()
                                    } else {
                                        settings.hideLoadingCallback.apply($(this));
                                    }
                                    var hashPosition = window.location.href.indexOf("#");
                                    var newLink = window.location.href;
                                    if (hashPosition > 0) {
                                        newLink = newLink.substring(0, hashPosition - 1);
                                    }
                                });
                                if (extraContent != null ) {
                                    extraContent.each(function() {
                                        $(this).hide();
                                    });
                                }
                            } else {
                                if (settings.childContent != null ) {
                                    $("#" + settings.containerId + " #" + settings.contentId + " #" + settings.childContent).siblings().hide();
                                    $("#" + settings.containerId + " #" + settings.contentId + " #" + settings.childContent).show("slide", {
                                        direction: "right"
                                    }, 200, function() {});
                                    if (settings.childContentDisplayCall != null ) {
                                        settings.childContentDisplayCall.apply($(this));
                                    }
                                }
                            }
                        });
                    }
                }
            },
            refreshData: function() {
                $this.data("navItemSettings").refreshDataCall.apply($this);
            },
            _refreshData: function() {
                navUrl = $this.attr("href");
                var ajaxApiOptions = {
                    url: navUrl,
                    success: function(xmlData, textStatus, jqXHR) {
                        $this.data("navItemSettings").refreshDataSuccess.apply($this, [xmlData, textStatus, jqXHR]);
                    },
                    after: function() {
                        $this.data("navItemSettings").hideLoadingCallback.apply($this);
                        pollingHandler.poll();
                    }
                };
                if ($this.data("navItemSettings").useStubs) {
                    $.extend(ajaxApiOptions, {
                        "urlPrefix": $this.data("navItemSettings").stubPrefix
                    });
                }
                $.ajaxAPI(ajaxApiOptions);
            },
            displayLoading: function() {},
            hideLoading: function() {},
            fixRightTriangle: function() {
                var totalHeight = $(this).parent().actual("height") + parseInt($(this).parent().css("padding-top").replace("px", "")) + parseInt($(this).parent().css("padding-bottom").replace("px", ""));
                $(this).siblings(".right_arrow").each(function() {
                    var newBorderInt = Math.ceil(totalHeight / 2);
                    $(this).css("border-bottom", newBorderInt + "px solid transparent");
                    $(this).css("border-top", newBorderInt + "px solid transparent");
                });
            },
            refreshDataSuccess: function(data, updateForm) {
                $this.data("navItemSettings").refreshDataSuccess.apply($this, [data, updateForm]);
            },
            _refreshDataSuccess: function(data, updateForm) {
                $this.data("navItemSettings")._refreshDataSuccess.apply($this, [data, updateForm]);
            },
            apply: function(args) {
                methods[args[0]].apply(this, Array.prototype.slice.call(args, 1));
            }
        };
        var settings = {
            "displayLoadingCallback": methods.displayLoading,
            "hideLoadingCallback": methods.hideLoading,
            "containerId": "main_content",
            "selectedClass": "current",
            "refreshDataSuccess": null ,
            "refreshDataCall": methods._refreshData,
            "useStubs": false,
            "stubPrefix": "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/",
            "childContent": null ,
            "childContentDisplayCall": null 
        };
        return this.each(function() {
            $this = $(this);
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call($arguments, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return methods.init.apply(this, $arguments);
                }
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.listNavigation = function(method) {
        var $arguments = arguments;
        var $this;
        var methods = {
            init: function(options) {
                if (!$(this).data("listNavigationInitialized")) {
                    $(this).data("listNavigationInitialized", true);
                    if (typeof options != "undefined" && typeof options.prefix != "undefined") {
                        $.extend(settings, options);
                        if (settings.idPrefix == null ) {
                            settings.idPrefix = settings.prefix;
                        }
                        $(this).data("listNavigationSettings", settings);
                        $(this).on("click", ".listnavigation_item", function(e) {
                            e.preventDefault();
                            $this.find("ul.listNavigation li.selected").removeClass("selected");
                            $(this).parent().addClass("selected");
                            if ($(this).attr("href") != "") {
                                if (!settings.useCache) {
                                    var ajaxApiOptions = {
                                        "url": $(this).attr("href"),
                                        "success": function(data, textStatus, jqXHR) {
                                            var item = null ;
                                            if (data[settings.containerName] != null  && data[settings.containerName][settings.prefix] != null ) {
                                                item = data[settings.containerName][settings.prefix];
                                            }
                                            if (item == null ) {
                                                item = data[settings.prefix];
                                            }
                                            if (item == null ) {
                                                item = data;
                                            }
                                            methods.showItem.apply($this, $.makeArray(item));
                                        },
                                        "complete": function(jqXHR, textStatus) {
                                            if ($this.data("listNavigationSettings").afterRetrieveData != null ) {
                                                $this.data("listNavigationSettings").afterRetrieveData.apply($(this));
                                            }
                                        },
                                        "before": function() {
                                            if ($this.data("listNavigationSettings").beforeRetrieveData != null ) {
                                                $this.data("listNavigationSettings").beforeRetrieveData.apply($(this));
                                            }
                                        }
                                    };
                                    if ($this.data("listNavigationSettings").useStubs) {
                                        $.extend(ajaxApiOptions, {
                                            "urlPrefix": $this.data("listNavigationSettings").stubPrefix
                                        });
                                    }
                                    $.ajaxAPI(ajaxApiOptions);
                                } else {
                                    var itemId = $(this).parent().attr("id");
                                    itemId = itemId.substring(settings.prefix.length + 1);
                                    methods.showItem.apply($this, $.makeArray(settings.cache[itemId]));
                                }
                            } else {
                                methods.showItem.apply($this, null );
                            }
                            if (settings.afterClick != null ) {
                                settings.afterClick.apply($(this));
                            }
                        });
                        $(this).find(".listnavigation_item_create").bind("click", function(e) {
                            e.preventDefault();
                            methods.showCreate.apply($this);
                        });
                    }
                }
            },
            addToList: function(itemId, setSelected, itemName, data) {
                if ($(this).data("listNavigationSettings").beforeAddItem) {
                    $(this).data("listNavigationSettings").beforeAddItem.apply($(this), [itemId, setSelected, itemName, data]);
                }
                if (typeof itemName == "undefined" || itemName == null ) {
                    itemName = itemId;
                }
                var cloneLi = $(this).find("ul.listNavigation li:first").clone();
                cloneLi.attr("id", $(this).data("listNavigationSettings").idPrefix + "_" + itemId);
                cloneLi.find(".listnavigation_item_name").text(itemName);
                cloneLi.find("a").attr("href", function(i, a) {
                    return $this.data("listNavigationSettings").prepareLinkCall.apply($(this), [i, a, itemId]);
                });
                cloneLi.appendTo($(this).find("ul.listNavigation"));
                cloneLi.find("a").navItem("fixRightTriangle");
                cloneLi.removeClass("selected");
                if (typeof setSelected == "undefined" || setSelected) {
                    cloneLi.addClass("selected");
                }
                if ($(this).data("listNavigationSettings").afterAddItem) {
                    $(this).data("listNavigationSettings").afterAddItem.apply($(this), [itemId, setSelected, itemName, data]);
                }
                $(this).data("listNavigationSettings").cache[itemId] = data;
            },
            removeFromList: function(item, selectNew) {
                var itemToRemove = $("#" + $(this).data("listNavigationSettings").idPrefix + "_" + item);
                var itemToSelect = itemToRemove.next();
                if (itemToSelect.length == 0) {
                    itemToSelect = itemToRemove.prev();
                }
                if (itemToSelect.length > 0 && (typeof selectNew == "undefined" || selectNew)) {
                    itemToSelect.find("a").click();
                }
                delete $(this).data("listNavigationSettings").cache[item];
                itemToRemove.remove();
            },
            showItem: function(data) {
                $(this).data("listNavigationSettings").updateDetailForm.apply($this, $.makeArray(data));
                $(this).data("listNavigationSettings").selectItem.apply($(this), $.makeArray(data));
                $(this).find("div.item_detail").show();
                $(this).find("div.create_item").hide();
                if ($(this).data("listNavigationSettings").afterShowItem != null ) {
                    $(this).data("listNavigationSettings").afterShowItem.apply($(this), $.makeArray(data));
                }
            },
            showCreate: function() {
                $(this).find("ul.listNavigation li.selected").removeClass("selected");
                $(this).find("div.item_detail").hide();
                $(this).find("div.create_item").show();
            },
            prepareLink: function(i, a, item) {
                return a.replace(/(name=).+/ig, "$1" + item);
            }
        };
        var settings = {
            "prepareLinkCall": methods.prepareLink,
            "containerName": null ,
            "prefix": null ,
            "idPrefix": null ,
            "afterClick": null ,
            "afterShowItem": null ,
            "useStubs": false,
            "stubPrefix": "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/",
            "beforeAddItem": null ,
            "afterAddItem": null ,
            "useCache": false,
            "beforeRetrieveData": null ,
            "afterRetrieveData": null ,
            "cache": {}
        };
        return this.each(function() {
            $this = $(this);
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call($arguments, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return methods.init.apply(this, $arguments);
                }
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.navItemListNavigationContent = function(method) {
        var args = arguments;
        var settings = {
            "listId": null ,
            "listDataKey": null ,
            "listDataId": null ,
            "itemIdentifier": null ,
            "navigationListId": null ,
            "dataKey": function() {
                return $("#" + settings.navigationListId + " .listNavigation .selected span.listnavigation_item_name").text();
            },
            "addToListCall": function(item) {
                $("#" + settings.navigationListId).listNavigation("addToList", item[settings.itemIdentifier], false, null , item);
            },
            "refreshDataSuccess": function(data, updateForm) {
                $(this).data("navItemSettings")._refreshDataSuccess.apply($(this), $.makeArray(data), updateForm);
            },
            "_refreshDataSuccess": function(data, updateForm) {
                if (typeof (updateForm) == "undefined") {
                    updateForm = true;
                }
                var listData = $("#" + settings.listId).data(settings.listDataKey);
                if (listData == null ) {
                    listData = {};
                    listData[settings.listDataId] = [];
                }
                if (typeof settings.listDataId != "undefined" && settings.listDataId != null  && typeof settings.itemIdentifier != "undefined" && settings.itemIdentifier != null  && typeof settings.navigationListId != "undefined" && settings.navigationListId != null ) {
                    var data2 = new Object();
                    $.extend(true, data2, data);
                    if (Object.prototype.toString.call(data[settings.listDataKey][settings.listDataId]) != "[object Array]") {
                        data[settings.listDataKey][settings.listDataId] = $.makeArray(data[settings.listDataKey][settings.listDataId]);
                    }
                    var itemsToRemove = new Array();
                    $.each(listData[settings.listDataId], function(i, item) {
                        var dataItem = null ;
                        var dataItemIndex = null ;
                        for (var j in data[settings.listDataKey][settings.listDataId]) {
                            if (data[settings.listDataKey][settings.listDataId][j][settings.itemIdentifier] == item[settings.itemIdentifier]) {
                                dataItem = data[settings.listDataKey][settings.listDataId][j];
                                dataItemIndex = j;
                                break;
                            }
                        }
                        if (dataItem == null ) {
                            $("#" + settings.navigationListId).listNavigation("removeFromList", item[settings.itemIdentifier], false);
                            itemsToRemove.push(i);
                        } else {
                            $.extend(listData[settings.listDataId][i], dataItem);
                            data[settings.listDataKey][settings.listDataId].splice(dataItemIndex, 1);
                        }
                    });
                    while (itemsToRemove.length > 0) {
                        listData[settings.listDataId].splice(itemsToRemove.pop(), 1);
                    }
                    if (data[settings.listDataKey] != null  && data[settings.listDataKey][settings.listDataId] != null ) {
                        $.each(data[settings.listDataKey][settings.listDataId], function(i, item) {
                            settings.addToListCall.apply($(this), $.makeArray(item));
                            listData[settings.listDataId].push(item);
                        });
                    }
                    $("#" + settings.listId).data(settings.listDataKey, listData);
                    if (updateForm) {
                        if ($("#" + settings.navigationListId + " .listNavigation .selected").length > 0) {
                            var item = null ;
                            for (var i in data2[settings.listDataKey][settings.listDataId]) {
                                if (data2[settings.listDataKey][settings.listDataId][i][settings.itemIdentifier] == settings.dataKey.apply($(this))) {
                                    item = data2[settings.listDataKey][settings.listDataId][i];
                                    break;
                                }
                            }
                            if (item != null ) {
                                $("#" + settings.navigationListId).listNavigation("showItem", item);
                            }
                        }
                    }
                }
            }
        };
        return this.each(function() {
            var $this = $(this);
            if (typeof method === "object" || !method) {
                return $(this).navItem("init", $.extend(settings, method));
            } else {
                return $(this).navItem("apply", $.merge([method], Array.prototype.slice.call(args, 1)));
            }
        });
    }
    ;
})(jQuery);
function getTimeStamp(seconds) {
    var datetime = new Date(parseInt(seconds) * 1000);
    var month = datetime.getUTCMonth() + 1;
    var day = datetime.getUTCDate();
    var year = datetime.getUTCFullYear();
    var hour = datetime.getUTCHours();
    var minutes = datetime.getUTCMinutes();
    var seconds = datetime.getUTCSeconds();
    var dateStamp = "";
    switch (gLanguage) {
    case "de_DE":
    case "cs_CZ":
    case "nb_NO":
    case "ru_RU":
    case "tr_TR":
    case "fr_FR":
    case "es_ES":
    case "it_IT":
    case "pt_BR":
    case "nl_NL":
        dateStamp = day + "/" + (month <= 9 ? "0" + month : month) + "/" + year;
        break;
    case "hu_HU":
    case "ja_JP":
    case "sv_SE":
    case "zh_CH":
    case "zh_TW":
    case "ko_KR":
    case "pl_PL":
        dateStamp = year + "/" + (month <= 9 ? "0" + month : month) + "/" + day;
        break;
    default:
        dateStamp = month + "/" + (day <= 9 ? "0" + day : day) + "/" + year;
        break;
    }
    return dateStamp + " " + (hour <= 9 ? "0" + hour : hour) + ":" + (minutes <= 9 ? "0" + minutes : minutes) + ":" + (seconds <= 9 ? "0" + seconds : seconds);
}
function localizeTimeStamp(id, localeFormat) {
    if (localeFormat == undefined) {
        localeFormat = "F";
    }
    var idx = -1;
    for (var i = 0; i <= timeZonesName.length; i++) {
        if (timeZonesName[i] == gTimezoneName) {
            idx = i;
        }
    }
    var tzAbbr = "";
    if (timeZonesName[idx] != undefined) {
        tzAbbr = timeZonesAbbr[idx];
    } else {}
    var oldOption = $(id);
    var newOption = $(id).clone();
    newOption.timezone({
        pageTz: "GMT",
        tz: tzAbbr,
        format: localeFormat
    });
    if (gLanguage == "pt_BR" || gLanguage == "es_ES") {
        var dateTimeStr = newOption.html();
        if (dateTimeStr != null ) {
            newOption.html(dateTimeStr.replace(/DE/g, "de"));
        }
    }
    
	var dateTimeStr = newOption.html();
	if (dateTimeStr != null && dateTimeStr.indexOf("'") != -1) {
        newOption.html(dateTimeStr.replace(/'/g, ""));
    }
    
    	
    oldOption.attr("id", "oldOption");
    newOption.insertAfter(oldOption);
    oldOption.remove();
}
function trimString(str) {
    while ((str.substring(0, 1) == " ") || (str.substring(0, 1) == "\n") || (str.substring(0, 1) == "\r")) {
        str = str.substring(1, str.length);
    }
    while ((str.substring(str.length - 1, str.length) == " ") || (str.substring(str.length - 1, str.length) == "\n") || (str.substring(str.length - 1, str.length) == "\r")) {
        str = str.substring(0, str.length - 1);
    }
    return str;
}
function ByteSizeRound(size)
{
	if ( size < 1 ){
		size = Math.round( size ); 
	}
	else
	{
		if ( size < 10 ){ 
			size = Math.round( size * 10 ) / 10; // size like 9.5 
		}
		else{ 
			size = Math.round( size ); // size like 195 
		}
	}
	return size;
}
function ByteSize(bytes) {
    size = (bytes / BYTE_DIVISOR / BYTE_DIVISOR);
    byteType = dictionaryList["labelgenericMBtxt"];
    if (size < BYTE_DIVISOR) {
        kbSize = size * BYTE_DIVISOR;
        if (kbSize < BYTE_DIVISOR) {
            byteType = dictionaryList["labelgenericKBtxt"];
            size = kbSize;
        } else {
            byteType = dictionaryList["labelgenericMBtxt"];
        }
    } else {
        if (size / BYTE_DIVISOR < BYTE_DIVISOR) {
            size = size / BYTE_DIVISOR;
            byteType = dictionaryList["labelgenericGBtxt"];
        } else {
            if (size / BYTE_DIVISOR / BYTE_DIVISOR < BYTE_DIVISOR) {
                size = size / BYTE_DIVISOR / BYTE_DIVISOR;
                byteType = dictionaryList["labelgenericTBtxt"];
            }
        }
    }
    size = ByteSizeRound(size);
    if (size == 1000) {
        switch (byteType) {
        case dictionaryList["labelgenericKBtxt"]:
            size = 1;
            byteType = dictionaryList["labelgenericMBtxt"];
            break;
        case dictionaryList["labelgenericMBtxt"]:
            size = 1;
            byteType = dictionaryList["labelgenericGBtxt"];
            break;
        case dictionaryList["labelgenericGBtxt"]:
            size = 1;
            byteType = dictionaryList["labelgenericTBtxt"];
            break;
        default:
            break;
        }
    }
    return size.toString() + " " + byteType;
}
function debug(obj, indent) {
    if (typeof (obj) == typeof ("")) {
        return "[String] : " + obj;
    }
    if (indent == undefined) {
        indent = 0;
    }
    var out = "";
    var tabs = "";
    for (var i = 0; i <= indent; i++) {
        tabs += "\t";
    }
    for (itm in obj) {
        if (Object.prototype.toString.call(obj[itm]) === "[object Object]") {
            out += tabs + itm + " {\n";
            out += tabs + debug(obj[itm], indent + 1);
            out += tabs + "}\n";
        } else {
            out += tabs + itm + ": " + obj[itm] + "\n";
        }
    }
    return out;
}
function getBrowserWidth() {
    if (document.body && document.body.offsetWidth) {
        winW = document.body.offsetWidth;
    }
    if (document.compatMode == "CSS1Compat" && document.documentElement && document.documentElement.offsetWidth) {
        winW = document.documentElement.offsetWidth;
    }
    if (window.innerWidth) {
        winW = window.innerWidth;
    }
    return winW;
}
function getBrowserHeight() {
    if (document.body && document.body.offsetHeight) {
        winH = document.body.offsetHeight;
    }
    if (document.compatMode == "CSS1Compat" && document.documentElement && document.documentElement.offsetHeight) {
        winH = document.documentElement.offsetHeight;
    }
    if (window.innerHeight) {
        winH = window.innerHeight;
    }
    return winH;
}
function getURLLocation() {
    var parser = document.createElement("a");
    parser.href = location;
    return parser.hostname;
}
function ms2Time(ms) {
    var secs = ms / 1000;
    ms = Math.floor(ms % 1000);
    var minutes = secs / 60;
    secs = Math.floor(secs % 60);
    var hours = minutes / 60;
    minutes = Math.floor(minutes % 60);
    hours = Math.floor(hours % 24);
    return ((hours < 10) ? "0" + hours : hours) + ":" + ((minutes < 10) ? "0" + minutes : minutes) + ":" + ((secs < 10) ? "0" + secs : secs);
}
function isPopupBlockerEnabled() {
    var popupTest = window.open(null , "", "width=100,height=100");
    try {
        popupTest.close();
        gPopupBlocker = false;
        return false;
    } catch (e) {
        return true;
    }
}
var updateCountHandler;
var pollingHandler;
var pollingTimeout = 60000;
$(document).ready(function() {
    pollingHandler = $.pollingHandler();
    updateCountHandler = $.updateCountHandler();
});
function initPolling() {
    pollingHandler.poll();
    updateCountHandler.startPolling();
}
function stopPolling() {
    pollingHandler.stopAll();
    updateCountHandler.poll.abort();
    clearTimeout(updateCountHandler.timeout);
}
(function($) {
    $.extend({
        pollingHandler: function() {
            var $this = this;
            var handler = {
                currentScreen: null ,
                pollTimer: 60000,
                polls: new Object(),
                pollList: new Object(),
                timeouts: new Object(),
                init: function(options) {
                    return this;
                },
                addPoll: function(api, pageIds, successMethod, errorMethod, customPollTimer, overrideSuccessMethod, errorPollAgain) {
                    for (var i = 0; i < pageIds.length; i++) {
                        if (handler.pollList[pageIds[i]] == null ) {
                            handler.pollList[pageIds[i]] = new Array();
                        }
                        var pollFrequency = handler.pollTimer;
                        if (customPollTimer != null ) {
                            pollFrequency = customPollTimer;
                        }
                        if (errorPollAgain == null ) {
                            errorPollAgain = false;
                        }
                        var ajaxOptions = {
                            "url": api,
                            "timeout": pollingTimeout,
                            "success": function(data) {
                                if (typeof (overrideSuccessMethod) == "undefined" || overrideSuccessMethod == false) {
                                    successMethod(data);
                                    delete handler.polls[api];
                                    handler.timeouts[api] = setTimeout(function() {
                                        handler.polls[api] = $.ajaxAPI(ajaxOptions);
                                    }, pollFrequency);
                                } else {
                                    successMethod.apply(handler, $.makeArray(data));
                                }
                            },
                            "error": function(request, status, error) {
                                errorMethod.apply(handler, [request, status, error]);
                                if (errorPollAgain) {
                                    delete handler.polls[api];
                                    handler.timeouts[api] = setTimeout(function() {
                                        handler.polls[api] = $.ajaxAPI(ajaxOptions);
                                    }, pollFrequency);
                                }
                            }
                        };
                        handler.pollList[pageIds[i]].push(ajaxOptions);
                        if (pageIds[i] == "all") {
                            handler.polls[api] = $.ajaxAPI(ajaxOptions);
                        }
                    }
                    return $this;
                },
                poll: function() {
                    handler.stopPages();
                    var visibleDivs = $("#main_content div:visible");
                    if (Object.prototype.toString.call(visibleDivs) != "[object Array]") {
                        visibleDivs = $.makeArray(visibleDivs);
                    }
                    for (var i in visibleDivs) {
                        var visibleDiv = $(visibleDivs[i]).attr("id");
                        if (handler.pollList[visibleDiv] != null ) {
                            for (var j = 0; j < handler.pollList[visibleDiv].length; j++) {
                                handler.polls[handler.pollList[visibleDiv][j].url] = $.ajaxAPI(handler.pollList[visibleDiv][j]);
                            }
                        }
                    }
                    return $this;
                },
                stop: function(api) {
                    if (handler.polls[api]) {
                        if (handler.polls[api].readyState != 4) {
                            handler.polls[api].abort();
                        }
                        delete handler.polls[api];
                    }
                    if (handler.timeouts[api]) {
                        clearTimeout(handler.timeouts[api]);
                        delete handler.timeouts[api];
                    }
                },
                stopPages: function() {
                    var i;
                    for (i in handler.polls) {
                        var inAll = false;
                        if (handler.pollList["all"] != null ) {
                            for (var j = 0; j < handler.pollList["all"].length; j++) {
                                if (handler.pollList["all"][j].api == handler.polls[i]) {
                                    inAll = true;
                                }
                            }
                        }
                        if (!inAll) {
                            if (handler.polls[i] && handler.polls[i].readyState != 4) {
                                handler.polls[i].abort();
                            }
                            delete handler.polls[i];
                        }
                    }
                    for (i in handler.timeouts) {
                        var inAll = false;
                        if (handler.pollList["all"] != null ) {
                            for (var j = 0; j < handler.pollList["all"].length; j++) {
                                if (handler.pollList["all"][j].api == handler.polls[i]) {
                                    inAll = true;
                                }
                            }
                        }
                        if (!inAll) {
                            clearTimeout(handler.timeouts[i]);
                            delete handler.timeouts[i];
                        }
                    }
                    return $this;
                },
                stopAll: function() {
                    var i;
                    for (i in handler.polls) {
                        if (handler.polls[i] && handler.polls[i].readyState != 4) {
                            handler.polls[i].abort();
                        }
                        delete handler.polls[i];
                    }
                    for (i in handler.timeouts) {
                        clearTimeout(handler.timeouts[i]);
                        delete handler.timeouts[i];
                    }
                    return $this;
                }
            };
            return handler.init();
        }
    });
})(jQuery);
(function($) {
    $.extend({
        updateCountHandler: function() {
            var $this = this;
            var handler = {
                ws: null ,
                poll: null ,
                timeout: null ,
                callbackMethods: new Object(),
                messagesToSendOnOpen: new Array(),
                counts: new Object(),
                pollTimer: 15000,
                pollFailCount: 0,
                maxRedirectFailCount: 5,
                init: function(options) {
                    return this;
                },
                startPolling: function() {
                    if (handler.poll == null  || handler.poll.readyState == 0 || handler.poll.readyState == 4) {
                        handler.poll = $.ajaxAPI({
                            type: "get",
                            url: "update_counts",
                            timeout: pollingTimeout,
                            success: function(data) {
                                if ("redirect" in data) {
                                    handler.pollFailCount++;
                                    if (handler.pollFailCount <= handler.maxRedirectFailCount) {
                                        setTimeout(function() {
                                            handler.startPolling();
                                        }, handler.pollTimer);
                                        return;
                                    } else {
                                        handler.pollFailCount = 0;
                                        if ("redirect_url" in data) {
                                            window.location = data.redirect_url;
                                            return;
                                        } else {
                                            window.location = SITE_BASE_URL + "start_over";
                                            return;
                                        }
                                    }
                                } else {
                                    handler.pollFailCount = 0;
                                }
                                if (data.update_counts != null ) {
                                    for (var i in data.update_counts) {
                                        if (i != "http_code" && i != "#text") {
                                            if (handler.counts[i] < data.update_counts[i]) {
                                                handler.callMethod(i);
                                                handler.counts[i] = data.update_counts[i];
                                            }
                                            handler.counts[i] = data.update_counts[i];
                                        }
                                    }
                                }
                                handler.timeout = setTimeout(function() {
                                    handler.startPolling();
                                }, handler.pollTimer);
                            },
                            error: function(request, status, error) {
                                setTimeout(function() {
                                    handler.startPolling();
                                }, handler.pollTimer);
                            }
                        });
                    }
                },
                sendOnOpen: function() {
                    for (var i = 0; i < handler.messagesToSendOnOpen.length; i++) {
                        handler.ws.send(handler.messagesToSendOnOpen[i]);
                    }
                },
                subscribe: function(name, callback, page) {
                    if (typeof page == "undefined") {
                        page = "all";
                    }
                    if (handler.callbackMethods[name] == null ) {
                        handler.callbackMethods[name] = new Object();
                    }
                    handler.callbackMethods[name][page] = callback;
                },
                unsubscribe: function(name, page) {
                    if (typeof page == "undefined") {
                        delete handler.callbackMethods[name];
                    } else {
                        if (typeof handler.callbackMethods[name][page] != "undefined") {
                            delete handler.callbackMethods[name][page];
                        }
                    }
                },
                callMethod: function(eventName) {
                    if (handler.callbackMethods[eventName] != null ) {
                        var visibleDivs = $("#main_content div:visible");
                        for (var i in handler.callbackMethods[eventName]) {
                            if (i == "all") {
                                handler.callbackMethods[eventName][i].apply(this);
                            } else {
                                for (var j = 0; j < visibleDivs.length; j++) {
                                    var visibleDiv = $(visibleDivs[j]).attr("id");
                                    if (visibleDiv == i) {
                                        handler.callbackMethods[eventName][i].apply(this);
                                    }
                                }
                            }
                        }
                    }
                }
            };
            return handler.init();
        }
    });
})(jQuery);
(function($) {
    $.fn.shareAccessHandler = function(method) {
        var $this;
        var $arguments = arguments;
        var methods = {
            init: function(options) {
                $.extend(settings, options);
                if (settings.share.share_access == null ) {
                    settings.share.share_access = new Array();
                }
                if (Object.prototype.toString.call(settings.share.share_access) != "[object Array]") {
                    settings.share.share_access = $.makeArray(settings.share.share_access);
                }
                $this.find(".share_rw_access").click(function() {
                    methods.updateShareAccess("rw");
                });
                $this.find(".share_ro_access").click(function() {
                    methods.updateShareAccess("ro");
                });
                $this.find(".share_no_access").click(function() {
                    methods.deleteShareAccess();
                });
            },
            updateShareAccess: function(shareAccessType) {
                var performAction;
                var shareAccessAjaxType;
                var shareAccessData;
                var i;
                if (shareAccessType == "ro") {
                    shareAccessAjaxType = "POST";
                    performAction = true;
                    shareAccessData = {
                        "username": settings.user,
                        "access": "RO"
                    };
                    if (settings.share.share_access.length > 0) {
                        for (i in settings.share.share_access) {
                            if (settings.share.share_access[i].username == settings.user) {
                                shareAccessAjaxType = "PUT";
                                if (settings.share.share_access[i].access == "RO") {
                                    performAction = false;
                                }
                                break;
                            }
                        }
                    }
                    if (performAction) {
                        $.ajaxAPI({
                            "url": "share_access/" + settings.share.share_name,
                            "type": shareAccessAjaxType,
                            "data": shareAccessData,
                            "before": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                            },
                            "success": function() {
                                if (shareAccessAjaxType == "POST") {
                                    settings.share.share_access.push({
                                        "username": settings.user,
                                        "access": "RO"
                                    });
                                } else {
                                    for (var i in settings.share.share_access) {
                                        if (settings.share.share_access[i].username == settings.user) {
                                            settings.share.share_access[i].access = "RO";
                                            break;
                                        }
                                    }
                                }
                                $this.find(".access_link").removeClass("selected");
                                $this.find(".share_ro_access").addClass("selected");
                                $this.find(".share_access_description").text(dictionaryList["ro"]);
                            },
                            "complete": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                            }
                        });
                    }
                }
                if (shareAccessType == "rw") {
                    performAction = true;
                    shareAccessAjaxType = "POST";
                    shareAccessData = {
                        "username": settings.user,
                        "access": "RW"
                    };
                    for (i in settings.share.share_access) {
                        if (settings.share.share_access[i].username == settings.user) {
                            if (settings.share.share_access[i].access == "RW") {
                                performAction = false;
                            } else {
                                shareAccessAjaxType = "PUT";
                            }
                            break;
                        }
                    }
                    if (performAction) {
                        $.ajaxAPI({
                            "url": "share_access/" + settings.share.share_name,
                            "type": shareAccessAjaxType,
                            "data": shareAccessData,
                            "before": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                            },
                            "success": function() {
                                if (shareAccessAjaxType == "POST") {
                                    settings.share.share_access.push({
                                        "username": settings.user,
                                        "access": "RW"
                                    });
                                } else {
                                    for (i in settings.share.share_access) {
                                        if (settings.share.share_access[i].username == settings.user) {
                                            settings.share.share_access[i].access = "RW";
                                            break;
                                        }
                                    }
                                }
                                $this.find(".access_link").removeClass("selected");
                                $this.find(".share_rw_access").addClass("selected");
                                $this.find(".share_access_description").text(dictionaryList["rw"]);
                            },
                            "complete": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                            }
                        });
                    }
                }
            },
            deleteShareAccess: function() {
                for (var j in settings.share.share_access) {
                    if (settings.share.share_access[j].username == settings.user) {
                        $.ajaxAPI({
                            "url": "share_access/" + settings.share.share_name,
                            "type": "DELETE",
                            "data": {
                                "username": settings.user
                            },
                            "before": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "show"
                                }, {
                                    duration: 500
                                });
                            },
                            "success": function(data, textStatus, jqXHR) {
                                for (var i in settings.share.share_access) {
                                    if (settings.share.share_access[i].username == settings.user) {
                                        delete (settings.share.share_access[i]);
                                        settings.share.share_access.splice(i, 1);
                                        break;
                                    }
                                }
                                $this.find(".access_link").removeClass("selected");
                                $this.find(".share_no_access").addClass("selected");
                                $this.find(".share_access_description").text(dictionaryList["no"]);
                            },
                            "complete": function() {
                                $this.find(".user_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                                $this.find(".share_access_overlay").animate({
                                    opacity: "hide"
                                }, {
                                    duration: 500
                                });
                            }
                        });
                        break;
                    }
                }
            }
        };
        var settings = {
            users: null ,
            user: null ,
            share: null 
        };
        return this.each(function() {
            $this = $(this);
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call($arguments, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return methods.init.apply(this, $arguments);
                }
            }
        });
    }
    ;
})(jQuery);
(function($) {
    $.fn.mochiDialog = function(method) {
        var args = arguments;
        var $this;
        var settings = {
            drag: function(event, ui) {
                var newLeft = $this.offset().left + $this.outerWidth() / 2;
                $("#acknowledgement_down").css("top", $this.find(".mochi_dialog_content_container").offset().top + "px");
                $("#acknowledgement_down").css("left", newLeft - $("#acknowledgement_down").outerWidth() / 2 + "px");
                $("#loading").css("top", $this.find(".mochi_dialog_content_container").offset().top + "px");
                $("#loading").css("left", newLeft - $("#loading").outerWidth() / 2 + "px");
            },
            open: function(event, ui) {
                methods._open(event, ui);
            }
        };
        var methods = {
            _open: function(event, ui) {
                var newLeft = $this.find(".mochi_dialog_content_container").offset().left + $this.find(".mochi_dialog_content_container").outerWidth() / 2;
                $("#acknowledgement_down").css("top", $this.find(".mochi_dialog_content_container").offset().top + "px");
                $("#acknowledgement_down").css("left", newLeft - $("#acknowledgement_down").outerWidth() / 2 + "px");
                $("#loading").css("left", newLeft - $("#loading").outerWidth() / 2 + "px");
                return this;
            }
        };
        return this.each(function() {
            $this = $(this);
            if (methods[method]) {
                return methods[method].apply(this, Array.prototype.slice.call(args, 1));
            } else {
                if (typeof method === "object" || !method) {
                    return $(this).dialog($.extend(settings, method));
                } else {
                    return $(this).dialog(method, Array.prototype.slice.call(args, 1));
                }
            }
        });
    }
    ;
})(jQuery);
$(document).ready(function() {

    $("#eulaDeclineLink").live("click", function() {
        $("#eula_not_accepted").dialog("open");
    });
    $("#eula_go_back_button").live("click", function() {
        $("#eula_not_accepted").dialog("close");
    });
    $("#eula_exit_application_button").live("click", function() {
        window.location = "http://wd.com";
    });
    $("#privacyPolicyLink").live("click", function() {
        $("#privacy_policy_overlay").dialog("option", "title", dictionaryList["header_privacy_center"]);
        $("#privacyPolicy_iframe").show();
        $("#eula_iframe").hide();
        $("#privacy_policy_overlay").dialog("open");
    });
    $("#displayEulaLink").live("click", function() {
       /* $("#privacy_policy_overlay").dialog("option", "title", dictionaryList["header_license_agreement"]);
        $("#privacyPolicy_iframe").hide();
        $("#eula_iframe").show();
        $("#privacy_policy_overlay").dialog("open");*/
        $("#eula_main_block").hide();
        $("#eula_iframe_block").show();
        
    });
    $("#privacy_policy_overlay_close").live("click", function() {
        $("#privacy_policy_overlay").dialog("close");
    });
    $("#eula_not_accepted").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#eula_not_accepted").attr("title") + "</div>"
    });
    $("#privacy_policy_overlay").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#privacy_policy_overlay").attr("title") + "</div>"
    });
});
var reconnectInProgress = false;
var reconnectTimeOutMax = 600000;
var reconnectStartTimeStamp = 0;
var startReconnectDelay = 10000;
var passwordLowBand = "";
var passwordHighBand = "";
var skipSetSSIDInfo = false;
var checkRegister_enable = false;
var authenticationHandler = $.authentication({
    "showEula": function() {
        $("#eula_language_form").restForm("refreshForm");
        $("#eula_container").show();
        $("#page").show();
        $("#main_nav_container").hide();
        $("#dashboard_container").hide();
        $(".toolbar_item").css("display", "none");
        $("#language_toolbar").show();
    },
    "hideEula": function() {
        $("#eula_container").hide();
        $("#header_language").hide();
        $(".toolbar_item").css("display", "inline-block");
        $("#language_toolbar").hide();
    },
    "displayLoading": function() {
        displaySplash();
    },
    "hideLoading": function() {
        hideSplash();
    },
    "processEulaError": function(response, action, httpCode) {
        processAndDisplayError(response, action, httpCode);
    },
    "processEulaAcceptanceError": function() {
        $("#eula_acceptance_error").show();
    },
    "showLogin": function(adminName) {
        if (typeof adminName != "undefined" && adminName !== null ) {
            $("#login_username").val(adminName);
        }
        $("#logout_toolbar").show();
        authenticationHandler.hideLoading();
        $("#login_form").restForm("refreshForm");
        $("#eula_language_form").restForm("refreshForm");
        $("#authentication_container").show().siblings().hide();
        $("#main_nav_container").hide();
        $("#page").show();
        $(".toolbar_item").css("display", "none");
        $("#language_toolbar").show();
        window.setTimeout(function() {
            $("input#login_password").focus();
        }, 500);
    },
    "hideLogin": function(logout) {
        $("#login_password").removeClass("invalid_unauthorized");
        $("#invalid_unauthorized").hide();
        $("#authentication_container").hide();
        $("#dashboard_container").show();
        $("#main_nav_container").show();
        $(".toolbar_item").css("display", "inline-block");
        $("#language_toolbar").hide();
        if (gIsMobile) {
            $("#shortcut_toolbar").hide();
        }
        if (logout === true) {
            $("#nav_dashboard_link").click();
            resetNavigationSelection("#nav_dashboard");
        }
    },
    "showPublicMode": function(firstTime) {
        if (firstTime) {
            authenticationHandler.hideLoading();
        }
        $("#logout_toolbar").hide();
        authenticationHandler.authenticate("", "", true);
    },
    "showCreateNetworkPassword": function(login_username) {
        authenticationHandler.hideLoading();
        $(".toolbar_item").css("display", "none");
        $("#language_toolbar").hide();
        $.ajaxAPI({
            "url": "local_login",
            "data": {
                "username": login_username,
                "password": ""
            },
            "complete": function() {
                $("#create_network_password_form").restForm("refreshForm");
                $("#create_network_security_container").show().siblings().hide();
                $("#main_nav_container").hide();
                $("#page").show();
                window.setTimeout(function() {
                    $("input#create_network_password").focus();
                }, 400);
            }
        });
    },
    "hideCreatePassword": function() {
        hideCreatePassword();
    },
    "hideSetupSDCardAutoSlurp": function() {
        hideSetupSDAutoSlurp();
    },
    "showInvalidPasswordError": function() {
        $("#login_form").restForm("reset");
        $("#login_password").addClass("invalid_unauthorized");
        $("#invalid_unauthorized").show();
    },
    "beforeCheckUsers": function() {
        $("#splash_content h2").text(dictionaryList["splashAuthenticate"]);
    }
});
$(document).ready(function() {
    $("#login_form").restForm({
        "refreshDataCallback": function(data) {
            var login_username = "admin";
            if (data !== null  && data.users !== null  && data.users.user !== null ) {
                if (Object.prototype.toString.call(data.users.user) != "[object Array]") {
                    login_username = data.users.user.username;
                } else {
                    for (var i in data.users.user) {
                        if (data.users.user[i].is_admin == "true") {
                            login_username = data.users.user[i].username;
                            break;
                        }
                    }
                }
            }
            $("#login_username").val(login_username);
            $("#login_user_id").html(login_username);
        }
    });
    $("#create_network_password_form").restForm({
        "refreshDataCallback": function(data) {
            var security_mode = "WPA2PSK/TKIPAES";
            $("#create_network_password_form").restForm("reset");
            resetCreateNetworkPasswordForm("low");
            resetCreateNetworkPasswordForm("high");
            $("#create_network_password_show_low_band_container .deleteicon").find(".deletebutton").addClass("addmarginright40");
            $("#create_network_password_show_high_band_container .deleteicon").find(".deletebutton").addClass("addmarginright40");
            if (data !== null  && data.wifi_aps !== null ) {
                for (i = 0; i < data.wifi_aps.wifi_ap.length; i++) {
                    if (data.wifi_aps.wifi_ap[i].ssid !== "") {
                        if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                            network_ssid_high_band = data.wifi_aps.wifi_ap[i].ssid;
                            $("#create_network_original_ssid_high_band").html(network_ssid_high_band);
                            $("#create_network_ssid_high_band").defaultValue = network_ssid_high_band;
                            $("#create_network_password_form").find('[id="create_network_ssid_high_band"]')[0].defaultValue = network_ssid_high_band;
                            $("#create_network_security_mode_high_band").text(security_mode);
                            $("#create_network_enabled_high_band").text(data.wifi_aps.wifi_ap[i].enabled);
                            $("#create_network_broadcast_high_band").text(data.wifi_aps.wifi_ap[i].broadcast);
                        } else {
                            network_ssid_low = data.wifi_aps.wifi_ap[i].ssid;
                            $("#create_network_original_ssid_low_band").html(network_ssid_low);
                            $("#create_network_password_form").find('[id="create_network_ssid_low_band"]')[0].defaultValue = network_ssid_low;
                            $("#create_network_security_mode_low_band").text(security_mode);
                            $("#create_network_enabled_low_band").text(data.wifi_aps.wifi_ap[i].enabled);
                            $("#create_network_broadcast_low_band").text(data.wifi_aps.wifi_ap[i].broadcast);
                        }
                    }
                }
            }
        },
        "validateFormCallback": function() {
            if ($("#create_network_password_show_low_band_container").is(":visible")) {
                disableIdTag("#create_network_password_low_band");
                enableIdTag("#create_network_password_low_band_show");
            } else {
                enableIdTag("#create_network_password_low_band");
                disableIdTag("#create_network_password_low_band_show");
            }
            if ($("#create_network_password_show_high_band_container").is(":visible")) {
                disableIdTag("#create_network_password_high_band");
                enableIdTag("#create_network_password_high_band_show");
            } else {
                enableIdTag("#create_network_password_high_band");
                disableIdTag("#create_network_password_high_band_show");
            }
            $("#create_network_password_form").restForm("_validateForm");
        },
        "beforeProcessForm": function() {},
        "processFormSuccessCallback": function(data) {
            gSSIDName = $("#create_network_ssid_low_band").val();
            gSSIDNameHighBand = $("#create_network_ssid_high_band").val();
            doReconnectNetwork();
        }
    });
    $("#create_network_password_form_low_band_show_password_checkbox_on").click(function() {
        $("#create_network_password_low_band").val($("#create_network_password_low_band_show").val());
        resetCreateNetworkPasswordForm("low");
    });
    $("#create_network_password_form_low_band_show_password_checkbox_off").click(function() {
        $("#create_network_password_low_band_show").val($("#create_network_password_low_band").val());
        $("#create_network_password_low_band_container").hide();
        $("#create_network_password_show_low_band_container").show().css("display", "inline-block");
        $("#create_network_password_low_band").removeClass("NETWORK_PASSWORD").removeClass("WPA_NETWORK_PASSWORD").removeClass("NOTEMPTY");
        $("#create_network_password_low_band_show").addClass("NETWORK_PASSWORD").addClass("WPA_NETWORK_PASSWORD").addClass("NOTEMPTY");
        disableIdTag("#create_network_password_low_band");
        enableIdTag("#create_network_password_low_band_show");
    });
    $("#create_network_password_form_high_band_show_password_checkbox_on").click(function() {
        $("#create_network_password_high_band").val($("#create_network_password_high_band_show").val());
        resetCreateNetworkPasswordForm("high");
    });
    $("#create_network_password_form_high_band_show_password_checkbox_off").click(function() {
        $("#create_network_password_high_band_show").val($("#create_network_password_high_band").val());
        $("#create_network_password_high_band_container").hide();
        $("#create_network_password_show_high_band_container").show();
        $("#create_network_password_high_band").removeClass("NETWORK_PASSWORD").removeClass("WPA_NETWORK_PASSWORD").removeClass("NOTEMPTY");
        $("#create_network_password_high_band_show").addClass("NETWORK_PASSWORD").addClass("WPA_NETWORK_PASSWORD").addClass("NOTEMPTY");
        disableIdTag("#create_network_password_high_band");
        enableIdTag("#create_network_password_high_band_show");
    });
    $("#setup_sd_auto_slurp_back_button").click(function() {
        $("#setup_sd_auto_slurp_container").hide();
        showHomeNetwork();
        showSetupHomeNetwork();
    });
    $("#wifi_signin_success_overlay_back_button_h").click(function(){
        $("#wifi_signin_success_overlay_h").hide();
        showHomeNetwork();
        showSetupHomeNetwork();
    });
    $("#setup_sd_auto_slurp_ok_button, #setup_sd_auto_slurp_skip_button").click(function() {
		$("#setup_sd_auto_slurp_container").hide();
		if(gInternetAccess){
			showSetupPlex();
		}else{
			showSetupFirmwareUpdate();
		}
    });
    $("#setup_auto_firmware_update_ok_button").on("click",function() {
      var org_regist_firstName = $("#register_onboarding_first").attr("orig"),
          org_regist_lastName = $("#register_onboarding_last").attr("orig"),
          org_regist_mail = $("#register_onboarding_email").attr("orig"),
          user_regist_firstName = $("#register_onboarding_first").val(),
          user_regist_lastName = $("#register_onboarding_last").val(),
          user_regist_mail = $("#register_onboarding_email").val();
          //console.log("current-here")
        if(gConnectedNetwork){
          
           var errorText = "";
           var errorTag = false;
           
           if(org_regist_firstName != user_regist_firstName && user_regist_firstName.trim()!="" && org_regist_lastName!=user_regist_lastName && user_regist_lastName.trim()!="" && org_regist_mail!=user_regist_mail && user_regist_mail.trim()!=""){
              registerPost();
           }else if((org_regist_firstName == user_regist_firstName || user_regist_firstName.trim()=="") && (org_regist_lastName==user_regist_lastName || user_regist_lastName.trim()=="") && (org_regist_mail==user_regist_mail || user_regist_mail.trim()=="")){
              showOnboardingAllSet();
           }else{
              if(org_regist_firstName == user_regist_firstName || user_regist_firstName.trim()=="")
                  errorText += "<li>"+errorsList["registertion_no_first_name"]+"</li>";
              if(org_regist_lastName == user_regist_lastName || user_regist_lastName.trim() == "")
                  errorText += "<li>"+errorsList["registertion_no_last_name"]+"</li>";
              if(org_regist_mail == user_regist_mail || user_regist_mail.trim() == "")
                  errorText += "<li>"+errorsList["registertion_no_email"]+"</li>";
              $("#register_error_massage").show().html("<ul>"+errorText+"</ul>");
              
           } 
        }
        else{
          showOnboardingAllSet()
        }
        
    });
    /*$("#setup_auto_firmware_update_back_button").click(function() {
        $("#setup_auto_firmware_update_container").hide();
        showSetupSdAutoSlurp();
    });*/
    $("#login_ok_button").click(function(e) {
        e.preventDefault();
        var username = $("#login_username").val()
          , password = $("#login_password").val();
        if (validate("#login_form")) {
            $("#login_password").removeClass("invalid_unauthorized");
            $("#invalid_unauthorized").hide();
            authenticationHandler.authenticate(username, password);
        }
    });
    $("#login_password").live("keydown", function(event) {
        if (event.keyCode == 13) {
            $("#login_ok_button").click();
            event.preventDefault();
            event.stopPropagation();
        }
    });
    $("#login_username").live("keydown", function(event) {
        if (event.keyCode == 13) {
            $("#login_ok_button").click();
            event.preventDefault();
            event.stopPropagation();
        }
    });
    $("#logout_link").live("click", function() {
        authenticationHandler.logout();
    });
    $("#eula_language_form").restForm({
        "refreshDataCallback": function(data) {
            if (data !== null  && data.language_configuration !== null ) {
                if (data.language_configuration.language.toLowerCase() == "default") {
                    var default_language_o = $("#eula_language_select").attr("checkdefult").substr( 0, 5).toLowerCase(),
                        default_language_f="";
                    switch (default_language_o){
                        case "fr_fr":
                            default_language_f = 'fr_FR';//include check session FR
                            break;
                        case "it-it":
                            default_language_f = 'it_IT';
                            break;
                        case "cs-cz":
                            default_language_f = 'cs_CZ';
                            break;
                        case "de-de":
                            default_language_f = 'de_DE';
                            break;
                        case "es-es":
                            default_language_f = 'es_ES';
                            break;
                        case "zh-cn":
                            default_language_f = 'zh_CN';
                            break;
                        case "zh-tw":
                            default_language_f = 'zh_TW';
                            break; 
                        case "ja-jp":
                            default_language_f = 'ja_JP';
                            break;   
                        case "ko-kr":
                            default_language_f = 'ko_KR';
                            break;   
                        case "ru-ru":
                            default_language_f = 'ru_RU';
                            break;  
                        case "pt-br":
                            default_language_f = 'pt_BR';
                            break;
                        case "hu-hu":
                            default_language_f = 'hu_HU';
                            break; 
                        case "nl-nl":
                            default_language_f = 'nl_NL';
                            break;
                        case "nb-no":
                            default_language_f = 'nb_NO';
                            break; 
                        case "pl-pl":
                            default_language_f = 'pl_PL';
                            break; 
                        case "sv-se":
                            default_language_f = 'sv_SE';
                            break;
                        case "tr-tr":
                            default_language_f = 'tr_TR';
                            break;   
                        case "en-us":
                            default_language_f = 'en_US';
                            break;        
                        default:
                            default_language_f = 'en_US';//include EN in all other cases of different lang detection
                            break;
                    }
                    data.language_configuration.language = default_language_f;
                }
            }
            $("#eula_language_form").restForm("_refreshData", data);
        },
        "processFormSuccessCallback": function() {
            gLanguage = $("#eula_language_select").val();
            window.location = redirectURL;
        }
    });
    $("#eula_agree_form").restForm();
    $("#eula_accept_btn").live("click", function() {
        $("#eula_not_accepted_error").hide();
        if ($("#eula_checked").is(":checked")) {
            authenticationHandler.acceptEula();
        } else {
            $("#eula_not_accepted_error").show();
        }
    });
    $("#eulaShowLink").live("click", function() {
        $("#eula_forms_container").hide();
        $("#eula_forms_floater").hide();
        $("#eulaView").show();
    });
    $("#eulaAgreeLink").live("click", function() {
    	if(!$(this).hasClass("gray_out")){
    		skipSetSSIDInfo = true;
    		$("#eula_container").hide();
    		add_eula_grayOut();
    		onboarding_start_preload();
    		showSetupHomeNetwork()
    		showHomeNetwork();
    		
				//authenticationHandler.acceptEula();    	
    	}
    		
        //authenticationHandler.acceptEula();
      return;
    });
    $("#eulaCancelLink").live("click", function() {
        $("#eulaView").hide();
        $("#eula_not_accepted_error").hide();
        $("#eula_forms_floater").show();
        $("#eula_forms_container").show();
    });
    $("#eulaPrintLink").click(function() {
        var eula = frames[0];
        eula.focus();
        eula.print();
        return false;
    });
    $("#eula_language_select").change(function() {
        var lang = $("#eula_language_select option:selected").html();
        $(this).submit();
    });
    $("#create_network_password_ok_button").live("click", function() {
        var showWarning = false;
        var showWarning_height = false;
        skipSetSSIDInfo = false;
        $(".password_msg").empty().hide();
        $("#create_network_password_tip").show();
        if ($("#create_network_password_show_low_band_container").is(":visible")) {
            passwordLowBand = $("#create_network_password_low_band_show").val();
            if (passwordLowBand == "") {
                showWarning = true;
                $("#create_network_password_low_band_show").removeClass("NOTEMPTY");
                $("#create_network_security_mode_low_band").text("NONE");
            } else {
                $("#create_network_password_low_band_show").addClass("NOTEMPTY");
                $("#create_network_security_mode_low_band").text("WPA2PSK/TKIPAES");
            }
        } else {
            passwordLowBand = $("#create_network_password_low_band").val();
            if (passwordLowBand == "") {
                showWarning = true;
                $("#create_network_password_low_band").removeClass("NOTEMPTY");
                $("#create_network_security_mode_low_band").text("NONE");
            } else {
                $("#create_network_password_low_band").addClass("NOTEMPTY");
                $("#create_network_security_mode_low_band").text("WPA2PSK/TKIPAES");
            }
        }
        if ($("#create_network_password_show_high_band_container").is(":visible")) {
            passwordHighBand = $("#create_network_password_high_band_show").val();
            if (passwordHighBand == "") {
                showWarning_height = true;
                $("#create_network_password_high_band_show").removeClass("NOTEMPTY");
                $("#create_network_security_mode_high_band").text("NONE");
            } else {
                $("#create_network_password_high_band_show").addClass("NOTEMPTY");
                $("#create_network_security_mode_high_band").text("WPA2PSK/TKIPAES");
            }
        } else {
            passwordHighBand = $("#create_network_password_high_band").val();
            if (passwordHighBand == "") {
                showWarning_height = true;
                $("#create_network_password_high_band").removeClass("NOTEMPTY");
                $("#create_network_security_mode_high_band").text("NONE");
            } else {
                $("#create_network_password_high_band").addClass("NOTEMPTY");
                $("#create_network_security_mode_high_band").text("WPA2PSK/TKIPAES");
            }
        }
        if (showWarning&&showWarning_height) {
            //$("#confirm_network_no_password_dialog").dialog("open");
            $("#confirm_network_no_password_dialog").show();
            $("#create_network_security_container").hide();
        } else {
            if (validate("#create_network_password_form")) {
                hideCreatePassword();
            }
        }
    });
    $("#create_network_password_skip_button").live("click", function() {
        //$("#confirm_skip_network_password_dialog").dialog("open");
        $("#create_network_security_container").hide();
        $("#confirm_skip_network_password_dialog").show();
    });
    /*$("#confirm_skip_network_password_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: true,
        dialogClass: "mochi_dialog mochi_dialog_network",
        title: '<div class="wizard_dialog_title">' + $("#confirm_skip_network_password_dialog").attr("title") + "</div>"
    });*/
    $("#confirm_skip_network_password_close_button").click(function() {
        skipSetSSIDInfo = false;
        //$("#confirm_skip_network_password_dialog").dialog("close");
        $("#confirm_skip_network_password_dialog").hide();
        $("#create_network_security_container").show();
    });
    $("#confirm_skip_network_password_ok_button").click(function() {
        //$("#confirm_skip_network_password_dialog").dialog("close");
        $("#confirm_skip_network_password_dialog").hide();
        skipSetSSIDInfo = true;
        hideCreatePassword();
    });
   /* $("#confirm_network_no_password_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: true,
        dialogClass: "mochi_dialog mochi_dialog_network",
        title: '<div class="wizard_dialog_title">' + $("#confirm_network_no_password_dialog").attr("title") + "</div>"
    });*/
    $("#confirm_network_no_password_close_button").click(function() {
        //$("#confirm_network_no_password_dialog").dialog("close");
        $("#confirm_network_no_password_dialog").hide();
        $("#create_network_security_container").show();
    });
    $("#confirm_network_no_password_ok_button").click(function() {
        //$("#confirm_network_no_password_dialog").dialog("close");
        $("#confirm_network_no_password_dialog").hide();
        if (!validate("#create_network_password_form")) {
            return;
        }
        hideCreatePassword();
    });
    $("#onboarding_reconnect_network_dialog").dialog({
        autoOpen: false,
        resizable: false,
        closeOnEscape: false,
        position: "center",
        width: 710,
        minHeight: dialogMinHeight,
        zIndex: 2000,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#onboarding_reconnect_network_dialog").attr("title") + "</div>",
        open: function() {
            var msg;
            var ssidname = "<b><i>" + gSSIDName + "/ " + gSSIDNameHighBand + "</i></b>";
            msg = dictionaryList["find_wifi"].replace("{0}", ssidname);
            $("#onboarding_connect_msg_find_wifi_network").find(".connect_network_msg_title").html(msg);
            msg = dictionaryList["connect_wifi"].replace("{0}", ssidname);
            $("#onboarding_connect_msg_select_wifi_network").find(".connect_network_msg_title").html(msg);
            if ((navigator.appVersion.indexOf("Mac") != -1) || (navigator.platform.toLowerCase() == "ipad") || (navigator.platform.toLowerCase() == "iphone")) {
                $("#onboarding_connect_msg_find_wifi_network").find(".icon").removeClass("pc_icon");
                $("#onboarding_connect_msg_select_wifi_network").find(".icon").removeClass("pc_icon");
            } else {
                $("#onboarding_connect_msg_find_wifi_network").find(".icon").addClass("pc_icon");
                $("#onboarding_connect_msg_select_wifi_network").find(".icon").addClass("pc_icon");
            }
            msg = dictionaryList["select_avatar_wifi"].replace("{0}", ssidname);
            $("#onboarding_connect_msg_select_wifi_network").find(".connect_network_msg_details").html(msg);
            var deviceNameURL = getDeviceNameURL(gDeviceName);
            msg = dictionaryList["devicename_url"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
            $("#onboarding_connect_network_msg_refresh_browser").find(".connect_network_msg_details").html(msg);
        }
    });
    $("#onboarding_reconnect_network_form").restForm({
        "timeout": ajaxTimeoutPolling,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            reconnectInProgress = false;
            var username = $("#create_login_username").val();
            var password = $("#create_login_password").val();
            if (data.system_state.status == "ready") {
                $("#onboarding_reconnect_network_dialog").dialog("close");
                hideCreatePassword();
                authenticationHandler.authenticate(username, password);
                return;
            }
            var reconnectCurrentTimeStamp = new Date().getTime();
            if ((reconnectCurrentTimeStamp - reconnectStartTimeStamp) > reconnectTimeOutMax) {
                if (status == "ready") {
                    $("#onboarding_reconnect_network_dialog").dialog("close");
                    hideCreatePassword();
                    authenticationHandler.authenticate(username, password);
                } else {
                    showReconnectTimeout();
                }
                return;
            }
            setTimeout("reconnectNetwork();", pingInterval);
        },
        "processFormErrorCallback": function() {
            reconnectInProgress = false;
            var reconnectCurrentTimeStamp = new Date().getTime();
            if ((reconnectCurrentTimeStamp - reconnectStartTimeStamp) > reconnectTimeOutMax) {
                showReconnectTimeout();
                return;
            }
            setTimeout("reconnectNetwork();", pingInterval);
        },
        "processFormSuccessCallback": function(data) {
            $("#onboarding_reconnect_network_dialog").dialog("close");
            authenticationHandler.authenticate("", "", true);
        }
    });
});
function doReconnectNetwork() {
    reconnectStartTimeStamp = new Date().getTime();
    $("#onboarding_reconnect_network_dialog").dialog("open");
    setTimeout("reconnectNetwork();", startReconnectDelay);
}
function reconnectNetwork() {
    if (reconnectInProgress) {
        return;
    }
    reconnectInProgress = true;
    $("#onboarding_reconnect_network_form").submit();
}
function showReconnectTimeout() {
    $("#onboarding_reconnect_network_dialog").dialog("close");
    $("#reconnect_network_timeout_dialog").dialog("open");
}
function hideCreatePassword() {
    $("#create_network_security_container").hide();
     showHomeNetwork();
     showSetupHomeNetwork();
    //showSetupSdAutoSlurp();//chage home network
}
function resetCreateNetworkPasswordForm(band) {
    if (band == "low") {
        $("#create_network_password_low_band_container").show();
        $("#create_network_password_show_low_band_container").hide();
        $("#create_network_password_low_band_confirm_container").show();
        $("#create_network_password_low_band").addClass("NETWORK_PASSWORD").addClass("WPA_NETWORK_PASSWORD").addClass("NOTEMPTY");
        $("#create_network_password_low_band_confirm").addClass("CONFIRM_PASSWORD");
        $("#create_network_password_low_band_show").removeClass("NETWORK_PASSWORD").removeClass("WPA_NETWORK_PASSWORD").removeClass("NOTEMPTY");
        enableIdTag("#create_network_password_low_band");
        disableIdTag("#create_network_password_low_band_show");
    } else {
        $("#create_network_password_high_band_container").show();
        $("#create_network_password_show_high_band_container").hide();
        $("#create_network_password_high_band_confirm_container").show();
        $("#create_network_password_high_band").addClass("NETWORK_PASSWORD2").addClass("WPA_NETWORK_PASSWORD").addClass("NOTEMPTY");
        $("#create_network_password_high_band_confirm").addClass("CONFIRM_PASSWORD2");
        $("#create_network_password_high_band_show").removeClass("NETWORK_PASSWORD").removeClass("WPA_NETWORK_PASSWORD").removeClass("NOTEMPTY");
        enableIdTag("#create_network_password_high_band");
        disableIdTag("#create_network_password_high_band_show");
    }
}
function showHomeNetwork(){
      //$("#wifi_ap_list_h").hide();
      $(".wifi_ap_list_item_h.default").siblings().remove();
			$("#connect_home_network_container").show();
}
function showSetupSdAutoSlurp() {
    $(".toolbar_item").css("display", "none");
    $("#language_toolbar").hide();
    //$("#sdcard_automatic_transfer_onboarding_form").restForm("refreshForm");
    $("#setup_sd_auto_slurp_container").show();
    $("#main_nav_container").hide();
    $("#page").show();
}
function hideSetupSDAutoSlurp() {
    $("#setup_sd_auto_slurp_container").hide();
}
function supportRegister_load(){
        if(gConnectedNetwork){
           $("#support_register_form input").removeAttr("disabled");
           $("#support_register_grayout_txt").hide();
           $("#support_register_btn").show();
           
        }else{
           $("#support_register_form input").attr("disabled","disabled");
           $("#support_register_grayout_txt").show();
           $("#support_register_btn").hide();
        }
}
function showSetupFirmwareUpdate() {
        $("#register_error_massage").hide();
        if(gConnectedNetwork){
           $("#register_onboarding_form input").removeAttr("disabled");
           $("#register_grayout_txt").hide();
           
        }else{
           $("#register_onboarding_form input").attr("disabled","disabled");
           $("#register_grayout_txt").show();
        }
 
    //$("#setup_auto_firmware_update_form").restForm("refreshForm");
    var org_regist_firstName = $("#register_onboarding_first").attr("orig"),
          org_regist_lastName = $("#register_onboarding_last").attr("orig"),
          org_regist_mail = $("#register_onboarding_email").attr("orig")

    $("#register_onboarding_first").val(org_regist_firstName)
    $("#register_onboarding_last").val(org_regist_lastName)
    $("#register_onboarding_email").val(org_regist_mail)
    
    $("#setup_auto_firmware_update_container").show();
    $("#main_nav_container").hide();
    $("#page").show();
}
function setupFirmwareUpdateNext() {
    $("#setup_auto_firmware_update_container").hide();
   	delete_eula_grayOut()
    if($("#setup_enable_shutcut_checkbox").is(":checked"))
    {
    	window.location = "/UI/shortcut";
    }
    /*$("#create_shortcut_dialog").dialog("open");*/
    //setWifiApData();
}
function onboardingAllSetFinish() {
		//authenticationHandler.finishOnboarding();
    $("#setup_auto_firmware_update_container").hide();
   	delete_eula_grayOut()
    setWifiApData();
    if($("#plex_automatic_transfer_onboarding_switch").is(":checked")){
      $.get('views/media/partial/plexsettings/start_plex_download.php'); 
    }
   
    
	if($("#plex_automatic_transfer_onboarding_switch").is(":checked")){
		$("#update_progress_title").html(dictionaryList["page_header_download_plex_media_server"]);
		$("#update_progress_note").html("");
		$("#update_progress").dialog("open");
		$("#update_progressbar").progressbar({
			value: 0
		});
		processUpdate();
	}
	$("#auto_system_updates_form").restForm("refreshForm");
    /*$("#create_shortcut_dialog").dialog("open");*/
   
}
function setWifiApData() {
    var originalSSIDLowBand = $("#create_network_original_ssid_low_band").html();
    var originalSSIDHighBand = $("#create_network_original_ssid_high_band").html();
    var newSSIDLowBand = $("#create_network_ssid_low_band").val();
    var newSSIDHighBand = $("#create_network_ssid_high_band").val();
    if (skipSetSSIDInfo) {
        authenticationHandler.authenticate("", "", true);
        authenticationHandler.finishOnboarding();
    } else {
        if ((originalSSIDLowBand === newSSIDLowBand) && (originalSSIDHighBand === newSSIDHighBand) && (passwordLowBand === "") && (passwordHighBand === "")) {
            authenticationHandler.authenticate("", "", true);
            authenticationHandler.finishOnboarding();
        } else {
            var parameterOptions = {
                "2.4": {
                    "enabled": true
                },
                "5": {
                    "enabled": true
                }
            };
            if (passwordLowBand != "") {
                parameterOptions["2.4"].security_mode = "WPA2PSK/TKIPAES";
                parameterOptions["2.4"].security_key = passwordLowBand;
            } else {
                parameterOptions["2.4"].security_mode = "NONE";
            }
            if (passwordHighBand != "") {
                parameterOptions["5"].security_mode = "WPA2PSK/TKIPAES";
                parameterOptions["5"].security_key = passwordHighBand;
            } else {
                parameterOptions["5"].security_mode = "NONE";
            }
            parameterOptions["2.4"].ssid = newSSIDLowBand;
            parameterOptions["5"].ssid = newSSIDHighBand;
            $.ajaxAPI({
                "url": "wifi_aps",
                "type": "PUT",
                "data": JSON.stringify(parameterOptions),
                "dataType": "json",
                "contentType": "application/json; charset=UTF-8",
                "error": function(request, status, error) {
                    processAndDisplayError(request.responseText, "put" + "_" + "wifi_aps", request.status);
                },
                "success": function() {
                    authenticationHandler.authenticate("", "", true);
                },
                "complete": function(jqXHR, textStatus) {
                    hideLoading();
                    authenticationHandler.finishOnboarding();
                    authenticationHandler.authenticate("", "", true);
                    setTimeout("doReconnectNetwork();", 10000);
                }
            });
        }
    }
}
var alertsViewed = false;
var isIE6 = false;
var checkForNewAlertsFailCount = 0;
var alertsSeverityArray = new Array();
var alertIdArray = new Array();
var alertCodeArray = new Array();
var maxAlertInDropDown = 3;
var uiNotificationLevel = 0;
var alertDeleteInitiated = false;
$(document).ready(function() {
    $("#alert_events_form").restForm({
        "useStubs": false,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "processFormErrorCallback": function() {},
        "refreshDataCallback": function(data) {
            for (i = 0; i < data.alert_events.alerts.alert.length; i++) {
                code = data.alert_events.alerts.alert[i].code;
                severity = data.alert_events.alerts.alert[i].severity;
                alertsSeverityArray[code] = severity;
            }
            $("#alerts_form").restForm("refreshForm");
        }
    });
    $("#alerts_dismiss_all_form").restForm({
        "useStubs": false,
        "processFormSuccessCallback": function(data) {
            if (data.alerts.status.toLowerCase() == "success") {
                $("#view_all_alerts_dialog").dialog("close");
            }
            setNoAlertsInfo();
        }
    });
    $("#alerts_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
            $(".notification_list_item:first").siblings().remove();
            $(".view_all_notification_list_item:first").siblings().remove();
            alertIdArray.length = 0;
            alertCodeArray.length = 0;
            if (data.rss.channel.item == undefined) {
                setNoAlertsInfo();
                return;
            } else {
                $("#notification_link_icon").removeClass("noAlerts");
                $("#notification_link_icon").addClass("withAlerts");
                $("#notification_link").removeClass("noAlerts");
                $("#notification_link").addClass("withAlerts");
                $("#no_notifications").css("display", "none");
                $("#notification_display_levels").css("display", "block");
            }
            if (Object.prototype.toString.call(data.rss.channel.item) != "[object Array]") {
                data.rss.channel.item = $.makeArray(data.rss.channel.item);
            }
            for (i = 0; i < data.rss.channel.item.length; i++) {
                link = data.rss.channel.item[i].link;
                alertLinkArray = link.split("?");
                array2 = alertLinkArray[1];
                codeArray = array2.split("&");
                codeTextElement = codeArray[0];
                code = codeTextElement.split("=")[1];
                timeStampArray = codeArray[1];
                timeStamp = timeStampArray.split("=")[1];
                alertId = code + timeStamp;
                if (codeArray.length > 2) {
                    alertIdString = codeArray[2];
                    alertId = alertIdString.split("=")[1];
                }
                alertIdFound = false;
                for (j = 0; j < alertIdArray.length; j++) {
                    if (alertId == alertIdArray[j]) {
                        alertIdFound = true;
                    }
                }
                alertCodeFound = false;
                for (j = 0; j < alertCodeArray.length; j++) {
                    if (code == alertCodeArray[j]) {
                        alertCodeFound = true;
                    }
                }
                if (!alertIdFound) {
                    alertSeverity = "info";
                    if (alertsSeverityArray.length >= code) {
                        if (alertsSeverityArray[code] != undefined) {
                            alertSeverity = alertsSeverityArray[code].toLowerCase();
                        }
                    }
                    index = alertIdArray.length;
                    alertIdArray[index] = alertId;
                    if (alertCodeFound && alertSeverity == "info") {
                        $("#notification_list ul li").each(function(j) {
                            liCode = $(this).find(".notification_code").html();
                            if (j != 0 && code == liCode) {
                                liCount = $(this).find(".notification_count").html();
                                liCount++;
                                alertIDs = $(this).find(".notification_id_list").html();
                                alertIDs += "," + alertId;
                                $(this).find(".notification_id_list").html(alertIDs);
                                $(this).find(".notification_count").html(liCount);
                                liId = $(this).attr("id");
                                $("#alert_view_all_" + liId).find(".notification_count").html(liCount);
                                $("#alert_view_all_" + liId).find(".notification_id_list").html(alertIDs);
                            }
                        });
                    } else {
                        codeIndex = alertCodeArray.length;
                        alertCodeArray[codeIndex] = code;
                        cloneLi = $("#notification_list").find("ul.notification_ul li:first").clone();
                        cloneLiDialog = $("#dialog_notification_list").find("ul.dialog_notification_ul li:first").clone();
                        cloneLi.attr("id", alertId);
                        cloneLiDialog.attr("id", "alert_view_all_" + alertId);
                        cloneLi.find(".notification_title").html(data.rss.channel.item[i].title);
                        cloneLi.find(".notification_id_list").html(alertId);
                        cloneLiDialog.find(".notification_id_list").html(alertId);
                        cloneLi.find(".notification_code").html(code);
                        switch (alertSeverity) {
                        case "info":
                            cloneLi.addClass("notification_sev3");
                            cloneLiDialog.addClass("notification_sev3");
                            cloneLi.find(".notification_title").addClass("notification_info_icon");
                            cloneLiDialog.find(".notification_title").addClass("notification_info_icon");
                            cloneLi.addClass("alert_info");
                            cloneLiDialog.addClass("alert_info");
                            break;
                        case "warning":
                            cloneLi.addClass("notification_sev2");
                            cloneLiDialog.addClass("notification_sev2");
                            cloneLi.find(".notification_title").addClass("notification_warning_icon");
                            cloneLiDialog.find(".notification_title").addClass("notification_warning_icon");
                            cloneLi.addClass("alert_warning");
                            cloneLiDialog.addClass("alert_warning");
                            break;
                        case "critical":
                            cloneLi.addClass("notification_sev1");
                            cloneLiDialog.addClass("notification_sev1");
                            cloneLi.find(".notification_title").addClass("notification_critical_icon");
                            cloneLiDialog.find(".notification_title").addClass("notification_critical_icon");
                            cloneLi.addClass("alert_critical");
                            cloneLiDialog.addClass("alert_critical");
                            break;
                        default:
                            break;
                        }
                        cloneLiDialog.find(".notitication_code").html(code);
                        cloneLiDialog.find(".dialog_notification_description").html(data.rss.channel.item[i].description);
                        cloneLiDialog.find(".notification_title").html(data.rss.channel.item[i].title);
                        cloneLiDialog.find(".notification_more_info").attr("id", "alerts_more_info_" + alertId);
                        cloneLiDialog.find(".notitication_code").attr("id", "alerts_dialog_notification_code_" + alertId);
                        dialogDeleteItem = cloneLiDialog.find(".notification_dialog_ignore_alert");
                        dialogDeleteItem.attr("id", "delete_dialog_" + alertId);
                        if (code == 2001) {
                            cloneLiDialog.find(".all_alert_speciality_link").attr("id", "code_" + code);
                            cloneLiDialog.find(".all_alert_speciality_link").text(dictionaryList["begin_update"]);
                            cloneLiDialog.find(".all_alert_speciality_container").show();
                        } else {
                            if (code == 2002) {
                                cloneLiDialog.find(".all_alert_speciality_link").attr("id", "code_" + code);
                                cloneLiDialog.find(".all_alert_speciality_link").text(dictionaryList["install_update"]);
                                cloneLiDialog.find(".all_alert_speciality_container").show();
                            } else {
                                cloneLiDialog.find(".all_alert_speciality_container").remove();
                            }
                        }
                        alert_time_string = getTimeStamp(timeStamp);
                        cloneLi.find(".notification_time").html(alert_time_string);
                        cloneLi.find(".notification_time").attr("id", "list_notification_time_" + alertId);
                        cloneLiDialog.find(".notification_time").html(alert_time_string);
                        cloneLiDialog.find(".notification_time").attr("id", "dialog_notification_time_" + alertId);
                        deleteItem = cloneLi.find(".notification_ignore");
                        deleteItem.attr("id", "delete_" + alertId);
                        detailsItem = cloneLi.find(".notification_see_details");
                        detailsItem.attr("id", "alert_details_" + alertId);
                        cloneLiDialog.css("display", "block");
                        cloneLi.appendTo($("#notification_list").find("ul.notification_ul"));
                        cloneLiDialog.appendTo($("#dialog_notification_list").find("ul.dialog_notification_ul"));
                        localizeTimeStamp("#list_notification_time_" + alertId);
                        localizeTimeStamp("#dialog_notification_time_" + alertId);
                    }
                }
            }
            $("#view_all_alerts_button").css("display", "none");
            $("#notification_see_all").removeClass("view_all");
            $("#notification_see_all").removeClass("no_alerts");
            $("#notification_see_all").addClass("no_view_all");
            updateNotificationToolbar();
            $("#notification_list ul li").each(function(j) {
                if (j != 0 && j < (maxAlertInDropDown + 1)) {
                    $(this).css("display", "block");
                } else {
                    if (j == (maxAlertInDropDown + 1)) {
                        $("#view_all_alerts_button").css("display", "block");
                        $("#notification_see_all").removeClass("no_view_all");
                        $("#notification_see_all").removeClass("no_alerts");
                        $("#notification_see_all").addClass("view_all");
                    }
                }
            });
        },
        "processFormErrorCallback": function() {}
    });
    $("#view_all_alerts_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_notifications",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#view_all_alerts_dialog").attr("title") + "</div>",
        open: function() {
            $("#alerts_view_all_cancel_button").focus();
        }
    });
    $("#view_single_alert_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 500,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#view_single_alert_dialog").attr("title") + "</div>"
    });
    if (gLanguage == "ru_RU") {
        $(".notification_legend_table").addClass("padding_left_none");
    }
});
function initAlerts(useQueue) {
    if (typeof useQueue == "undefined") {
        useQueue = false;
    }
    $("#alert_events_form").restForm("refreshForm", useQueue);
    $("#alert_level_form").restForm("refreshForm", useQueue);
    if (updateCountHandler != null ) {
        updateCountHandler.subscribe("alert_update_count", function() {
            if (!alertDeleteInitiated) {
                $("#alerts_form").restForm("refreshForm");
            } else {
                alertDeleteInitiated = false;
            }
        });
    }
}
$(function() {
    $("#alert_begin_update_link").live("click", function() {
        $("#view_single_alert_dialog").dialog("close");
        var alertID = $(this).attr("rel");
        if (alertID == 2001) {
            checkForFirmwareAvailable();
        } else {
            if (alertID == 2002) {
                checkForFirmwareInstall();
            }
        }
    });
    $(".all_alert_speciality_link").live("click", function(e) {
        e.preventDefault();
        $("#view_all_alerts_dialog").dialog("close");
        var ID = $(this).attr("id");
        if (ID == "code_2001") {
            checkForFirmwareAvailable();
        } else {
            if (ID == "code_2002") {
                checkForFirmwareInstall();
            }
        }
        return false;
    });
    $("#view_all_alerts_button").live("click", function(event) {
        $("#view_all_alerts_dialog").dialog("open");
        $("#notification_list_container").toggle();
        $("#notification_link").removeClass("selected");
    });
    $(".notification_see_details").live("click", function(event) {
        detailsDivID = $(event.target).attr("id");
        alertId = detailsDivID.split("_")[2];
        alertLi = $("#" + alertId);
        $("#view_single_alert_dialog").parent().removeClass("mochi_dialog_info");
        $("#view_single_alert_dialog").parent().removeClass("mochi_dialog_warning");
        $("#view_single_alert_dialog").parent().removeClass("mochi_dialog_critical");
        if (alertLi.hasClass("alert_info")) {
            $("#view_single_alert_dialog").parent().addClass("mochi_dialog_notifications_info");
        } else {
            if (alertLi.hasClass("alert_warning")) {
                $("#view_single_alert_dialog").parent().addClass("mochi_dialog_warning");
            } else {
                $("#view_single_alert_dialog").parent().addClass("mochi_dialog_critical");
            }
        }
        alertViewAllLi = $("#alert_view_all_" + alertId);
        alertCode = alertViewAllLi.find(".notitication_code").html();
        if (alertCode == 2001) {
            $("#alert_begin_update_link").text(dictionaryList["begin_update"]);
            $("#alert_begin_update_link").attr("rel", alertCode);
            $("#single_alert_begin_update").show();
        } else {
            if (alertCode == 2002) {
                $("#alert_begin_update_link").text(dictionaryList["install_update"]);
                $("#alert_begin_update_link").attr("rel", alertCode);
                $("#single_alert_begin_update").show();
            } else {
                $("#single_alert_begin_update").hide();
            }
        }
        $("#alert_details_title").html(alertViewAllLi.find(".notification_title").html());
        $("#alert_details_description").html(alertViewAllLi.find(".dialog_notification_description").html());
        $("#alert_details_time").html(alertViewAllLi.find(".notification_time").html());
        $("#single_alert_details_code").html(alertCode);
        $("#view_single_alert_dialog").dialog("open");
        $("#notification_list_container").toggle();
        $("#notification_link").removeClass("selected");
    });
    $("#alerts_view_single_alert_cancel_button").live("click", function(event) {
        $("#view_single_alert_dialog").dialog("close");
    });
    $("#alerts_view_all_cancel_button").live("click", function(event) {
        $("#view_all_alerts_dialog").dialog("close");
    });
    $("#alerts_view_dismiss_all_button").live("click", function(event) {
        $("#alerts_dismiss_all_form").submit();
        alertDeleteInitiated = true;
    });
    $(".notification_dialog_ignore_alert").live("click", function(event) {
        deleteDivID = $(event.target).attr("id");
        alertId = deleteDivID.split("_")[2];
        delete_alert(deleteDivID, alertId);
    });
    $(".notification_ignore").live("click", function(event) {
        deleteDivID = $(event.target).attr("id");
        alertId = deleteDivID.split("_")[1];
        delete_alert(deleteDivID, alertId);
    });
    $("#support_register_btn").live("click",function(){
        var org_regist_firstName = $("#support_register_first").attr("orig"),
            org_regist_lastName = $("#support_register_last").attr("orig"),
            org_regist_mail = $("#support_register_email").attr("orig"),
            user_regist_firstName = $("#support_register_first").val(),
            user_regist_lastName = $("#support_register_last").val(),
            user_regist_mail = $("#support_register_email").val();
        var errorText = "";
        var errorTag = false;
           
        if(org_regist_firstName != user_regist_firstName && user_regist_firstName.trim()!="" && org_regist_lastName!=user_regist_lastName && user_regist_lastName.trim()!="" && org_regist_mail!=user_regist_mail && user_regist_mail.trim()!=""){
           $("#support_register_country").val(gLanguage.substr( 3, 5));
           $("#support_register_lang").val(gLanguage3Letter.toUpperCase());
           $("#support_register_form").submit();
        }else{
           if(org_regist_firstName == user_regist_firstName || user_regist_firstName.trim()=="")
               errorText += "<li>"+errorsList["registertion_no_first_name"]+"</li>";
           if(org_regist_lastName == user_regist_lastName || user_regist_lastName.trim() == "")
               errorText += "<li>"+errorsList["registertion_no_last_name"]+"</li>";
           if(org_regist_mail == user_regist_mail || user_regist_mail.trim() == "")
               errorText += "<li>"+errorsList["registertion_no_email"]+"</li>";
           $("#support_register_error_massage").show().addClass("support_warn").html("<ul>"+errorText+"</ul>");   
        }   
    })
});
function delete_alert(deleteDivID, alertId) {
    alertIDs = $("#" + alertId).find(".notification_id_list").html();
    alertIDs_list = alertIDs.split(",");
    for (var idx = 0; idx < alertIDs_list.length; idx++) {
        $("#alerts_form").find("#alerts_acknowledge_alert_id").val(alertIDs_list[idx]);
        $("#alerts_form").submit();
    }
    alertDeleteInitiated = true;
    nextLi = $("#" + alertId).next();
    $("#" + alertId).remove();
    $("#alert_view_all_" + alertId).remove();
    keepGoing = true;
    while (nextLi.length > 0 && keepGoing) {
        if (!nextLi.is(":visible")) {
            nextLi.css("display", "block");
            keepGoing = false;
        } else {
            nextLi = nextLi.next();
        }
    }
    if ($("#notification_list_container ul li").length <= (maxAlertInDropDown + 1)) {
        $("#view_all_alerts_button").css("display", "none");
    } else {
        $("#view_all_alerts_button").css("display", "block");
    }
    if ($("#notification_list_container ul li").length <= 1) {
        setNoAlertsInfo();
    }
    updateNotificationToolbar();
}
function setNoAlertsInfo() {
    $(".notification_list_item:first").siblings().remove();
    $(".view_all_notification_list_item:first").siblings().remove();
    $("#notification_link_icon").removeClass("withAlerts");
    $("#notification_link_icon").addClass("noAlerts");
    $("#notification_link").removeClass("withAlerts");
    $("#notification_link").addClass("noAlerts");
    $("#no_alerts_message").html(dictionaryList["NoAlertsTxt"]);
    $("#notification_see_all").removeClass("no_view_all");
    $("#notification_see_all").addClass("no_alerts");
    $("#notification_see_all").removeClass("view_all");
    $("#notification_display_levels").css("display", "none");
    $("#view_all_alerts_button").css("display", "none");
    updateNotificationToolbar();
}
function toggleNotificationListContainer() {
    if (!$("#notification_list_container").is(":visible")) {
        dropDownCount = 0;
        $("#notification_list_container ul li").each(function(i) {
            $(this).css("display", "none");
            if (i != 0 && dropDownCount < maxAlertInDropDown) {
                $(this).css("display", "block");
                dropDownCount++;
            }
        });
    }
    $("#notification_list_container").toggle();
}
function updateNotificationToolbar() {
    var severity = 0;
    $("#notification_list_container ul li").each(function(i) {
        if (i != 0) {
            if ($(this).hasClass("alert_info")) {
                if (severity < 1) {
                    severity = 1;
                }
            } else {
                if ($(this).hasClass("alert_warning")) {
                    if (severity < 2) {
                        severity = 2;
                    }
                } else {
                    if ($(this).hasClass("alert_critical")) {
                        if (severity < 3) {
                            severity = 3;
                        }
                    }
                }
            }
            var liCount = $(this).find(".notification_count").html();
            if (liCount > 1) {
                $(this).find(".totalcount").remove();
                alertMsg = $(this).find(".notification_title").html() + '<span class="totalcount">&nbsp;(' + liCount + ")</span>";
                $(this).find(".notification_title").html(alertMsg);
            }
        }
    });
    $("#dialog_notification_list ul li").each(function(i) {
        if (i != 0) {
            var liCount = $(this).find(".notification_count").html();
            if (liCount > 1) {
                $(this).find(".totalcount").remove();
                alertMsg = $(this).find(".notification_title").html() + '<span class="totalcount">&nbsp;(' + liCount + ")</span>";
                $(this).find(".notification_title").html(alertMsg);
            }
        }
    });
    $("#notification_list ul li").tsort({
        attr: "id",
        order: "dec"
    }).tsort({
        attr: "class",
        order: "asc"
    });
    $("#dialog_notification_list ul li").tsort({
        attr: "id",
        order: "dec"
    }).tsort({
        attr: "class",
        order: "asc"
    });
    $("#notification_link").removeClass("notification_critical");
    $("#notification_link").removeClass("notification_none");
    $("#notification_link").removeClass("notification_warn");
    $("#notification_link").find(".icon").removeClass("icon_notification_critical");
    $("#notification_link").find(".icon").removeClass("icon_notification_warning");
    if (severity == 0) {
        $("#notification_link").addClass("notification_none");
    } else {
        if (severity == 2) {
            $("#notification_link").addClass("notification_warn");
            $("#notification_link").find(".icon").addClass("icon_notification_warning");
        } else {
            if (severity == 3) {
                $("#notification_link").addClass("notification_critical");
                $("#notification_link").find(".icon").addClass("icon_notification_critical");
            }
        }
    }
}
if (typeof (XML) == "undefined") {
    XML = function() {}
    ;
}
XML.ObjTree = function() {
    return this;
}
;
XML.ObjTree.VERSION = "0.24";
XML.ObjTree.prototype.xmlDecl = '<?xml version="1.0" encoding="UTF-8" ?>\n';
XML.ObjTree.prototype.attr_prefix = "-";
XML.ObjTree.prototype.overrideMimeType = "text/xml";
XML.ObjTree.prototype.parseXML = function(xml) {
    var root;
    if (window.DOMParser) {
        var xmldom = new DOMParser();
        var dom = xmldom.parseFromString(xml, "application/xml");
        if (!dom) {
            return;
        }
        root = dom.documentElement;
    } else {
        if (window.ActiveXObject) {
            xmldom = new ActiveXObject("Microsoft.XMLDOM");
            xmldom.async = false;
            xmldom.loadXML(xml);
            root = xmldom.documentElement;
        }
    }
    if (!root) {
        return;
    }
    return this.parseDOM(root);
}
;
XML.ObjTree.prototype.parseHTTP = function(url, options, callback) {
    var myopt = {};
    for (var key in options) {
        myopt[key] = options[key];
    }
    if (!myopt.method) {
        if (typeof (myopt.postBody) == "undefined" && typeof (myopt.postbody) == "undefined" && typeof (myopt.parameters) == "undefined") {
            myopt.method = "get";
        } else {
            myopt.method = "post";
        }
    }
    if (callback) {
        myopt.asynchronous = true;
        var __this = this;
        var __func = callback;
        var __save = myopt.onComplete;
        myopt.onComplete = function(trans) {
            var tree;
            if (trans && trans.responseXML && trans.responseXML.documentElement) {
                tree = __this.parseDOM(trans.responseXML.documentElement);
            } else {
                if (trans && trans.responseText) {
                    tree = __this.parseXML(trans.responseText);
                }
            }
            __func(tree, trans);
            if (__save) {
                __save(trans);
            }
        }
        ;
    } else {
        myopt.asynchronous = false;
    }
    var trans;
    if (typeof (HTTP) != "undefined" && HTTP.Request) {
        myopt.uri = url;
        var req = new HTTP.Request(myopt);
        if (req) {
            trans = req.transport;
        }
    } else {
        if (typeof (Ajax) != "undefined" && Ajax.Request) {
            var req = new Ajax.Request(url,myopt);
            if (req) {
                trans = req.transport;
            }
        }
    }
    if (callback) {
        return trans;
    }
    if (trans && trans.responseXML && trans.responseXML.documentElement) {
        return this.parseDOM(trans.responseXML.documentElement);
    } else {
        if (trans && trans.responseText) {
            return this.parseXML(trans.responseText);
        }
    }
}
;
XML.ObjTree.prototype.parseDOM = function(root) {
    if (!root) {
        return;
    }
    this.__force_array = {};
    if (this.force_array) {
        for (var i = 0; i < this.force_array.length; i++) {
            this.__force_array[this.force_array[i]] = 1;
        }
    }
    var json = this.parseElement(root);
    if (this.__force_array[root.nodeName]) {
        json = [json];
    }
    if (root.nodeType != 11) {
        var tmp = {};
        tmp[root.nodeName] = json;
        json = tmp;
    }
    return json;
}
;
XML.ObjTree.prototype.parseElement = function(elem) {
    if (elem.nodeType == 7) {
        return;
    }
    if (elem.nodeType == 3 || elem.nodeType == 4) {
        var bool = elem.nodeValue.match(/[^\x00-\x20]/);
        return elem.nodeValue;
    }
    var retval;
    var cnt = {};
    if (elem.attributes && elem.attributes.length) {
        retval = {};
        for (var i = 0; i < elem.attributes.length; i++) {
            var key = elem.attributes[i].nodeName;
            if (typeof (key) != "string") {
                continue;
            }
            var val = elem.attributes[i].nodeValue;
            if (!val) {
                continue;
            }
            key = this.attr_prefix + key;
            if (typeof (cnt[key]) == "undefined") {
                cnt[key] = 0;
            }
            cnt[key]++;
            this.addNode(retval, key, cnt[key], val);
        }
    }
    if (elem.childNodes && elem.childNodes.length) {
        var textonly = true;
        if (retval) {
            textonly = false;
        }
        for (var i = 0; i < elem.childNodes.length && textonly; i++) {
            var ntype = elem.childNodes[i].nodeType;
            if (ntype == 3 || ntype == 4) {
                continue;
            }
            textonly = false;
        }
        if (textonly) {
            if (!retval) {
                retval = "";
            }
            for (var i = 0; i < elem.childNodes.length; i++) {
                retval += elem.childNodes[i].nodeValue;
            }
        } else {
            if (!retval) {
                retval = {};
            }
            for (var i = 0; i < elem.childNodes.length; i++) {
                var key = elem.childNodes[i].nodeName;
                if (typeof (key) != "string") {
                    continue;
                }
                var val = this.parseElement(elem.childNodes[i]);
                if (!val && val != "") {
                    continue;
                }
                if (typeof (cnt[key]) == "undefined") {
                    cnt[key] = 0;
                }
                cnt[key]++;
                this.addNode(retval, key, cnt[key], val);
            }
        }
    } else {
        if (typeof (retval) == "undefined") {
            retval = "";
        }
    }
    return retval;
}
;
XML.ObjTree.prototype.addNode = function(hash, key, cnts, val) {
    if (this.__force_array[key]) {
        if (cnts == 1) {
            hash[key] = [];
        }
        hash[key][hash[key].length] = val;
    } else {
        if (cnts == 1) {
            hash[key] = val;
        } else {
            if (cnts == 2) {
                hash[key] = [hash[key], val];
            } else {
                hash[key][hash[key].length] = val;
            }
        }
    }
}
;
XML.ObjTree.prototype.writeXML = function(tree) {
    var xml = this.hash_to_xml(null , tree);
    return this.xmlDecl + xml;
}
;
XML.ObjTree.prototype.hash_to_xml = function(name, tree) {
    var elem = [];
    var attr = [];
    for (var key in tree) {
        if (!tree.hasOwnProperty(key)) {
            continue;
        }
        var val = tree[key];
        if (key.charAt(0) != this.attr_prefix) {
            if (typeof (val) == "undefined" || val == null ) {
                elem[elem.length] = "<" + key + " />";
            } else {
                if (typeof (val) == "object" && val.constructor == Array) {
                    elem[elem.length] = this.array_to_xml(key, val);
                } else {
                    if (typeof (val) == "object") {
                        elem[elem.length] = this.hash_to_xml(key, val);
                    } else {
                        elem[elem.length] = this.scalar_to_xml(key, val);
                    }
                }
            }
        } else {
            attr[attr.length] = " " + (key.substring(1)) + '="' + (this.xml_escape(val)) + '"';
        }
    }
    var jattr = attr.join("");
    var jelem = elem.join("");
    if (typeof (name) == "undefined" || name == null ) {} else {
        if (elem.length > 0) {
            if (jelem.match(/\n/)) {
                jelem = "<" + name + jattr + ">\n" + jelem + "</" + name + ">\n";
            } else {
                jelem = "<" + name + jattr + ">" + jelem + "</" + name + ">\n";
            }
        } else {
            jelem = "<" + name + jattr + " />\n";
        }
    }
    return jelem;
}
;
XML.ObjTree.prototype.array_to_xml = function(name, array) {
    var out = [];
    for (var i = 0; i < array.length; i++) {
        var val = array[i];
        if (typeof (val) == "undefined" || val == null ) {
            out[out.length] = "<" + name + " />";
        } else {
            if (typeof (val) == "object" && val.constructor == Array) {
                out[out.length] = this.array_to_xml(name, val);
            } else {
                if (typeof (val) == "object") {
                    out[out.length] = this.hash_to_xml(name, val);
                } else {
                    out[out.length] = this.scalar_to_xml(name, val);
                }
            }
        }
    }
    return out.join("");
}
;
XML.ObjTree.prototype.scalar_to_xml = function(name, text) {
    if (name == "#text") {
        return this.xml_escape(text);
    } else {
        return "<" + name + ">" + this.xml_escape(text) + "</" + name + ">\n";
    }
}
;
XML.ObjTree.prototype.xml_escape = function(text) {
    return String(text).replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;");
}
;
var dashboardHandler = null ;
var deviceTemperature = dictionaryList["_unknown"];
var deviceSmartStatus = dictionaryList["_unknown"];
var deviceVolumeStatus = dictionaryList["_unknown"];
var deviceFreeSpace = dictionaryList["_unknown"];
var gFreeSpaceBad = false;
var gCapacity = 0;
var gUsage = 0;
var gDLNAScanningState = "idle";
var gMediaCrawlerScanningState = "idle";
var gMediaCrawlerScanningStateMsg = dictionaryList["idle"];
$(document).ready(function() {
    dashboardHandler = $.updateDashboardHandler({
        updateFinishCallback: function() {
            hideLoading();
        }
    });
    subscribeDashboardPolls();
    $("#footer_device_version").text("v" + VERSION);
    $("#dashboard_battery").click(function() {
        $("#head_settings_nav_hardware_link").click();
    });
    $("#dashboard_wifi_box").click(function() {
        $("#head_settings_nav_network_link").click();
    });
    $("#footer_device_timestamp_form").restForm({
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "refreshDataCallback": function(data) {
            $("#footer_device_timestamp_form").restForm("_refreshData", data);
            if (data != null  && data.date_time_configuration != null  && data.date_time_configuration.datetime != null ) {
                var dateStamp = new Date();
                var seconds = Math.round(dateStamp.getTime() / 1000);
                gDateTime = seconds;
                if (Math.abs(seconds - data.date_time_configuration.datetime) > 120) {
                    $("#footer_device_timestamp_datetime").val(seconds);
                }
                else {
                	$("#footer_device_timestamp_datetime").val("none");
                }
                $("#footer_device_timestamp_ntpservice").val("false");
                $("#time_zone_offset").val(-(new Date().getTimezoneOffset() / 60));
                $("#footer_device_timestamp_form").submit();
            }
        }
    });
    $(".internet_required").live("click", function(e) {
        e.preventDefault();
        var external_link = $(this).attr("href");
        var target_window = $(this).attr("id");
        if (target_window == "") {
            target_window = $(this).attr("target");
        }
        $.ajaxAPI({
            "url": "internet_access",
            "type": "GET",
            "success": function(data) {
                if (data != null  && data.internet_access != null  && data.internet_access.connectivity != null ) {
                    if (data.internet_access.connectivity == "true") {
                        if (gPopupBlocker) {
                            if (isPopupBlockerEnabled()) {
                                gPopupBlocker = true;
                                $("#popup_blocked_dialog").dialog("open");
                            } else {
                                gPopupBlocker = false;
                            }
                        }
                        window.open(external_link, target_window);
                        $("#no_internet_access").hide();
                    } else {
                        $("#no_internet_access_dialog").dialog("open");
                        if (gConnectedNetwork) {
                            $("#no_internet_access").show();
                        }
                    }
                }
            }
        });
    });
    $("#shortcut_link").live("click", function(e) {
        e.preventDefault();
        $("#create_shortcut_dialog").dialog("open");
    });
    $("#create_shortcut_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 530,
        minHeight: 240,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#create_shortcut_dialog").attr("title") + "</div>",
        open: function() {
            $("#create_shortcut_dialog_ok_button").focus();
        }
    });
    $("#create_shortcut_dialog_cancel_button").click(function() {
        $("#create_shortcut_dialog").dialog("close");
    });
    $("#create_shortcut_dialog_ok_button").click(function() {
        $("#create_shortcut_dialog").dialog("close");
        window.location = "/UI/shortcut";
    });
});
function initDashboard() {
    $("#footer_device_timestamp_form").restForm("refreshForm");
    updateTimeTick(0);
    if (gIsMobile) {
        $("#shortcut_toolbar").hide();
    }
}
function updateTimeTick(incrementTime) {
    if (incrementTime) {
        gDateTime = gDateTime + 60;
    }
    var timestamp = getTimeStamp(gDateTime);
    $("#footer_device_date_value").html(timestamp);
    $("#footer_device_time_value").html(timestamp);
    localizeTimeStamp("#footer_device_date_value", "d");
    localizeTimeStamp("#footer_device_time_value", "t");
    setTimeout("updateTimeTick(1);", 60000);
}
function subscribeDashboardPolls() {
    if (updateCountHandler != null ) {
        updateCountHandler.subscribe("data_volume_write_update_count", function() {
            dashboardHandler.callHandler("updateStorage");
        }, "dashboard_container");
        updateCountHandler.subscribe("battery_update_count", function() {
            $("#battery_status_form").restForm("refreshForm");
        }, "dashboard_container");
        updateCountHandler.subscribe("battery_update_count", function() {
            $("#battery_status_form").restForm("refreshForm");
        }, "hardware_container");
    }
}
(function($) {
    $.extend({
        updateDashboardHandler: function(options) {
            var $this = this;
            var settings = {
                updateFinishedList: {},
                updateHandles: {},
                updateFinishCallback: null ,
                byteDivisor: 1000
            };
            var handler = {
                init: function(options) {
                    $.extend(settings, options);
                    return this;
                },
                addUpdateHandle: function(handle, id) {
                    settings.updateFinishedList[id] = false;
                    handle.updateCompleteHandler = function() {
                        settings.updateFinishedList[id] = true;
                        handler.updateFinished();
                    }
                    ;
                    settings.updateHandles[id] = handle;
                },
                updateAll: function() {
                    for (var i in settings.updateHandles) {
                        settings.updateHandles[i].update();
                    }
                },
                callHandler: function(handleId, parameters) {
                    if (settings.updateHandles[handleId] != null ) {
                        settings.updateHandles[handleId].update.apply(settings.updateHandles[handleId], parameters);
                    }
                },
                updateFinished: function() {
                    var isFinished = true;
                    for (var i in settings.updateFinishedList) {
                        if (settings.updateFinishedList[i] == false) {
                            isFinished = false;
                            break;
                        }
                    }
                    if (isFinished) {
                        settings.updateFinishCallback();
                    }
                }
            };
            return handler.init(options);
        }
    });
})(jQuery);
var currentIndex = 0;
var mainNavRightInterval;
var mainNavLeftInterval;
var settingsNavRightInterval;
var settingsNavLeftInterval;
$(document).ready(function() {
    $("#nav_dashboard_link").navItem({
        "contentId": "dashboard_container",
        "refreshDataCall": function() {
            pollingHandler.poll();
            dashboardHandler.updateAll();
        }
    });
    $("#nav_users_link").navItemListNavigationContent({
        "contentId": "users_container",
        "listId": "users_list",
        "listDataKey": "users",
        "listDataId": "user",
        "itemIdentifier": "username",
        "navigationListId": "users_list_navigation",
        "refreshDataSuccess": function(data) {
            var data2 = jQuery.extend(true, {}, data);
            $("#nav_users_link").navItemListNavigationContent("_refreshDataSuccess", data2, true);
            $("#users_list").ferrisWheelNav({
                "nav_container_cls": "listNavigation",
                "nav_cls": "leftmenu",
                "nav_ul_cls": "listNavigation"
            });
        }
    });
    $("#nav_shares_link").navItemListNavigationContent({
        "contentId": "shares_container",
        "listId": "shares_list",
        "listDataKey": "shares",
        "listDataId": "share",
        "itemIdentifier": "share_name",
        "navigationListId": "shares_list_navigation",
        "refreshDataSuccess": function(data) {
            $("#nav_shares_link").navItemListNavigationContent("_refreshDataSuccess", data, true);
            $("#shares_list").ferrisWheelNav({
                "nav_container_cls": "listNavigation",
                "nav_cls": "leftmenu",
                "nav_ul_cls": "listNavigation"
            });
        }
    });
    $("#nav_safepoints_link").navItemListNavigationContent({
        "useStubs": false,
        "contentId": "safepoints_container",
        "listId": "safepoints_list",
        "listDataKey": "safepoints",
        "listDataId": "safepoint",
        "itemIdentifier": "handle",
        "navigationListId": "safepoints_list_navigation",
        "displayLoadingCallback": function() {
            displayWaitingForSafepointData();
        },
        "refreshDataSuccess": function(data) {
            noSafepoints = false;
            if ("safepoints" in data.safepoint_getlist) {
                if (data.safepoint_getlist.safepoints.safepoint == undefined) {
                    noSafepoints = true;
                } else {
                    if (data.safepoint_getlist.safepoints.length == 1 && data.safepoint_getlist.safepoints.safepoint.name == undefined) {
                        noSafepoints = true;
                    }
                }
            } else {
                if ("status_code" in data.safepoint_getlist) {
                    noSafepoints = true;
                }
            }
            displaySafepointListDataLoaded();
            $("#nav_safepoints_link").navItemListNavigationContent("_refreshDataSuccess", data.safepoint_getlist, false);
        },
        "addToListCall": function(item) {
            $("#safepoints_list_navigation").listNavigation("addToList", item["handle"], false, item["name"]);
            updateSafepointListElementForm(item);
        }
    });
    $("#settings_nav_utilities_link").navItem({
        "contentId": "utilities_container"
    });
    $("#settings_nav_web_access_link").navItem({
        "contentId": "web_access_container"
    });
    $("#nav_remoteaccess_link").navItemListNavigationContent({
        "contentId": "remoteaccess_container",
        "listId": "remoteaccess_list",
        "listDataKey": "users",
        "listDataId": "user",
        "itemIdentifier": "username",
        "navigationListId": "remoteaccess_list_navigation",
        "refreshDataSuccess": function(data) {
            var data2 = jQuery.extend(true, {}, data);
            $("#nav_remoteaccess_link").navItemListNavigationContent("_refreshDataSuccess", data2, false);
            $("#remoteaccess_list").ferrisWheelNav({
                "nav_container_cls": "listNavigation",
                "nav_cls": "leftmenu",
                "nav_ul_cls": "listNavigation"
            });
            var i;
            if ($("#remoteaccess_list_navigation .listNavigation .selected").length > 0) {
                var dataKey = $("#remoteaccess_list_navigation .listNavigation .selected span.listnavigation_item_name").text();
                var item = null ;
                for (i in data2["users"]["user"]) {
                    if (data2["users"]["user"][i]["username"] == dataKey) {
                        item = data2["users"]["user"][i];
                        break;
                    }
                }
                if (item != null ) {
                    $("#remoteaccess_list_navigation").listNavigation("showItem", item);
                }
            } else {
                var first = null ;
                var listData = $("#remoteaccess_list").data("users");
                for (i in listData["user"]) {
                    if (listData["user"].hasOwnProperty(i) && typeof (i) !== "function") {
                        first = listData["user"][i];
                        break;
                    }
                }
            }
            $("#remote_access_status_form").restForm("refreshForm");
        }
    });
    $("#settings_nav_storage_link").navItem({
        "contentId": "storage_container"
    });
});
var ajaxTimeoutLong = 600000;
var ajaxTimeout = 300000;
var ajaxTimeoutFast = 15000;
var ajaxTimeoutNetwork = 30000;
var ajaxTimeoutPolling = 30000;
var loaderTimer = 0;
var gCapacity_GB = 0;
var gCapacity_GB_Internal = 0;
var gUsage_GB = 0;
var gIsMobile = false;
var gInternetAccess = false;
var gDeviceName = "MyPassport";
var gSSIDName = "";
var gSSIDNameHighBand = "";
var gSSIDName_suffix = "";
var gSSIDNameHighBand_suffix = "";
var gSSIDSecured = false;
var gSSIDSecured_5g = false;
var gSSIDNotBroadcasting = false;
var gSSIDNotBroadcasting_5g = false;
var gWANSSIDName = "";
var gAvatarApIpAddress = "";
var gSerialNumber = "";
var gModelNumber = "";
var gModelName = "";
var gMacAddress = "";
var gTimezoneName = "";
var BYTE_DIVISOR = 1024;
var deviceName = "";
var redirectURL = "/" + SITE_BASE_URL;
var systemStatepoll = 5000;
var apiUrlPrefix = "/api/2.6/rest/";
var stubApiUrlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
var gTrustedNetwork = false;
var gConnectedNetwork = false;
var gConnectedDevices = false;
var gFoundMe = false;
var gWiFiEnabled = false;
var gRestoreReconnectFlag = false;
var pollingFrequency = 60000;
var pollingMedFrequency = 30000;
var pollingFastFrequency = 10000;
var toolbarItems = {};
var loadingTop;
var $window;
var $stickyEl;
var gRedirect = false;
var gPopupBlocker = true;
var dialogWidth = 600
  , dialogMinHeight = 203;
$(document).ready(function() {
    initGlobalVariables();
    $("#overall_help_link").click(function(e) {
        e.preventDefault();
        $("#overall_help").dialog("open");
    });
    $("#help_link").click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        checkOtherToolbarItems("help_link");
        $("#help_list_container").toggle();
        if ($("#help_link").hasClass("selected")) {
            $("#help_link").removeClass("selected");
        } else {
            $("#help_link").addClass("selected");
        }
    });
    toolbarItems.help_link = function() {
        $("#help_list_container").toggle();
        $("#help_link").removeClass("selected");
    }
    ;
    $(document).click(function(event) {
        if ($(event.target).parents().index($("#help_list_container")) == -1 && $("#help_link").hasClass("selected")) {
            $("#help_list_container").toggle();
            $("#help_link").removeClass("selected");
        }
    });
    $("#notification_link").click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        if (!$("#notification_link").hasClass("noAlerts")) {
            checkOtherToolbarItems("notification_link");
            toggleNotificationListContainer();
            if ($("#notification_link").hasClass("selected")) {
                $("#notification_link").removeClass("selected");
            } else {
                $("#notification_link").addClass("selected");
            }
        }
    });
    toolbarItems.notification_link = function() {
        toggleNotificationListContainer();
        $("#notification_link").removeClass("selected");
    }
    ;
    $(document).click(function(event) {
        if ($(event.target).parents().index($("#notification_list_container")) == -1 && $("#notification_link").hasClass("selected")) {
            toggleNotificationListContainer();
            $("#notification_link").removeClass("selected");
        }
    });
    $(".tooltip_icon").live("mouseover touchstart click", function() {
        var tooltip = $(this).siblings(".tooltip_inner_container").find(".tooltip").first();
        if (!$('#wifi_container').is(":visible")) {
        	tooltip.css({
                bottom: 9 + "px"
            });
        }
        else {
        	var position_li = $(this).parents("li");
        	var device_list = $("#connected_devices_list_content");
        	if(position_li.length){
	    		if((position_li.offset().top) > (device_list.offset().top + 3 * position_li.height())) {
	    			var adjust_bottom = position_li.height() + device_list.scrollTop();
	    			tooltip.css({
	    				top: "",
	                	bottom: adjust_bottom + "px"
	            	});
	    		}
	    		else {
	    			tooltip.css({
		                top: -1 * device_list.scrollTop() + "px",
		                bottom: ""
		            });
	    		}
	    	}
        }
        if (!tooltip.is(":visible")) {
            var timeToShow = 3000 + tooltip.html().length * 70;
            tooltip.show().oneTime(timeToShow, function() {
                $(this).fadeOut(200);
            });
            var position = tooltip.offset().left - $(window).scrollLeft();
            var tooltipRightPosition = position + tooltip.width();
            if (tooltipRightPosition > $(window).width()) {
                tooltip.css("left", -1 * tooltip.width());
            }
        }
    });
    $(".tooltip_icon").live("mouseleave", function() {
        var tooltip = $(this).siblings(".tooltip_inner_container").find(".tooltip").first();
        tooltip.hide();
    });
    $("#device_initializing").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 300,
        minHeight: 140,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#device_initializing").attr("title") + "</div>"
    });
    $window = $(window);
    $stickyEl = $("#loading");
    loadingTop = $stickyEl.offset().top;
    $window.scroll(function() {
        $stickyEl.toggleClass("sticky", $window.scrollTop() > loadingTop);
        if ($window.scrollTop() > loadingTop) {
            $stickyEl.css({
                top: "0"
            });
        } else {
            $stickyEl.css({
                top: loadingTop + "px"
            });
        }
    });
    $("#acknowledgement_down_controls_ok").click(function(e) {
        e.preventDefault();
        $("#loading_back").hide();
        $("#acknowledgement_down").hide();
    });
});
function displayLoading(loadingText) {
    if (typeof (loadingText) != "undefined") {
        $("#loading").html(loadingText);
    } else {
        $("#loading").html(dictionaryList["loadingtxt"]);
    }
    $("#loading_back").show();
    var visibleDialogContent = $(".mochi_dialog_content_container:visible");
    if (visibleDialogContent.length > 0) {
        loadingTop = visibleDialogContent.offset().top;
        $("#loading").css("top", loadingTop + "px");
        var newLeft = visibleDialogContent.offset().left + visibleDialogContent.outerWidth() / 2 - $("#loading").outerWidth() / 2;
        $("#loading").css("left", newLeft + "px");
        $("#loading").css("margin-left", 0);
    } else {
        if ($("#content:visible").length > 0) {
            $("#loading").css({
                top: "0"
            });
            $("#loading").css({
                left: "50%"
            });
            $("#loading").css("margin-left", "-144px");
            loadingTop = 172;
        } else {
            $("#loading").css({
                top: "0"
            });
            $("#loading").css({
                left: "50%"
            });
            $("#loading").css("margin-left", "-144px");
            loadingTop = 61;
        }
    }
    if ($window.scrollTop() > loadingTop) {
        $("#loading").css({
            top: "0"
        });
    }
    $("#loading").slideDown("slow");
}
function displayLoadingWithText(loadingText) {
    $("#loading").html(loadingText);
    displayLoading();
}
function openLoaderWithTimeout() {
    displayLoadingWithTimeout();
}
function displayLoadingWithTimeout() {
    clearTimeout(loaderTimer);
    displayLoading();
    loaderTimer = setTimeout(function() {
        hideLoading();
    }, ajaxTimeoutLong);
}
function hideLoading() {
    $("#loading").slideUp("slow");
    $("#loading_back").hide();
}
function get_storage_capacity() {
    $.ajaxAPI({
        "url": "storage_usage",
        "success": function(data) {
            return parseInt(data.storage_usage.size);
        }
    });
}
function initGlobalVariables() {
    var ua = navigator.userAgent.toLowerCase();
    var platform = navigator.platform.toLowerCase();
    var isAndroid = ua.indexOf("android") > -1;
    var isMobile = ua.indexOf("mobile") > -1;
    gIsMobile = isAndroid || isMobile || (platform == "ipad") || (platform == "iphone");
    if ((platform == "ipad") || (platform == "iphone")) {
        $("#eulaText").addClass("iOSTextOverflow");
        $("#privacyPolicyText").addClass("iOSTextOverflow");
    }
}
function resetGlobalVariables() {
    gDeviceName = "MyPassport";
    gSSIDName = "My Passport (2.4 GHz) - " + gSSIDName_suffix;
    gSSIDNameHighBand = "My Passport (5 GHz) - " + gSSIDNameHighBand_suffix;
    gSSIDSecured = false;
    gSSIDSecured_5g = false;
    gSSIDNotBroadcasting = false;
    gSSIDNotBroadcasting_5g = false;
}
function initDeviceTitle() {
    $.ajaxAPI({
        "url": "system_information",
        "success": function(data) {
            if (data != null  && data.system_information != null ) {
                gModelName = trimString(data.system_information.model_name);
                gModelNumber = trimString(data.system_information.model_number);
                gSerialNumber = data.system_information.serial_number;
                gMacAddress = data.system_information.mac_address;
                gDeviceName = trimString(data.system_information.host_name);
                gCapacity_GB_Internal = data.system_information.capacity;
                gSSIDName_suffix = gMacAddress.substr(9, 8).replace(/\:/g, '');
                gSSIDNameHighBand_suffix = data.system_information.uuid.substr(30, 6);
            }
        },
        "complete": function(jqXHR, textStatus) {
            updateDeviceTitle();
        }
    });
}
function getDeviceDescription(updateTitle) {
    if (typeof updateTitle == "undefined") {
        updateTitle = false;
    }
    $.ajaxAPI({
        "url": "device_description",
        "success": function(data) {
            if (data != null  && data.device_description != null ) {
                gDeviceName = trimString(data.device_description.machine_name);
                gDeviceDescription = trimString(data.device_description.machine_desc);
            }
            if (updateTitle) {
                updateDeviceTitle();
            }
        }
    });
}
function updateDeviceTitle() {
    var deviceName = dictionaryList["model_number_" + gModelNumber];
    if (deviceName == undefined) {
        deviceName = gModelName;
    }
    if (gDeviceName == gModelName || gDeviceName == "MyPassport") {
        document.title = deviceName;
    } else {
        document.title = gDeviceName + " [" + deviceName + "]";
    }
    
	$("#footer_device_capacity").text(gCapacity_GB_Internal + " " + dictionaryList["capacity_txt"]);
}
function checkForDeviceReady(useQueue) {
    var ajaxAPIOptions = {
        "url": "system_state",
        "success": function(data) {
            if (data != null  && data.system_state != null ) {
                if (data.system_state.status == "ready") {
                    $("#device_initializing").dialog("close");
                } else {
                    $("#device_initializing").dialog("open");
                    setTimeout("checkForDeviceReady();", systemStatepoll);
                }
            }
        }
    };
    if (typeof useQueue != "undefined" && useQueue == true) {
        ajaxQueue.add(ajaxAPIOptions);
    } else {
        $.ajaxAPI(ajaxAPIOptions);
    }
}
function displaySplash() {
    $("#splash_back").show();
    $("#splash").show();
}
function hideSplash() {
    $("#splash").fadeOut(100);
    $("#splash_back").hide();
}
function checkOtherToolbarItems(currentId) {
    for (var i in toolbarItems) {
        if (i != currentId && $("#" + i).hasClass("selected")) {
            toolbarItems[i]();
        }
    }
}
function disableIdTag(id) {
    $(id).addClass("ui-state-disabled");
    $(id).attr("disabled", true);
}
function enableIdTag(id) {
    $(id).removeClass("ui-state-disabled");
    $(id).attr("disabled", false);
}
function displayElapsedTime(id, startTime) {
    var currentTime = new Date().getTime();
    var elapsedTime = ms2Time(currentTime - startTime);
    $(id).html(elapsedTime);
}
function tickElapsedTime(id, startTime) {
    displayElapsedTime(id, startTime);
    setTimeout("tickElapsedTime('" + id + "', " + startTime + ");", 5000);
}
function getPollingErrorMessage(request) {
    var xotree = new XML.ObjTree();
    var data = xotree.parseXML(request.responseText);
    var errorKey = "";
    var errorMsg = dictionaryList["unknown"];
    var error_id = parseDataForErrors(data);
    if (error_id) {
        errorKey = "error_id_" + error_id;
        if (errorsList[errorKey] != undefined) {
            errorMsg = errorsList[errorKey];
        }
    } else {
        var error_code = parseDataForErrors(data, "error_code");
        if (error_code) {
            errorKey = "http_" + error_code;
            if (errorsList[errorKey] != undefined) {
                errorMsg = errorsList[errorKey];
            }
        }
    }
    return errorMsg;
}
function initDatetime() {
    $.ajaxAPI({
        "url": "date_time_configuration",
        "success": function(data) {
            if (data != null  && data.date_time_configuration != null ) {
                gDateTime = parseInt(data.date_time_configuration.datetime);
                gTimezoneName = trimString(data.date_time_configuration.time_zone_name);
            }
        }
    });
}
var capacity_jqplot;
var jqplotData = [];
var gMediaCountTotal = [];
$(document).ready(function() {
    var storageUpdateHandler = {
        updateInProgress: false,
        update: function(useQueue) {
            var $this = this;
            if ($this.updateInProgress) {
                return;
            }
            $this.updateInProgress = true;
            var ajaxAPIOptions = {
                "url": "storage_usage",
                "timeout": ajaxTimeout,
                "success": function(data, textStatus, jqXHR) {
                    var totalFree = 0;
                    var size = 0;
                    var usage = 0;
                    var photos = 0;
                    var music = 0;
                    var video = 0;
                    var other = 0;
                    
                    if (data != null  && data.storage_usage != null ) {
                        if (data.storage_usage.size != "") {
                            size = data.storage_usage.size;
                            gCapacity = size;
                            //console.log("storage_usage gCapacity:"+gCapacity);
                        }
                        if (data.storage_usage.usage != "") {
                            usage = data.storage_usage.usage;
                            gUsage = usage;
                        }
                        if (data.storage_usage.photos != "") {
                            photos = data.storage_usage.photos;
                        }
                        if (data.storage_usage.music != "") {
                            music = data.storage_usage.music;
                        }
                        if (data.storage_usage.video != "") {
                            video = data.storage_usage.video;
                        }
                        if (data.storage_usage.other != "") {
                            other = data.storage_usage.other;
                        }
                    }
                    var totalFreeTxt;
                    if (size - usage > 0) {
                        totalFreeTxt = ByteSize(size - usage);
                    } else {
                        totalFreeTxt = ByteSize(0);
                    }
                    totalFree_parts = totalFreeTxt.split(" ");
                    totalFree = totalFree_parts[0];
                    totalFreeByteType = totalFree_parts[1];
                    $("#dashboard_storage_information_space_available_total_text").text(totalFree);
                    $("#dashboard_storage_information_space_type").text(totalFreeByteType);
                    $("#dashboard_storage_information_space_type").show();
                    $("#dashboard_storage_information_text_free").show();
                    adjustStorageInformationStorageGraph({
                        photos: photos,
                        music: music,
                        videos: video,
                        other: other,
                        capacity: size,
                        usage: usage
                    });
                    if (size > 0) {
                        gCapacity_GB = parseInt(size / BYTE_DIVISOR / BYTE_DIVISOR / BYTE_DIVISOR);
                        percentFree = Math.round((size - usage) / gCapacity * 1000) / 10;
                        deviceFreeSpace = percentFree + "% ";
                        if (gFreeSpaceBad == true) {
                            deviceFreeSpace += "(" + dictionaryList["lowFreeSpace"] + ")";
                            $("#dashboard_diagnostics_free_space").addClass("warning");
                        }
                        $("#dashboard_diagnostics_free_space").html(deviceFreeSpace);
                    }
                    if (usage > 0) {
                        gUsage_GB = parseInt(usage / BYTE_DIVISOR / BYTE_DIVISOR / BYTE_DIVISOR);
                    }
                },
                "error": function(request, status, error) {
                    $("#dashboard_storage_information_space_available_total_text").text(dictionaryList["_unknown"]);
                    $("#dashboard_storage_information_space_type").hide();
                    $("#dashboard_storage_information_text_free").hide();
                },
                "complete": function() {
                    $this.updateInProgress = false;
                    if ($this.updateCompleteHandler != null ) {
                        $this.updateCompleteHandler();
                    }
                }
            };
            if (typeof useQueue != "undefined" && useQueue == true) {
                ajaxQueue.add(ajaxAPIOptions);
            } else {
                $.ajaxAPI(ajaxAPIOptions);
            }
        }
    };
    dashboardHandler.addUpdateHandle(storageUpdateHandler, "updateStorage");
    $("#dashboard_usage_chart").live("click", function(e) {
        e.preventDefault();
        if ($(".dashboard_capacity_size").is(":visible")) {
            $(".dashboard_capacity_size").hide();
            $(".dashboard_capacity_count").show();
        } else {
            $(".dashboard_capacity_size").show();
            $(".dashboard_capacity_count").hide();
        }
    });
});
function adjustStorageInformationStorageGraph(sizes) {
    gMediaCountTotal["videos"] = dictionaryList["_unknown"];
    gMediaCountTotal["music"] = dictionaryList["_unknown"];
    gMediaCountTotal["photos"] = dictionaryList["_unknown"];
    gMediaCountTotal["other"] = dictionaryList["_unknown"];
    $.ajaxAPI({
        "url": "mediacrawler_status",
        "type": "GET",
        "success": function(data) {
            if (data != null  && data.mediacrawler_status != null  && data.mediacrawler_status.volumes != null ) {
                getMediaCrawlerStatus(data);
            }
        },
        "complete": function(jqXHR, textStatus) {
            adjustCapacityStorageGraph(sizes);
        }
    });
}
function adjustCapacityStorageGraph(sizes) {
    $("#dashboard_usage_chart").fadeIn();
    jqplotData["free"] = 0;
    jqplotData["videos"] = 0;
    jqplotData["music"] = 0;
    jqplotData["photos"] = 0;
    jqplotData["other"] = 0;
    jqplotData["free_bytes"] = "";
    jqplotData["videos_bytes"] = "";
    jqplotData["music_bytes"] = "";
    jqplotData["photos_bytes"] = "";
    jqplotData["other_bytes"] = "";
    var totalSize = 0;
    var firstSizeKey, lastSizeKey;
    var key;
    for (key in sizes) {
        if (sizes.hasOwnProperty(key)) {
            totalSize += parseInt(sizes[key]);
            if (firstSizeKey == null ) {
                firstSizeKey = key;
            }
            lastSizeKey = key;
        }
    }
    var capacity = parseInt(sizes["capacity"]);
    var usage = parseInt(sizes["usage"]);
    if (capacity > 0) {
        jqplotData["free"] = Math.round((capacity - usage) / capacity * 10000) / 100;
        jqplotData["free_bytes"] = ByteSize(capacity - usage);
        for (key in sizes) {
            if (sizes.hasOwnProperty(key)) {
                if (key == "capacity" || key == "usage") {
                    continue;
                }
                var size = parseInt(sizes[key]);
                var percent = Math.round(size / capacity * 10000) / 100;
                var sizeBytes = ByteSize(size);
                if (size > 0 && percent <= 0.1) {
                    jqplotData[key] = 0.1;
                } else {
                    jqplotData[key] = percent;
                }
                jqplotData[key + "_bytes"] = sizeBytes;
            }
        }
        var Data = [['<span class="dashboard_capacity_icon dashboard_capacity_icon_videos"/>' + dictionaryList["VideosTxt"] + '</span>&nbsp;&nbsp;&nbsp;<span class="dashboard_capacity_size capacity_light_txt">' + jqplotData["videos_bytes"] + '</span><span class="dashboard_capacity_count capacity_light_txt">' + gMediaCountTotal["videos"] + " " + dictionaryList["totalTxt"] + "</span>", jqplotData["videos"]], ['<span class="dashboard_capacity_icon dashboard_capacity_icon_music"/>' + dictionaryList["MusicTxt"] + '</span>&nbsp;&nbsp;&nbsp;<span class="dashboard_capacity_size capacity_light_txt">' + jqplotData["music_bytes"] + '</span><span class="dashboard_capacity_count capacity_light_txt">' + gMediaCountTotal["music"] + " " + dictionaryList["totalTxt"] + "</span>", jqplotData["music"]], ['<span class="dashboard_capacity_icon dashboard_capacity_icon_photos"/>' + dictionaryList["PhotosTxt"] + '</span>&nbsp;&nbsp;&nbsp;<span class="dashboard_capacity_size capacity_light_txt">' + jqplotData["photos_bytes"] + '</span><span class="dashboard_capacity_count capacity_light_txt">' + gMediaCountTotal["photos"] + " " + dictionaryList["totalTxt"] + "</span>", jqplotData["photos"]], ['<span class="dashboard_capacity_icon dashboard_capacity_icon_other"/>' + dictionaryList["OtherTxt"] + '</span>&nbsp;&nbsp;&nbsp;<span class="dashboard_capacity_size capacity_light_txt">' + jqplotData["other_bytes"] + '</span><span class="dashboard_capacity_count capacity_light_txt">' + gMediaCountTotal["other"] + " " + dictionaryList["totalTxt"] + "</span>", jqplotData["other"]], ['<span class="dashboard_capacity_icon dashboard_capacity_icon_free_space"/>' + dictionaryList["FreeSpaceTxt"] + '&nbsp;&nbsp;&nbsp;<span class="capacity_light_txt">' + jqplotData["free_bytes"] + "</span>", jqplotData["free"]], ];
        capacity_jqplot = $.jqplot("dashboard_usage_chart", [Data], {
            seriesDefaults: {
                shadow: false,
                renderer: $.jqplot.DonutRenderer,
                rendererOptions: {
                    sliceMargin: 0,
                    showDataLabels: false,
                    highlightMouseOver: false,
                    startAngle: -90
                }
            },
            seriesColors: ["#CC505F", "#3CA570", "#EDD058", "#599DC6", "#A7AFAE"],
            legend: {
                show: true,
                fontFamily: "Arial, Verdana, Helvetica",
                fontSize: "16px",
                location: "e",
                background: "none",
                border: "none",
                showSwatch: false
            },
            grid: {
                drawBorder: false
            }
        });
        capacity_jqplot.redraw();
        $(".jqplot-table-legend .capacity_light_txt").html(function(i, v) {
            return v.replace(/(\d)/g, '<span class="number">$1</span>');
        });
        $("#dashboard_storage_information_text").fadeIn();
    }
}
function getMediaCrawlerStatus(data) {
    var mediaProcessed = 0;
    var mediaTotal = 0;
    var i;
    var mediacrawler_state = "";
    var diff = 0;
    if (data != null  && data.mediacrawler_status != null  && data.mediacrawler_status.volumes != null ) {
        if (Object.prototype.toString.call(data.mediacrawler_status.volumes.volume) != "[object Array]") {
            if (data.mediacrawler_status.volumes.volume != null ) {
                mediacrawler_state = data.mediacrawler_status.volumes.volume.volume_state;
                for (i in data.mediacrawler_status.volumes.volume.categories.category) {
                    media_transcoded_count = parseInt(data.mediacrawler_status.volumes.volume.categories.category[i].transcoded_count);
                    media_total = parseInt(data.mediacrawler_status.volumes.volume.categories.category[i].total);
                    mediaProcessed += media_transcoded_count;
                    mediaTotal += media_total;
                    mediaType = data.mediacrawler_status.volumes.volume.categories.category[i].category_type;
                    if (mediacrawler_state == "idle") {
                        if(gMediaCountTotal[mediaType] != media_total){
                            diff++;
                        }
                    }
                    gMediaCountTotal[mediaType] = media_total;
                }
                
                if(diff) {
                    mediacrawler_state = "scanning";
                }
            }
        } else {
            var mediaCount = new Array();
            var mediaCountTotal = new Array();
            var media = ["videos", "music", "photos", "other"];
            for (i in media) {
                mediaType = media[i];
                mediaCount[mediaType] = 0;
                mediaCountTotal[mediaType] = 0;
            }
            for (i in data.mediacrawler_status.volumes.volume) {
                var current_volume_mediacrawler_state = data.mediacrawler_status.volumes.volume[i].volume_state.toLowerCase();
                switch (current_volume_mediacrawler_state) {
                case "error":
                    mediacrawler_state = "error";
                    break;
                case "extracting":
                case "transcoding":
                case "running":
                    if ((mediacrawler_state != "error") && (mediacrawler_state != "unknown") && (mediacrawler_state != "scanning")) {
                        mediacrawler_state = "building";
                    }
                    break;
                case "scanning":
                    if ((mediacrawler_state != "error") && (mediacrawler_state != "unknown")) {
                        mediacrawler_state = "scanning";
                    }
                    break;
                case "paused":
                case "idle":
                case "complete":
                    if ((mediacrawler_state != "error") && (mediacrawler_state != "unknown") && (mediacrawler_state != "building") && (mediacrawler_state != "scanning")) {
                        mediacrawler_state = "idle";
                    }
                    break;
                default:
                    if (mediacrawler_state != "error") {
                        mediacrawler_state = "unknown";
                    }
                    break;
                }
                for (var j in data.mediacrawler_status.volumes.volume[i].categories.category) {
                    media_transcoded_count = parseInt(data.mediacrawler_status.volumes.volume[i].categories.category[j].transcoded_count);
                    media_total = parseInt(data.mediacrawler_status.volumes.volume[i].categories.category[j].total);
                    mediaProcessed += media_transcoded_count;
                    mediaTotal += media_total;
                    mediaCount[data.mediacrawler_status.volumes.volume[i].categories.category[j].category_type] += media_transcoded_count;
                    mediaCountTotal[data.mediacrawler_status.volumes.volume[i].categories.category[j].category_type] += media_total;
                }
            }
            for (i in media) {
                mediaType = media[i];
                if (mediacrawler_state == "idle") {
                    if(gMediaCountTotal[mediaType] != mediaCountTotal[mediaType]){
                        diff++;
                    }
                }
                gMediaCountTotal[mediaType] = mediaCountTotal[mediaType];
            }
            if(diff) {
                mediacrawler_state = "scanning";
            }
        }
        switch (mediacrawler_state) {
        case "error":
            gMediaCrawlerScanningState = "error";
            gMediaCrawlerScanningStateMsg = dictionaryList["error"];
            break;
        case "running":
        case "building":
        case "extracting":
        case "transcoding":
            gMediaCrawlerScanningState = "building";
            if ((mediaTotal == 0) || (mediaProcessed >= mediaTotal)) {
                gMediaCrawlerScanningStateMsg = dictionaryList["building_preview_images"];
            } else {
                gMediaCrawlerScanningStateMsg = dictionaryList["building_inprogress"];
            }
            break;
        case "scanning":
            gMediaCrawlerScanningState = "scanning";
            gMediaCrawlerScanningStateMsg = dictionaryList["scanning_inprogress"];
            break;
        case "paused":
        case "idle":
        case "complete":
            gMediaCrawlerScanningState = "idle";
            gMediaCrawlerScanningStateMsg = dictionaryList["idle"];
            break;
        case "unknown":
        default:
            gMediaCrawlerScanningState = "unknown";
            gMediaCrawlerScanningStateMsg = dictionaryList["_unknown"];
            break;
        }
    }
}
$(document).ready(function() {
    var wifiDashboardHandler = {
        updateInProgress: false,
        update: function(useQueue) {
            var $this = this;
            if ($this.updateInProgress) {
                return;
            }
            gConnectedNetwork = false;
            gTrustedNetwork = false;
            gWANSSIDName = dictionaryList["_unknown"];
            var ajaxAPIOptions = {
                "url": "current_wifi_client_connection",
                "timeout": ajaxTimeout,
                "success": function(data, textStatus, jqXHR) {
            		frequency_channel = 0
                    if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.ssid != null ) {
                        if (data.current_wifi_client_connection.ssid != "") {
                            gWANSSIDName = data.current_wifi_client_connection.ssid;
                            gConnectedNetwork = true;
                            if (data.current_wifi_client_connection.trusted == "true") {
                                gTrustedNetwork = true;
                            }
                        }
                        if (data.current_wifi_client_connection.Frequency != null) {
		                	frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
		                }
                    }
                    
                    var connected_device_count = 0;
                    gFoundMe = false;
                    $.ajaxAPI({
                        "url": "wifi_ap_clients",
                        "timeout": ajaxTimeout,
                        "success": function(data, textStatus, jqXHR) {
                            if (data != null  && data.wifi_ap_clients != null  && data.wifi_ap_clients.wifi_ap_client != null ) {
                                if (Object.prototype.toString.call(data.wifi_ap_clients.wifi_ap_client) != "[object Array]") {
                                    data.wifi_ap_clients.wifi_ap_client = $.makeArray(data.wifi_ap_clients.wifi_ap_client);
                                }
                                for (var i in data.wifi_ap_clients.wifi_ap_client) {
                                    connected_device_count++;
                                    if (data.wifi_ap_clients.wifi_ap_client[i].ip == gRemoteAddr) {
                                        gFoundMe = true;
                                        gconnectingBand = data.wifi_ap_clients.wifi_ap_client[i].connected_band;
                                    }
                                }
                            }
                        },
                        "error": function(request, status, error) {},
                        "complete": function() {
                        	if(gConnectedNetwork && gTrustedNetwork) {
                                if (connected_device_count) {
                                    gConnectedDevices = true;
                                } else {
                                    gConnectedDevices = false;
                                }
                                if (gConnectedDevices) {
                                    updateDashboard_BridgedConnection();
                                } else {
                                    updateDashboard_HomeMode();
                                }
                            } else {
                            	if (gConnectedNetwork) {
		                            updateDashboard_HotSpot();
		                        } else {
		                            updateDashboard_DirectConnection();
		                        }
                            }
                        }
                    });
                },
                "error": function(request, status, error) {},
                "complete": function() {
                    $this.updateInProgress = false;
                    if ($this.updateCompleteHandler != null ) {
                        $this.updateCompleteHandler();
                    }
                }
            };
            if (typeof useQueue != "undefined" && useQueue == true) {
                ajaxQueue.add(ajaxAPIOptions);
            } else {
                $.ajaxAPI(ajaxAPIOptions);
            }
        }
    };
    dashboardHandler.addUpdateHandle(wifiDashboardHandler, "wifiNameAndSignal");
});
function updateDashboard_DirectConnection() {
    resetNetworkConnectionDiagram("mode_direct_connection");
    $(".mode_direct_connection").css("display", "inline-block");
    $.ajaxAPI({
        "url": "wifi_aps",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_aps != null  && data.wifi_aps.wifi_ap != null ) {
                for (var i in data.wifi_aps.wifi_ap) {
                    if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                        gSSIDNameHighBand = data.wifi_aps.wifi_ap[i].ssid;
                        gAvatarApIpAddress_5g = data.wifi_aps.wifi_ap[i].ip;
                        isWifiOn_5g = data.wifi_aps.wifi_ap[i].enabled;
                        setSSIDSecured("5", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                            gSSIDNotBroadcasting_5g = false;
                        } else {
                            gSSIDNotBroadcasting_5g = true;
                        }
                    } else {
                        gSSIDName = data.wifi_aps.wifi_ap[i].ssid;
                        isWifiOn = data.wifi_aps.wifi_ap[i].enabled;
                        gAvatarApIpAddress = data.wifi_aps.wifi_ap[i].ip;
                        setSSIDSecured("2.4", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                            gSSIDNotBroadcasting = false;
                        } else {
                            gSSIDNotBroadcasting = true;
                        }
                    }
                }
            }
        },
        "error": function(request, status, error) {},
        "complete": function() {
            $(".me_text").text(dictionaryList["Me"]);
            $(".connection_text").text("");
            $(".device_text").text(gDeviceName);
            resetTooltip(isWifiOn, isWifiOn_5g);
            $(".wifi_avatar_ip_address").text(gAvatarApIpAddress);
        }
    });
}
function updateDashboard_BridgedConnection() {
    resetNetworkConnectionDiagram();
    $(".mode_trusted_network").css("display", "inline-block");
    if (gFoundMe) {
        $(".connection_diagram").addClass("mode_bridged_direct_connection");
        $.ajaxAPI({
            "url": "wifi_aps",
            "timeout": ajaxTimeout,
            "success": function(data, textStatus, jqXHR) {
                if (data != null  && data.wifi_aps != null ) {
                    for (var i in data.wifi_aps.wifi_ap) {
                        if (data.wifi_aps.wifi_ap[i].ism_band == "2.4") {
                            gSSIDName = data.wifi_aps.wifi_ap[i].ssid;
                            isWifiOn = data.wifi_aps.wifi_ap[i].enabled;
                            gAvatarApIpAddress = data.wifi_aps.wifi_ap[i].ip;
                            setSSIDSecured("2.4", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                            if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                                gSSIDNotBroadcasting = false;
                            } else {
                                gSSIDNotBroadcasting = true;
                            }
                        } else {
                            if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                                gSSIDNameHighBand = data.wifi_aps.wifi_ap[i].ssid;
                                isWifiOn_5g = data.wifi_aps.wifi_ap[i].enabled;
                                setSSIDSecured("5", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                            }
                        }
                    }
                }
            },
            "error": function(request, status, error) {},
            "complete": function() {
                $(".me_text").text(dictionaryList["Me"]);
                $(".connection_text").text(gDeviceName);
                $(".device_text").text(gWANSSIDName);
                resetTooltip(isWifiOn, isWifiOn_5g);
                $(".wifi_avatar_ip_address").text(gAvatarApIpAddress);
            }
        });
    } else {
        $(".connection_diagram").addClass("mode_bridged_home_connection");
        $(".me_text").text(dictionaryList["Me"]);
        $(".connection_text").text(gWANSSIDName);
        $(".device_text").text(gDeviceName);
    }
}
function updateDashboard_HotSpot() {
    resetNetworkConnectionDiagram("mode_network_hotspot");
    $(".mode_network_hotspot").css("display", "inline-block");
    $.ajaxAPI({
        "url": "wifi_aps",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_aps != null ) {
                for (var i in data.wifi_aps.wifi_ap) {
                    if (data.wifi_aps.wifi_ap[i].ism_band == "2.4") {
                        gSSIDName = data.wifi_aps.wifi_ap[i].ssid;
                        gAvatarApIpAddress = data.wifi_aps.wifi_ap[i].ip;
                        isWifiOn = data.wifi_aps.wifi_ap[i].enabled;
                        setSSIDSecured("2.4", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                            gSSIDNotBroadcasting = false;
                        } else {
                            gSSIDNotBroadcasting = true;
                        }
                    } else {
                        if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                            gSSIDNameHighBand = data.wifi_aps.wifi_ap[i].ssid;
                            isWifiOn_5g = data.wifi_aps.wifi_ap[i].enabled;
                            setSSIDSecured("5", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        }
                    }
                }
            }
        },
        "error": function(request, status, error) {},
        "complete": function() {
            $(".me_text").text(dictionaryList["Me"]);
            $(".connection_text").text(gDeviceName);
            $(".device_text").text(gWANSSIDName);
            resetTooltip(isWifiOn, isWifiOn_5g);
            $(".wifi_avatar_ip_address").text(gAvatarApIpAddress);
        }
    });
}
function updateDashboard_HomeMode() {
    resetNetworkConnectionDiagram("mode_trusted_network");
    $(".mode_trusted_network").css("display", "inline-block");
    $(".me_text").text(dictionaryList["Me"]);
    $(".connection_text").text(gWANSSIDName);
    $(".device_text").text(gDeviceName);
    $.ajaxAPI({
        "url": "wifi_aps",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_aps != null ) {
                for (var i in data.wifi_aps.wifi_ap) {
                    if (data.wifi_aps.wifi_ap[i].ism_band == "2.4") {
                        gSSIDName = data.wifi_aps.wifi_ap[i].ssid;
                        gAvatarApIpAddress = data.wifi_aps.wifi_ap[i].ip;
                        isWifiOn = data.wifi_aps.wifi_ap[i].enabled;
                        setSSIDSecured("2.4", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                            gSSIDNotBroadcasting = false;
                        }
                    } else {
                        if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                            gSSIDNameHighBand = data.wifi_aps.wifi_ap[i].ssid;
                            isWifiOn_5g = data.wifi_aps.wifi_ap[i].enabled;
                            setSSIDSecured("5", data.wifi_aps.wifi_ap[i].is_secured.toLowerCase());
                        }
                    }
                }
            }
        },
        "error": function(request, status, error) {},
        "complete": function() {
            resetTooltip(isWifiOn, isWifiOn_5g);
            $(".wifi_avatar_ip_address").text(gAvatarApIpAddress);
        }
    });
}
function resetNetworkConnectionDiagram(newDiagram) {
    $(".network_mode").hide();
    $(".connection_diagram").removeClass("mode_direct_connection");
    $(".connection_diagram").removeClass("mode_network_hotspot");
    $(".connection_diagram").removeClass("mode_trusted_network");
    $(".connection_diagram").removeClass("mode_bridged_home_connection");
    $(".connection_diagram").removeClass("mode_bridged_direct_connection");
    if (newDiagram != undefined) {
        $(".connection_diagram").addClass(newDiagram);
    }
}
function resetTooltip(isWifiOn, isWifiOn_5g) {
    $(".wifi_avatar_ssid_name").text(gSSIDName);
    $(".wifi_avatar_ssid_name_5g").text(gSSIDNameHighBand);
    $("#tooltip2_4").show();
    $("#tooltip_5").show();
    if ((isWifiOn_5g == "true") && (isWifiOn == "false")) {
        $("#tooltip2_4").hide();
        gSSIDName = "";
    } else {
        if ((isWifiOn == "true") && (isWifiOn_5g == "false")) {
            $("#tooltip_5").hide();
            gSSIDNameHighBand = "";
        }
    }
}
function setSSIDSecured(wifiNetwork, isSecured) {
    if (wifiNetwork == "2.4") {
        if (isSecured == "true") {
            gSSIDSecured = true;
        } else {
            gSSIDSecured = false;
        }
    } else {
        if (wifiNetwork == "5") {
            if (isSecured == "true") {
                gSSIDSecured_5g = true;
            } else {
                gSSIDSecured_5g = false;
            }
        }
    }
}

function checkBatteryStatus (callback) {
	$.ajaxAPI({
		"url": "battery_status",
		"timeout": ajaxTimeout,
		"success": function(data) {
			if (data != null  && data.battery_status != null ) {
				if (data.battery_status.state.toLowerCase() == "discharging" && parseInt(data.battery_status.percent_remaining) < minBatteryPercentForUpgrade) {
					callback (true);
				} else {
					callback (false);
				}
			}
		},
		"complete": function(jqXHR, textStatus) {
			// $("#confirm_update").dialog("open");
		}
	});
}

function isOlderThanIE (ver){
    var b = document.createElement('b')
    b.innerHTML = '<!--[if lt IE ' + ver + ']><i></i><![endif]-->'
    return b.getElementsByTagName('i').length === 1
}

$(document).ready(function() {
    var batteryDashboardHandler = {
        updateInProgress: false,
        update: function(useQueue) {
            var $this = this;
            if ($this.updateInProgress) {
                return;
            }
            var ajaxAPIOptions = {
                "url": "battery_status",
                "timeout": ajaxTimeout,
                "success": function(data, textStatus, jqXHR) {
                    if (data != null  && data.battery_status != null ) {
                        if (data.battery_status.percent_remaining != "") {
                            var $battery_img = $("#dashboard_battery_information_available_image")
                              , $battery_text = $("#dashboard_battery_information_available_text");
                            $battery_text.children(".charge_value").text(data.battery_status.percent_remaining);
                            $battery_img.fadeIn();
                            $battery_text.fadeIn();
                            $battery_img.removeClass("battery_full");
                            $battery_img.removeClass("battery_80");
                            $battery_img.removeClass("battery_60");
                            $battery_img.removeClass("battery_40");
                            $battery_img.removeClass("battery_20");
                            percentage = parseInt(data.battery_status.percent_remaining);
                            if (percentage <= 20) {
                                $battery_img.addClass("battery_20");
                            } else {
                                if (percentage <= 40) {
                                    $battery_img.addClass("battery_40");
                                } else {
                                    if (percentage <= 60) {
                                        $battery_img.addClass("battery_60");
                                    } else {
                                        if (percentage <= 80) {
                                            $battery_img.addClass("battery_80");
                                        } else {
                                            $battery_img.addClass("battery_full");
                                        }
                                    }
                                }
                            }
                        }
                        if (data.battery_status.state == "charging") {
                            $battery_img.removeClass("discharging");
                            $battery_img.addClass("charging");
							$("#battery_charge").css("display", "none");
							$("#battery_charging").css("display", "block");
                        } else {
                            $battery_img.removeClass("charging");
                            $battery_img.addClass("discharging");
                            $("#battery_charging").css("display", "none");
							$("#battery_charge").css("display", "block");
                        }
                    }
                },
                "error": function(request, status, error) {},
                "complete": function() {
                    $this.updateInProgress = false;
                    if ($this.updateCompleteHandler != null ) {
                        $this.updateCompleteHandler();
                    }
                }
            };
            if (typeof useQueue != "undefined" && useQueue == true) {
                ajaxQueue.add(ajaxAPIOptions);
            } else {
                $.ajaxAPI(ajaxAPIOptions);
            }
        }
    };
    dashboardHandler.addUpdateHandle(batteryDashboardHandler, "updateBatteryPercent");
});
$(document).ready(function() {
    $("#head_settings_nav_hardware_link").navItem({
        "contentId": "hardware_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_hardware_link");
            pollingHandler.poll();
            refreshSettingsHardwareForms();
            if(!gconnectingBand) {
				$("#settings_battery_media_performance_button").addClass("ui-state-disabled");
				$("#settings_battery_max_life_button").addClass("ui-state-disabled");
				$.ajaxAPI({
					"url": "wifi_ap_clients",
					"timeout": ajaxTimeout,
					"success": function(data, textStatus, jqXHR) {
						if (data != null  && data.wifi_ap_clients != null  && data.wifi_ap_clients.wifi_ap_client != null ) {
							for (var i in data.wifi_ap_clients.wifi_ap_client) {
								if (data.wifi_ap_clients.wifi_ap_client[i].ip == gRemoteAddr) {
									gconnectingBand = data.wifi_ap_clients.wifi_ap_client[i].connected_band;
								}
							}
						}
					},
					"error": function(request, status, error) {},
					"complete": function() {
						$("#settings_battery_media_performance_button").removeClass("ui-state-disabled");
						$("#settings_battery_max_life_button").removeClass("ui-state-disabled");
					}
				});
			}
        }
    });
});
var suppressErrors = false;
$(document).ready(function() {
    $("#error_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_critical",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#error_dialog").attr("title") + "</div>"
    });
    $("#error_dialog_close_button").click(function() {
        $("#error_dialog").dialog("close");
        if (gRedirect) {
            window.location = redirectURL;
        }
    });
});
var connection_detect=false;
function showError(ids, msg) {
    if (suppressErrors) {
        return;
    }
    /*if(connection_detect>3){
      var errormsgs = ""
      errormsgs =  "<li>" + errorsList["get_error"] + "</li>"
       $("#disconnection_error_dialog_message_list").append(errormsgs);
      $("#disconnection_error_dialog").dialog("open");
      return;  
    }*/
   if(connection_detect == true){
      return;
     }
    var errormsgs = "";
    var unknownIDs = "";
    if (ids == undefined) {
        ids = "unk";
    }
    if (typeof (ids) === typeof (200)) {
        ids = ids.toString();
    }
    if (!$.isArray(ids) && typeof (ids) === typeof ("")) {
        tmp = ids;
        ids = new Array(tmp);
    }
    if ($("#error_dialog").dialog("isOpen") == false) {
        $("#error_dialog_message ul li").each(function() {
            $(this).remove();
        });
        $("#unknown_ids_message ul li").each(function() {
            $(this).remove();
        });
    }
    if (msg != undefined && msg != "") {
        $("#unknown_ids_message_list").append("<li>" + msg + "</li>");
    }
    var errorDialogTitle = "";
    var ssidNameError = false;
    var passwordError = false;
    var passwordNotMatchError = false;
    var useGenericErrorTitle = false;
    for (var i = 0; i < ids.length; i++) {
        var currentID = ids[i];
        if (currentID == "") {
            continue;
        } else {
            if (currentID == "timeout") {
                if (checkDuplicateErrorMsg("200001") == false) {
                    errormsgs += "<li>" + errorsList[currentID] + "</li>";
                }
            } else {
                if (errorsList[currentID] != undefined) {
                    errormsgs += "<li>" + errorsList[currentID] + "</li>";
                } else {
                    if ((currentID.indexOf("_error") > -1) && (checkDuplicateErrorMsg("200005") == false)) {
                        connection_detect = true;
                        $("#ui-dialog-title-error_dialog").find(".wizard_dialog_title").text(dictionaryList["connection_lost"]);
                        errormsgs += "<li>" + errorsList["connection_lost"] + "</li>";
                        $("#error_dialog_message_list").html(errormsgs);
                        $("#error_dialog_close_button").hide();
                        $("#error_dialog").dialog("open");
                        return;
                    } else {
                        unknownIDs += "<li>" + currentID + "</li>";
                    }
                }
            }
        }
    }
    
    if(ids[0] == "wpa_password_error")
   		$("#ui-dialog-title-error_dialog").find(".wizard_dialog_title").text(dictionaryList["title_invalid_password"]);
   	else{
   		if (errorDialogTitle != "") {
        	$("#ui-dialog-title-error_dialog").find(".wizard_dialog_title").text(errorDialogTitle);
    	} else {
        	$("#ui-dialog-title-error_dialog").find(".wizard_dialog_title").text(dictionaryList["title_error"]);
    	}
    }
    if (unknownIDs.length) {
        if ((unknownIDs.indexOf("_undefined") > -1) || (unknownIDs.indexOf("_error") > -1)) {} else {
            $("#unknown_ids_message_list").append(unknownIDs);
        }
        var skip_this_unknown_msg = false;
        $("#error_dialog_message ul li").each(function() {
            var errorMsgAlreadyShown = $(this).text();
            if (errorMsgAlreadyShown.indexOf("(200000)") > -1) {
                skip_this_unknown_msg = true;
            }
        });
        if (!skip_this_unknown_msg) {
            errormsgs += "<li>" + errorsList["unk"] + "</li>";
        }
        $("#unknown_ids_message").show();
    }
    $("#error_dialog_message_list").append(errormsgs);
    $("#error_dialog").dialog("open");
}
function checkDuplicateErrorMsg(id_key) {
    var skip_this_msg = false;
    $("#error_dialog_message ul li").each(function() {
        var timeoutMsgAlreadyShown = $(this).text();
        if (timeoutMsgAlreadyShown.indexOf(id_key) > -1) {
            skip_this_msg = true;
        }
    });
    return skip_this_msg;
}
function processAndDisplayError(xmlData, method_action, request_status) {
    var xotree = new XML.ObjTree();
    var data = xotree.parseXML(xmlData);
    var error_id = parseDataForErrors(data);
    var errorKey;
    if (error_id) {
        errorKey = method_action + "_error_id_" + error_id;
        if (errorsList[errorKey] != undefined) {
            showError(errorKey);
        } else {
            showError("error_id_" + error_id);
        }
    } else {
        var msg = "";
        var error_code = parseDataForErrors(data, "error_code");
        if (error_code) {
            errorKey = method_action + "_http_" + error_code;
            if (errorsList[errorKey] == undefined) {
                msg = errorKey;
                errorKey = "http_" + error_code;
            }
        } else {
            if (request_status != 0) {
                errorKey = method_action + "_" + request_status;
            } else {
                errorKey = method_action + "_timeout";
            }
            if (errorsList[errorKey] == undefined) {
                msg = errorKey;
                errorKey = "timeout";
            }
        }
        showError(errorKey, msg);
    }
}
function parseDataForErrors(data, errorkey) {
    var errorFound = false;
    if (errorkey == null ) {
        errorkey = "error_id";
    }
    for (var key in data) {
        if (key == "#text") {
            continue;
        }
        if (data[key] instanceof Object) {
            return parseDataForErrors(data[key], errorkey);
        } else {
            if (key == errorkey) {
                return data[key];
            }
        }
    }
    return false;
}
function processAjaxError(ID, status) {
    hideLoading();
    if (status == "parsererror" || status == "error" || status == "abort") {
        showError(ID + "_" + status);
    } else {
        if (status == "timeout") {
            showError("timeout");
        } else {
            showError(ID + "_unk_error (" + status + ")");
        }
    }
}
var rebuildDLNAInProgress = false;
var rescanDLNAInProgress = false;
var checkDLNARescanInProgress = false;
var DLNAPoll = 10000;
var gMediaServerEnable = false;
var checkMediacrawlerRebuildInProgress = false;
var frequency_channel = 0;
$(document).ready(function() {
    pollingHandler.addPoll("media_server_database", ["media_container"], settingsDLNAPollSuccess, settingsMediaPollError);
    pollingHandler.addPoll("mediacrawler_status", ["media_container"], settingsMediacrawlerPollSuccess, settingsMediaPollError);
    $("#head_settings_nav_media_link").navItem({
        "contentId": "media_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_media_link");
            var data = null ;
            $(document).trigger("media::navigation");
            pollingHandler.poll();
            $("#settings_media_toggle_dlna_service_form").restForm("refreshForm");
            $("#settings_nav_media_link").parent("li").addClass("selected").siblings().removeClass("selected");
            $("#sdcard_automatic_transfer_form").restForm("refreshForm");
            $("#sdcard_after_transfer_form").restForm("refreshForm");
            $("#usb_automatic_transfer_form").restForm("refreshForm");
            $("#usb_after_transfer_form").restForm("refreshForm");
            initUSBTransferProgress();
        }
    });
    $("#head_settings_nav_media_link").click(function() {
        $("#head_nav").hide();
        $("#head_nav_link").removeClass("selected");
       	getPlexNewVersion();
    });
    $("#settings_media_toggle_dlna_service_form").restForm({
        "refreshDataCallback": function(data) {
            $("#settings_media_toggle_dlna_service_form").restForm("_refreshData", data);
            gMediaServerEnable = data.media_server_configuration.enable_media_server;
            if (gMediaServerEnable == "false") {
                $("#settings_dlna_database_container").hide();
            } else {
                $("#settings_dlna_database_container").show();
            }
            getMediaServerDatabase();
        },
        "processFormSuccessCallback": function() {
            $("#settings_media_toggle_dlna_service_form").restForm("processFormSuccess");
            getMediaServerDatabase();
        }
    });
    $("#config_dlna_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_media",
        modal: true,
        stack: false,
        title: '<div id="config_dlna_dialog_title" class="wizard_dialog_title">' + $("#config_dlna_dialog").attr("title") + "</div>"
    });
    $("#config_dlna_dialog_done_button").click(function() {
        $("#config_dlna_dialog").dialog("close");
    });
    $("#itunes_rescan_results").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 410,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_media",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#itunes_rescan_results").attr("title") + "</div>"
    });
    $("#itunes_rescan_results_close_button").click(function() {
        $("#itunes_rescan_results").dialog("close");
    });
    
    var gPlexDownload = $("#plex_status span").text();
    if(gPlexDownload == "notfound") {
		$("#plex_setting_container").hide();
		$("#plex_install_container").hide();
    	$("#plex_download_container").show();
    }
    else if(gPlexDownload == "downloaded") {
    	$("#plex_download_container").hide();
    	$("#plex_install_container").show();
    	$("#plex_setting_container").hide();
    }
    else {
    	$("#plex_download_container").hide();
    	$("#plex_install_container").hide();
		$("#plex_setting_container").show();
    }
    
    $("#plex_no_internet_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_no_internet_dialog").attr("title") + "</div>"
    });
    
    $("#plex_download_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_download_dialog").attr("title") + "</div>"
    });
    
    $("#plex_no_internet_dialog_ok_button").click(function() {
        $("#plex_no_internet_dialog").dialog("close");
    });
	
    $("#plex_download_button").click(function() {
    	getInternetConnectivity();
    	setTimeout(function(){
    		if(gInternetAccess) {
    			var twonky_server = dictionaryList['twonky_server_string'] + "&reg;&nbsp;" + dictionaryList['twonky_server_string_2'];
				var msg = "<p>" + dictionaryList["plex_install_disable_twonky_warning"].replace("{0}", twonky_server) + "</p>";
				$("#plex_download_note").html(msg);
				$("#plex_download_dialog").dialog("open");
	        }
	        else {
	        	$("#plex_no_internet_dialog").dialog("open");
	        }
		}, 1000);
    });
    
    $("#plex_download_ok_button").click(function() {
        $("#plex_download_dialog").dialog("close");
        $.get('views/media/partial/plexsettings/start_plex_download.php');
		$("#update_progress_title").html(dictionaryList["page_header_download_plex_media_server"]);
		$("#update_progress_note").html("");
		$("#update_progress").dialog("open");
		$("#update_progressbar").progressbar({
			value: 0
		});
		processUpdate();
    });
    
    $("#plex_download_cancel_button").click(function() {
        $("#plex_download_dialog").dialog("close");
    });
    
    $("#plex_install_button").click(function() {
		var twonky_server = dictionaryList['twonky_server_string'] + "&reg;&nbsp;" + dictionaryList['twonky_server_string_2'];
		var msg = "<p>" + dictionaryList["plex_install_disable_twonky_warning"].replace("{0}", twonky_server) + "</p>";
		$("#plex_update_complete").html(msg);
		$("#plex_update_complete_dialog").dialog("open");
    });

	$("#settings_media_toggle_plex_service_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
			//for css
        }
    });
    var plex_server_enabled = $("#plex_server_enabled span").text();
    if(plex_server_enabled == "enabled") {
    	$("#plex_enabled").attr("checked", true);
    	$("#plex_setting_content_container").show();
    }
    else {
    	$("#plex_enabled").attr("checked", false);
    	$("#plex_setting_content_container").hide();
    }

    $("#plex_enabled").live("toggle", function() {
    	if ($(this).is(":checked")) {
	        $(this).siblings(".false").attr("disabled", true).addClass("ui-state-disabled");
	        $.get('views/media/partial/plexsettings/set_plex_server_enabled.php');
			gMediaServerEnable = false;
			$("#settings_dlna_database_container").hide();
			disableIdTag("#dlna_mediadb_rescan_button");
			disableIdTag("#dlna_mediadb_rebuild_button");
			$("#dlna_enabled").attr("checked", false);
	                $("#plex_setting_content_container").show();
		} else {
			$.get('views/media/partial/plexsettings/set_plex_server_disabled.php');
			$("#plex_setting_content_container").hide();
		}
    });

    $("#plex_update_comfirmation_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_update_comfirmation_dialog").attr("title") + "</div>"
    });
    $("#plex_new_ver_download_button").click(function() {
        $("#plex_update_comfirmation_dialog").dialog("open");
    });
	$("#plex_update_dialog_ok_button").click(function() {
		$("#plex_update_comfirmation_dialog").dialog("close");
        $.get('views/media/partial/plexsettings/start_plex_download.php');
		$("#update_progress_title").html(dictionaryList["page_header_download_plex_media_server"]);
		$("#update_progress_note").html("");
		$("#update_progress").dialog("open");
		$("#update_progressbar").progressbar({
			value: 0
		});
		processUpdate();
    });
	$("#plex_update_dialog_cancel_button").click(function() {
        $("#plex_update_comfirmation_dialog").dialog("close");
    });

	$("#plex_update_process_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_update_process_dialog").attr("title") + "</div>"
    });
    
	$("#plex_update_failed_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_update_failed_dialog").attr("title") + "</div>"
    });
    $("#plex_update_failed_ok_button").click(function() {
        $("#plex_update_failed_dialog").dialog("close");
    });
	$("#plex_update_complete_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_update_complete_dialog").attr("title") + "</div>"
    });
    $("#plex_update_complete_cancel_button").click(function() {
        $("#plex_update_complete_dialog").dialog("close");
    });
    $("#plex_update_complete_ok_button").click(function() {
    	$.get('views/media/partial/plexsettings/start_plex_update.php');
        $("#plex_update_complete_dialog").dialog("close");
        //$("#plex_update_process_dialog").dialog("open");
        $("#update_progress_title").html(dictionaryList["page_header_install_plex_media_server"]);
    	$("#update_progressbar").progressbar({
			value: 0
		});
		$("#update_progress_note").html("");
		$("#update_progress").dialog("open");
		processUpdate();
    	//setTimeout($("#get_plex_update_status_form").submit(), 1000);
    });
    
    $("#plex_setting_button").click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        var location_name = "http://" + location.host + ":32400/web"
        window.open(location_name, '_blank');
    });

    $("#plex_reset_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_reset_dialog").attr("title") + "</div>"
    });
    
    $("#plex_reset_database_button").click(function(e) {
        $("#plex_reset_dialog").dialog("open");
    });
	
    $("#plex_reset_dialog_ok_button").click(function(e) {
    	$("#plex_reset_dialog").dialog("close");
        doPlexRebuild();
    });
	
    $("#plex_reset_dialog_cancel_button").click(function() {
        $("#plex_reset_dialog").dialog("close");
    });
	
    $("#plex_reset_reboot_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#plex_reset_reboot_dialog").attr("title") + "</div>"
    });
    
    getPlexNewVersion();
});
function getPlexNewVersion() {
	var plex_new_version = $.ajax({type: "GET", url: "views/media/partial/plexsettings/check_plex_version.php", async: false}).responseText;
    if(plex_new_version != "no upgrade") {
    	$("#new_version span").val(plex_new_version);
    }
	var latest_plex_version_split = $("#new_version span").text().split("-");
	var current_plex_version_split = $("#current_version span").text().split("-");
	var latest_plex_version = latest_plex_version_split[0].replace(/[-\.]/g,'') + parseInt(latest_plex_version_split[1], 16);
	var current_plex_version = current_plex_version_split[0].replace(/[-\.]/g,'') + parseInt(current_plex_version_split[1], 16);

    if(latest_plex_version > current_plex_version){
		$("#plex_version").text("");
    	$("#plex_new_ver_download_button").show();
    }
    else {
    	$("#plex_version").text($("#current_version span").text());
		$("#plex_new_ver_download_button").hide();
    }
}

function doPlexRebuild() {
    displayLoading();
    disableIdTag("#plex_setting_button");
    disableIdTag("#plex_reset_database_button");
    $("#plex_reset_reboot_dialog").dialog("open");
    $.ajaxAPI({
        "url": "Plex_server_database",
        "timeout": ajaxTimeout,
        "type": "put",
        "data": {
            "database": "rebuild"
        },
        "success": function(data, status, XMLHttpRequest) {
            hideLoading();
            enableIdTag("#plex_setting_button");
            enableIdTag("#plex_reset_database_button");
            $("#plex_reset_reboot_dialog").dialog("close");
            $("#reconnect_network_dialog").closest(".ui-draggable").css({
                display: "",
                visibility: "hidden",
                bottom: 1
            });
            setRebootValues("generic");
            $("#reboot_dialog").dialog("open");
            stopPolling();
            setTimeout("pingServer();", startPingDelay);
        },
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "put_Plex_server_database", request.status);
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}

$(function() {
    $("#dlna_enabled").live("toggle", function() {
        if ($(this).is(":checked")) {
            $(this).siblings(".false").attr("disabled", true).addClass("ui-state-disabled");
            gMediaServerEnable = true;
            $.get('views/media/partial/plexsettings/set_plex_server_disabled.php');
            $("#plex_enabled").attr("checked", false);
            $("#plex_setting_content_container").hide();
            $("#settings_dlna_database_container").show();
            enableIdTag("#dlna_mediadb_rescan_button");
            enableIdTag("#dlna_mediadb_rebuild_button");
        } else {
            gMediaServerEnable = false;
            $("#settings_dlna_database_container").hide();
            disableIdTag("#dlna_mediadb_rescan_button");
            disableIdTag("#dlna_mediadb_rebuild_button");
        }
        $(this.form).submit();
    });
    $("#dlna_mediadb_rescan_button").live("click", function() {
        showDLNAProgressMsg();
        doDLNARescan();
        return false;
    });
    $("#dlna_mediadb_rebuild_button").live("click", function() {
        showDLNAProgressMsg();
        doDLNARebuild();
        return false;
    });
    $("#mediaCrawler_mediadb_rebuild_button").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            doMediacrawlerRebuild();
        }
    });
});
function getMediaServerDatabase() {
    $.ajaxAPI({
        "url": "media_server_database",
        "type": "GET",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "get_media_server_database", request.status);
        },
        "success": function(data) {
            updateDLNAInfo(data.media_server_database, true);
        }
    });
}
function doDLNARescan() {
    if (rescanDLNAInProgress === true) {
        return;
    }
    rescanDLNAInProgress = true;
    clearDLNAMediaServerLastUpdate();
    $.ajaxAPI({
        "url": "media_server_database",
        "type": "PUT",
        "data": {
            "database": "rescan"
        },
        "error": function(request, status, error) {
            rescanDLNAInProgress = false;
            processAndDisplayError(request.responseText, "put_media_server_database");
            hideDLNAProgressMsg();
        },
        "success": function(data, status, XMLHttpRequest) {
            rescanDLNAInProgress = false;
            if (XMLHttpRequest.status == 200) {
                setTimeout("checkDLNARescanStatus();", DLNAPoll);
            } else {
                showError("rescan_dlna_" + XMLHttpRequest.status);
                hideDLNAProgressMsg();
            }
        }
    });
}
function doDLNARebuild() {
    if (rebuildDLNAInProgress === true) {
        return;
    }
    rebuildDLNAInProgress = true;
    clearDLNAMediaServerLastUpdate();
    $.ajaxAPI({
        "url": "media_server_database",
        "type": "PUT",
        "data": {
            "database": "rebuild"
        },
        "error": function(request, status, error) {
            if (status == "timeout" || status == "abort") {
                setTimeout("checkDLNARescanStatus();", DLNAPoll);
            } else {
                processAjaxError("rebuild_dlna", status);
                hideDLNAProgressMsg();
            }
        },
        "success": function(data, status, XMLHttpRequest) {
            if (XMLHttpRequest.status == 200) {
                clearDLNAMediaServerLastUpdate();
                setTimeout("checkDLNARescanStatus();", DLNAPoll);
            } else {
                showError("rebuild_dlna_" + XMLHttpRequest.status);
                hideDLNAProgressMsg();
            }
        },
        "complete": function(jqXHR, textStatus) {
            rebuildDLNAInProgress = false;
        }
    });
}
function clearDLNAMediaServerLastUpdate() {
    $("#settings_media_dlna_update").text("");
    $("#settings_media_dlna_music_tracks").text("0");
    $("#settings_media_dlna_pictures").text("0");
    $("#settings_media_dlna_videos").text("0");
}
function hideDLNAProgressMsg() {
    enableIdTag("#dlna_mediadb_rescan_button");
    enableIdTag("#dlna_mediadb_rebuild_button");
    $("#dlnaMediaDBProcessContainer").hide();
    $("#dlnaMediaDBProcessContainer").parent().removeClass("updating_database");
    $("#settings_media_dlna_update").show();
    $("#settings_media_dlna_last_update_string").show();
}
function showDLNAProgressMsg() {
    disableIdTag("#dlna_mediadb_rescan_button");
    disableIdTag("#dlna_mediadb_rebuild_button");
    $("#dlnaMediaDBProcessContainer").show();
    $("#dlnaMediaDBProcessContainer").parent().addClass("updating_database");
    $("#settings_media_dlna_update").hide();
    $("#settings_media_dlna_last_update_string").hide();
}
function checkDLNARescanStatus() {
    if (checkDLNARescanInProgress === true) {
        return;
    }
    if (!$("#dlna_content").is(":visible")) {
        return;
    }
    checkDLNARescanInProgress = true;
    $.ajaxAPI({
        "url": "media_server_database",
        "error": function(request, status, error) {
            checkDLNARescanInProgress = false;
            processAndDisplayError(request.responseText, "get_media_server_database");
            hideDLNAProgressMsg();
        },
        "success": function(data, status, XMLHttpRequest) {
            checkDLNARescanInProgress = false;
            if ((XMLHttpRequest.status != 200) && (XMLHttpRequest.status != 503)) {
                showError("check_rescan_dlna_" + XMLHttpRequest.status);
                return;
            } else {
                if ("media_server_database" in data) {
                    updateDLNAInfo(data.media_server_database, "true", false);
                    if ((data.media_server_database.scan_in_progress == "") || (data.media_server_database.scan_in_progress == "false")) {
                        return;
                    }
                }
                if (XMLHttpRequest.status == 503) {
                    hideDLNAProgressMsg();
                } else {
                    setTimeout("checkDLNARescanStatus();", DLNAPoll);
                }
            }
        }
    });
}
function updateDLNAInfo(data, rescanDLNA) {
    var music_tracks = dictionaryList["_unknown"];
    var pictures = dictionaryList["_unknown"];
    var videos = dictionaryList["_unknown"];
    var lastupdate = dictionaryList["_unknown"];
    var version = dictionaryList["_unknown"];
    if (data.music_tracks != "") {
        music_tracks = data.music_tracks;
    }
    if (data.pictures != "") {
        pictures = data.pictures;
    }
    if (data.videos != "") {
        videos = data.videos;
    }
    if (data.time_db_update != 0 && data.time_db_update != "") {
        lastupdate = getTimeStamp(data.time_db_update);
    }
    if (data.version != "twonky.dat" && data.version != "") {
        version = data.version;
    }
    $("#settings_media_dlna_version").text(version);
    $("#settings_media_dlna_music_tracks").text(music_tracks);
    $("#settings_media_dlna_pictures").text(pictures);
    $("#settings_media_dlna_videos").text(videos);
    $("#settings_media_dlna_update").text(lastupdate);
    if (lastupdate != dictionaryList["_unknown"]) {
        $("#settings_media_dlna_last_update_string").show();
        localizeTimeStamp("#settings_media_dlna_update");
    } else {
        $("#settings_media_dlna_last_update_string").hide();
    }
    $("#dlnaMediaDB_count").show();
    if (gMediaServerEnable == "false") {} else {
        if (data.scan_in_progress == "true") {
            showDLNAProgressMsg();
            if (rescanDLNA) {
                setTimeout("checkDLNARescanStatus();", DLNAPoll);
            }
        } else {
            hideDLNAProgressMsg();
        }
    }
}
function settingsDLNAPollSuccess(data) {
    if (data != null  && data.media_server_database != null ) {
        updateDLNAInfo(data.media_server_database, false);
    }
}
function settingsMediaPollError() {}
function settingsMediacrawlerPollSuccess(data) {
    if (data != null  && data.mediacrawler_status != null  && data.mediacrawler_status.volumes != null ) {
        getMediaCrawlerStatus(data);
        $("#settings_media_crawler_videos").text(gMediaCountTotal["videos"]);
        $("#settings_media_crawler_music_tracks").text(gMediaCountTotal["music"]);
        $("#settings_media_crawler_pictures").text(gMediaCountTotal["photos"]);
        $("#settings_media_crawler_others").text(gMediaCountTotal["other"]);
        $("#mediaCrawler_MediaDB_activity").text(gMediaCrawlerScanningStateMsg);
        if (gMediaCrawlerScanningState == "building" || gMediaCrawlerScanningState == "scanning") {
            disableIdTag("#mediaCrawler_mediadb_rebuild_button");
            //setTimeout("checkMediacrawlerRebuildStatus();", 60000);
        } else {
            enableIdTag("#mediaCrawler_mediadb_rebuild_button");
        }
    }
}
function doMediacrawlerRebuild() {
    displayLoading();
    disableIdTag("#mediaCrawler_mediadb_rebuild_button");
    $.ajaxAPI({
        "url": "mediacrawler",
        "timeout": ajaxTimeout,
        "type": "put",
        "data": {
            "allshare": "true"
        },
        "success": function(data, status, XMLHttpRequest) {
            hideLoading();
            setTimeout("checkMediacrawlerRebuildStatus();", 10000);
            gMediaCrawlerScanningStateMsg = dictionaryList["scanning_inprogress"];
            $("#mediaCrawler_MediaDB_activity").text(gMediaCrawlerScanningStateMsg);
        },
        "error": function(request, status, error) {
            showError("get_content_database_error");
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function checkMediacrawlerRebuildStatus() {
    if (checkMediacrawlerRebuildInProgress === true) {
        return;
    }
    if (!$("#media_crawler_content").is(":visible")) {
        return;
    }
    checkMediacrawlerRebuildInProgress = true;
    $.ajaxAPI({
        "url": "mediacrawler_status",
        "type": "GET",
        "success": function(data) {
            if (data != null  && data.mediacrawler_status != null  && data.mediacrawler_status.volumes != null ) {
                settingsMediacrawlerPollSuccess(data);
                //if (gMediaCrawlerScanningState == "building" || gMediaCrawlerScanningState == "scanning") {
                //    setTimeout("checkMediacrawlerRebuildStatus();", 60000);
                //}
            }
        },
        "complete": function(jqXHR, textStatus) {
            checkMediacrawlerRebuildInProgress = false;
        }
    });
}
var gconnectingBand;
var connectingBand;
var Num2g4connectingBand = 0;
var Num5gconnectingBand = 0;
var gTime_machine_size_limit_MB = 0;
var pingErrorCount = 0;
var timeZonesName;
var timeZonesAbbr;
var timeTicking = false;
$(document).ready(function() {
    // init_updateUploadFromFile();
    $("#settings_device_name_form").restForm({
        "timeout": ajaxTimeout,
        "beforeProcessForm": function() {
            pingErrorCount = 0;
        },
        "processFormSuccessCallback": function() {
            $("#settings_device_name_form").restForm("processFormSuccess");
            finishDevicenameDescriptionChange("settings_device_name_form");
        },
        "processFormErrorCallback": function(request, status, error) {
            if (status == "error") {
                finishDevicenameDescriptionChange("settings_device_name_form");
            } else {
                $("#settings_device_name_form").restForm("processFormError", request, status, error);
            }
        },
        "setDefaultFormDataCallback": function(data) {
            $("#settings_device_name_form_machine_name")[0].defaultValue = $("#settings_device_name_form_machine_name").val();
        },
    });
    $("#settings_device_language_form").restForm({
        "refreshDataCallback": function(data) {
            if (data !== null  && data.language_configuration !== null ) {
                if (data.language_configuration.language.toLowerCase() == "default") {
                    //data.language_configuration.language = "en_US";
                    var default_language_o = $("#languageSelect").attr("checkdefult").substr( 0, 5).toLowerCase(),
                        default_language_f="";
                    switch (default_language_o){
                        case "fr-fr":
                            default_language_f = 'fr_FR';//include check session FR
                            break;
                        case "it-it":
                            default_language_f = 'it_IT';
                            break;
                        case "cs-cz":
                            default_language_f = 'cs_CZ';
                            break;
                        case "de-de":
                            default_language_f = 'de_DE';
                            break;
                        case "es-es":
                            default_language_f = 'es_ES';
                            break;
                        case "zh-cn":
                            default_language_f = 'zh_CN';
                            break;
                        case "zh-tw":
                            default_language_f = 'zh_TW';
                            break; 
                        case "ja-jp":
                            default_language_f = 'ja_JP';
                            break;   
                        case "ko-kr":
                            default_language_f = 'ko_KR';
                            break;   
                        case "ru-ru":
                            default_language_f = 'ru_RU';
                            break;  
                        case "pt-br":
                            default_language_f = 'pt_BR';
                            break;
                        case "hu-hu":
                            default_language_f = 'hu_HU';
                            break; 
                        case "nl-nl":
                            default_language_f = 'nl_NL';
                            break;
                        case "nb-no":
                            default_language_f = 'nb_NO';
                            break; 
                        case "pl-pl":
                            default_language_f = 'pl_PL';
                            break; 
                        case "sv-se":
                            default_language_f = 'sv_SE';
                            break;
                        case "tr-tr":
                            default_language_f = 'tr_TR';
                            break;   
                        case "en-us":
                            default_language_f = 'en_US';
                            break;        
                        default:
                            default_language_f = 'en_US';//include EN in all other cases of different lang detection
                            break;
                    }
                     data.language_configuration.language = default_language_f;
                }
                $("#settings_device_language_form").restForm("_refreshData", data);
            }
           
        },
        "processFormSuccessCallback": function() {
            gLanguage = $("#languageSelect").val();
            window.location = redirectURL;
            displayLoading();
        }
    });
    if (are_cookies_enabled() == false) {
        $("#cookies_message").show();
    }
    timeZonesName = new Array();
    $("#SettingsTimezoneSelect option").each(function(i) {
        var tzname = $(this).attr("value");
        timeZonesName.push(tzname);
    });
    timeZonesAbbr = new Array();
    timeZonesAbbr = ["SST", "HAST", "AKST", "PST", "PST", "MST (Arizona)", "MST (Chihuahua)", "MST", "CST (Guatemala)", "CST", "CST (Mexico City)", "CST (Saskatchewan)", "COT", "EST", "EST", "VET", "AST", "BOT", "CLT", "AMT (Manaus)", "NST", "BRT", "ART", "WGST", "UYT", "FNT", "AZOT", "CVT", "WET", "BST", "CET", "CET", "CET", "CET", "WAT", "EET", "EET", "EET", "EET (Cairo)", "CAT", "EET", "IST (Israel)", "EET (Minsk)", "AST (Arabia)", "AST (Arabia)", "EAT", "IRST", "MSK", "GST", "AZT", "AMT (Armenia)", "AFT", "PKT", "UZT", "IST (India)", "NPT", "YEKT", "ALMT", "BST (Bangladesh)", "MMT", "ICT", "KRAT", "CST (China)", "SGT", "AWST", "CST (China)", "IRKT", "JST", "KST", "ACST", "ACST (Darwin)", "YAKT", "AEST (Brisbane)", "AEST", "ChST", "AEST", "VLAT", "MAGT", "NZST", "FJT"];
});
var configFileUploader;
var uploadConfigTimer = 0;
var importUserCanceledOut = false;
var firstNetworkConnectivity_Poll = true;
var networkconnectivity_InProgress = false;
$(function() {});
function initSettings() {}
function navigateToDisplayName() {
    suppressErrors = true;
    url = "http://" + deviceName;
    window.location = url;
}
$(function() {});
function finishDevicenameDescriptionChange(formName) {
    $.ajaxAPI({
        "url": "system_state",
        "error": function(request, status, error) {
            pingErrorCount++;
            if ((status == "error") && (pingErrorCount < 5)) {
                setTimeout('finishDevicenameDescriptionChange("' + formName + '");', 5000);
            } else {
                showError(formName + "_error");
            }
        },
        "success": function(data) {
            url = getURLLocation(location);
            if (isHostname(url)) {
                window.location = "http://" + gIPAddress;
            } else {
                if (formName == "settings_device_name_form") {
                    gDeviceName = $("#settings_device_name_form_machine_name").val();
                    updateDeviceTitle();
                }
            }
            $("#" + formName).restForm("processFormSuccess");
            var relatedForms = $("#" + formName).data("restFormSettings").relatedForms;
            for (var i in relatedForms) {
                $("#" + relatedForms[i]).restForm("_hideProcessing", true, false);
            }
            $("#" + formName).restForm("_hideProcessing", true, true);
        }
    });
}
function refreshSettingsHardwareForms() {
    $("#battery_status_form").restForm("refreshForm");
    $("#battery_settings_power_profile").restForm("refreshForm");
    $("#settings_drive_lock_form").restForm("refreshForm");
}
function resetNavigationSelection(id) {
    $(".nav_ul li").removeClass("current");
    $(id).addClass("current");
}
$(document).ready(function() {
    $("#head_nav_link").click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        $("#head_nav").toggle();
        checkOtherToolbarItems("head_nav_link");
        if ($("#head_nav_link").hasClass("selected")) {
            $("#head_nav_link").removeClass("selected");
        } else {
            $("#head_nav_link").addClass("selected");
        }
    });
    toolbarItems.head_nav_link = function() {
        $("#head_nav").toggle();
        $("#head_nav_link").removeClass("selected");
    }
    ;
    $(document).click(function(event) {
        if ($(event.target).parents().index($("#head_nav")) == -1 && $("#head_nav_link").hasClass("selected")) {
            $("#head_nav").toggle();
            $("#head_nav_link").removeClass("selected");
        }
    });
    $("#head_settings_nav_device_link").navItem({
        "contentId": "settings_container",
        "childContent": "device_container",
        "refreshDataCall": function() {
            pollingHandler.poll();
        },
        "childContentDisplayCall": function() {
            refreshSettingsGeneralForms();
            $("#settings_nav_device_link").parent("li").addClass("selected").siblings().removeClass("selected");
        }
    });
    $("#head_settings_nav_device_link").click(function() {
        $("#head_nav").hide();
        $("#head_nav_link").removeClass("selected");
    });
});
var smartTestCanceled = false;
var pingInProgress = false;
var pingInterval = 10000;
var previous_reboot_state = "";
var switching_to_quick = false;
var factoryRestoreType = "";
var factoryRestoreInProgress = false;
var startPingDelay = 10000;
var rebootTimeOutMax = 600000;
var rebootTimeOutLongMax = 1200000;
var rebootStartTimeStamp = 0;
var rebootTimeout = rebootTimeOutMax;
var rebootInitHere = false;
var factoryRestoreStartTime = 0;
var factoryRestoreProgressCount = 0;
var factoryRestorePollInterval = 10000;
var smartTestPollInProgress = false;
var rebootReconnectTime = 35000;
$(document).ready(function() {
    $("#settings_nav_diagnostics").navItem({
        "containerId": "settings_content",
        "contentId": "diagnostics_container",
        "selectedClass": "selected",
        "refreshDataCall": function() {}
    });
    $("#diagnostics_tests_form").restForm({
        "useStubs": false,
        "onOffCheckboxOptions": {
            checkedLabel: "Short",
            uncheckedLabel: "Full"
        },
        "hideProcessingCallback": function() {
            if ($("#diagnostics_tests_form").find("#SettingDiagnosticsTestsValue").val() != "stop") {
                $("#diagnostics_tests_form").restForm("_hideProcessing", false, true);
            }
        },
        "beforeProcessForm": function() {
            if (!smartTestCanceled) {
                smartTestCanceled = false;
                showSmartTestProgress(true);
            }
        },
        "refreshDataCallback": function(data) {
            progressPercent = parseFloat(data.smart_test.percent_complete);
            if (data.smart_test.status.toLowerCase() == "inprogress") {
                showSmartTestProgress(true, progressPercent);
            } else {
                $("#diagnostic_test_in_progress").css("display", "none");
                $("#diagnostic_test_not_in_progress").css("display", "block");
                $("#settings_diagnostic_test_short_button").removeClass("button-selected");
                $("#settings_diagnostic_test_long_button").removeClass("button-selected");
                enableIdTag("#settings_diagnostic_test_short_button");
                enableIdTag("#settings_diagnostic_test_long_button");
                enableIdTag("#SettingDiagnosticsTestsValue");
            }
        }
    });
    $("#diagnostic_test_progress_form").restForm({
        "useStubs": false,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            if (data.smart_test.status.toLowerCase() != "inprogress") {
                finishSmartTest(data);
            } else {
                progressPercent = parseFloat(data.smart_test.percent_complete);
                $("#diagnostics_tests_progressbar").progressbar({
					value: progressPercent
				});
                $("#diagnostics_tests_progressbar_percentage").html(progressPercent + "%");
                setTimeout("processSmartTest();", 5000);
            }
        },
        "beforeProcessForm": function() {
            smartTestPollInProgress = true;
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            smartTestPollInProgress = false;
            $("#diagnostic_test_progress_form").restForm("processFormComplete", jqXHR, textStatus);
        }
    });
    $("#diagnostic_test_results2_form").restForm({
        "useStubs": false,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            displaySmartTestBadDrive(data);
        },
        "beforeProcessForm": function() {}
    });
    $("#factory_restore_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            $("#factory_restore_form").find("#FactoryRestoreValue").val(factoryRestoreType);
            factoryRestoreStartTime = new Date().getTime();
            $("#factory_restore_quick_wait_dialog").dialog("open");
            factoryRestoreProgressCount = 0;
            switching_to_quick = false;
            factoryRestoreInProgress = true;
        },
        "processFormSuccessCallback": function() {
            $("#factory_restore_form").restForm("processFormSuccess");
            resetGlobalVariables();
            stopPolling();
            finishFactoryRestore();
        },
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "refreshDataCallback": function(data) {},
        "processFormErrorCallback": function(request, status, error) {
            factoryRestoreInProgress = false;
            $("#factory_restore_quick_wait_dialog").dialog("close");
            $("#settings_factory_restore_system_button").removeClass("button-selected");
            $("#settings_factory_restore_quick_button").removeClass("button-selected");
            $("#factory_restore_form").restForm("processFormError", request, status, error);
        }
    });
    $("#factory_restore_progress_form").restForm({
        "useStubs": false,
        "timeout": ajaxTimeoutPolling,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            if (switching_to_quick) {
                return;
            }
            var progressPercent = 0;
            if (data != null  && data.system_factory_restore != null ) {
                if (data.system_factory_restore.status.toLowerCase() == "complete") {
                    factoryRestoreInProgress = false;
                    finishFactoryRestore();
                    return;
                }
                if (data.system_factory_restore.percent != "") {
                    progressPercent = parseInt(data.system_factory_restore.percent);
                }
            }
            $(".factory_restore_progressbar").progressbar("value", progressPercent);
            $(".format_restore_progressbar_percentage").text(progressPercent + "%");
            setTimeout("processFactoryRestore();", factoryRestorePollInterval);
        },
        "beforeProcessForm": function() {
            if (factoryRestoreStartTime == 0) {
                factoryRestoreStartTime = new Date().getTime();
            }
        },
        "processFormErrorCallback": function(request, status, error) {
            if (status == "timeout" || status == "error" || status == "abort") {
                factoryRestoreProgressCount++;
                if (factoryRestoreProgressCount < 3) {
                    setTimeout("processFactoryRestore();", factoryRestorePollInterval);
                } else {
                    $("#factory_restore_progressbar_container").hide();
                    $("#factory_restore_progressbar_elapsed_time_container").show();
                    tickElapsedTime("#factory_restore_elapsed_time", factoryRestoreStartTime);
                    disableIdTag("#factory_restore_full_wait_switch");
                    factoryRestorePingServer();
                }
            } else {
                if (factoryRestoreInProgress) {
                    factoryRestoreInProgress = false;
                    finishFactoryRestore();
                }
            }
        }
    });
    $("#ping_device_form").restForm({
        "useStubs": false,
        "timeout": ajaxTimeoutPolling,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            pingInProgress = false;
        },
        "setDefaultFormDataCallback": function(data) {
            var status = data.system_state.status;
            if ((status == "ready") && ((previous_reboot_state == "initializing") || (previous_reboot_state == "rebooting"))) {
                previous_reboot_state = "";
                window.location = redirectURL;
                return;
            } else {
                if (status == "initializing") {
                    previous_reboot_state = "initializing";
                    $(".device_rebooting_text").hide();
                    $(".device_initializing_text").show();
                }
            }
            var rebootCurrentTimeStamp = new Date().getTime();
            if ((rebootCurrentTimeStamp - rebootStartTimeStamp) > rebootTimeout) {
                if (status == "ready") {
                    previous_reboot_state = "";
                    window.location = redirectURL;
                } else {
                    showRebootTimeout();
                }
                return;
            }
            setTimeout("pingServer();", pingInterval);
        },
        "beforeProcessForm": function() {},
        "processFormErrorCallback": function() {
            previous_reboot_state = "rebooting";
            var rebootCurrentTimeStamp = new Date().getTime();
            if ((rebootCurrentTimeStamp - rebootStartTimeStamp) > rebootTimeout) {
                showRebootTimeout();
                return;
            }
            if ((rebootCurrentTimeStamp - rebootStartTimeStamp) > rebootReconnectTime) {
                showRebootReconnectNetwork();
            }
            setTimeout("pingServer();", pingInterval);
        }
    });
    $("#system_configuration_form").restForm();
    $("#factory_restore_quick_wait_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_factory_restore",
        title: '<div class="wizard_dialog_title">' + $("#factory_restore_quick_wait_dialog").attr("title") + "</div>"
    });
    $("#reboot_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: true,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#reboot_dialog").attr("title") + "</div>"
    });
    $("#factory_restore_confirmation_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 600,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_factory_restore",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#factory_restore_confirmation_dialog").attr("title") + "</div>"
    });
    $("#factory_restore_confirmation_close_button").click(function() {
        $("#settings_factory_restore_system_button").removeClass("button-selected");
        $("#settings_factory_restore_quick_button").removeClass("button-selected");
        $("#factory_restore_confirmation_dialog").dialog("close");
    });
    $("#factory_restore_confirmation_ok_button").click(function() {
        $("#factory_restore_confirmation_dialog").dialog("close");
        $("#factory_restore_form").submit();
    });
    $("#reboot_confirmation").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#reboot_confirmation").attr("title") + "</div>"
    });
    $("#reboot_confirmation_close_button").click(function() {
        $("#reboot_confirmation").dialog("close");
    });
    $("#reboot_confirmation_ok_button").click(function() {
        $("#reboot_confirmation").dialog("close");
        rebootInitHere = true;
        $("#reconnect_network_dialog").closest(".ui-draggable").css({
			display: "",
			visibility: "hidden",
			bottom: 1
		});
        doReboot("generic");
    });
    $("#shutdown_confirmation").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#shutdown_confirmation").attr("title") + "</div>"
    });
    $("#shutdown_confirmation_close_button").click(function() {
        $("#shutdown_confirmation").dialog("close");
    });
    $("#shutdown_confirmation_ok_button").click(function() {
        $("#shutdown_confirmation").dialog("close");
        doShutdown();
    });
    $("#shutting_down").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#shutting_down").attr("title") + "</div>"
    });
    $("#shutting_down_close_button").click(function() {
        $("#shutting_down").dialog("close");
    });
    $("#diagnostic_results").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#diagnostic_results").attr("title") + "</div>"
    });
    $("#diagnostic_results_close_button").click(function() {
        $("#diagnostic_results").dialog("close");
    });
    $("#supportLink").live("click", function() {
        $("#diagnostic_results").dialog("close");
    });
});
$(function() {
    $("#reboot_btn").live("click", function() {
        $("#reboot_confirmation").dialog("open");
    });
    $("#shutdown_btn").live("click", function() {
        $("#shutdown_confirmation").dialog("open");
    });
    $("#settings_factory_restore_system_button").click(function() {
        $("#factory_restore_confirmation_dialog").dialog("option", "title", '<div class="wizard_dialog_title">' + dictionaryList["system_only_factory_restore_title"] + "</div>");
        $(".factory_restore_desc").hide();
        $("#system_only_factory_restore_desc").show();
        $("#settings_factory_restore_quick_button").removeClass("button-selected");
        $(this).addClass("button-selected");
        factoryRestoreType = "systemOnly";
        $("#factory_restore_confirmation_dialog").dialog("open");
    });
    $("#settings_factory_restore_quick_button").click(function() {
        $("#factory_restore_confirmation_dialog").dialog("option", "title", '<div class="wizard_dialog_title">' + dictionaryList["quick_factory_restore_title"] + "</div>");
        $(".factory_restore_desc").hide();
        $("#quick_factory_restore_desc").show();
        $("#settings_factory_restore_system_button").removeClass("button-selected");
        $(this).addClass("button-selected");
        factoryRestoreType = "format";
        $("#factory_restore_confirmation_dialog").dialog("open");
    });
    $("#cancel_diagnostics_tests_button").live("click", function() {
        $("#diagnostics_tests_form").find("#SettingDiagnosticsTestsValue").val("stop");
        smartTestCanceled = true;
        $("#diagnostics_tests_form").submit();
    });
    $("#settings_diagnostic_test_short_button").click(function() {
        $("#settings_diagnostic_test_long_button").removeClass("button-selected");
        $(this).addClass("button-selected");
        $("#diagnostics_tests_form").find("#SettingDiagnosticsTestsValue").val("start_short");
        $("#diagnostics_tests_form").submit();
    });
    $("#settings_diagnostic_test_long_button").click(function() {
        $("#settings_diagnostic_test_short_button").removeClass("button-selected");
        $(this).addClass("button-selected");
        $("#diagnostics_tests_form").find("#SettingDiagnosticsTestsValue").val("start_long");
        $("#diagnostics_tests_form").submit();
    });
    $("#SettingDiagnosticsSSHToggle").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#ssh_confirmation").dialog("open");
            return;
        } else {
            $("#SettingDiagnosticsSSHValue").val("false");
            $("#ssh_password_configer").css("display","none");
        }
        $("#ssh_form").submit();
    });
    $("#view_resource").live("click", function() {
        var resourcelink = $("#support_resources_select option:selected").val();
        window.open(resourcelink, "_target");
        return false;
    });
});
function showSmartTestProgress(startTest, progressPercent) {
    if (startTest) {
        $("#diagnostic_test_in_progress").css("display", "block");
        $("#diagnostic_test_not_in_progress").css("display", "none");

        if(progressPercent) {
        	$("#diagnostics_tests_progressbar").progressbar({
				value: progressPercent
			});
        	$("#diagnostics_tests_progressbar_percentage").html(progressPercent + "%");
        } else {
        	//$("#diagnostics_tests_progressbar").progressbar("value", 0);
			$("#diagnostics_tests_progressbar").progressbar({
				value: 0
			});
        	$("#diagnostics_tests_progressbar_percentage").html("0%")
        }
    }
    setTimeout("processSmartTest();", 5000);
}
function processFactoryRestore() {
    $("#factory_restore_progress_form").submit();
}
function processSmartTest() {
    if (smartTestPollInProgress) {
        return;
    }
    $("#diagnostic_test_progress_form").submit();
}
function finishSmartTest(data) {
    $("#diagnostic_test_in_progress").css("display", "none");
    $("#diagnostic_test_not_in_progress").css("display", "block");
    $("#settings_diagnostic_test_short_button").removeClass("button-selected");
    $("#settings_diagnostic_test_long_button").removeClass("button-selected");
    $("#diagnostic_good").css("display", "none");
    $("#diagnostic_not_complete").css("display", "none");
    $("#diagnostic_aborted").css("display", "none");
    $("#diagnostic_unknown").css("display", "none");
    $("#diagnostic_bad").css("display", "none");
    hideLoading();
    var status = data.smart_test.status.toLowerCase();
    if (status == "bad") {
        $("#diagnostic_test_results2_form").submit();
    } else {
        $("#diagnostic_" + status).css("display", "block");
        $("#diagnostic_results").dialog("open");
    }
    smartTestCanceled = false;
    enableIdTag("#settings_diagnostic_test_short_button");
    enableIdTag("#settings_diagnostic_test_long_button");
    enableIdTag("#SettingDiagnosticsTestsValue");
}
function displaySmartTestBadDrive(data) {
    diagnostic_bad_msg = "";
    for (var idx = 0; idx < data.smart_test2.internal_drive.length; idx++) {
        if (data.smart_test2.internal_drive[idx].status == "bad") {
            if (data.smart_test2.internal_drive[idx].location == "UNDEFINED") {
                diagnostic_bad_msg = dictionaryList["labeldrivetxt"];
            } else {
                if (diagnostic_bad_msg != "") {
                    diagnostic_bad_msg += ", ";
                }
                diagnostic_bad_msg += dictionaryList["labeldrivetxt"] + " " + data.smart_test2.internal_drive[idx].location;
            }
        }
    }
    diagnostic_bad_msg += " " + dictionaryList["labelfaileddiagtesttxt"];
    $("#diagnostic_bad_msg").html(diagnostic_bad_msg);
    $("#diagnostic_bad").css("display", "block");
    $("#diagnostic_results").dialog("open");
}
function finishFactoryRestore() {
    $("#factory_restore_quick_wait_dialog").dialog("close");
    $("#reconnect_network_dialog").closest(".ui-draggable").css({
		display: "",
		visibility: "hidden",
		bottom: 1
	});
    redirectAfterFactoryRestore();
    doReboot(factoryRestoreType);
}
function pingServer() {
    if (pingInProgress) {
        return;
    }
    pingInProgress = true;
    $("#ping_device_form").submit();
}
function setRebootValues(label_code) {
    $(".device_initializing_text").hide();
    $(".device_rebooting_text").show();
    $(".reboot_label").hide();
    $("#reboot_" + label_code).show();
    suppressErrors = true;
    dateStamp = new Date();
    rebootStartTimeStamp = dateStamp.getTime();
    previous_reboot_state = "";
    stopPolling();
}
function showRebootTimeout() {
    $("#reconnect_network_dialog").dialog("close");
    suppressErrors = false;
    if (errorsList["avatar_reboot_no_return_orig"] == undefined) {
        errorsList["avatar_reboot_no_return_orig"] = errorsList["avatar_reboot_no_return"];
    } else {
        errorsList["avatar_reboot_no_return"] = errorsList["avatar_reboot_no_return_orig"];
    }
    var ssidName = (gconnectingBand == 5) ? gSSIDNameHighBand : gSSIDName;
    var newmsg = errorsList["avatar_reboot_no_return"].replace("{0}", '<b><i>' + ssidName + '</i></b>');
    errorsList["avatar_reboot_no_return"] = newmsg;
    showError("avatar_reboot_no_return");
}
function showRebootReconnectNetwork() {
    if ($("#reconnect_network_dialog").dialog("isOpen") == false) {
        $(".device_initializing_text").hide();
        $(".device_rebooting_text").hide();
        $("#reboot_dialog").dialog("close");
        $("#reconnect_network_dialog").dialog("open");
    }
}
function disableLoader() {
    hideLoading();
}
function downloadInIframe(url) {
    var downloadToken = Math.floor(Math.random() * 1000);
    createCookie("download_system_report_token", downloadToken);
    var iframe = '<iframe src="' + url + '" style="display:none;" />';
    $("body").append(iframe);
    fileDownloadCheckTimer = window.setInterval(function() {
        var cookieValue = readCookie("download_system_report_token");
        if (cookieValue == downloadToken) {
            disableLoader();
            eraseCookie("download_system_report_token");
            window.clearInterval(fileDownloadCheckTimer);
        }
    }, 500);
}
function redirectAfterFactoryRestore() {
    var DeviceUrl;
    switch (gModelNumber) {
    case "AV1W":
    case "WDBLJT":
    case "WDBK8Z":
    case "WDBDAF":
    default:
        DeviceUrl = "http://MyPassport";
        break;
    }
    if (navigator.appVersion.indexOf("Mac") != -1) {
        redirectURL = DeviceUrl + ".local";
    } else {
        redirectURL = DeviceUrl;
    }
}
function getDeviceNameURL(deviceName) {
    if (navigator.appVersion.indexOf("Mac") != -1) {
        return "http://" + deviceName + ".local";
    } else {
        return "http://" + deviceName;
    }
}
function doReboot(label_code) {
    rebootStartTimeStamp = new Date().getTime();
    $(".reboot_reconnect_msg").hide();
    switch (label_code) {
    case "systemOnly":
    case "format":
    	gRestoreReconnectFlag = true;
        break;
    case "update":
        rebootInitHere = false;
    case "generic":
        break;
    default:
        break;
    }
    setRebootValues(label_code);
    if (rebootInitHere == true) {
        displayLoading();
        $.ajaxAPI({
            "url": "shutdown",
            "type": "PUT",
            "data": {
                "state": "reboot"
            },
            "timeout": ajaxTimeout,
            "error": function(request, status, error) {
                suppressErrors = false;
                processAndDisplayError(request.responseText, "put_shutdown_reboot", request.status);
            },
            "success": function(data) {
                $("#reboot_dialog").dialog("open");
                stopPolling();
                setTimeout("pingServer();", startPingDelay);
            },
            "complete": function(jqXHR, textStatus) {
                hideLoading();
            }
        });
        rebootInitHere = false;
    } else {
        $("#reboot_dialog").dialog("open");
        setTimeout("pingServer();", startPingDelay);
    }
}
function doShutdown() {
    displayLoading();
    $.ajaxAPI({
        "url": "shutdown",
        "type": "PUT",
        "timeout": ajaxTimeout,
        "data": {
            "state": "halt"
        },
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "put_shutdown_halt", request.status);
        },
        "success": function(data) {
            $("#shutting_down").dialog("open");
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
var networkModeIsStatic = false;
var savingNetworkModeData = false;
$(document).ready(function() {
    $("#settings_nav_network_settings").navItem({
        "containerId": "settings_content",
        "contentId": "network_container",
        "selectedClass": "selected",
        "refreshDataCall": function() {
            $("#network_ftp_form").restForm("refreshForm");
            $("#network_lan_configuration_form").restForm("refreshForm");
            $("#network_workgroup_form").restForm("refreshForm");
            $("#ssh_form").restForm("refreshForm");
            $("#network_config_mac_address").text(gMacAddress);
            $("#network_config_ip_address").text(gIPAddress);
        }
    });
    $("#network_workgroup_form").restForm({
        "refreshDataCallback": function(data) {
            if (data != null  && data.network_workgroup != null ) {
                $("#SettingWorkgroupName").val(data.network_workgroup.workname);
                $("#SettingWorkgroupName")[0].defaultValue = data.network_workgroup.workname;
            }
        },
        "validateFormCallback": function() {
            $("#network_workgroup_form").restForm("_validateForm");
            return $("#network_workgroup_form").data("validForm");
        }
    });
    $("#ssh_confirmation_form").restForm();
    $("#SettingsSshIAgreeToggle_form").restForm();
    $("#SettingsSshIAgreeToggle").click(function() {
        if ($(this).is(":checked")) {
            $(".sshOkButton").attr("disabled", true);
            $(".sshOkButton").addClass("ui-state-disabled");
            $("#SshPass_section").css("display", "none");
        } else {
            $(".sshOkButton").attr("disabled", false);
            $(".sshOkButton").removeClass("ui-state-disabled");
            $("#SshPass_section").css("display", "block");
        }
    });
    $("#network_ftp_form").restForm({
        "refreshDataCallback": function(data) {
            if (data.network_services_configuration.enable_ftp.toLowerCase() == "true") {
                $("#network_ftp_form").find("#SettingNetworkFtpToggle").attr("checked", true);
            } else {
                $("#network_ftp_form").find("#SettingNetworkFtpToggle").attr("checked", false);
            }
        }
    });
});
$(function() {
    $("#SettingNetworkFtpToggle").bind("toggle", function(event) {
        if ($(this).is(":checked")) {
            $("#network_enable_ftp_value").val("true");
        } else {
            $("#network_enable_ftp_value").val("false");
        }
        $("#network_ftp_form").submit();
    });
});
function isIpOrHostname(val) {
    h = new RegExp("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$");
    ip = new RegExp("^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]).){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$");
    return ip.test(val) || h.test(val);
}
function isHostname(val) {
    h = new RegExp("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$");
    return h.test(val);
}
function validateHostNameOrIP(val, iptype) {
    var validCharStr1 = "1234567890.";
    var validCharStr2 = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_-.";
    var isHostName = true;
    var isNumber = true;
    for (var i = 0; i < val.length; i++) {
        if (validCharStr1.indexOf(val.charAt(i)) == -1) {
            isNumber = false;
            break;
        }
    }
    for (var j = 0; j < val.length; j++) {
        if (validCharStr2.indexOf(val.charAt(j)) == -1) {
            isHostName = false;
            break;
        }
    }
    if ((isHostName === false) && (isNumber === false)) {
        return 1000;
    }
    if (isNumber === true) {
        return validateIP(val, iptype);
    } else {
        if (isHostName === true) {
            h = new RegExp("^(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]*[a-zA-Z0-9]).)*([A-Za-z]|[A-Za-z][A-Za-z0-9-]*[A-Za-z0-9])$");
            if (h.test(val) === true) {
                return 0;
            } else {
                return 1000;
            }
        }
    }
    return 0;
}
function validateIP(strIP, iptype) {
    if (trimString(strIP).length === 0) {
        return 1001;
    }
    var ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
    var ipArray = strIP.match(ipPattern);
    if (ipArray === null ) {
        return 1000;
    } else {
        if ((strIP == "0.0.0.0") || (strIP == "255.255.255.255")) {
            return 1002;
        } else {
            if (iptype == "NETMASK") {
                return 0;
            } else {
                if (ipArray[1] === "0") {
                    return 1003;
                } else {
                    if (ipArray[1] == 127) {
                        return 1004;
                    } else {
                        if (ipArray[1] == 169 && ipArray[2] == 254) {
                            return 1005;
                        } else {
                            if (ipArray[1] == 192 && ipArray[2] == 88 && ipArray[3] == 99) {
                                return 1006;
                            } else {
                                if (ipArray[1] >= 224 && ipArray[1] <= 239) {
                                    return 1007;
                                } else {
                                    if (ipArray[1] >= 240 && ipArray[1] <= 255) {
                                        return 1008;
                                    } else {
                                        for (i = 1; i < 5; i++) {
                                            ipSegment = ipArray[i];
                                            if (ipSegment > 255) {
                                                return 1000;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    return 0;
}
var updateUploader;
var updateUploaderKeepGoing;
var updateUnexpectedErrorMax = 5;
var updateUnexpectedErrorCounter = 0;
var updateProgressPoll = 2500;
var processUpdatePollTimeout = 60000;
var firmwareUpgradeStartTime = 0;
var firmwareUpgradeUnknownStartTime = 0;
var firmwareUpgradeTimeout = 600000;
var minFreeSpaceForUpdate_MB = 256;
var minBatteryPercentForUpgrade = 50;
var useStubUpdates = false;
var ext;

$(document).ready(function() {
    initUpdates();
    $("#head_settings_nav_update_link").navItem({
        "contentId": "firmware_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_update_link");
            if (gIsMobile) {
                disableIdTag("#manual_update_btn");
            }
            $("#battery_status_form").restForm("refreshForm");
            $("#firmware_info_form").restForm("refreshForm");
        }
    });
    $("#head_settings_nav_update_link").click(function() {
        $("#head_nav").hide();
        $("#head_nav_link").removeClass("selected");
    });
    $("#setup_auto_firmware_update_form").restForm({
        "refreshDataCallback": function(data) {
            if (data.firmware_update_configuration.auto_install == "true") {
                $("#setup_enable_auto_update_field").val("true");
                $("#setup_enable_auto_update_checkbox").attr("checked", true);
            } else {
                $("#setup_enable_auto_update_field").val("false");
                $("#setup_enable_auto_update_checkbox").attr("checked", false);
            }
        },
        "beforeProcessForm": function() {
            if (!$("#setup_enable_auto_update_checkbox").is(":checked")) {
                $("#setup_enable_auto_update_field").val("true");
            } else {
                $("#setup_enable_auto_update_field").val("false");
            }
        }
    });
    $("#firmware_info_form").restForm({
        "useStubs": useStubUpdates,
        "refreshDataCallback": function(data) {
            $("#firmware_info_form").restForm("_refreshData", data);
            if (data != null  && data.firmware_info != null ) {
                var currentFirmwareName = data.firmware_info.current_firmware["package"].name;
                var currentFirmwareVersion = data.firmware_info.current_firmware["package"].version;
                $("#settingUpdateCurrentFirmwareVersion").html(currentFirmwareName + " v" + currentFirmwareVersion);
                if (data.firmware_info.current_firmware["package"].last_upgrade_time != "") {
                    $("#settingUpdateLastUpdateTime").html(getTimeStamp(data.firmware_info.current_firmware["package"].last_upgrade_time));
                    localizeTimeStamp("#settingUpdateLastUpdateTime");
                } else {
                    $("#settingUpdateLastUpdateTime").html(dictionaryList["nonetxt"]);
                }
                if (data.firmware_info.upgrades.available.toLowerCase() == "true") {
                    if (data.firmware_info.upgrades.upgrade.version != null ) {
                        addFirmwareAvailable(data.firmware_info.upgrades.upgrade, currentFirmwareName, 0);
                    } else {
                        for (var i in data.firmware_info.upgrades.upgrade) {
                            addFirmwareAvailable(data.firmware_info.upgrades.upgrade[i], currentFirmwareName, i);
                        }
                    }
                    if (data.firmware_info.upgrades.upgrade.version != null ) {
                        updateFirmwareAvailable(data.firmware_info.upgrades.upgrade, currentFirmwareName);
                    }
                    $(".check_for_update_container").hide();
                    $(".update_now_container").show();
                } else {
                    $(".check_for_update_container").show();
                    $(".update_now_container").hide();
                }
            }
        }
    });
    $("#message_acceptance_form").restForm();
    $("#confirm_upgrade_firmware_message_acceptance_form").restForm();
    $("#firmware_update_list_form").restForm();
    $("#confirm_update").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#confirm_update").attr("title") + "</div>"
    });
    $("#setup_enable_auto_update_checkbox").click(function() {
        $("#setup_auto_firmware_update_form").submit();
    });
    $("#confirm_update_cancel_button").click(function() {
        $("#confirm_update").dialog("close");
    });
	
	$("#firmware_file").change(function() {
		ext = this.value.split('.').pop();
		$("#confirm_update").dialog("open");
	});
	
	$("#upload_file_form").submit(function(e) {
		e.preventDefault();
		
		$(this).ajaxSubmit({
			beforeSend: function(formData, jqForm, options) {
			},				
			uploadProgress: function(event, position, total, percentComplete) {
				$("#update_file_progress_percent_label").html("(" + percentComplete + "%)");
				$("#upload_file_progress_bar").progressbar({ value: percentComplete });
			},
			success: function(responseText, statusText, xhr, $form) {
				$("#update_file_progress_percent_label").html("100%");
				$("#upload_file_progress_bar").progressbar({ value: 100 });
			},
			complete: function(xhr) {
				$("#manual_update_uploading").dialog("close");
				
				// remove the <pre>/</pre> tag from ie 8/9
				if (isOlderThanIE(10) == true) {
					var s1 = xhr.responseText.replace('<pre>', '');
                    var s2 = s1.replace('</pre>', '');
					xhr.responseText = s2;
				}
				
				var jsonResponse = JSON.parse(xhr.responseText);
				if (jsonResponse != null  && jsonResponse.firmware_update != null ) {
					if (jsonResponse.firmware_update.status != null  && jsonResponse.firmware_update.status.toLowerCase() == "success") {
						doManualUpdate();
					} else {
						if (jsonResponse.firmware_update.error_code != null ) {
							showError(jsonResponse.firmware_update.error_code + " " + jsonResponse.firmware_update.error_message);
						} else {
							showError("firmware update failed");
						}
					}
				} else {
					showError("firmware update failed");
				}				
			}
		});
			
		// !!! Important !!! 
		// always return false to prevent standard browser submit and page navigation 
		return false;
	});
	
    $("#confirm_update_ok_button").click(function() {
		var upload_input = $("#firmware_file");
        $("#confirm_update").dialog("close");
		
		if (!ext || ext.match("bin") == null) {
			upload_input.replaceWith( upload_input = upload_input.clone( true ) );
			showError("invalid_firmware_file_type");
			return false;
		}

		checkBatteryStatus(function(isLow) {
			if (isLow == true) {
				upload_input.replaceWith( upload_input = upload_input.clone( true ) );
				showError("low_battery_for_upgrade");
				return false;
			} else {
				$("#manual_update_uploading").dialog("open");
				if (isOlderThanIE(10) == false) {
					$("#update_file_progress_percent_label").html("(0%)");
					$("#upload_file_progress_bar").progressbar({ value: 0 });
				}
				$("#upload_file_form").submit();
			}
		});
    });

    $("#manual_update_uploading").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        closeOnEscape: false,
        title: '<div class="wizard_dialog_title">' + $("#manual_update_uploading").attr("title") + "</div>"
    });
    $("#update_progress").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        closeOnEscape: false,
        //title: '<div class="wizard_dialog_title">' + $("#update_progress").attr("title") + "</div>"
        title: '<div id="update_progress_title" class="wizard_dialog_title"></div>'
    });
    $("#confirm_upgrade_firmware_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#confirm_upgrade_firmware_dialog").attr("title") + "</div>"
    });
    $("#confirm_upgrade_firmware_cancel_button").click(function() {
        $("#confirm_upgrade_firmware_dialog").dialog("close");
    });
    $("#confirm_upgrade_firmware_ok_button").click(function() {
        $("#confirm_upgrade_firmware_dialog").dialog("close");
        checkUpgradeRequirements();
    });
    $("#confirm_upgrade_firmware_message_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#confirm_upgrade_firmware_message_dialog").attr("title") + "</div>"
    });
    $("#confirm_upgrade_firmware_message_dialog_cancel_button").click(function() {
        $("#confirm_upgrade_firmware_message_dialog").dialog("close");
    });
    $("#confirm_upgrade_firmware_message_dialog_next_button").click(function() {
        $("#confirm_upgrade_firmware_message_dialog").dialog("close");
        $("#confirm_upgrade_firmware_dialog").dialog("open");
    });
    $("#firmware_up_to_date_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#firmware_up_to_date_dialog").attr("title") + "</div>"
    });
    $("#firmware_up_to_date_dialog_ok_button").click(function() {
        $("#firmware_up_to_date_dialog").dialog("close");
    });
    $("#new_firmware_available_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_firmware",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#new_firmware_available_dialog").attr("title") + "</div>"
    });
    $("#new_firmware_available_dialog_save_button").click(function() {
        $("#new_firmware_available_dialog").dialog("close");
        checkUpgradeRequirements();
    });
    $("#new_firmware_available_dialog_next_button").click(function() {
        $("#new_firmware_available_dialog").dialog("close");
        $("#confirm_upgrade_firmware_dialog").dialog("open");
    });
    $("#new_firmware_available_dialog_cancel_button").click(function() {
        $("#new_firmware_available_dialog").dialog("close");
    });
});
$(function() {
    $(".begin_update_available_btn").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            var firmwareMessage = $(this).parent().find(".settingUpdateFirmwareNewMessage").html();
            if (firmwareMessage != "") {
                var firmwareName = $(this).parent().find(".settingUpdateFirmwareNewVersion").html();
                var firmwareImage = $(this).parent().find(".settingUpdateFirmwareNewImage").html();
                var firmwareReleaseNotes = $(this).parent().find(".settingUpdateFirmwareNewReleaseNotes").attr("href");
                updateConfirmFirmwareDialogMessage(firmwareName, firmwareMessage, firmwareReleaseNotes);
                $("#firmware_image").val(firmwareImage);
                if ($("#confirm_upgrade_firmware_message_acceptance_input").is(":checked")) {
                    $("#confirm_upgrade_firmware_message_acceptance_input").attr("checked", false);
                    disableIdTag("#confirm_upgrade_firmware_message_dialog_next_button");
                }
                $("#confirm_upgrade_firmware_message_dialog").dialog("open");
            } else {
                $("#confirm_upgrade_firmware_dialog").dialog("open");
            }
        }
    });
    $(".check_for_update_btn").live("click", function() {
        checkForFirmwareAvailable();
    });
    $(".firmware_selection_input").live("click", function(e) {
        var upgradeImage = $(e.target).val();
        var upgradeMessage = $(e.target).attr("rel");
        $("#firmware_image").val(upgradeImage);
        $(".firmware_selection_input").attr("checked", false);
        $(e.target).attr("checked", true);
        updateFirmwareDialogMessage(upgradeMessage);
    });
    $("#message_acceptance_input").click(function() {
        if ($("#message_acceptance_input").is(":checked")) {
            disableIdTag("#new_firmware_available_dialog_next_button");
        } else {
            enableIdTag("#new_firmware_available_dialog_next_button");
        }
    });
    $("#confirm_upgrade_firmware_message_acceptance_input").click(function() {
        if ($("#confirm_upgrade_firmware_message_acceptance_input").is(":checked")) {
            disableIdTag("#confirm_upgrade_firmware_message_dialog_next_button");
        } else {
            enableIdTag("#confirm_upgrade_firmware_message_dialog_next_button");
        }
    });
});
function initUpdates() {
    if (useStubUpdates) {
        $("#firmware_info_form").attr("action", "firmware_info.php");
    } else {
        $("#firmware_info_form").attr("action", $("#firmware_info_default_form").attr("action"));
    }
    disableIdTag("#disabled_update_btn");
}
function addFirmwareAvailable(data, firmwareName, idx) {}
function updateFirmwareAvailable(data, firmwareName) {
    var firmwareVersion = data.version;
    var firmwareReleaseNotes = data.releasenotes;
    var firmwareMessage = data.message;
    var firmwareImage = data.image;
    $(".settingUpdateFirmwareNewVersion").html(firmwareName + "&nbsp;v" + firmwareVersion);
    $(".settingUpdateFirmwareNewReleaseNotes").attr("href", firmwareReleaseNotes);
    $(".settingUpdateFirmwareNewMessage").text(firmwareMessage);
    $(".settingUpdateFirmwareNewimage").text(firmwareImage);
}
function resetFirmwareDialog() {
    $("#new_firmware_available_dialog_next_button").hide();
    $("#new_firmware_available_dialog_save_button").show();
    $("#new_firmware_available_dialog").dialog("option", "width", 500);
    $("#new_firmware_available_dialog").dialog("option", "height", "auto");
    $("#message_iframe").attr("height", "297px");
    $("#confirm_upgrade_firmware_dialog").dialog("option", "width", 500);
    $("#confirm_upgrade_firmware_dialog").dialog("option", "height", "auto");
    $("#install_and_reboot_button").show();
    $("#firmware_update_message").hide();
    $("#firmware_update_message_acceptance").hide();
    if ($("#message_acceptance_input").is(":checked")) {
        $("#message_acceptance_input").attr("checked", false);
        disableIdTag("#new_firmware_available_dialog_next_button");
    }
}
function updateFirmwareDialogMessage(upgradeMessage) {
    if (upgradeMessage !== "") {
        disableIdTag("#new_firmware_available_dialog_next_button");
        $("#new_firmware_available_dialog_next_button").show();
        $("#new_firmware_available_dialog_save_button").hide();
        browserWidth = getBrowserWidth();
        browserHeight = getBrowserHeight();
        if (browserWidth > 720) {
            FWEulaWidth = 720;
        } else {
            FWEulaWidth = browserWidth;
        }
        if (browserHeight > 700) {
            FWEulaHeight = "auto";
        } else {
            FWEulaHeight = browserHeight - 15;
            if (FWEulaHeight > 250) {
                iframeHeight = FWEulaHeight - 240;
                $("#message_iframe").attr("height", iframeHeight.toString() + "px");
            }
        }
        $("#new_firmware_available_dialog").dialog("option", "width", FWEulaWidth);
        $("#new_firmware_available_dialog").dialog("option", "height", FWEulaHeight);
        $("#message_iframe").attr("src", upgradeMessage);
        $("#install_and_reboot_button").hide();
        $("#firmware_update_message").show();
        $("#firmware_update_message_acceptance").show();
    } else {
        resetFirmwareDialog();
    }
}
function updateConfirmFirmwareDialogMessage(firmwareName, firmwareMessage, firmwareReleaseNotes) {
    disableIdTag("#confirm_upgrade_firmware_message_dialog_next_button");
    $("#confirm_upgrade_firmware_message_dialog_cancel_button").show();
    $("#confirm_upgrade_firmware_message_dialog_save_button").hide();
    $("#confirm_upgrade_firmware_message_name").html(firmwareName);
    $("#confirm_upgrade_firmware_message_releasenotes").attr("href", firmwareReleaseNotes);
    $("#confirm_upgrade_firmware_message_iframe").attr("src", firmwareMessage);
    $("#firmware_update_message").show();
    $("#firmware_update_message_acceptance").show();
}
function updateFirmwareAvailableDialog(data) {
    $("#firmware_update_list .firmware_update_item:first").siblings().each(function() {
        $(this).remove();
    });
    if (data.upgrades != null  && data.upgrades.upgrade != null ) {
        resetFirmwareDialog();
        var firmwareName = data.current_firmware["package"].name;
        if (data.upgrades.upgrade.version != null ) {
            populateFirmwareList(data.upgrades.upgrade, firmwareName, 0, false);
        } else {
            for (var i in data.upgrades.upgrade) {
                populateFirmwareList(data.upgrades.upgrade[i], firmwareName, i, true);
            }
        }
    }
    $("#new_firmware_available_dialog").dialog("open");
}
function populateFirmwareList(data, firmwareName, idx, multipleFirmware) {
    var releasenotesTxt = dictionaryList["releasenotestxt"];
    bar = $("#firmware_update_list").find(".firmware_update_item:first").clone();
    bar.show();
    bar.find(".firmware_selection_input").attr("value", data.image);
    bar.find(".firmware_selection_input").attr("rel", data.message);
    bar.find(".firmware_update_name").html(firmwareName);
    bar.find(".firmware_update_version").html(data.version);
    if (idx == 0) {
        bar.find(".firmware_selection_input").attr("checked", "checked");
        $("#firmware_image").val(data.image);
        if (data.message.toString() !== "") {
            updateFirmwareDialogMessage(data.message);
        }
    }
    brTxt = "<br>";
    if (multipleFirmware == true) {
        bar.find(".firmware_selection_input").show();
        brTxt = "";
    }
    bar.find(".firmware_releasenotes").html(brTxt + '<a href="' + data.releasenotes + '" target="_blank" class="internet_required">' + releasenotesTxt + "</a>");
    if (data.confirmation != null ) {
        bar.find(".firmware_confirmation").html(data.confirmation);
    }
    bar.find(".firmware_confirmation").attr("rel", data.message);
    bar.appendTo("#firmware_update_list");
}
function checkForFirmwareInstall() {
    displayLoading();
    $.ajaxAPI({
        "url": "battery_status",
        "success": function(data) {
            if (data != null  && data.battery_status != null ) {
                if ((data.battery_status.state == "charging") || (parseInt(data.battery_status.percent_remaining) >= minBatteryPercentForUpgrade)) {
                    $(".begin_update_available_btn").click();
                } else {
                    showError("low_battery_for_upgrade");
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function checkForFirmwareAvailable() {
    displayLoading(dictionaryList["retrievingtxt"]);
    $.ajaxAPI({
        "url": "internet_access",
        "type": "GET",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "get_internet_access", request.status);
        },
        "success": function(data) {
            if ((data != null ) && (data.internet_access != null )) {
                if (data.internet_access.connectivity.toLowerCase() != "true") {
                    $("#no_internet_access_dialog").dialog("open");
                    return;
                }
            }
            checkForFirmwareAvailableOnServer();
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function checkForFirmwareAvailableOnServer() {
    var urlPrefix = apiUrlPrefix;
    var url = "firmware_info";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    $.ajaxAPI({
        "urlPrefix": urlPrefix,
        "url": url,
        "type": "PUT",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "put_firmware_info", request.status);
        },
        "success": function(data) {
            get_firmware_info_and_popup();
        }
    });
}
function checkUpgradeRequirements() {
    var capacity_MB = 0;
    var usage_MB = 0;
    if (gCapacity > 0) {
        capacity_MB = parseInt(gCapacity / BYTE_DIVISOR / BYTE_DIVISOR);
        usage_MB = parseInt(gUsage / BYTE_DIVISOR / BYTE_DIVISOR);
    }
    if (capacity_MB - usage_MB < minFreeSpaceForUpdate_MB) {
        showError("space_issue_for_file");
        return;
    }
    var low_battery_for_upgrade = false;
    $.ajaxAPI({
        "url": "battery_status",
        "success": function(data) {
            if (data != null  && data.battery_status != null ) {
                if (data.battery_status.state.toLowerCase() == "discharging" && parseInt(data.battery_status.percent_remaining) < minBatteryPercentForUpgrade) {
                    low_battery_for_upgrade = true;
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            if (low_battery_for_upgrade) {
                showError("low_battery_for_upgrade");
            } else {
                doUpdateAvailable();
            }
        }
    });
}
function doUpdateAvailable() {
    var urlPrefix = apiUrlPrefix;
    var url = "firmware_update";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    firmwareUpgradeStartTime = new Date().getTime();
    var image_url = $("#firmware_image").val();
    displayLoading();
    $.ajaxAPI({
        "urlPrefix": urlPrefix,
        "url": url,
        "type": "PUT",
        "data": {
            "image": image_url
        },
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "put_firmware_update", request.status);
        },
        "success": function(data) {
            $("#update_progressbar").progressbar({
                value: 0
            });
            $(".update_progress_percentage").html("");
            $("#update_progress_title").html(dictionaryList["page_header_updating_firmware"]);
            $("#update_progress_note").html(dictionaryList["update_progress_note"]);
            $("#update_progress").dialog("open");
            updateUnexpectedErrorCounter = 0;
            processUpdate();
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function doManualUpdate() {
    $("#update_progressbar").progressbar({
        value: 0
    });
    $(".update_progress_percentage").html("");
    $("#update_progress_title").html(dictionaryList["page_header_updating_firmware"]);
    $("#update_progress_note").html(dictionaryList["update_progress_note"]);
    $("#update_progress").dialog("open");
    updateUnexpectedErrorCounter = 0;
    firmwareUpgradeStartTime = new Date().getTime();
    setTimeout("processUpdate(\"manual\");", updateProgressPoll);
}
function processUpdate(flag) {
    var urlPrefix = apiUrlPrefix;
    var url = "firmware_update";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    $.ajaxAPI({
        "urlPrefix": urlPrefix,
        "url": url,
        "type": "GET",
        "timeout": processUpdatePollTimeout,
        "error": function(request, status, error) {
            updateUnexpectedErrorCounter++;
            if (updateUnexpectedErrorCounter <= updateUnexpectedErrorMax) {
                setTimeout("processUpdate();", updateProgressPoll);
            } else {
                if (request.status == 500) {
                    updateUnexpectedErrorCounter = 0;
                    $("#update_progress").dialog("close");
                    var xotree = new XML.ObjTree();
                    var data = xotree.parseXML(request.responseText);
                    var error_code = parseDataForErrors(data, "error_code");
                    if (error_code) {
                        showError("update_" + error_code);
                    } else {
                        firmwareUpgradeUnknownProgress();
                    }
                } else {
                    firmwareUpgradeUnknownProgress();
                }
            }
        },
        "success": function(data) {
            if ((data != null ) && (data.firmware_update != null )) {
                var status = data.firmware_update.status.toLowerCase();
                var completion_percent = data.firmware_update.completion_percent;
                var error_code = data.firmware_update.error_code;
                if (completion_percent != "") {
                    completion_percent = parseInt(completion_percent);
                } else {
                    completion_percent = 0;
                }
                if (status == "idle") {
                    updateUnexpectedErrorCounter++;
                    if (updateUnexpectedErrorCounter <= updateUnexpectedErrorMax) {
                        setTimeout("processUpdate();", updateProgressPoll);
                    } else {
                        showError("update_failed");
                        $("#update_progress").dialog("close");
                    }
                } else {
                    if (status == "failed") {
                        $("#update_progress").dialog("close");
                        updateUnexpectedErrorCounter = 0;
                        if (error_code !== "") {
                            showError("update_" + error_code);
                        } else {
                            showError("update_failed");
                        }
                    } else if (status == "plex_failed") {
                        $("#update_progress").dialog("close");
                        updateUnexpectedErrorCounter = 0;
                        if (error_code !== "") {
                            showError("update_" + error_code);
                        } else {
                            showError("update_plex_failed");
                        }
                    }else {
                        updateUnexpectedErrorCounter = 0;
                        $("#update_progressbar").progressbar("value", completion_percent);
                        $(".update_progress_label").css("display", "none");
                        $("#update_progress_" + status).css("display", "block");
                        $("#update_progress_percentage_" + status).html("(" + completion_percent + "%)");
                        if (status == "upgrading") {
                        	if(completion_percent >= 100){
	                            $("#update_progress").dialog("close");
								$("#reconnect_network_dialog").closest(".ui-draggable").css({
									display: "",
									visibility: "hidden",
									bottom: 1
								});
	                            doReboot("update");
	                        }
	                        else{
	                        	setTimeout("processUpdate();", updateProgressPoll);
	                        }
                        } else {
                        	if(status == "plex_downloaded"){
                        		$.get('views/media/partial/plexsettings/start_plex_update.php');
						        $("#update_progress_title").html(dictionaryList["page_header_install_plex_media_server"]);
						    	$("#update_progressbar").progressbar({
									value: 0
								});
								$("#update_progress_note").html("");
								$("#update_progress").dialog("open");
								setTimeout("processUpdate();", updateProgressPoll);
                        	}
                        	else if(status == "plex_upgrading"){
                        		if(completion_percent >= 100){
		                            $("#update_progress").dialog("close");
		                            $("#plex_download_container").hide();
							    	$("#plex_install_container").hide();
									$("#plex_setting_container").show();
		                        }
		                        else{
		                        	setTimeout("processUpdate();", updateProgressPoll);
		                        }
                        	}
                        	else if(status == "plex_upgraded"){
								if(flag != "manual"){
		                           	$("#plex_status span").html($.ajax({type: "GET", url: "views/media/partial/plexsettings/get_plex_status.php", async: false}).responseText);
									$("#plex_server_enabled span").html($.ajax({type: "GET", url: "views/media/partial/plexsettings/get_plex_service_status.php", async: false}).responseText);
									$("#plex_version").text($.ajax({type: "GET", url: "views/media/partial/plexsettings/get_plex_version.php", async: false}).responseText);
									$("#current_version span").text($("#plex_version").text());
									$("#plex_new_ver_download_button").hide();
									
									$("#update_progress").dialog("close");
									$("#plex_enabled").attr("checked", true);
									$("#plex_setting_content_container").show();
									
									gMediaServerEnable = false;
									$("#settings_dlna_database_container").hide();
									disableIdTag("#dlna_mediadb_rescan_button");
									disableIdTag("#dlna_mediadb_rebuild_button");
									$("#dlna_enabled").attr("checked", false);
									
		                            $("#plex_download_container").hide();
							    	$("#plex_install_container").hide();
									$("#plex_setting_container").show();
								}
								else {
									setTimeout("processUpdate(\"manual\");", updateProgressPoll);
								}
                        	}
                        	else{
                                setTimeout("processUpdate();", updateProgressPoll);
                        	}
                        }
                    }
                }
            }
        },
        "complete": function(jqXHR, textStatus) {}
    });
}

function init_updateUploadFromFile() {
    updateUploadInit();
}
function updateUploadInit() {
    var button = $("#manual_update_btn");
    var url = apiUrlPrefix + "firmware_update?format=json";
    var low_battery_for_upgrade = false;
    updateUploaderKeepGoing = "true";
    updateUploader = new AjaxUpload(button,{
        action: url,
        name: "file",
        responseType: "json",
        autoSubmit: false,
        onSubmit: function(file, ext) {
            if (updateUploaderKeepGoing == "false") {
                updateUploaderKeepGoing = "true";
                return false;
            }
            var regex = /^(bin)$/i;
            if (!(ext && regex.test(ext))) {
                showError("invalid_firmware_file_type");
                return false;
            }
  
			if(low_battery_for_upgrade){
				showError("low_battery_for_upgrade");
        		return false;
        	}
        	else {
        		$("#manual_update_uploading").dialog("open");
				this.disable();
        	}
        },
        onChange: function(file, ext) {
        	$.ajaxAPI({
                "url": "battery_status",
                "success": function(data) {
                    if (data != null  && data.battery_status != null ) {
                        if (data.battery_status.state.toLowerCase() == "discharging" && parseInt(data.battery_status.percent_remaining) < minBatteryPercentForUpgrade) {
                            low_battery_for_upgrade = true;
                        }
                    }
                },
                "complete": function(jqXHR, textStatus) {
					$("#confirm_update").dialog("open");
                }
            });
        },
        onComplete: function(file, response) {
            $("#manual_update_uploading").dialog("close");
            this.enable();
            if (response != null  && response.firmware_update != null ) {
                if (response.firmware_update.status != null  && response.firmware_update.status.toLowerCase() == "success") {
                    doManualUpdate();
                } else {
                    if (response.firmware_update.error_code != null ) {
                        showError(response.firmware_update.error_code + " " + response.firmware_update.error_message);
                    } else {
                        showError("firmware update failed");
                    }
                }
            } else {
                showError("firmware update failed");
            }
        }
    });
    $("#manual_update_btn").hover(function() {
        $(this).css("cursor", "pointer !important");
    }, function() {
        $(this).css("cursor", "default");
    });
}
function checkForFirmwareUpdate(useQueue) {
    var urlPrefix = apiUrlPrefix;
    var url = "firmware_update";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    var ajaxAPIOptions = {
        "urlPrefix": urlPrefix,
        "url": url,
        "type": "GET",
        "success": function(data) {
            if ((data != null ) && (data.firmware_update != null )) {
                var status = data.firmware_update.status.toLowerCase();
                if ((status != "idle") && (status != "failed") && (status != "plex_downloaded") && (status != "plex_upgraded")) {
                    $("#update_progressbar").progressbar({
                        value: 0
                    });
                    $(".update_progress_percentage").html("");
                    if (status == "plex_upgrading"){
                    	$("#update_progress_title").html(dictionaryList["page_header_install_plex_media_server"]);
                    	$("#update_progress_note").html("");
                    }
                    else if (status == "plex_downloading") {
                    	$("#update_progress_title").html(dictionaryList["page_header_download_plex_media_server"]);
                    	$("#update_progress_note").html("");
                    }
                    else {
                    	$("#update_progress_title").html(dictionaryList["page_header_updating_firmware"]);
                    	$("#update_progress_note").html(dictionaryList["update_progress_note"]);
                    }
					$("#update_progress").dialog("open");
                    updateUnexpectedErrorCounter = 0;
                    processUpdate();
                }
            }
        }
    };
    if (typeof useQueue != "undefined" && useQueue == true) {
        ajaxQueue.add(ajaxAPIOptions);
    } else {
        $.ajaxAPI(ajaxAPIOptions);
    }
}
function get_firmware_info_and_popup() {
    var urlPrefix = apiUrlPrefix;
    var url = "firmware_info";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    $.ajaxAPI({
        "urlPrefix": urlPrefix,
        "url": url,
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "get_firmware_info", request.status);
        },
        "success": function(data) {
            if (data != null  && data.firmware_info != null  && data.firmware_info.upgrades != null ) {
                if (data.firmware_info.upgrades.available == "true") {
                    updateFirmwareAvailableDialog(data.firmware_info);
                    var currentFirmwareName = data.firmware_info.current_firmware["package"].name;
                    if (data.firmware_info.upgrades.upgrade.version != null ) {
                        addFirmwareAvailable(data.firmware_info.upgrades.upgrade, currentFirmwareName, 0);
                    } else {
                        for (var i in data.firmware_info.upgrades.upgrade) {
                            addFirmwareAvailable(data.firmware_info.upgrades.upgrade[i], currentFirmwareName, i);
                        }
                    }
                    if (data.firmware_info.upgrades.upgrade.version != null ) {
                        updateFirmwareAvailable(data.firmware_info.upgrades.upgrade, currentFirmwareName);
                    }
                    $(".check_for_update_container").hide();
                    $(".update_now_container").show();
                } else {
                    if (data.firmware_info.upgrades.available == "false") {
                        $("#firmware_up_to_date_dialog").dialog("open");
                    } else {
                        if (data.firmware_info.upgrades.available == "error") {
                            showError("get_firmware_info_error");
                        } else {
                            showError("get_firmware_info_unk");
                        }
                    }
                }
            } else {
                showError("get_firmware_info_int_error");
            }
        }
    });
}
function firmwareUpgradeUnknownProgress() {
    $(".update_progress_label").hide();
    $("#update_progress_inprogress").show();
    $("#update_progressbar").hide();
    updateUnexpectedErrorCounter = 0;
    firmwareUpgradePingServerStartTime = new Date().getTime();
    tickElapsedTime("#firmware_upgrade_elapsed_time", firmwareUpgradeStartTime);
    firmwareUpgradePingServer();
}
function firmwareUpgradePingServer() {
    var urlPrefix = apiUrlPrefix;
    var url = "system_state";
    if (useStubUpdates) {
        urlPrefix = "http://" + window.location.host + "/" + SITE_BASE_URL + "/stubs/";
        url += ".php";
    }
    var currentTime = new Date().getTime();
    if ((currentTime - firmwareUpgradePingServerStartTime) > firmwareUpgradeTimeout) {
        $("#update_progress").dialog("close");
        var ssidName = (gconnectingBand == 5) ? gSSIDNameHighBand : gSSIDName;
        var newmsg = errorsList["avatar_update_no_return"].replace("{0}", '<b><i>' + ssidName + '</i></b>');
        errorsList["avatar_update_no_return"] = newmsg;
        showError("avatar_update_no_return");
        return;
    }
    $.ajaxAPI({
        "urlPrefix": urlPrefix,
        "url": url,
        "timeout": ajaxTimeoutPolling,
        "error": function(request, status, error) {
            if (status == "timeout" || status == "error" || status == "abort") {
                previous_reboot_state = "rebooting";
                setTimeout("firmwareUpgradePingServer();", updateProgressPoll);
            } else {
                processAndDisplayError(request.responseText, "get_system_state", request.status);
            }
        },
        "success": function(data) {
            if (data != null  && data.system_state != null ) {
                if ((data.system_state.status == "initializing") || (data.system_state.status == "ready")) {
                    $("#update_progress").dialog("close");
                    $("#reconnect_network_dialog").closest(".ui-draggable").css({
						display: "",
						visibility: "hidden",
						bottom: 1
					});
                    doReboot("update");
                } else {
                    setTimeout("firmwareUpgradePingServer();", updateProgressPoll);
                }
            }
        },
        "complete": function(jqXHR, textStatus) {}
    });
}
var RAIDConversionInProgress = false;
var RAIDConversionGetInProgress = false;
var raidStatusPoll = 30000;
var raidConversionErrorCount = 0;
var elapsedTime = "";
var autoUpdateRAIDStatusFailCount = 0;
$(function() {
    $("#NewRaidLINEAR").live("click", function(event) {
        $("#mode_spanning_help").show();
        $("#mode_raid_help").hide();
        $("#raid_buttons").show();
    });
    $("#NewRaidRAID1").live("click", function(event) {
        $("#mode_raid_help").show();
        $("#mode_spanning_help").hide();
        $("#raid_buttons").show();
    });
});
function doSelectRaidDrive(selected) {
    $(".raid_drive_list_item").removeClass("selected");
    selected.addClass("selected");
    selected_drivenum = selected.attr("rel");
    openLoaderWithTimeout();
    $.ajax({
        type: "post",
        url: "settings/get_raid_details",
        dataType: "json",
        timeout: ajaxTimeout,
        success: function(data) {
            $("#loader").dialog("close");
            if ("redirect" in data) {
                if ("redirect_url" in data) {
                    window.location = data.redirect_url;
                    return;
                } else {
                    window.location = SITE_BASE_URL + "start_over";
                    return;
                }
            } else {
                if ("http_code" in data) {
                    if (data.http_code == 200) {
                        $("#details_manufacturer").html("");
                        $("#details_drive_model").html("");
                        $("#details_serial_number").html("");
                        $("#details_size").html("");
                        $("#details_smart").html("");
                        $("#details_raid_drive_number").html(selected_drivenum);
                        $("#raid_drive_details").slideDown("slow", function() {
                            resizeObject($("div.auto_resize:visible"));
                        });
                        if (("internal_drive" in data) ) {
                            var driveselected;
                            for (var i = 0; i < 2; i++) {
                                drive = $("#raid_drive_location_" + i);
                                if (drive.filter(".selected").length) {
                                    driveselected = drive.attr("rel");
                                    break;
                                }
                            }
                            for (var idx in data.internal_drive) {
                                if (data.internal_drive[idx].location == driveselected) {
                                    $("#details_manufacturer").html(data.internal_drive[idx]["manufacture"]);
                                    $("#details_drive_model").html(data.internal_drive[idx]["model"]);
                                    $("#details_serial_number").html(data.internal_drive[idx]["serial_number"]);
                                    $("#details_size").html(data.internal_drive[idx]["drive_size"]);
                                    smart_status = data.internal_drive[idx]["smart_status"];
                                    driveSmart = $("#raidstatus" + smart_status.toUpperCase()).html();
                                    if ((typeof (driveSmart) == "undefined") || (driveSmart === null )) {
                                        driveSmart = ucwords(smart_status.toLowerCase());
                                    }
                                    $("#details_smart").html(driveSmart);
                                    driveSmartClass = "";
                                    switch (smart_status.toLowerCase()) {
                                    case "pass":
                                    case "good":
                                        break;
                                    case "failed":
                                        driveSmartClass = "raid_status_error";
                                        break;
                                    case "unknown":
                                    default:
                                        driveSmartClass = "raid_status_warning";
                                        break;
                                    }
                                    $("#details_smart").removeClass();
                                    if (driveSmartClass !== "") {
                                        $("#details_smart").addClass(driveSmartClass);
                                    }
                                    break;
                                }
                            }
                        }
                    } else {
                        showError("get_raid_details_" + data.http_code);
                    }
                } else {
                    showError("get_raid_details_unk");
                }
            }
        },
        error: function(request, status, error) {
            if (status == "timeout") {
                showError("get_raid_details_timeout");
            } else {
                showError("get_raid_details_unk_error");
            }
            $("#loader").dialog("close");
        }
    });
}
function showEditRAIDPanel() {
    $("#edit_raid_panel").slideDown("slow", function() {
        resizeObject($("div.auto_resize:visible"));
        showRAIDRightPanelDefault();
        focusFirstInput($(this));
    });
    $("#edit_raid_panel").siblings().hide();
}
function showRAIDRightPanelDefault() {
    $(".raid_right_interior_panel .default").siblings().fadeOut();
    $(".raid_right_interior_panel .default").fadeIn("fast");
    $(".raid_drive_list_item").removeClass("selected");
}
function hideEditRAIDPanel() {
    $("#edit_raid_panel").siblings().show();
    if ($("#CurrentRAID").val() == "LINEAR") {
        $("#confirm_linear_id").css("display", "none");
        $("#confirm_raid1_id").css("display", "");
        $("#linear_help_container").css("display", "none");
        $("#raid1_help_container").css("display", "");
        $("#NewRaidLINEAR").click();
    } else {
        $("#confirm_linear_id").css("display", "");
        $("#confirm_raid1_id").css("display", "none");
        $("#linear_help_container").css("display", "");
        $("#raid1_help_container").css("display", "none");
        $("#NewRaidRAID1").click();
    }
    $("#convert_raid_btn").addClass("ui-state-disabled").attr("disabled", true);
    $("#edit_raid_panel").fadeOut();
    $(".right_interior_panel").fadeIn();
}
function doEditRaidFromPanel() {
    alert("doEditRaidFromPanel");
}
function doRAIDConversion() {
    $("#confirm_raid_conversion").dialog("close");
    openLoaderWithTimeout();
    $.ajax({
        type: "post",
        url: "settings/start_raid_conversion",
        data: $("#edit_raid_panel_form").serialize(),
        dataType: "json",
        timeout: ajaxTimeout,
        success: function(data) {
            $("#loader").dialog("close");
            if ("redirect" in data) {
                if ("redirect_url" in data) {
                    window.location = data.redirect_url;
                    return;
                } else {
                    window.location = SITE_BASE_URL + "start_over";
                    return;
                }
            } else {
                if ("http_code" in data) {
                    if (data.http_code == 200) {
                        progressTxt = $("#categoryretrievingstatustxt").html();
                        $("#raid_conversion_progresstxt").html(progressTxt);
                        $("#raid_conversion_progress_steptxt").html("");
                        $("#raid_conversion_percentage").html("");
                        $("#raid_conversion_elapsed_time").html("");
                        $("#raid_conversion_progress").dialog("open");
                        RAIDConversionInProgress = true;
                        processRaidConversion();
                        return;
                    } else {
                        if ((data.http_code == 500) && ("remove_nbytes_size" in data)) {
                            $("#remove_nbytes_size").html(data.remove_nbytes_size + "&nbsp;");
                            showError("start_raid_conversion_space_limitation");
                        } else {
                            showError("start_raid_conversion_" + data.http_code);
                        }
                    }
                } else {
                    showError("start_raid_conversion_unk");
                }
            }
        },
        error: function(request, status, error) {
            if (status == "timeout") {
                showError("start_raid_conversion_timeout");
            } else {
                showError("start_raid_conversion_unk_error");
            }
            $("#loader").dialog("close");
        }
    });
}
function processRaidConversion() {
    if (RAIDConversionInProgress === false) {
        return;
    }
    if (RAIDConversionGetInProgress === true) {
        setTimeout("processRaidConversion();", raidStatusPoll);
        return;
    }
    RAIDConversionGetInProgress = true;
    $.ajax({
        type: "post",
        url: "settings/get_raidconversion_status",
        dataType: "json",
        timeout: ajaxTimeout,
        success: function(data) {
            RAIDConversionGetInProgress = false;
            if ("redirect" in data) {
                if ("redirect_url" in data) {
                    window.location = data.redirect_url;
                } else {
                    window.location = SITE_BASE_URL + "start_over";
                }
            } else {
                if ("http_code" in data) {
                    if (data.http_code == 200) {
                        if (!("status" in data)) {
                            showError("raid_conversion_unk");
                        } else {
                            if (data.status.toLowerCase() == "converting") {
                                RAIDConversionInProgress = true;
                                raidConversionErrorCount = 0;
                                elapsedTime = data.elapsed_time.toString();
                                stepTxt = $("#conversionsteptxt").html() + " " + data.step.toString();
                                switch (data.category.toLowerCase()) {
                                case "preparing_system":
                                    progressTxt = $("#categorypreparingsystemtxt").html();
                                    break;
                                case "converting":
                                    progressTxt = $("#categoryconvertingtxt").html();
                                    break;
                                case "restoring_system":
                                    progressTxt = $("#categoryrestoringsystemtxt").html();
                                    break;
                                default:
                                    progressTxt = data.category.toString() + "...";
                                    break;
                                }
                                $("#raid_conversion_progresstxt").html(progressTxt);
                                $("#raid_conversion_progress_steptxt").html(stepTxt);
                                $("#raid_conversion_percentage").html("(" + data.progress + "%)");
                                $("#raid_conversion_elapsed_time").html(elapsedTime);
                                setTimeout("processRaidConversion();", 5000);
                                return;
                            } else {
                                if (data.status.toLowerCase() == "conversion_failure") {
                                    showError("raid_conversion_failed");
                                } else {
                                    if (data.status.toLowerCase() == "conversion_success") {
                                        $("#raid_conversion_progresstxt").html("");
                                        $("#raid_conversion_progress_steptxt").html("");
                                        $("#raid_conversion_percentage").html("(100%)");
                                        $("#raid_conversion_elapsed_time").html("");
                                        newRAID = $("#NewRAID").val();
                                        $("#CurrentRAID").val(newRAID);
                                        $("#edit_raid_panel").siblings().show();
                                        $("#convert_raid_btn").addClass("ui-state-disabled").attr("disabled", true);
                                        $("#edit_raid_panel").fadeOut();
                                        $(".right_interior_panel").fadeIn();
                                        if (newRAID == "RAID1") {
                                            successmsg = $("#convertraid1successtxt").html();
                                        } else {
                                            successmsg = $("#convertspansuccesstxt").html();
                                        }
                                        $("#conversion_success_msg").html(successmsg);
                                        $("#total_raid_conversion_elapsed_time").html(elapsedTime);
                                        $("#raid_conversion_completed").dialog("open");
                                        setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
                                    } else {
                                        showError("raid_conversion_unk");
                                    }
                                }
                            }
                        }
                    } else {
                        if ("status_code" in data) {
                            raidConversionErrorCount++;
                            if (raidConversionErrorCount <= 5) {
                                setTimeout("processRaidConversion();", 5000);
                                return;
                            }
                            showError("get_raidconversion_" + data.status_code);
                        } else {
                            raidConversionErrorCount++;
                            if (raidConversionErrorCount <= 5) {
                                setTimeout("processRaidConversion();", 5000);
                                return;
                            }
                            showError("get_raidconversion_" + data.http_code);
                        }
                    }
                } else {
                    raidConversionErrorCount++;
                    if (raidConversionErrorCount <= 5) {
                        setTimeout("processRaidConversion();", 5000);
                        return;
                    }
                    showError("get_raidconversion_unk");
                }
            }
            $("#raid_conversion_progress").dialog("close");
            RAIDConversionInProgress = false;
        },
        error: function(request, status, error) {
            if (status == "timeout") {
                showError("get_raidconversion_timeout");
            } else {
                showError("get_raidconversion_unk_error");
            }
            $("#raid_conversion_progress").dialog("close");
            RAIDConversionInProgress = false;
            RAIDConversionGetInProgress = false;
        }
    });
}
function autoUpdateRAIDStatus(forceUpdate) {
    if (typeof (newCounter) != "undefined") {
        fastPollCounter = newCounter;
    }
    if (RAIDConversionInProgress === true) {
        setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
        return;
    }
    if (typeof (forceUpdate) == "undefined") {
        storage_tab_id = $("#storage_tab").attr("href");
        storage_tab_class = ($(storage_tab_id).attr("class"));
        if (storage_tab_class == undefined) {
            setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
            return;
        } else {
            class_list = storage_tab_class.split(" ");
            for (var idx in class_list) {
                if (class_list[idx] == "ui-tabs-hide") {
                    setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
                    return;
                }
            }
        }
    }
    $.ajax({
        type: "post",
        url: "settings/update_raid_status",
        dataType: "json",
        timeout: ajaxTimeout,
        success: function(data) {
            if ("redirect" in data) {
                autoUpdateRAIDStatusFailCount++;
                if (autoUpdateRAIDStatusFailCount <= maxRedirectFailCount) {
                    setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
                    return;
                } else {
                    autoUpdateRAIDStatusFailCount = 0;
                    if ("redirect_url" in data) {
                        window.location = data.redirect_url;
                        return;
                    } else {
                        window.location = SITE_BASE_URL + "start_over";
                        return;
                    }
                }
            } else {
                autoUpdateRAIDStatusFailCount = 0;
            }
            if ("http_code" in data) {
                if (data.http_code == 200 || data.http_code == 500) {
                    disableEditButton = false;
                    if ("config" in data) {
                        if ("raid_configuration" in data.config) {
                            if (data.config.raid_configuration.toLowerCase() == "linear") {
                                raidtype = $("#raidtypemaxcapacitytxt").html();
                            } else {
                                if (data.config.raid_configuration.toLowerCase() == "raid1") {
                                    raidtype = $("#raidtypemaxprotectiontxt").html();
                                } else {
                                    raidtype = $("#raidstatusUNKNOWN").html();
                                    disableEditButton = true;
                                }
                            }
                        }
                        $("#raid_type_id").html(raidtype);
                    }
                    if ("status" in data) {
                        raidStatus = $("#raidstatusUNKNOWN").html();
                        raidStatusClass = "";
                        raidRebuildingProgress = "";
                        statusErrorDisplayText = "";
                        if ("raid_status" in data.status) {
                            switch (data.status.raid_status.toLowerCase()) {
                            case "good":
                                break;
                            case "rebuilding":
                                raidStatusClass = "raid_status_inprogress";
                                raidRebuildingProgress = data.status.raid_rebuilding_progress.toString();
                                statusErrorDisplayText = $("#raidstatusREBUILDINGstatustxt").html();
                                break;
                            case "failed_drive":
                                raidStatusClass = "raid_status_error";
                                statusErrorDisplayText = $("#raidstatusFAILED_DRIVEerrortxt").html();
                                disableEditButton = true;
                                break;
                            case "stopped":
                            case "failed":
                                raidStatusClass = "raid_status_error";
                                statusErrorDisplayText = $("#raidstatusFAILEDerrortxt").html();
                                disableEditButton = true;
                                break;
                            case "unknown":
                            default:
                                raidStatusClass = "raid_status_warning";
                                break;
                            }
                            raidStatus = $("#raidstatus" + data.status.raid_status.toUpperCase()).html();
                            if ((typeof (raidStatus) == "undefined") || (raidStatus === null )) {
                                raidStatus = ucwords(data.status.raid_status.toLowerCase());
                            }
                            if (raidRebuildingProgress !== "") {
                                $("#raid_rebuilding_progressbar_container").removeAttr("style");
                                $("#raid_rebuilding_progresstxt_container").removeAttr("style");
                                $("#raid_rebuilding_progressbar").progressbar("value", raidRebuildingProgress);
                                $("#raid_rebuilding_progresstxt").html(raidRebuildingProgress + "%");
                            } else {
                                $("#raid_rebuilding_progressbar_container").attr("style", "display:none;");
                                $("#raid_rebuilding_progresstxt_container").attr("style", "display:none;");
                            }
                            if (statusErrorDisplayText !== "") {
                                $("#raid_status_error_text_container").removeAttr("style");
                                $("#raid_status_error_text").html(statusErrorDisplayText);
                            } else {
                                $("#raid_status_error_text_container").attr("style", "display:none;");
                            }
                        }
                        $("#raid_status_id").html(raidStatus);
                        $("#raid_status_id").removeClass();
                        if (raidStatusClass !== "") {
                            $("#raid_status_id").addClass(raidStatusClass);
                        }
                    }
                    if ("raid_partition" in data) {
                        driveLabelTxt = $("#raiddrivetxt").html();
                        if ("user_raid_partition" in data.raid_partition) {
                            updateRAIDDriveList(data.raid_partition.user_raid_partition);
                        } else {
                            driveStatus = $("#raidstatusUNKNOWN").html();
                            for (var i = 0; i < 2; i++) {
                                $("#raid_img_location_" + i).html("");
                                drive = $("#raid_drive_location_" + i);
                                drive.attr("rel", "");
                                drive.find(".raid_diskname").html(driveLabelTxt + " " + (i + 1));
                                drive.find("#raid_drive_volume_status").html(driveStatus);
                                drive.find("#raid_drive_volume_status").removeClass();
                                drive.find("#raid_drive_volume_status").addClass("raid_status_warning");
                            }
                        }
                    }
                    if (disableEditButton === true) {
                        $("#edit_raid_config_btn").addClass("ui-state-disabled");
                    } else {
                        $("#edit_raid_config_btn").removeClass("ui-state-disabled");
                    }
                }
            }
            setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
        },
        error: function(request, status, error) {
            setTimeout("autoUpdateRAIDStatus();", raidStatusPoll);
        }
    });
}
function checkForRAIDConversion() {
    $.ajax({
        type: "post",
        url: "settings/raid_status",
        dataType: "json",
        timeout: ajaxTimeout,
        success: function(data) {
            if ("redirect" in data) {
                if ("redirect_url" in data) {
                    window.location = data.redirect_url;
                    return;
                } else {
                    window.location = SITE_BASE_URL + "start_over";
                    return;
                }
            }
            if ("status" in data) {
                if (data.status.toLowerCase() != "converting") {
                    return;
                }
                progressTxt = $("#categoryretrievingstatustxt").html();
                $("#raid_conversion_progresstxt").html(progressTxt);
                $("#raid_conversion_progress_steptxt").html("");
                $("#raid_conversion_percentage").html("");
                $("#raid_conversion_progress").dialog("open");
                RAIDConversionInProgress = true;
                processRaidConversion();
            }
        },
        error: function(request, status, error) {}
    });
}
function updateRAIDDriveList(raid_partition) {
    for (var idx in raid_partition) {
        drive_location = raid_partition[idx].location;
        $("#raid_img_location_" + idx).html(drive_location);
        drive_status = raid_partition[idx].status;
        driveStatusClass = "";
        switch (drive_status.toLowerCase()) {
        case "good":
            break;
        case "failed":
            driveStatusClass = "raid_status_error";
            break;
        case "unknown":
        default:
            driveStatusClass = "raid_status_warning";
            break;
        }
        $("#raid_img_location_" + idx).html(drive_location);
        $("#raid_img_location_" + idx).removeClass();
        if (driveStatusClass !== "") {
            $("#raid_img_location_" + idx).addClass(driveStatusClass);
        }
        driveStatus = $("#raidstatus" + drive_status.toUpperCase()).html();
        if ((typeof (driveStatus) == "undefined") || (driveStatus === null )) {
            driveStatus = ucwords(drive_status.toLowerCase());
        }
        drive = $("#raid_drive_location_" + idx);
        drive.attr("rel", drive_location);
        drive.find(".raid_diskname").html(driveLabelTxt + " " + drive_location);
        drive.find("#raid_drive_volume_status").html(driveStatus);
        drive.find("#raid_drive_volume_status").removeClass();
        if (driveStatusClass !== "") {
            drive.find("#raid_drive_volume_status").addClass(driveStatusClass);
        }
    }
}
var isValid;
var errors;
var formName;
function validate(FormName, returnErrors, showToolTip) {
 
    var isPassword = false;
    formName = FormName;
    isValid = true;
    errors = new Array();
    $(formName).find("input[class~='error']").removeClass("error");
    $(formName).find("input, textarea").each(function() {
        $(this).removeClass("error");
        if ($(this).hasClass("NOTEMPTY")) {
        	validateNotEmpty(this, showToolTip);
        }
        if ($(this).hasClass("DESCRIPTION")) {
            validateDescription(this, showToolTip);
        }
        if ($(this).hasClass("SHARENAME")) {
            validateShareName(this, showToolTip);
        }
        if ($(this).hasClass("DEVICE_NAME")) {
            validateDeviceName(this, showToolTip);
        }
        if ($(this).hasClass("DEVICE_DESCRIPTION")) {
            validateDeviceDescription(this, showToolTip);
        }
        if ($(this).hasClass("PERSON_NAME")) {
            validatePersonName(this, showToolTip);
        }
        if ($(this).hasClass("WORKGROUP")) {
            validateWorkgroup(this, showToolTip);
        }
        if ($(this).hasClass("USERNAME")) {
            validateUsername(this, showToolTip);
        }
        if ($(this).hasClass("ADD_FIRST_NAME")) {
            validateFirstname(this, showToolTip);
        }
        if ($(this).hasClass("OLD_PASSWORD")) {
            validatePassword(this, showToolTip);
        }
        if ($(this).hasClass("PASSWORD")) {
            validatePassword(this, showToolTip);
        }
        if ($(this).hasClass("WPA_NETWORK_PASSWORD")) {
        	isPassword = true;
            validateWPANetworkPassword(this, showToolTip);
        }
        if ($(this).hasClass("WEP_NETWORK_PASSWORD")) {
            validateWEPNetworkPassword(this, showToolTip);
        }
        if ($(this).hasClass("WPS_PIN")) {
            validateWPSPin(this, showToolTip);
        }
        if ($(this).hasClass("CONFIRM_PASSWORD")) {
            validateConfirmPassword(this, showToolTip);
        }
        if ($(this).hasClass("CONFIRM_PASSWORD2")) {
            validateConfirmPassword(this, showToolTip, true);
        }
        if ($(this).hasClass("CONFIRM_OWNER_PASSWORD")) {
            validateConfirmOwnerPassword(this, showToolTip);
        }
        if ($(this).hasClass("NETWORK_SSID")) {
            validateNetworkSSID(this, showToolTip);
        }
        if ($(this).hasClass("EMAIL")) {
            validateEmail(this, showToolTip);
        }
        if ($(this).hasClass("EMAILNOTREQ")) {
            validateEmailNotRequired(this, showToolTip);
        }
        if ($(this).hasClass("WEBACCOUNTEMAIL")) {
            validateWebAccountEmail(this, showToolTip);
        }
        if ($(this).hasClass("CONFIRM_EMAIL")) {
            validateConfirmEmail(this, showToolTip);
        }
        if ($(this).hasClass("IPADDRESS")) {
            validateIPAddress(this, showToolTip);
        }
        if ($(this).hasClass("NTP_SERVER")) {
            validateNTPServer(this, showToolTip);
        }
        if ($(this).hasClass("GATEWAY")) {
            validateGateway(this, showToolTip);
        }
        if ($(this).hasClass("SHARE_USERNAME")) {
            validateRemoteShareDeviceUsername(this, showToolTip);
        }
        if ($(this).hasClass("DEVICE_USERNAME")) {
            validateRemoteShareDeviceUsername(this, showToolTip);
        }
        if ($(this).hasClass("SAFEPOINTNAME")) {
            validateSafepointName(this, showToolTip);
        }
        if ($(this).hasClass("NETWORK_PORT")) {
            validateCustomNetworkPort(this, showToolTip);
        }
        if ($(this).hasClass("HTTPS_PORT")) {
            validateDupHTTPSNetworkPort(this, showToolTip);
        }
    });
    if (errors.length > 0) {
        if (typeof returnErrors == "undefined" || returnErrors == false) {
            showError(errors);
        } else {
            isValid = errors;
        }
    }
    return isValid;
}
function validateNotEmpty(obj, showToolTip) {
    objStyle = $(obj).attr("style");
    if ((typeof (objStyle) != "undefined") && (objStyle.toLowerCase().indexOf("none") != -1)) {
        return;
    }
    if ($(obj).val() === "") {
        $(obj).addClass("error");
        isValid = false;
        if (showToolTip) {
            displayToolTip(obj);
        } else {
        	
            if ($(obj).hasClass("WPA_NETWORK_PASSWORD")) {
                errors.push("wpa_password_error");
                if (($(obj).attr("id") == "create_network_password_high_band") || ($(obj).attr("id") == "create_network_password_low_band") || ($(obj).attr("id") == "create_network_password_high_band_show") || ($(obj).attr("id") == "create_network_password_low_band_show") || ($(obj).attr("id") == "create_network_password_low_band_confirm") || ($(obj).attr("id") == "create_network_password_high_band_confirm")) {
                    $("#create_network_password_tip").addClass("error");
                }
            } else {
                if ($(obj).hasClass("WEP_NETWORK_PASSWORD")) {
                    errors.push("wep_password_error");
                } else {
                    errors.push($(obj).attr("id"));
                }
            }
        }
    }
}
function validateDeviceName(obj, showToolTip) {
    var myRegexp = /^([a-zA-Z0-9\-]+)$/;
    var myRegexp2 = /^([0-9]+[a-zA-Z0-9\-]*)$/;
    var deviceNameValid = true;
    if ($(obj).val().length < 2 || $(obj).val().length > 15 || !myRegexp.test($(obj).val())) {
        deviceNameValid = false;
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
    } else {
        if (($(obj).val().indexOf("-") == 0) || ($(obj).val().lastIndexOf("-") == $(obj).val().length - 1)) {
            if (showToolTip) {
                displayToolTip(obj, $(obj).attr("id") + "_dash");
            } else {
                errors.push($(obj).attr("id") + "_dash");
            }
            deviceNameValid = false;
        }
        if (myRegexp2.test($(obj).val())) {
            if (showToolTip) {
                displayToolTip(obj, $(obj).attr("id") + "_number");
            } else {
                errors.push($(obj).attr("id") + "_number");
            }
            deviceNameValid = false;
        }
    }
    if (!deviceNameValid) {
        $(obj).addClass("error");
        isValid = false;
    }
}
function validateDeviceDescription(obj, showToolTip) {
    if ($(obj).val().length < 1) {
        return;
    }
    var myRegexp = /^\w[\w\s]*$/i;
    if ($(obj).val().length > 42 || !myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        isValid = false;
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
    }
}
function validatePersonName(obj, showToolTip) {
    if ($(obj).val().length > 20 || $(obj).val().length < 1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateWorkgroup(obj, showToolTip) {
    var myRegexp = /^[A-Za-z0-9][-\w!@#$%^&()_\-;:\',.]+$/i;
    var myRegexp2 = /^[A-Za-z0-9]+$/i;
    if ($(obj).val().length < 1 || $(obj).val().length > 16 || !(myRegexp.test($(obj).val()) || myRegexp2.test($(obj).val()))) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateDescription(obj, showToolTip) {
    if ($(obj).val().length < 1) {
        return;
    }
    var myRegexp = /^\w[\w\s]*$/i;
    if ($(obj).val().length > 256 || !myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateShareName(obj, showToolTip) {
    if ($(obj).hasClass("READONLYSHARE")) {
        return;
    }
    var myRegexp = /^\w+$/i;
    var reservedLPTRegexp = /^lpt(\d|\d\d)$/i;
    var reservedCOMRegexp = /^com(\d|\d\d)$/i;
    var reserved = ["public", "shares", "backup", "ntp", "con", "aux", "prn", "nul"];
    var sharename = $(obj).val();
    test = $.inArray(sharename.toLowerCase(), reserved);
    if ($(obj).val().length < 1 || $(obj).val().length > 32 || !myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    } else {
        if ((test > -1) || (reservedLPTRegexp.test(sharename.toLowerCase())) || (reservedCOMRegexp.test(sharename.toLowerCase()))) {
            $(obj).addClass("error");
            if (errorsList["reserved_sharename_orig"] == undefined) {
                errorsList["reserved_sharename_orig"] = errorsList["reserved_sharename"];
            } else {
                errorsList["reserved_sharename"] = errorsList["reserved_sharename_orig"];
            }
            var newmsg = errorsList["reserved_sharename"].replace("{0}", sharename);
            errorsList["reserved_sharename"] = newmsg;
            if (showToolTip) {
                displayToolTip(obj, "reserved_sharename");
            } else {
                errors.push("reserved_sharename");
            }
            isValid = false;
        }
    }
}
function validateUsername(obj, error_id, showToolTip) {
    if (error_id == null ) {
        error_id = "reserved_username";
    }
    var myRegexp = /^([a-zA-Z0-9\-]+)$/;
    var reservedLPTRegexp = /^lpt(\d|\d\d)$/i;
    var reservedCOMRegexp = /^com(\d|\d\d)$/i;
    var reserved = ["root", "daemon", "bin", "sys", "sync", "games", "man", "lp", "mail", "news", "uucp", "proxy", "backup", "list", "irc", "gnats", "nobody", "libuuid", "sshd", "ntp", "con", "aux", "prn", "nul"];
    var username = $(obj).val();
    test = $.inArray(username.toLowerCase(), reserved);
    if (username.length < 1 || username.length > 32 || !myRegexp.test(username)) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    } else {
        if (username.indexOf("-") == 0) {
            if (showToolTip) {
                displayToolTip(obj, $(obj).attr("id") + "_dash");
            } else {
                errors.push($(obj).attr("id") + "_dash");
            }
            isValid = false;
        } else {
            if ((test > -1) || (reservedLPTRegexp.test(username.toLowerCase())) || (reservedCOMRegexp.test(username.toLowerCase()))) {
                $(obj).addClass("error");
                if (errorsList["reserved_username_orig"] == undefined) {
                    errorsList["reserved_username_orig"] = errorsList["reserved_username"];
                } else {
                    errorsList["reserved_username"] = errorsList["reserved_username_orig"];
                }
                var newmsg = errorsList["reserved_username"].replace("{0}", username);
                errorsList["reserved_username"] = newmsg;
                if (showToolTip) {
                    displayToolTip(obj, "reserved_username");
                } else {
                    errors.push("reserved_username");
                }
                isValid = false;
            }
        }
    }
}
function validateFirstname(obj, showToolTip) {
    validateUsername(obj, "reserved_first_name", showToolTip);
}
function validateShareUsername(obj, showToolTip) {
    var myRegexp = /^\w+$/i;
    var reserved = [""];
    test = $.inArray($(obj).val(), reserved);
    if ($(obj).val().length < 1 || $(obj).val().length > 32 || !myRegexp.test($(obj).val()) || test > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateRemoteShareDeviceUsername(obj, showToolTip) {
    var reserved = [""];
    test = $.inArray($(obj).val(), reserved);
    if (test > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateIPAddress(obj, showToolTip) {
    var ipaddress = $(obj).val();
    var bError = false;
    var ipaddressID = $(obj).attr("id");
    errCode = validateIP(ipaddress, "IPADDRESS");
    if (errCode !== 0) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_IPADDRESS_" + errCode.toString());
        } else {
            errors.push("Setting_IPADDRESS_" + errCode.toString());
        }
        isValid = false;
        bError = true;
    }
    var netmask;
    var netmaskID;
    var dns1="";
    var dns1ID;
    var dns2="";
    var dns2ID;
    if (ipaddressID == "SettingIp") {
        netmask = $("#SettingNetmask").val();
        netmaskID = "#SettingNetmask";
        dns1 = $("#SettingDns0").val();
        dns1ID = "#SettingDns0"; 
        dns2 = $("#SettingDns1").val();
        dns2ID = "#SettingDns1";
    } else {
        if (ipaddressID == "wifi_edit_config_form_ipaddress") {
            netmask = $("#wifi_edit_config_form_netmask").text();
            netmaskID = "#wifi_edit_config_form_netmask";
        } else {
            if (ipaddressID == "wifi_signin_SettingIp") {
                netmask = $("#wifi_signin_SettingNetmask").val();
                netmaskID = "#wifi_signin_SettingNetmask";
                dns1 = $("#wifi_signin_SettingDns0").val();
                dns1ID = "#wifi_signin_SettingDns0"; 
                dns2 = $("#wifi_signin_SettingDns1").val();
                dns2ID = "#wifi_signin_SettingDns1";
            } else {
                if (ipaddressID == "wifi_modify_SettingIp") {
                    netmask = $("#wifi_modify_SettingNetmask").val();
                    netmaskID = "#wifi_modify_SettingNetmask";
                    dns1 = $("#wifi_modify_SettingDns0").val();
                    dns1ID = "#wifi_modify_SettingDns0"; 
                    dns2 = $("#wifi_modify_SettingDns1").val();
                    dns2ID = "#wifi_modify_SettingDns1";
                } else {
                    if (ipaddressID == "wifi_signin_to_other_SettingIp") {
                        netmask = $("#wifi_signin_to_other_SettingNetmask").val();
                        netmaskID = "#wifi_signin_to_other_SettingNetmask";
                        dns1 = $("#wifi_signin_to_other_SettingDns0").val();
                        dns1ID = "#wifi_signin_to_other_SettingDns0"; 
                        dns2 = $("#wifi_signin_to_other_SettingDns1").val();
                        dns2ID = "#wifi_signin_to_other_SettingDns1";
                    }
                }
            }
        }
    }
    errCode = validateNetMask(netmask);
    if (errCode !== 0) {
        $(netmaskID).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_NETMASK_" + errCode.toString());
        } else {
            errors.push("Setting_NETMASK_" + errCode.toString());
        }
        isValid = false;
        bError = true;
    }
    if (bError === true) {
        return;
    }
    if(dns1 != ""){
        errCode = validateIP(dns1);
        console.log("DNS1:"+errCode)
        if (errCode !== 0) {
            $(dns1ID).addClass("error");
            if (showToolTip) {
                displayToolTip(obj, "Setting_DNS_" + errCode.toString());
            } else {
                errors.push("Setting_DNS_" + errCode.toString());
            }
            isValid = false;
            bError = true;
        }
    }
    if (bError === true) {
        return;
    }
    if(dns2 != ""){
        errCode = validateIP(dns2);
        if (errCode !== 0) {
            $(dns2ID).addClass("error");
            if (showToolTip) {
                displayToolTip(obj, "Setting_DNS_" + errCode.toString());
            } else {
                errors.push("Setting_DNS_" + errCode.toString());
            }
            isValid = false;
            bError = true;
        }
    }
    if (bError === true) {
        return;
    }
    
    
    var ipArray = ipaddress.split(".");
    var netmaskArray = netmask.split(".");
    var networkAddressArray = getNetworkAddressArray(ipArray, netmaskArray);
    var broadcastAddressArray = getBroadcastAddressArray(networkAddressArray, netmaskArray);
    var ipInt = ipArrayToInt(ipArray);
    var networkAddressInt = ipArrayToInt(networkAddressArray);
    var broadcastAddressInt = ipArrayToInt(broadcastAddressArray);
    if (ipInt <= networkAddressInt || ipInt >= broadcastAddressInt) {
        if (showToolTip) {
            displayToolTip(obj, "SETTING_IPADDRESS_1009");
        } else {
            errors.push("Setting_IPADDRESS_1009");
        }
        isValid = false;
        bError = true;
    }
    return;
}
function getNetworkAddressArray(ipArray, netmaskArray) {
    var networkAddressArray = new Array();
    networkAddressArray[0] = ipArray[0] & netmaskArray[0];
    networkAddressArray[1] = ipArray[1] & netmaskArray[1];
    networkAddressArray[2] = ipArray[2] & netmaskArray[2];
    networkAddressArray[3] = ipArray[3] & netmaskArray[3];
    return networkAddressArray;
}
function getBroadcastAddressArray(networkAddressArray, netmaskArray) {
    var broadcastAddressArray = new Array();
    for (var i = 0; i < 4; i++) {
        broadcastAddressArray[i] = networkAddressArray[i] | (~netmaskArray[i] & 255);
    }
    return broadcastAddressArray;
}
function ipArrayToInt(ipArray) {
    if (ipArray.length !== 4) {
        return null ;
    }
    return ipArray[0] * 16777216 + ipArray[1] * 65536 + ipArray[2] * 256 + ipArray[3] * 1;
}
function validateNTPServer(obj, showToolTip) {
    var ntpserver = $(obj).val();
    var bError = false;
    $ntpserver_texbox_visible = $("#primary_ntp").is(":visible");
    if ((ntpserver.length < 1) && ($ntpserver_texbox_visible === false)) {
        return;
    }
    errCode = validateHostNameOrIP(ntpserver, "NTP");
    if (errCode !== 0) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_NTP_" + errCode.toString());
        } else {
            errors.push("Setting_NTP_" + errCode.toString());
        }
        isValid = false;
        bError = true;
    }
}
function invertNetmask(netmask) {
    var ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
    var netmaskArray = netmask.match(ipPattern);
    var inverseNetmask = "";
    inverseNetmaskArray = new Array();
    for (i = 0; i < 4; i++) {
        ipSegment = netmaskArray[i + 1];
        inverseNetmaskArray[i] = (255 - ipSegment);
        inverseNetmask += inverseNetmaskArray[i].toString();
        if (i < 3) {
            inverseNetmask += ".";
        }
    }
    return inverseNetmask;
}
function validateNetMask(netmask) {
    errCode = validateIP(netmask, "NETMASK");
    if (errCode !== 0) {
        return errCode;
    }
    var flag = "";
    var correct_range = {
        128: 1,
        192: 1,
        224: 1,
        240: 1,
        248: 1,
        252: 1,
        254: 1,
        255: 1,
        0: 1
    };
    var m = netmask.split(".");
    var binRepresentation = parseInt(m[0]).toString(2) + "" + parseInt(m[1]).toString(2) + "" + parseInt(m[2]).toString(2) + "" + parseInt(m[3]).toString(2);
    if ((m[0] === "0") || (m[0] != "255" && m[1] !== "0") || (m[1] != "255" && m[2] !== "0") || (m[2] != "255" && m[3] !== "0") || (binRepresentation.indexOf("01", 0) >= 0)) {
        return 1009;
    }
    return 0;
}
function validateGateway(obj, showToolTip) {
    var bError = false;
    var gatewayID = $(obj).attr("id");
    var gateway = $(obj).val();
    if (gateway === "") {
        return;
    }
    errCode = validateIP($(obj).val(), "GATEWAY", showToolTip);
    if (errCode !== 0) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_GATEWAY_" + errCode.toString());
        } else {
            errors.push("Setting_GATEWAY_" + errCode.toString());
        }
        isValid = false;
        bError = true;
    }
    var strIpAddress;
    var subnetMask;
    if (gatewayID == "SettingGateway") {
        strIpAddress = $("#SettingIp").val();
        subnetMask = $("#SettingNetmask").val();
    } else {
        if (gatewayID == "wifi_signin_SettingGateway") {
            strIpAddress = $("#wifi_signin_SettingIp").val();
            subnetMask = $("#wifi_signin_SettingNetmask").val();
        } else if(gatewayID == "wifi_signin_SettingGateway_h"){
            strIpAddress = $("#wifi_signin_SettingIp_h").val();
            subnetMask = $("#wifi_signin_SettingNetmask_h").val();
        }else {
            if (gatewayID == "wifi_modify_SettingGateway") {
                strIpAddress = $("#wifi_modify_SettingIp").val();
                subnetMask = $("#wifi_modify_SettingNetmask").val();
            }else if(gatewayID == "wifi_modify_SettingGateway_h"){
                strIpAddress = $("#wifi_modify_SettingIp_h").val();
                subnetMask = $("#wifi_modify_SettingNetmask_h").val();
            } else {
                if (gatewayID == "wifi_signin_to_other_SettingGateway") {
                    strIpAddress = $("#wifi_signin_to_other_SettingIp").val();
                    subnetMask = $("#wifi_signin_to_other_SettingNetmask").val();
                }else if(gatewayID == "wifi_signin_to_other_SettingGateway_h"){
                    strIpAddress = $("#wifi_signin_to_other_SettingIp_h").val();
                    subnetMask = $("#wifi_signin_to_other_SettingNetmask_h").val();
                }
            }
        }
    }
    errCode = validateIP(strIpAddress, "IPADDRESS", showToolTip);
    if (errCode !== 0) {
        $("#SettingIp").addClass("error");
//        if (showToolTip) {
//            displayToolTip(obj, "Setting_IPADDRESS_" + errCode.toString());
//        } else {
//            errors.push($(obj).attr("id"));
//        }
        isValid = false;
        bError = true;
    }
    errCode = validateNetMask(subnetMask, showToolTip);
    if (errCode !== 0) {
//        $("#SettingNetmask").addClass("error");
//        if (showToolTip) {
//            displayToolTip(obj, "Setting_NETMASK_" + errCode.toString());
//        } else {
//            errors.push("Setting_NETMASK_" + errCode.toString());
//        }
        isValid = false;
        bError = true;
    }
    if (bError === true) {
        return;
    }
    var ipPattern = /^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/;
    var subnetAddress = "";
    var subnetGatewayAddress = "";
    var ipArray = strIpAddress.split(".");
    var netArray = subnetMask.split(".");
    var gatewayArray = gateway.split(".");
    var networkAddressArray = getNetworkAddressArray(ipArray, netArray);
    var broadcastAddressArray = getBroadcastAddressArray(networkAddressArray, netArray);
    var ipInt = ipArrayToInt(ipArray);
    var gatewayInt = ipArrayToInt(gatewayArray);
    var networkAddressInt = ipArrayToInt(networkAddressArray);
    var broadcastAddressInt = ipArrayToInt(broadcastAddressArray);
    if (gatewayInt <= networkAddressInt || gatewayInt >= broadcastAddressInt) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_GATEWAY_1009");
        } else {
            errors.push("Setting_GATEWAY_1009");
        }
        isValid = false;
    }
    if (ipInt === gatewayInt) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj, "Setting_IPADDRESS_1000");
        } else {
            errors.push("Setting_IPADDRESS_1000");
        }
        isValid = false;
    }
}
function validatePassword(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    if ($(obj).val().length > 32 || $(obj).val().indexOf('"') > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateWPANetworkPassword(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    
    if ($(obj).val().length < 8 || $(obj).val().length > 64 || $(obj).val().indexOf('"') > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push("wpa_password_error");
            $(obj).parents(".content_row").next(".password_msg").html(errorsList["wpa_password_error"]).show();
            $("#create_network_password_tip").hide();
        }
        if (($(obj).attr("id") == "create_network_password_high_band") || ($(obj).attr("id") == "create_network_password_low_band") || ($(obj).attr("id") == "create_network_password_high_band_show") || ($(obj).attr("id") == "create_network_password_low_band_show") || ($(obj).attr("id") == "create_network_password_low_band_confirm") || ($(obj).attr("id") == "create_network_password_high_band_confirm")) {
          	
            $("#create_network_password_tip").addClass("error");
        }
        isValid = false;
    }else{
      $(obj).parent(".content_row").next(".password_msg").empty().hide();
      $("#create_network_password_tip").show();
    }
}
function validateWEPNetworkPassword(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    var myRegexp = /^([a-fA-F0-9]+)$/;
    var WEPPassword = $(obj).val();
    var WEPPasswordLength = WEPPassword.length;
    if (WEPPassword.indexOf('"') > -1) {
        isValid = false;
    } else {
        if (WEPPasswordLength == 5 || WEPPasswordLength == 13) {} else {
            if (WEPPasswordLength == 10 || WEPPasswordLength == 26) {
                if (!myRegexp.test(WEPPassword)) {
                    isValid = false;
                }
            } else {
                isValid = false;
            }
        }
    }
    if (!isValid) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push("wep_password_error");
        }
    }
}
function validateWPSPin(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    var myRegexp = /^([0-9]+)$/;
    if ($(obj).val().length != 8 || !myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateNetworkSSID(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    var ssidName = $(obj).val();
    var ssidNameLength = ssidName.length;
  
	if ((ssidName[0] == " ") || (ssidName[ssidNameLength - 1] == " ")) {
		$(obj).addClass("error");
		if (showToolTip) {
			displayToolTip("ssidname_begin_end_space");
		} else {
			errors.push("ssidname_begin_end_space");
		}
		isValid = false;
	}
}
function validateSharePassword(obj, showToolTip) {
    if ($(obj).val() === "") {
        return;
    }
    if ($(obj).val().length > 16 || $(obj).val().indexOf('"') > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateSafepointName(obj, showToolTip) {
    var myRegexp = /^\w+$/i;
    var reserved = [""];
    test = $.inArray($(obj).val(), reserved);
    if ($(obj).val().length < 1 || $(obj).val().length > 32 || !myRegexp.test($(obj).val()) || test > -1) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateConfirmPassword(obj, showToolTip, secondPassword) {
    var passwordClass = "input.PASSWORD";
    if (($(obj).attr("id") == "create_network_password_low_band_confirm") || ($(obj).attr("id") == "create_network_password_high_band_confirm") || ($(obj).attr("id") == "wifi_edit_config_form_password_confirm") || ($(obj).attr("id") == "wifi_edit_config_form_password_confirm_5g")) {
        passwordClass = "input.NETWORK_PASSWORD";
        if (secondPassword) {
            passwordClass = "input.NETWORK_PASSWORD2";
        }
    }
    mainPassword = $(formName).find(passwordClass).val();
    if ($(obj).val() != mainPassword) {
        $(obj).addClass("error");
        if (($(obj).attr("id") == "edit_user_password_confirm") || ($(obj).attr("id") == "create_login_password_confirm") || ($(obj).attr("id") == "create_network_password_low_band_confirm") || ($(obj).attr("id") == "create_network_password_high_band_confirm") || ($(obj).attr("id") == "settings_admin_user_form_password_confirm") || ($(obj).attr("id") == "wifi_edit_config_form_password_confirm") || ($(obj).attr("id") == "wifi_edit_config_form_password_confirm_5g")) {
            if (showToolTip) {
                displayToolTip(obj, "password_not_match");
            } else {
                errors.push("password_not_match");
            }
        } else {
            if (showToolTip) {
                displayToolTip(obj);
            } else {
                errors.push($(obj).attr("id"));
            }
        }
        isValid = false;
    }
}
function validateConfirmOwnerPassword(obj, showToolTip) {
    mainPassword = $(formName).find("input.PASSWORD").eq(1).val();
    if ($(obj).val() != mainPassword) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateEmailNotRequired(obj, showToolTip) {
    if ($(obj).val().length < 1) {
        return;
    }
    var myRegexp = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9\-]{2,4})+$/;
    if (!myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateEmail(obj, showToolTip) {
    var myRegexp = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9\-]{2,4})+$/;
    if (!myRegexp.test($(obj).val())) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateWebAccountEmail(obj, showToolTip) {
    var newWebAccountEmail = $(obj).val();
    var dupEmail = false;
    $(".webaccount_list_item").each(function(idx) {
        if (idx > 0) {
            idxWebAccountEmail = $(this).find("#account_email_id").html();
            if (newWebAccountEmail.toLowerCase() == idxWebAccountEmail.toLowerCase()) {
                $(obj).addClass("error");
                if (showToolTip) {
                    displayToolTip(obj, "save_webaccount_duplicate");
                } else {
                    errors.push("save_webaccount_duplicate");
                }
                isValid = false;
                return;
            }
        }
    });
}
function validateConfirmEmail(obj, showToolTip) {
    mainEmail = $(formName).find("input.EMAIL").val();
    if ($(obj).val() != mainEmail) {
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateCustomNetworkPort(obj, showToolTip) {
    if ($(obj).val().length < 1) {
        return;
    }
    var myRegexp = /^([0-9]+)$/;
    var portnum = parseInt($(obj).val(), 10);
    var isError = false;
    if ($(obj).val().length > 5 || !myRegexp.test($(obj).val())) {
        isError = true;
    } else {
        if (portnum < 1024 || portnum > 65535) {
            if ($(obj).hasClass("HTTP_PORT") && portnum == 80) {
                isError = false;
            } else {
                if ($(obj).hasClass("HTTPS_PORT") && portnum == 443) {
                    isError = false;
                } else {
                    isError = true;
                }
            }
        }
    }
    if (isError) {
        var newmsg;
        if ($(obj).hasClass("HTTP_PORT")) {
            if (errorsList["remote_access_settings_manual_port1_orig"] == undefined) {
                errorsList["remote_access_settings_manual_port1_orig"] = errorsList["remote_access_settings_manual_port1"];
            } else {
                errorsList["remote_access_settings_manual_port1"] = errorsList["remote_access_settings_manual_port1_orig"];
            }
            newmsg = errorsList["remote_access_settings_manual_port1"].replace("{0}", portnum);
            errorsList["remote_access_settings_manual_port1"] = newmsg;
        } else {
            if ($(obj).hasClass("HTTPS_PORT")) {
                if (errorsList["remote_access_settings_manual_port2_orig"] == undefined) {
                    errorsList["remote_access_settings_manual_port2_orig"] = errorsList["remote_access_settings_manual_port2"];
                } else {
                    errorsList["remote_access_settings_manual_port2"] = errorsList["remote_access_settings_manual_port2_orig"];
                }
                newmsg = errorsList["remote_access_settings_manual_port2"].replace("{0}", portnum);
                errorsList["remote_access_settings_manual_port2"] = newmsg;
            }
        }
        $(obj).addClass("error");
        if (showToolTip) {
            displayToolTip(obj);
        } else {
            errors.push($(obj).attr("id"));
        }
        isValid = false;
    }
}
function validateDupHTTPSNetworkPort(obj, showToolTip) {
    var https_port = $(obj).val();
    var http_port = $(formName).find("input.HTTP_PORT").val();
    if (https_port == http_port) {
        $(obj).addClass("error");
        isValid = false;
        bError = true;
        if (showToolTip) {
            displayToolTip(obj, "https_port_dup");
        } else {
            errors.push("https_port_dup");
        }
    }
}
function displayToolTip(obj, errorMsg) {
    var tooltip_message;
    if (typeof errorMsg == "undefined" || errorMsg == null ) {
        errorMsg = $(obj).attr("id");
    }
    var itemToAppend = $(obj);
    var inputBoxParent = $(obj).parent(".deleteicon");
    if (inputBoxParent.length > 0) {
        itemToAppend = inputBoxParent[0];
    }
    if (errorsList[errorMsg] != undefined) {
        tooltip_message = errorsList[errorMsg];
    } else {
        tooltip_message = errorMsg;
    }
    $('<span class="error_tooltip_container"><span class="error_icon"></span><span class="tooltip_inner_container"><span class="tooltip">' + tooltip_message + "</span></span></span>").insertAfter(itemToAppend).find(".error_icon").bind("mouseover touchstart click", function() {
        var tooltip = $(this).siblings(".tooltip_inner_container").find(".tooltip").first();
        if (!tooltip.is(":visible")) {
            var timeToShow = 3000 + tooltip.html().length * 70;
            tooltip.show().oneTime(timeToShow, function() {
                $(this).fadeOut(200);
            });
        }
    }).bind("mouseleave", function() {
        var tooltip = $(this).siblings(".tooltip_inner_container").find(".tooltip").first();
        tooltip.hide();
    });
}
$(document).ready(function() {
    $("#share_user_access_list_container").data("users", new Object());
    $("#share_delete").attr("disabled", true);
    $("#share_delete").addClass("ui-state-disabled");
    $("#edit_share_name").restForm({
        "relatedForms": ["edit_share_description", "edit_share_media", "edit_share_public_access"],
        "setDefaultFormDataCallback": function(data) {
            var originalShareName = $("#share_originalname").val();
            var newName = $("#share_new_share_name").val();
            var listData = $("#shares_list").data("shares").share;
            var itemToRemove = null ;
            for (var i in listData) {
                if (listData[i].share_name == originalShareName) {
                    itemToRemove = i;
                    break;
                }
            }
            if (itemToRemove != null ) {
                listData.splice(itemToRemove, 1);
            }
            var itemToAdd = {
                "share_name": $("#share_new_share_name").val(),
                "sharename": $("#share_new_share_name").val(),
                "description": $("#edit_share_name input[name=description]").val(),
                "media_serving": $("#edit_share_name input[name=media_serving]").val(),
                "public_access": $("#edit_share_name input[name=public_access]").val(),
                "remote_access": $("#edit_share_name input[name=remote_access]").val()
            };
            if (listData != null ) {
                listData.push(itemToAdd);
            }
            $("#share_originalname").val(newName);
            $("#shares_list #share_" + originalShareName + " .share_list_sharename").text(newName);
            $("#shares_list #share_" + originalShareName).attr("id", "share_" + newName);
            $("#edit_share_description").find("input[name=share_name]").val(newName);
            $("#edit_share_media").find("input[name=share_name]").val(newName);
            $("#edit_share_public_access").find("input[name=share_name]").val(newName);
            $("#edit_share_name").restForm("_setDefaultFormData", data);
            $("#delete_share_form #delete_share_name").val(newName);
            $("#shares_list #share_" + originalShareName + " a").attr("href", function() {
                var splitUri = $(this).attr("href").split("/");
                for (var i = splitUri.length - 1; i >= 0; --i) {
                    if (splitUri[i] == originalShareName) {
                        splitUri[i] = newName;
                        break;
                    }
                }
                return splitUri.join("/");
            });
            $("#users_list #share_" + originalShareName).attr("id", "share_" + newName);
            $("#edit_share_name").attr("action", $("#edit_share_default").attr("action") + "/" + newName);
            $("#edit_share_description").attr("action", $("#edit_share_default").attr("action") + "/" + newName);
            $("#edit_share_media").attr("action", $("#edit_share_default").attr("action") + "/" + newName);
            $("#edit_share_public_access").attr("action", $("#edit_share_default").attr("action") + "/" + newName);
        }
    });
    $("#edit_share_description").restForm({
        "relatedForms": ["edit_share_name", "edit_share_media", "edit_share_public_access"]
    });
    $("#edit_share_media").restForm({
        "relatedForms": ["edit_share_name", "edit_share_description", "edit_share_public_access"],
        "refreshDataCallback": function(data) {
            if (data.media_serving != undefined) {
                if (data.media_serving == "any") {
                    $("#edit_share_media").find("#share_media_sharing").attr("checked", true);
                } else {
                    $("#edit_share_media").find("#share_media_sharing").attr("checked", false);
                }
            }
            $("#edit_share_media").find('input[name="share_name"]').val(data.share_name);
            $("#edit_share_media").find('input[name="description"]').val(data.description);
            $("#edit_share_media").find('input[name="public_access"]').val(data.public_access);
            $("#edit_share_media").find('input[name="remote_access"]').val(data.remote_access);
            $("#edit_share_media").find('input[name="share_name"]')[0].defaultValue = data.share_name;
            $("#edit_share_media").find('input[name="description"]')[0].defaultValue = data.description;
            $("#edit_share_media").find('input[name="public_access"]')[0].defaultValue = data.public_access;
            $("#edit_share_media").find('input[name="remote_access"]')[0].defaultValue = data.remote_access;
        },
        "inputRadioCheckboxChangeCallback": function() {
            if ($("#share_media_sharing").is(":checked")) {
                $("#share_media_sharing_value").val("any");
            } else {
                $("#share_media_sharing_value").val("none");
            }
            $("#edit_share_media").submit();
        },
        "setDefaultRelatedFormsDataCallback": function() {
            var relatedForms = $("#edit_share_media").data("restFormSettings").relatedForms;
            if (relatedForms != null ) {
                var data = {
                    "media_serving": $("#share_media_sharing_value").val()
                };
                for (var i in relatedForms) {
                    $("#" + relatedForms[i]).restForm("refreshData", data, false);
                }
            }
        }
    });
    $("#edit_share_public_access").restForm({
        "relatedForms": ["edit_share_name", "edit_share_description", "edit_share_media"],
        "refreshDataCallback": function(data) {
            $("#edit_share_public_access").restForm("_refreshData", data);
        },
        "hideProcessingCallback": function(ignoreChildren, hideLoadingDisplay) {
            if ($("#share_new_share_name").val() != "Public") {
                $("#edit_share_public_access").restForm("_hideProcessing", ignoreChildren, hideLoadingDisplay);
            }
        },
        "setDefaultRelatedFormsDataCallback": function(data) {
            var relatedForms = $("#edit_share_public_access").data("restFormSettings").relatedForms;
            if (relatedForms != null ) {
                if (typeof (data) == "undefined") {
                    var data = {};
                }
                if ($("#share_public_access_checkbox").is(":checked")) {
                    data["public_access"] = "true";
                } else {
                    data["public_access"] = "false";
                }
                for (var i in relatedForms) {
                    $("#" + relatedForms[i]).restForm("refreshData", data, false);
                }
            }
        },
        "setDefaultFormDataCallback": function(data) {
            $("#edit_share_public_access").restForm("_setDefaultFormData", data);
            $("#edit_share_name input[name=public_access]").val();
            $("#edit_share_description input[name=public_access]").val();
            $("#edit_share_media input[name=public_access]").val();
            $("#user_access_list li").each(function() {
                if ($("#share_public_access_checkbox").is(":checked")) {
                    $(this).addClass("ui-state-disabled");
                    $(this).find(".access_link_container").find(".access_link").removeClass("selected");
                    $(this).find(".share_access_description").text(dictionaryList["public"]);
                    $(this).find("button").attr("disabled", "disabled").addClass("ui-state-disabled");
                } else {
                    $(this).find(".access_link_container").css("display", "inline-block");
                    $(this).removeClass("ui-state-disabled");
                    $(this).find("button").removeAttr("disabled").removeClass("ui-state-disabled");
                    var accessButtonSelected = $(this).find(".access_link.selected");
                    var accessType = "no";
                    if (accessButtonSelected.length > 0) {
                        if (accessButtonSelected.hasClass("share_rw_access")) {
                            accessType = "rw";
                        } else {
                            if (accessButtonSelected.hasClass("share_ro_access")) {
                                accessType = "ro";
                            } else {
                                if (accessButtonSelected.hasClass("share_no_access")) {
                                    accessType = "no";
                                }
                            }
                        }
                    } else {
                        accessType = "no";
                        $(this).find(".share_no_access").addClass("selected");
                    }
                    $(this).find(".share_access_description").text(dictionaryList[accessType]);
                }
            });
        }
    });
    $("#share_public_access_checkbox").live("toggle", function(e) {
        e.preventDefault();
        $("#share_public_access_checkbox").submit();
    });
    $("#shares_list_navigation").listNavigation({
        "containerName": "shares",
        "prefix": "share",
        "userAjaxCall": null ,
        "beforeRetrieveData": function() {
            $("#edit_share_name").restForm("showProcessing", false, true);
        },
        "afterRetrieveData": function() {
            $("#edit_share_name").restForm("hideProcessing", false, true);
        },
        "prepareLinkCall": function(i, a, item) {
            return a + "/" + item;
        },
        "afterShowItem": function(itemData) {
            if (typeof itemData.usb_handle != "undefined") {
                $("#share_delete_button_container").addClass("ui-state-disabled");
                $("#share_delete").addClass("ui-state-disabled");
                $("#share_delete").attr("disabled", "disabled");
            } else {
                $("#share_delete").removeAttr("disabled");
                $("#share_delete").removeClass("ui-state-disabled");
                $("#share_delete_button_container").removeClass("ui-state-disabled");
            }
            if ($(this).data("listNavigationSettings").userAccessAjaxCall != null ) {
                $(this).data("listNavigationSettings").userAccessAjaxCall.abort();
            }
            $(this).data("listNavigationSettings").userAccessAjaxCall = $.ajaxAPI({
                "url": "users",
                "before": function() {
                    $("#user_access_list li:first").siblings().each(function() {
                        $(this).remove();
                    });
                },
                "success": function(data) {
                    if (data != null && data.users != null && data.users.user != null ) {
                        if (Object.prototype.toString.call(data.users.user) != "[object Array]") {
                            data.users.user = $.makeArray(data.users.user);
                        }
                        var shares = $("#shares_list_navigation").data("listNavigationSettings").cache;
                        var share = null ;
                        var i;
                        var j;
                        for (i in shares) {
                            if (shares[i].share_name == $("#share_originalname").val()) {
                                share = shares[i];
                                break;
                            }
                        }
                        share = itemData;
                        var users = new Array();
                        for (i in data.users.user) {
                            users.push(data.users.user[i]);
                        }
                        $.each(data.users.user, function(i, item) {
                            var shareAccess = "RW";
                            var shareAccessFound = false;
                            if (Object.prototype.toString.call(share.share_access) != "[object Array]") {
                                share.share_access = $.makeArray(share.share_access);
                            }
                            for (j in share.share_access) {
                                if (share.share_access[j].username == item.username) {
                                    shareAccessFound = true;
                                    shareAccess = share.share_access[j].access;
                                    break;
                                }
                            }
                            if (!shareAccessFound) {
                                shareAccess = "NO";
                            }
                            AddToShareUserAccessList(item.username, shareAccess, share, users, item, share.public_access == "true");
                        });
                    }
                }
            });
        },
        "updateDetailForm": function(data) {
            $("#edit_share_name").attr("action", $("#edit_share_default").attr("action") + "/" + data.share_name);
            $("#edit_share_description").attr("action", $("#edit_share_default").attr("action") + "/" + data.share_name);
            $("#edit_share_media").attr("action", $("#edit_share_default").attr("action") + "/" + data.share_name);
            $("#edit_share_public_access").attr("action", $("#edit_share_default").attr("action") + "/" + data.share_name);
            $("#edit_share_name").restForm("refreshData", data);
            $("#edit_share_name").restForm("refreshRelatedForms", data);
            totalSizeString = ByteSize(data.size);
            $("#share_details_size").html(totalSizeString);
            $("#delete_share_form #delete_share_name").val(data.share_name);
            $("#share_originalname").val(data.share_name);
            $("#share_originalname")[0].defaultValue = data.share_name;
            $("#share_new_share_name").val(data.share_name);
            $("#share_new_share_name")[0].defaultValue = data.share_name;
        },
        "selectItem": function(data) {
            $("#shares_list ul.listNavigation li.selected").removeClass("selected");
            $("#shares_list ul.listNavigation li#share_" + data.share_name).addClass("selected");
            $("#share_delete").attr("disabled", false);
            $("#share_delete").removeClass("ui-state-disabled");
            hideSharesBumper();
        }
    });
    $("#delete_share_form").restForm({
        "processFormSuccessCallback": function() {
            $("#shares_list_navigation").listNavigation("removeFromList", $("#delete_share_name").val());
            var listData = $("#shares_list").data("shares").share;
            var itemToRemove = null ;
            for (var i in listData) {
                if (listData[i].share_name == $("#delete_share_name").val()) {
                    itemToRemove = i;
                    break;
                }
            }
            if (itemToRemove != null ) {
                listData.splice(itemToRemove, 1);
            }
            $("#shares_list").ferrisWheelNav({
                "nav_container_cls": "listNavigation",
                "nav_cls": "leftmenu",
                "nav_ul_cls": "listNavigation"
            });
        }
    });
    $("#delete_share_confirmation").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_share",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#delete_share_confirmation").attr("title") + "</div>"
    });
    $("#delete_share_close_button").click(function() {
        $("#delete_share_confirmation").dialog("close");
    });
    $("#delete_share_ok_button").click(function() {
        $("#delete_share_confirmation").dialog("close");
        $("#delete_share_form").submit();
    });
    $("#share_delete").live("click", function(event) {
        event.preventDefault();
        $("#delete_share_confirmation").dialog("open");
    });
    $(".edit_share_user_access_form").each(function() {
        SetShareUserAccessListRestForm($(this));
    });
    $("#share_user_access_list_container .access_link").each(function() {
        if (typeof ($(this).data("access_link_click_set")) == "undefined") {
            $(this).data("access_link_click_set", true);
            $(this).click(function(e) {
                e.preventDefault();
                $(this.form).find("input[name=type]").val($(this).val());
                $("#user_access_overlay_" + $(this.form).find("input[name=shareName]")).show();
                $(this.form).submit();
            });
        }
    });
    $("#create_share_btn").live("click", function(e) {
        e.preventDefault();
        $("#create_share_form").restForm("reset");
        $("#create_share_dialog").dialog("open");
    });
    $("#create_share_dialog").mochiDialog({
        autoOpen: false,
        resizable: false,
        width: 600,
        minHeight: 285,
        dialogClass: "mochi_dialog mochi_dialog_share",
        modal: true,
        stack: false,
        title: '<div id="create_share_dialog_title" class="wizard_dialog_title">' + $("#create_share_dialog").attr("title") + "</div>"
    });
    $("#create_share_wizard_close_button").click(function() {
        $("#create_share_dialog").dialog("close");
    });
    $("#create_share_form").restFormDialog({
        "dialogName": "create_share_dialog",
        "beforeProcessForm": function() {
            if ($("#create_share_media_sharing").is(":checked")) {
                $("#create_share_media_serving_default").val("any");
            } else {
                $("#create_share_media_serving_default").val("none");
            }
        },
        "setDefaultFormDataCallback": function(data) {
            if ($("#shares_list_navigation .listNavigation li").length > 1) {
                var mediaServingValue = $("#create_share_media_serving_default").val();
                if ($("#create_share_media_sharing:checked").length > 0) {
                    mediaServingValue = $("#create_share_media_sharing").val();
                }
                var itemToAdd = {
                    "share_name": $("#create_share_name").val(),
                    "sharename": $("#create_share_name").val(),
                    "description": $("#create_share_description").val(),
                    "media_serving": mediaServingValue,
                    "public_access": $("#create_share_public_access").val(),
                    "remote_access": $("create_share_remote_access").val()
                };
                $("#shares_list_navigation").listNavigation("addToList", $("#create_share_name").val(), false, null , itemToAdd);
                var listData = $("#shares_list").data("shares");
                if (listData != null ) {
                    listData["share"].push(itemToAdd);
                    $("#share_" + $("#create_share_name").val() + " a.share").click();
                }
                $("#shares_list").ferrisWheelNav({
                    "nav_container_cls": "listNavigation",
                    "nav_cls": "leftmenu",
                    "nav_ul_cls": "listNavigation"
                });
            }
            var dashboardCount = parseInt($("#dashboard_shares_count").text());
            if (!isNaN(dashboardCount)) {
                $("#dashboard_shares_count").text(dashboardCount + 1);
            }
            $("#create_share_dialog").dialog("close");
        }
    });
});
function AddToShareUserAccessList(userName, shareAccess, share, users, userData, isPublic) {
    var cloneLi = $("#share_user_access_list_container .share_access_list li:first").clone();
    cloneLi.attr("id", "user_access_item_" + userName);
    cloneLi.find(".user_access_overlay").attr("id", "user_access_overlay_" + userName);
    cloneLi.find(".user_access_label_text").text(userName);
    if (userData.is_admin == "true") {
        cloneLi.find(".user_access_label").addClass("admin_user_access_label");
    }
    cloneLi.find(".access_link.selected").each(function() {
        $(this).removeClass("selected");
    });
    cloneLi.find(".share_access_description").attr("id", "share_user_access_item_description_" + userName);
    switch (shareAccess) {
    case "RW":
        cloneLi.find(".share_rw_access").addClass("selected");
        cloneLi.find("#share_user_access_item_description_" + userName).text(dictionaryList["rw"]);
        break;
    case "RO":
        cloneLi.find(".share_ro_access").addClass("selected");
        cloneLi.find("#share_user_access_item_description_" + userName).text(dictionaryList["ro"]);
        break;
    case "NO":
        cloneLi.find(".share_no_access").addClass("selected");
        cloneLi.find("#share_user_access_item_description_" + userName).text(dictionaryList["no"]);
        break;
    default:
        break;
    }
    if (isPublic) {
        cloneLi.find(".access_link_container").find(".access_link").removeClass("selected");
        cloneLi.find("button").attr("disabled", "disabled").addClass("ui-state-disabled");
        cloneLi.addClass("ui-state-disabled");
        cloneLi.find("#share_user_access_item_description_" + userName).text(dictionaryList["public"]);
    }
    cloneLi.shareAccessHandler({
        user: userName,
        share: share,
        users: users
    });
    cloneLi.appendTo($("#share_user_access_list_container .share_access_list"));
    SetShareUserAccessListRestForm($("#edit_share_user_access_form_" + userName));
}
function SetShareUserAccessListRestForm(element) {
    element.restForm({
        "setDefaultFormDataCallback": function(data) {
            $(this).find(".access_link").each(function() {
                $(this).removeClass("selected");
            });
            switch (data.Access) {
            case "RW":
                $("#share_user_access_item_description_" + $(this).find("input[name=userName]").val()).text("Full Access");
                break;
            case "RO":
                $("#share_user_access_item_description_" + $(this).find("input[name=userName]").val()).text("Read Only");
                break;
            case "NO":
                $("#share_user_access_item_description_" + $(this).find("input[name=userName]").val()).text("No Access");
                break;
            default:
                break;
            }
        },
        "showProcessingCallback": function() {
            $("#user_access_overlay_" + $(this).find("input[name=userName]").val()).animate({
                opacity: "show"
            }, {
                duration: 500
            });
        },
        "hideProcessingCallback": function() {
            $("#user_access_overlay_" + $(this).find("input[name=userName]").val()).animate({
                opacity: "hide"
            }, {
                duration: 500
            });
        }
    });
}
function hideSharesBumper() {
    $("#about_shares").hide();
    $("#shares_edit_container").show();
}
$(document).ready(function() {
    var help_url = "/UI/help/"+gLanguage+"/WebHelp/index.htm";
    $('#help_iframe').attr('src', help_url);
    
    $("#help_about_link").click(function(e) {
        e.preventDefault();
        $("#about_firmware_version").text(VERSION);
        $("#about_dialog").dialog("open");
    });
    $("#help_topic_help").click(function(e) {
        e.preventDefault();
        $("#help_dialog").dialog("open");
        document.getElementById("help_iframe").setAttribute("style","width:730px; height: 440px;");
    });
    $("#about_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_logo",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#about_dialog").attr("title") + "</div>",
        open: function() {
            $("#about_dialog_close_button").focus();
        }
    });
    $("#about_dialog_close_button").click(function() {
        $("#about_dialog").dialog("close");
    });
    $("#help_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 800,
        minHeight: 640,
        dialogClass: "mochi_dialog mochi_dialog_logo",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#help_dialog").attr("title") + "</div>"
    });
    $("#help_close_button").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        document.getElementById("help_iframe").removeAttribute("style");
        $("#help_dialog").dialog("close");
    });
    $(".help_load_content").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_load_content > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".help_connect_with_usb").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_connect_with_usb > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".help_get_led_meaning").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_get_led_meaning > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".help_first_connect_status").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_first_connect_status > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".help_connect_to_internet").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_connect_to_internet > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".help_copy_with_usb").click(function(event) {
        $("#help_container > div.toggleLeftArrow.down > .disclosureTitle").click();
        $("#help_copy_with_usb > .disclosureTitle").click();
        $("#help_container").scrollTop(0);
    });
    $(".toggleLeftArrow").each(function() {
        var disclosureId = $(this).attr("id");
        $("#" + disclosureId + " > .disclosureTitle").toggle(function() {
            $("#" + disclosureId).removeClass("up").addClass("down");
            $("#" + disclosureId + " > .disclosureContent").css({
                display: "block"
            });
            $(this).parent().siblings(".up").css({
                display: "none"
            });
            $("#help_container").scrollTop(0);
        }, function() {
            $("#" + disclosureId).removeClass("down").addClass("up");
            $("#" + disclosureId + " > .disclosureContent").css({
                display: "none"
            });
            $(this).parent().siblings(".up").css({
                display: "block"
            });
        });
    });
    var helpmsg = dictionaryList["help_first_connect_status_for_pc"].replace("{0}", '<a href="http://mypassport" target="_blank">http://mypassport</a>');
    $("#help_first_connect_status_for_pc").html(helpmsg);
    helpmsg = dictionaryList["help_first_connect_status_for_mac"].replace("{0}", '<a href="http://mypassport.local" target="_blank">http://mypassport.local</a>');
    $("#help_first_connect_status_for_mac").html(helpmsg);
    helpmsg = dictionaryList["help_getting_started_more_info"].replace("{0}", '<a href="http://wd.com/setup/mypassportwireless" target="_blank">http://wd.com/setup/mypassportwireless</a>');
    $("#help_getting_started_more_info").html(helpmsg);
    helpmsg = dictionaryList["help_connect_with_usb_more_info"].replace("{0}", '<a href="http://wd.com/setup/mypassportwireless" target="_blank">http://wd.com/setup/mypassportwireless</a>');
    $("#help_connect_with_usb_more_info").html(helpmsg);
});
function createCookie(name, value, days) {
    var expires = "";
    if (days) {
        var date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        expires = "; expires=" + date.toGMTString();
    }
    document.cookie = name + "=" + value + expires + "; path=/";
}
function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(";");
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == " ") {
            c = c.substring(1, c.length);
        }
        if (c.indexOf(nameEQ) == 0) {
            return c.substring(nameEQ.length, c.length);
        }
    }
    return null ;
}
function eraseCookie(name) {
    createCookie(name, "", -1);
}
function are_cookies_enabled() {
    var cookieEnabled = (navigator.cookieEnabled) ? true : false;
    if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
        createCookie("testcookie", "", 0);
        cookieEnabled = (readCookie("testcookie")) ? true : false;
    }
    return ( cookieEnabled) ;
}
$(document).ready(function() {
    $("#battery_settings_power_profile").restForm({
        "refreshDataCallback": function(data) {
            if (data != null  && data.power_profile != null ) {
                if (data.power_profile.profile == "max_life") {
                    $("#settings_battery_max_life_button").addClass("button-selected");
                    $("#settings_battery_media_performance_button").removeClass("button-selected");
                } else {
                    $("#settings_battery_media_performance_button").addClass("button-selected");
                    $("#settings_battery_max_life_button").removeClass("button-selected");
                }
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#settings_battery_profile").val() == "max_life") {
                $("#settings_battery_max_life_button").addClass("button-selected");
                $("#settings_battery_media_performance_button").removeClass("button-selected");
            } else {
                $("#settings_battery_media_performance_button").addClass("button-selected");
                $("#settings_battery_max_life_button").removeClass("button-selected");
            }
        }
    });
    $("#battery_status_form").restForm({
        "refreshDataCallback": function(data) {
            var battery_state = "unknown";
            var battery_percent = 0;
            if (data != null  && data.battery_status != null ) {
                battery_state = data.battery_status.state.toLowerCase();
                battery_percent = parseInt(data.battery_status.percent_remaining);
                $("#battery_settings_current_level_text").html(battery_percent + "%");
                if (battery_state == "charging" || battery_state == "discharging") {
                    $("#battery_settings_current_state_text").html(dictionaryList["battery_status_state_" + battery_state]);
                    if (battery_state == "charging") {
                        $("#dashboard_battery_information_available_image").removeClass("discharging");
                        $("#dashboard_battery_information_available_image").addClass("charging");
                    } else {
                        $("#dashboard_battery_information_available_image").removeClass("charging");
                        $("#dashboard_battery_information_available_image").addClass("discharging");
                    }
                } else {
                    $("#battery_settings_current_state_text").html(dictionaryList["_unknown"]);
                }
            }
        }
    });

    $("#settings_battery_max_life_button").click(function() {
        $("#battery_mode").text(dictionaryList["battery_note"]);
    	$("#battery_settings_dialog").dialog("open");
        $("#settings_battery_profile").val("max_life");
    });
    $("#settings_battery_media_performance_button").click(function() {
        $("#settings_battery_profile").val("max_system_performance");
        $("#battery_settings_power_profile").submit();
        
        if(gconnectingBand == "5" && Num2g4connectingBand == 0){
			var batteryWifiOptions = {
                "2.4": {
                    "enabled": true
                }
            };
            $.ajaxAPI({
                "url": "wifi_aps",
                "type": "PUT",
                "data": JSON.stringify(batteryWifiOptions),
                "dataType": "json",
                "contentType": "application/json; charset=UTF-8",
                "error": function(request, status, error) {
                    processAndDisplayError(request.responseText, "put" + "_" + "wifi_aps", request.status);
                },
                "success": function() {
                    
                }
            });
		}else{
			if(Num5gconnectingBand == 0){
				var batteryWifiOptions = {
                	"5": {
                    	"enabled": true
                	}
            	};
            	$.ajaxAPI({
                	"url": "wifi_aps",
                	"type": "PUT",
                	"data": JSON.stringify(batteryWifiOptions),
                	"dataType": "json",
                	"contentType": "application/json; charset=UTF-8",
                	"error": function(request, status, error) {
                	    processAndDisplayError(request.responseText, "put" + "_" + "wifi_aps", request.status);
                	},
                	"success": function() {
               	 }
            	});
            }
		}  
    });
	$("#battery_settings_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        modal: true,
        stack: false,
        dialogClass: "mochi_dialog mochi_dialog_info",
        title: '<div class="wizard_dialog_title">' + $("#battery_settings_dialog").attr("title") + "</div>"
    });
	$("#battery_settings_dialog_cancel_button").click(function() {
        $("#battery_settings_dialog").dialog("close");
    });
	$("#battery_settings_dialog_ok_button").click(function() {
        $("#battery_settings_dialog").dialog("close");
        $("#battery_settings_power_profile").submit();
			
        var batteryWifiOptions = {
            "5": {
                "enabled": false
            }
        };
        $.ajaxAPI({
            "url": "wifi_aps",
            "type": "PUT",
            "data": JSON.stringify(batteryWifiOptions),
            "dataType": "json",
            "contentType": "application/json; charset=UTF-8",
            "error": function(request, status, error) {
                processAndDisplayError(request.responseText, "put" + "_" + "wifi_aps", request.status);
            },
            "success": function() {}
        });
    });
    $("#dashboard_battery_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_battery",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#dashboard_battery_dialog").attr("title") + "</div>"
    });
    $("#dashboard_battery_close_button").click(function(e) {
        $("#power_profile_form").submit();
        $("#dashboard_battery_dialog").dialog("close");
    });
    $("#power_profile_form").restFormDialog({
        "dialogName": "create_user_wizard",
        "useStubs": false
    });
});
$(document).ready(function() {
    $("#dashboard_connected_devices_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_connected_devices",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#dashboard_connected_devices_dialog").attr("title") + "</div>"
    });
    $("#dashboard_devices_link").click(function(e) {
        e.preventDefault();
        $("#dashboard_connected_devices_dialog").dialog("open");
    });
    $("#dashboard_connected_devices_close_button").click(function() {
        $("#dashboard_connected_devices_dialog").dialog("close");
    });
    $("#connected_devices_list_refresh").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled") && !$(this).parent().hasClass("ui-state-disabled")) {
            updateConnectedDevices();
        }
    });
    $(".connected_device_delete").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            var mac_address = $(this).attr("rel");
            $("#wifi_ap_client_delete_form").attr("action", $("#wifi_ap_client_default_form").attr("action") + "?mac_address=" + mac_address);
            $("#wifi_ap_client_delete_form").submit();
        }
    });
    $("#wifi_ap_client_delete_form").restForm({
        "processFormSuccessCallback": function() {
            updateConnectedDevices(true);
        }
    });
});
function updateConnectedDevices(updateNetworkMode) {
    
    if ( wifiConnectedDevice_inprogress)
		return;    
    wifiConnectedDevice_inprogress = true;
    if (updateNetworkMode == undefined) {
        updateDiagrams = false;
    }
    $(".connected_devices_item.default").siblings().remove();
    disableIdTag("#connected_devices_list_refresh");
    var connected_device_count = 0;
    var currentTime = new Date().getTime();
    $.ajaxAPI({
        "url": "wifi_ap_clients",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_ap_clients != null  && data.wifi_ap_clients.wifi_ap_client != null ) {
                if (Object.prototype.toString.call(data.wifi_ap_clients.wifi_ap_client) != "[object Array]") {
                    data.wifi_ap_clients.wifi_ap_client = $.makeArray(data.wifi_ap_clients.wifi_ap_client);
                }
                for (var i in data.wifi_ap_clients.wifi_ap_client) {
                	if (data.wifi_ap_clients.wifi_ap_client[i].name == "") {
                    	data.wifi_ap_clients.wifi_ap_client[i].name = "Unknown";
                    }
                	
                    if (data.wifi_ap_clients.wifi_ap_client[i].name == "" && data.wifi_ap_clients.wifi_ap_client[i].ip == "") {
                    	return;
                    }
                    connected_device_count++;
                    var newItem = $(".connected_devices_item.default").clone();
                    newItem.removeClass("default");
                    newItem.find(".connected_device_delete").attr("rel", data.wifi_ap_clients.wifi_ap_client[i].mac);
                    
                   
                    var ipv6 = false;
                    if (gRemoteAddr.length > 15 || gRemoteAddr.indexOf('::') > -1){
                        var remoteIv6Addr_o = gRemoteAddr.split(":");
                        var remoteIv6Addr_c = remoteIv6Addr_o[remoteIv6Addr_o.length-2]+remoteIv6Addr_o[remoteIv6Addr_o.length-1]
                        var Iv6MacAddr = data.wifi_ap_clients.wifi_ap_client[i].mac.toLowerCase().split(":");
                        var Iv6MacAddr_c = Iv6MacAddr[Iv6MacAddr.length-3]+Iv6MacAddr[Iv6MacAddr.length-2]+Iv6MacAddr[Iv6MacAddr.length-1]
                        if(remoteIv6Addr_c.match(Iv6MacAddr_c)){
                           ipv6 = true;
                         }
                        
                    }
                    if (data.wifi_ap_clients.wifi_ap_client[i].ip == gRemoteAddr ||  data.wifi_ap_clients.wifi_ap_client[i].mac.toLowerCase() == gRemoteMacAddress.toLowerCase() || ipv6 == true) { 
                        newItem.find(".connected_device_image").addClass("connected_device_me_image");
                        newItem.find(".connected_device_delete").remove();
                        newItem.find(".connected_device_delete_container").find(".tooltip_inner_container").hide();
                        newItem.find(".wireless_label_text").text(dictionaryList["Me"]);
                        gFoundMe = true;
                        gconnectingBand = data.wifi_ap_clients.wifi_ap_client[i].connected_band;
                        
                        
                    } else {
                        if (data.wifi_ap_clients.wifi_ap_client[i].name != "") {
                            newItem.find(".wireless_label_text").text(data.wifi_ap_clients.wifi_ap_client[i].name);
                        } else {
                            newItem.find(".wireless_label_text").text(data.wifi_ap_clients.wifi_ap_client[i].ip);
                        }
                    }
                    var connectionUpTime = ms2Time(currentTime - data.wifi_ap_clients.wifi_ap_client[i].connected_time * 1000);
                    //var connectingBand = data.wifi_ap_clients.wifi_ap_client[i].connected_band;
                    newItem.find(".connected_device_name").text(data.wifi_ap_clients.wifi_ap_client[i].name);
                    newItem.find(".connected_device_ipaddress").text(data.wifi_ap_clients.wifi_ap_client[i].ip);
                    newItem.find(".connected_device_macaddress").text(data.wifi_ap_clients.wifi_ap_client[i].mac);
                    newItem.find(".connected_device_uptime").text(connectionUpTime);
                    connectingBand = data.wifi_ap_clients.wifi_ap_client[i].connected_band;
                    if(connectingBand == 2){
                    	Num2g4connectingBand++;
                    }
                    else{
						Num5gconnectingBand++;
                    }
                    $("#connected_devices_list").append(newItem);
                }
            }
            wifiConnectedDevice_inprogress = false;
        },
        "error": function(request, status, error) {},
        "complete": function() {
            enableIdTag("#connected_devices_list_refresh");
            if (connected_device_count) {
                gConnectedDevices = true;
            } else {
                gConnectedDevices = false;
            }
            if (!gFoundMe) {
                updateConnectedDevicesWithMe();
            }
            if (updateNetworkMode) {
                checkCurrentWifiClientConnection();
            }
            $(".connected_devices_item").each(function(i) {
                if (i == 0) {
                    return;
                }
                if (i % 2 === 0) {
                    $(this).addClass("alt_row_bg");
                }
            });
        }
    });
}
function updateConnectedDevicesWithMe() {
    if (gTrustedNetwork && gConnectedDevices) {
        return;
    }
    var newItem = $(".connected_devices_item.default").clone();
    newItem.removeClass("default");
    newItem.find(".connected_device_image").remove();
    newItem.find(".connected_device_delete_container").remove();
    newItem.find(".wireless_label_text").addClass("no_devices_found").text(dictionaryList["no_devices_found"]);
    var newLabel = newItem.find(".connected_device_label").clone();
    newItem.find(".connected_device_label_container").remove();
    newItem.append(newLabel);
    $("#connected_devices_list").append(newItem);
}
var inactivityVal;
function getWiFiInactivity() {
    $.ajaxAPI({
    "url": "wifi_ap_configuration",
    "type": "GET",
    "success": function(data, textStatus, jqXHR) {
        if (data.wifi_ap_configuration != null ) {
            if (data.wifi_ap_configuration.idle_time == "NaN") {
                $("#wifi_edit_config_form_original_inactivity").val("5");
            } else {
                $("#wifi_edit_config_form_original_inactivity").val(data.wifi_ap_configuration.idle_time);
            }
        }
    },
    "complete": function(jqXHR, textStatus) {
       	inactivityVal = $("#wifi_edit_config_form_original_inactivity").val();
        switch (inactivityVal) {
        case "0":
            inactivityVal = "Never";
            break;
        case "1":
            inactivityVal = "1 min";
            break;
        case "3":
            inactivityVal = "3 mins";
            break;
        case "5":
            inactivityVal = "5 mins";
            break;
        case "10":
            inactivityVal = "10 mins";
            break;
        case "15":
            inactivityVal = "15 mins";
            break;
        default:
            inactivityVal = "5 mins";
        }
        
        $('select[name="wifi_inactivity"]').each(function() {
        	var select_name = '#' + $(this).attr("id");
            $(select_name).selectmenu();
            $(select_name + ' option[value="' + inactivityVal + '"]').each(function() {
                $(select_name).selectmenu("value", $(this).val());
            });
        });
    }
});
	        
}
var reconnectVal;
function getWiFiReconnect() {
	$.ajaxAPI({
        "url": "wifi_client_configuration",
        "type": "GET",
        "success": function(data, textStatus, jqXHR) {
            if (data != null && data.wifi_client_configuration.hunt_time != null){
            	if (data.wifi_client_configuration.hunt_time == "NaN") {
                    $("#wifi_edit_config_form_original_reconnect").val("6");
                } else {
                    $("#wifi_edit_config_form_original_reconnect").val(data.wifi_client_configuration.hunt_time);
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
           	reconnectVal = $("#wifi_edit_config_form_original_reconnect").val();
            switch (reconnectVal) {
            case "0":
                reconnectVal = "Never";
                break;
            case "2":
                reconnectVal = "2 mins";
                break;
            case "6":
                reconnectVal = "6 mins";
                break;
            case "10":
                reconnectVal = "10 mins";
                break;
            case "30":
                reconnectVal = "30 mins";
                break;
            case "60":
                reconnectVal = "60 mins";
                break;
            case "255":
                reconnectVal = "Always";
                break;
            default:
                reconnectVal = "6 mins";
            }

            $('select[name="wifi_reconnect"]').each(function() {
	        	var select_name = '#' + $(this).attr("id");
	            $(select_name).selectmenu();
	            $(select_name + ' option[value="' + reconnectVal + '"]').each(function() {
	                $(select_name).selectmenu("value", $(this).val());
	            });
	        });
        }
    });
}
function putWiFiInactivity(time) {
    if (time != "") {
        if (time == "Never") {
            time = 0;
        }
        $.ajaxAPI({
            "url": "wifi_ap_configuration",
            "type": "PUT",
            "data": {
                "idle_time": time
            },
            "error": function(request, status, error) {}
        });
    }
}
function putWiFiReconnect(time) {
	if (time != "") {
        if (time == "Never") {
            time = 0;
        } else if (time == "Always") {
        	time = 255;
        }
        $.ajaxAPI({
            "url": "wifi_client_configuration",
            "type": "PUT",
            "data": {
                "hunt_time": time
            },
            "error": function(request, status, error) {}
        });
    }	
}
var reconnectWirelessInProgress = false;
var reconnectWirelessTimeOutMax = 600000;
var reconnectWirelessStartTimeStamp = 0;
var startReconnectWirelessDelay = 10000;
var signInToOtherNetwork = false;
var wifi_signin_ap_remembered = false;
var wifi_signin_ap_trusted = false;
var wifi_signin_with_wps_pin = false;
var wifi_signin_password_required = false;
var wifi_signin_other_password_required = false;
var signInWifiInProgress = false;
var signInWifiTimeOutMax = 120000;
var signInWifiStartTimeStamp = 0;
var signInWifiDelay = 1000;
var wifi_client_access_points_inprogress = false;
var connectToNewNetwork = false;
var current_ap_connected = false;
var wifiApListAutoClickFlag = true;
var modifyCurrentNetwork = false;
var checkInternetConnectivityCount = 0;
var maxCheckInternetConnectivityCount = 3;
var isWifiOn = false;
var isWifiOn_5g = false;
var wifiConnectedDevice_inprogress = false;
$(document).ready(function() {
    var wifi_aps_settings_param;
    var submit_5g_wifi_change = false;
    var submit_wifi_change = false;
    var sentAPIFreq = "";
    var whichActiveWifi = "2.4";
    var wifi_aps_configuration_idle_time;
    var wifi_client_configuration_hunt_time;
    var wifi2_4 = dictionaryList["wifi_2_4_GHZ_title"];
    var wifi_5 = dictionaryList["wifi_5_GHZ_title"];
    var wifi_both = dictionaryList["wifi_both_GHZ_title"];
    getWiFiInactivity();
    getWiFiReconnect();
    $("#head_settings_nav_network_link").navItem({
        "contentId": "wifi_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_network_link");
            pollingHandler.poll();
            updateConnectedDevices();
            checkWiFiEnabled();
            if (gSSIDName == "") {
                getSSIDName();
            }
        }
    });
    $("#wifi_client_ap_submit_btn").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            var dialogTitle = dictionaryList["sign_in_title"];
            var ssidName = $("#wifi_signin_form_ssid").text();
            if (signInToOtherNetwork || wifi_signin_password_required || connectToNewNetwork) {
                if (signInToOtherNetwork) {
                    dialogTitle = dialogTitle.replace("{0}", dictionaryList["other_network"]);
                    $("#wifi_signin_to_other_network_overlay_title").text(dialogTitle);
                    $("#wifi_signin_to_other_network_overlay").dialog("open");
                } else {
                    if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
                        dialogTitle = dictionaryList["modify_wifi_network_title"];
                        dialogTitle = dialogTitle.replace("{0}", ssidName);
                        $("#wifi_modify_overlay_title").text(dialogTitle);
                        $("#wifi_modify_overlay").dialog("open");
                    } else {
                        dialogTitle = dialogTitle.replace("{0}", ssidName);
                        $("#wifi_signin_overlay_title").text(dialogTitle);
                        $("#wifi_signin_overlay").dialog("open");
                    }
                }
            } else {
                dialogTitle = dialogTitle.replace("{0}", ssidName);
                $("#wifi_signin_overlay_title").text(dialogTitle);
                $("#wifi_signin_overlay").dialog("open");
            }
        }
    });
    $("#wifi_client_ap_submit_btn_h").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            var dialogTitle = dictionaryList["sign_in_title"];
            var ssidName = $("#wifi_signin_form_ssid_h").text();
            if (signInToOtherNetwork || wifi_signin_password_required || connectToNewNetwork) {
                if (signInToOtherNetwork) {
                    dialogTitle = dialogTitle.replace("{0}", dictionaryList["other_network"]);
                    $("#wifi_signin_to_other_network_overlay_title_h").text(dialogTitle);
                    //$("#wifi_signin_to_other_network_overlay_h").dialog("open");
                    wifi_signin_to_other_network_overlay_h_show();
                    $("#connect_home_network_container").hide()
                } else {
                    if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
                        dialogTitle = dictionaryList["modify_wifi_network_title"];
                        dialogTitle = dialogTitle.replace("{0}", ssidName);
                        $("#wifi_modify_overlay_title_h").text(dialogTitle);
                        //$("#wifi_modify_overlay_h").dialog("open");
                        wifi_modify_overlay_h_show();
                        $("#connect_home_network_container").hide();
                    } else {
                        dialogTitle = dialogTitle.replace("{0}", ssidName);
                        //console.log("homeNetwork-34555:"+dialogTitle)
                        $("#wifi_signin_overlay_title_h").text(dialogTitle);
                        //$("#wifi_signin_overlay_h").dialog("open");
                        $("#connect_home_network_container").hide()
                        wifi_signin_overlay_h_show();
                    }
                }
            } else {
                dialogTitle = dialogTitle.replace("{0}", ssidName);
                $("#wifi_signin_overlay_title_h").text(dialogTitle);
                //$("#wifi_signin_overlay_h").dialog("open");
                 $("#connect_home_network_container").hide()
                wifi_signin_overlay_h_show();
            }
        }
    });
    $("#wifi_signin_close_button").live("click", function(e) {
        e.preventDefault();
        $("#wifi_signin_form").restForm("reset");
        wifiApListAutoClickFlag = false;
        $(".wifi_ap_list_item.selected").click();
        wifiApListAutoClickFlag = true;
        $(".wifi_ap_list_item").removeClass("selected");
        $("#wifi_signin_overlay").dialog("close");
    });
    $("#wifi_signin_close_button_h").live("click", function(e) {
        e.preventDefault();
        $("#wifi_signin_form_h").restForm("reset");
        wifiApListAutoClickFlag = false;
        $(".wifi_ap_list_item_h.selected").click();
        wifiApListAutoClickFlag = true;
        $(".wifi_ap_list_item_h").removeClass("selected");
        //$("#wifi_signin_overlay_h").dialog("close");
        wifi_signin_overlay_h_hide();
        $("#connect_home_network_container").show();
    });
    $("#wifi_signin_save_button").live("click", function(e) {
        e.preventDefault();
        if (!$("#wifi_signin_form_remember_network").hasClass("ui-state-disabled")) {
            if ($("#wifi_signin_form_remember_network").val() == "false") {
                $("#wifi_signin_overlay").dialog("close");
                var mac_address = $("#wifi_signin_form_mac_address").val();
                forgetThisRememberedNetwork(mac_address);
                return;
            }
        }
        before_wifi_signin_form_submit();
        if (!gFoundMe) {
            if ($("#wifi_signin_form_trusted").val() == "true") {
            	//if has been trusted network
                if (validate("#wifi_signin_form")) {//check password is ok
                    $("#wifi_signin_overlay").dialog("close");//close wifi signin dialog
                    if ((connectToNewNetwork) && (gTrustedNetwork)) {//useless
                        $("#switch_home_to_hotspot_or_home").show(); //disconnect to homenetwork 
                        $("#connect_or_switch_to_home_mode").hide();//user check connect to homenetwork(wording) hide
                    } else {
                        $("#switch_home_to_hotspot_or_home").hide();
                        $("#connect_or_switch_to_home_mode").show();
                    }
                    $("#wifi_signin_confirmation_overlay").dialog("open");
                } else {
                    enableIdTag("#wifi_signin_form_password");
                    enableIdTag("#wifi_signin_form_password_show");
                }
            } else {
                $("#wifi_signin_overlay").dialog("close");
                if ((connectToNewNetwork) && (gTrustedNetwork)) {
                    $("#switch_home_to_hotspot_or_home").show();
                    $("#connect_or_switch_to_home_mode").hide();
                    $("#wifi_signin_confirmation_overlay").dialog("open");
                } else {
                    $("#wifi_signin_form").submit();
                }
            }
        } else {
            if (validate("#wifi_signin_form")) {
                $("#wifi_signin_overlay").dialog("close");
                $("#wifi_signin_form").submit();
            } else {
                enableIdTag("#wifi_signin_form_password");
                enableIdTag("#wifi_signin_form_password_show");
            }
        }
    });
    $("#wifi_signin_save_button_h").live("click", function(e) {
        e.preventDefault();
        if (!$("#wifi_signin_form_remember_network_h").hasClass("ui-state-disabled")) {
            if ($("#wifi_signin_form_remember_network_h").val() == "false") {
                //$("#wifi_signin_overlay_h").dialog("close");
                wifi_signin_overlay_h_hide();
                wifi_signin_confirmation_overlay_h_show()
                var mac_address = $("#wifi_signin_form_mac_address_h").val();
                forgetThisRememberedNetwork_onboarding(mac_address);
                return;
            }
        }
        before_wifi_signin_form_submit_onboarding();
        if (!gFoundMe) {
            if ($("#wifi_signin_form_trusted_h").val() == "true") {
            	//if has been trusted network
                if (validate("#wifi_signin_form_h")) {//check password is ok
                    //$("#wifi_signin_overlay_h").dialog("close");//close wifi signin dialog
                    wifi_signin_overlay_h_hide()
                    $("#connect_or_switch_to_home_mode_h").hide();//user check connect to homenetwork(wording) hide
                    if (signInToOtherNetwork) {
                        before_wifi_signin_to_other_network_form_submit_onboarding();
                        $("#wifi_signin_to_other_network_form_h").submit();
                    } else {
                        before_wifi_signin_form_submit_onboarding();
                        $("#wifi_signin_form_h").submit();
                    }
                   /*if ((connectToNewNetwork) && (gTrustedNetwork)) {//useless
                        $("#switch_home_to_hotspot_or_home_h").show(); //disconnect to homenetwork 
                        $("#connect_or_switch_to_home_mode_h").hide();//user check connect to homenetwork(wording) hide
                    } else {
                        $("#switch_home_to_hotspot_or_home_h").hide();
                        $("#connect_or_switch_to_home_mode_h").show();
                    }*/
                    //$("#wifi_signin_confirmation_overlay_h").dialog("open");
                    //wifi_signin_confirmation_overlay_h_show()
                } else {
                    enableIdTag("#wifi_signin_form_password_h");
                    enableIdTag("#wifi_signin_form_password_show_h");
                }
            } else {
                //$("#wifi_signin_overlay_h").dialog("close");
                wifi_signin_overlay_h_hide();
                if ((connectToNewNetwork) && (gTrustedNetwork)) {
                    $("#switch_home_to_hotspot_or_home_h").show();
                    $("#connect_or_switch_to_home_mode_h").hide();
                    //$("#wifi_signin_confirmation_overlay_h").dialog("open");
                    wifi_signin_confirmation_overlay_h_show();
                } else {
                    $("#wifi_signin_form_h").submit();
                }
            }
        } else {
            if (validate("#wifi_signin_form_h")) {
                //$("#wifi_signin_overlay_h").dialog("close");
                wifi_signin_overlay_h_hide();
                $("#wifi_signin_form_h").submit();
            } else {
                enableIdTag("#wifi_signin_form_password_h");
                enableIdTag("#wifi_signin_form_password_show_h");
            }
        }
        putWiFiInactivity(wifi_aps_configuration_idle_time);
        putWiFiReconnect(wifi_client_configuration_hunt_time);
    });
    
    $("#wifi_modify_close_button").live("click", function(e) {
        e.preventDefault();
        $(".wifi_ap_list_item").removeClass("selected");
        $("#wifi_modify_overlay").dialog("close");
    });
    $("#wifi_modify_close_button_h").live("click", function(e) {
        e.preventDefault();
        $(".wifi_ap_list_item_h").removeClass("selected");
        //$("#wifi_modify_overlay_h").dialog("close");
        wifi_modify_overlay_h_hide();
        $("#connect_home_network_container").show();
    });
    $(".wifi_settings_network_mode_static_button").live("click", function(e) {
        e.preventDefault();
        if (!$(".wifi_settings_network_mode_static_button").hasClass("button-selected")) {
            $(".wifi_settings_network_mode_dhcp_button").removeClass("button-selected");
            $(this).addClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("false");
            enableIdTag(".wifi_static_network_settings");
            $(".wifi_client_network_settings_dhcp_container").hide();
            $(".wifi_client_network_settings_static_container").show();
            var resetWifiSettingsData = {
                "ip": $(this).find(".wireless_client_ip").text(),
                "netmask": $(this).find(".wireless_client_netmask").text(),
                "gateway": $(this).find(".wireless_client_gateway").text(),
                "dns0": $(this).find(".wireless_client_dns0").text(),
                "dns1": $(this).find(".wireless_client_dns1").text(),
                "dns2": $(this).find(".wireless_client_dns2").text()
            };
            populateWifiSettingValues(resetWifiSettingsData);
            dhcp_disabled = true;
        }
    });
    $(".wifi_settings_network_mode_dhcp_button").live("click", function(e) {
        e.preventDefault();
        if (!$(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
            $(".wifi_settings_network_mode_static_button").removeClass("button-selected");
            $(this).addClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("true");
            disableIdTag(".wifi_static_network_settings");
            $(".wifi_client_network_settings_dhcp_container").show();
            $(".wifi_client_network_settings_static_container").hide();
            var resetWifiSettingsData = {
                "ip": "",
                "netmask": "",
                "gateway": "",
                "dns0": "",
                "dns1": "",
                "dns2": ""
            };
            populateWifiSettingValues(resetWifiSettingsData);
            dhcp_disabled = false;
        }
    });
    $("#wifi_modify_save_button").live("click", function(e) {
        e.preventDefault();
        $("#wifi_modify_overlay").dialog("close");
        if ($("#wifi_modify_form_remember_network").val() == "false") {
            if (!gFoundMe && gTrustedNetwork) {
                $("#wifi_disconnect_confirmation_overlay").dialog("open");
            } else {
                var mac_address = $("#wifi_modify_form_mac_address").val();
                forgetThisCurrentConnection(mac_address);
            }
            return;
        }
        var newTrusted = ($("#wifi_modify_form_trusted").val() == "true");
        if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
            $("#wifi_modify_SettingIp").removeClass("IPADDRESS");
            $("#wifi_modify_SettingNetmask").removeClass("NETMASK");
            $(".wifi_settings_dhcp_enabled").val("true");
            disableIdTag(".wifi_static_network_settings");
        } else {
            $("#wifi_modify_SettingIp").addClass("IPADDRESS");
            $("#wifi_modify_SettingNetmask").addClass("NETMASK");
            $(".wifi_settings_dhcp_enabled").val("false");
            enableIdTag(".wifi_static_network_settings");
        }
        
            enableIdTag(".mac_clone_value");
            var clone_mac_enable = $(".mac_clone_value").val();
            if (clone_mac_enable == "true") {
                $(".cloned_mac_address").val(gMacAddress);
                enableIdTag(".cloned_mac_address");
            } else {
                disableIdTag(".cloned_mac_address");
            }
        
            $("#wifi_modify_form").submit();
    });
    $("#wifi_modify_save_button_h").live("click", function(e) {
        e.preventDefault();
        //$("#wifi_modify_overlay_h").dialog("close");
        wifi_modify_overlay_h_hide();
        
        //console.log("homeNetwork-34770"+$("#wifi_modify_form_remember_network_h").val())
        if ($("#wifi_modify_form_remember_network_h").val() == "false") {
            if (!gFoundMe && gTrustedNetwork) {
                //$("#wifi_disconnect_confirmation_overlay_h").dialog("open");
                wifi_disconnect_confirmation_overlay_h_show();
            } else {
                var mac_address = $("#wifi_modify_form_mac_address_h").val();
                $("#connect_home_network_container").show();
                forgetThisCurrentConnection_onboarding(mac_address);
            }
            return;
        }
        var newTrusted = ($("#wifi_modify_form_trusted_h").val() == "true");
        if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
            $("#wifi_modify_SettingIp_h").removeClass("IPADDRESS");
            $("#wifi_modify_SettingNetmask_h").removeClass("NETMASK");
            $(".wifi_settings_dhcp_enabled").val("true");
            disableIdTag(".wifi_static_network_settings");
        } else {
            $("#wifi_modify_SettingIp_h").addClass("IPADDRESS");
            $("#wifi_modify_SettingNetmask_h").addClass("NETMASK");
            $(".wifi_settings_dhcp_enabled").val("false");
            enableIdTag(".wifi_static_network_settings");
        }
        
        enableIdTag(".mac_clone_value");
        var clone_mac_enable = $(".mac_clone_value").val();
        if (clone_mac_enable == "true") {
            $(".cloned_mac_address").val(gMacAddress);
            enableIdTag(".cloned_mac_address");
        } else {
            disableIdTag(".cloned_mac_address");
        }
        $("#wifi_modify_form_h").submit();
        putWiFiInactivity(wifi_aps_configuration_idle_time);
        putWiFiReconnect(wifi_client_configuration_hunt_time);
    });
    $("#wifi_signin_to_other_network_close_button").live("click", function(e) {
        e.preventDefault();
        $("#wifi_signin_to_other_network_form").restForm("reset");
        wifiApListAutoClickFlag = false;
        $(".wifi_ap_list_item.selected").click();
        wifiApListAutoClickFlag = true;
        $(".wifi_ap_list_item").removeClass("selected");
        $("#wifi_signin_to_other_network_overlay").dialog("close");
    });
    $("#wifi_signin_to_other_network_close_button_h").live("click", function(e) {
        e.preventDefault();
        $("#wifi_signin_to_other_network_form_h").restForm("reset");
        wifiApListAutoClickFlag = false;
        $(".wifi_ap_list_item.selected").click();
        wifiApListAutoClickFlag = true;
        $(".wifi_ap_list_item").removeClass("selected");
        //$("#wifi_signin_to_other_network_overlay_h").dialog("close");
        wifi_signin_to_other_network_overlay_h_hide()
        $("#connect_home_network_container").show()
    });
    $("#wifi_signin_to_other_network_save_button").live("click", function(e) {
        e.preventDefault();
        before_wifi_signin_to_other_network_form_submit();
        if (!gFoundMe) {
            if ($("#wifi_signin_to_other_network_form_trusted").val() == "true") {
                if (validate("#wifi_signin_to_other_network_form")) {
                    if ((connectToNewNetwork) && (gTrustedNetwork)) {
                        $("#connect_or_switch_to_home_mode").hide();
                        $("#switch_home_to_hotspot_or_home").show();
                    } else {
                        $("#connect_or_switch_to_home_mode").show();
                        $("#switch_home_to_hotspot_or_home").hide();
                    }
                    $("#wifi_signin_confirmation_overlay").dialog("open");
                } else {
                    enableIdTag("#wifi_signin_to_other_network_form_password");
                    enableIdTag("#wifi_signin_to_other_network_form_password_show");
                }
            } else {
                if ((connectToNewNetwork) && (gTrustedNetwork)) {
                    $("#switch_home_to_hotspot_or_home").show();
                    $("#connect_or_switch_to_home_mode").hide();
                    $("#wifi_signin_confirmation_overlay").dialog("open");
                } else {
                    $("#wifi_signin_to_other_network_form").submit();
                }
            }
        } else {
            if (validate("#wifi_signin_to_other_network_form")) {
                $("#wifi_signin_to_other_network_form").submit();
            } else {
                enableIdTag("#wifi_signin_to_other_network_form_password");
                enableIdTag("#wifi_signin_to_other_network_form_password_show");
            }
        }
    });
    
    $("#wifi_signin_to_other_network_save_button_h").live("click", function(e) {
        e.preventDefault();
        before_wifi_signin_to_other_network_form_submit_onboarding();
        if (!gFoundMe) {
            if ($("#wifi_signin_to_other_network_form_trusted_h").val() == "true") {
                if (validate("#wifi_signin_to_other_network_form_h")) {
                  if (signInToOtherNetwork) {
                      before_wifi_signin_to_other_network_form_submit_onboarding();
                      $("#wifi_signin_to_other_network_form_h").submit();
                  } else {
                      before_wifi_signin_form_submit_onboarding();
                      $("#wifi_signin_form_h").submit();
                  }
                    /*if ((connectToNewNetwork) && (gTrustedNetwork)) {
                      console.log("homenetwork-34982")
                        $("#connect_or_switch_to_home_mode_h").hide();
                        $("#switch_home_to_hotspot_or_home_h").show();
                    } else {
                      console.log("homenetwork-34986")
                        $("#connect_or_switch_to_home_mode_h").show();
                        $("#switch_home_to_hotspot_or_home_h").hide();
                    }*/
                    //$("#wifi_signin_confirmation_overlay_h").dialog("open");
                    //wifi_signin_confirmation_overlay_h_show();
                    
                    wifi_signin_to_other_network_overlay_h_hide();
                } else {
                    enableIdTag("#wifi_signin_to_other_network_form_password_h");
                    enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
                }
            } else {
                if ((connectToNewNetwork) && (gTrustedNetwork)) {
                    /*$("#switch_home_to_hotspot_or_home_h").show();
                    $("#connect_or_switch_to_home_mode_h").hide();
                    //$("#wifi_signin_confirmation_overlay_h").dialog("open");
                    wifi_signin_confirmation_overlay_h_show();
                    wifi_signin_to_other_network_overlay_h_hide();*/
                    if (signInToOtherNetwork) {
                      before_wifi_signin_to_other_network_form_submit_onboarding();
                      $("#wifi_signin_to_other_network_form_h").submit();
                    } else {
                        before_wifi_signin_form_submit_onboarding();
                        $("#wifi_signin_form_h").submit();
                    }
                } else {
                    $("#wifi_signin_to_other_network_form_h").submit();
                }
            }
        } else {
            if (validate("#wifi_signin_to_other_network_form_h")) {
                $("#wifi_signin_to_other_network_form_h").submit();
            } else {
                enableIdTag("#wifi_signin_to_other_network_form_password_h");
                enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
            }
        }
        putWiFiInactivity(wifi_aps_configuration_idle_time);
        putWiFiReconnect(wifi_client_configuration_hunt_time);
    });
    $("#wifi_settings_container_cancel_button").click(function() {
        $("#mypassport_advanced_content_area").hide();
        $("#mypassport_5G_content_area").hide();
        $("#wifi_advanced").removeClass("selected");
        $("#wifi_mypassport_5g").removeClass("selected");
        $("#wifi_mypassport").addClass("selected");
        $("#mypassport_content_area").show();
        $("#wifi_settings_container_tabs").dialog("close");
        $("#wifi_edit_config_form_ssid").attr("maxLength", 32);
        $("#wifi_edit_config_form_ssid_5g").attr("maxLength", 32);
    });
    $("#wifi_edit_config_form_broadcast_toggle_5g").change(function(e) {
        if ($("#wifi_edit_config_form_original_broadcast_5g").text() != $("#wifi_edit_config_form_broadcast_toggle_5g").is(":checked").toString()) {
            submit_5g_wifi_change = true;
            if ($("#wifi_edit_config_form_broadcast_toggle_5g").is(":checked")) {
                $("#wifi_edit_config_form_broadcast_value_5g").val("false");
                wifi_aps_settings_param["5"].broadcast = false;
                $("#wifi_broadcast_popup").dialog("open");
            } else {
                $("#wifi_edit_config_form_broadcast_value_5g").val("true");
                wifi_aps_settings_param["5"].broadcast = true;
            }
        } else {
            submit_5g_wifi_change = false;
            if (wifi_aps_settings_param["5"].broadcast != null ) {
                delete wifi_aps_settings_param["5"].broadcast;
            }
        }
    });
    $("#wifi_edit_config_form_broadcast_toggle").change(function(e) {
        if ($("#wifi_edit_config_form_original_broadcast").text() != $("#wifi_edit_config_form_broadcast_toggle").is(":checked").toString()) {
            submit_wifi_change = true;
            if ($("#wifi_edit_config_form_broadcast_toggle").is(":checked")) {
                $("#wifi_edit_config_form_broadcast_value").val("false");
                wifi_aps_settings_param["2.4"].broadcast = false;
                $("#wifi_broadcast_popup").dialog("open");
            } else {
                $("#wifi_edit_config_form_broadcast_value").val("true");
                wifi_aps_settings_param["2.4"].broadcast = true;
            }
        } else {
            submit_wifi_change = false;
            if (wifi_aps_settings_param["2.4"].broadcast != null ) {
                delete wifi_aps_settings_param["2.4"].broadcast;
            }
        }
    });
    $("#wifi_edit_config_form_channel_select").change(function(e) {
        submit_wifi_change = true;
        if ($("#wifi_edit_config_form_channel_select").val() == "0") {
            wifi_aps_settings_param["2.4"].channel_mode = "auto";
        } else {
            wifi_aps_settings_param["2.4"].channel_mode = "manual";
            wifi_aps_settings_param["2.4"].channel = parseInt($("#wifi_edit_config_form_channel_select").val());
        }
    });
    $("#wifi_edit_config_form_channel_select_5g").change(function(e) {
        submit_5g_wifi_change = true;
        if ($("#wifi_edit_config_form_channel_select_5g").val() == "0") {
            wifi_aps_settings_param["5"].channel_mode = "auto";
        } else {
            wifi_aps_settings_param["5"].channel_mode = "manual";
            wifi_aps_settings_param["5"].channel = parseInt($("#wifi_edit_config_form_channel_select_5g").val());
        }
    });
    $("#wifi_edit_config_form_ipaddress").keyup(function(e) {
        submit_wifi_change = true;
        submit_5g_wifi_change = true;
        wifi_aps_settings_param["2.4"].ip = $("#wifi_edit_config_form_ipaddress").val();
        wifi_aps_settings_param["5"].ip = $("#wifi_edit_config_form_ipaddress").val();
    });
    $("#wifi_edit_config_form_enable_dhcp_toggle").change(function(e) {
        submit_wifi_change = true;
        submit_5g_wifi_change = true;
        if ($("#wifi_edit_config_form_enable_dhcp_toggle").is(":checked").toString() != $("#wifi_edit_config_form_original_enable_dhcp").val()) {
            if ($("#wifi_edit_config_form_enable_dhcp_toggle").is(":checked")) {
                $("#wifi_edit_config_form_enable_dhcp_value").val("true");
                $("#wifi_edit_config_form_dhcp").val(true);
                $("#wifi_edit_config_form_dhcp_5g").val(true);
                wifi_aps_settings_param["2.4"].dhcp_enabled = true;
                wifi_aps_settings_param["5"].dhcp_enabled = true;
            } else {
                $("#wifi_edit_config_form_enable_dhcp_value").val("false");
                $("#wifi_edit_config_form_dhcp").val(false);
                $("#wifi_edit_config_form_dhcp_5g").val(false);
                wifi_aps_settings_param["2.4"].dhcp_enabled = false;
                wifi_aps_settings_param["5"].dhcp_enabled = false;
            }
        } else {
            if ($("#wifi_edit_config_form_enable_dhcp_toggle").is(":checked")) {
                $("#wifi_edit_config_form_enable_dhcp_value").val("true");
                $("#wifi_edit_config_form_dhcp").val(true);
                $("#wifi_edit_config_form_dhcp_5g").val(true);
            } else {
                $("#wifi_edit_config_form_enable_dhcp_value").val("false");
                $("#wifi_edit_config_form_dhcp").val(false);
                $("#wifi_edit_config_form_dhcp_5g").val(false);
            }
            if (wifi_aps_settings_param["2.4"].dhcp_enabled != undefined) {
                delete wifi_aps_settings_param["2.4"].dhcp_enabled;
            }
            if (wifi_aps_settings_param["5"].dhcp_enabled != undefined) {
                delete wifi_aps_settings_param["5"].dhcp_enabled;
            }
        }
    });
    $("#wifi_edit_config_form_ssid").bind("change keyup input",function(e) {
        submit_wifi_change = true;
        var ssid_value = $("#wifi_edit_config_form_ssid").val();
        var matches = ssid_value.match(/[^\x00-\xff]/ig);
        
        if(matches){
        	if(matches.length * 2 + ssid_value.length > 32){
        		$("#wifi_edit_config_form_ssid").val(gSSIDName);
        		$("#wifi_edit_config_form_ssid").attr("maxLength", 32);
        	}
        	else
        		$("#wifi_edit_config_form_ssid").attr("maxLength", 32 - 2 * matches.length);
        }
        else
        	$("#wifi_edit_config_form_ssid").attr("maxLength", 32);
        	
        wifi_aps_settings_param["2.4"].ssid = $("#wifi_edit_config_form_ssid").val();
    });
    $("#mypassport_content_area").on("click", ".deletebutton", function(e) {
		$("#wifi_edit_config_form_ssid").attr("maxLength", 32);
    });
    $("#wifi_edit_config_form_ssid_5g").bind("change keyup input",function(e) {
        submit_5g_wifi_change = true;
        var ssid_value = $("#wifi_edit_config_form_ssid_5g").val();
        var matches = ssid_value.match(/[^\x00-\xff]/ig);
        if(matches){
        	if(matches.length * 2 + ssid_value.length > 32){
        		$("#wifi_edit_config_form_ssid_5g").val(gSSIDNameHighBand);
        		$("#wifi_edit_config_form_ssid_5g").attr("maxLength", 32);
        	}
        	else
        		$("#wifi_edit_config_form_ssid_5g").attr("maxLength", 32 - 2 * matches.length);
        }
        else
        	$("#wifi_edit_config_form_ssid_5g").attr("maxLength", 32);
        	
        wifi_aps_settings_param["5"].ssid = $("#wifi_edit_config_form_ssid_5g").val();
    });
    $("#mypassport_5G_content_area").on("click", ".deletebutton", function(e) {
		$("#wifi_edit_config_form_ssid_5g").attr("maxLength", 32);
    });
    
    $("#wifi_edit_config_form_password, #wifi_edit_config_form_password_show").keyup(function(e) {
        submit_wifi_change = true;
        if (e.currentTarget.id == "wifi_edit_config_form_password") {
            wifi_aps_settings_param["2.4"].security_key = $("#wifi_edit_config_form_password").val();
            enablePassword("");
        } else {
            if (e.currentTarget.id == "wifi_edit_config_form_password_show") {
                wifi_aps_settings_param["2.4"].security_key = $("#wifi_edit_config_form_password_show").val();
            }
        }
        wifi_aps_settings_param["2.4"].security_mode = $("#wifi_edit_config_form_security_mode_select").val();
    });
    $("#wifi_edit_config_form_password_5g, #wifi_edit_config_form_password_show_5g").keyup(function(e) {
        submit_5g_wifi_change = true;
        if (e.currentTarget.id == "wifi_edit_config_form_password_5g") {
            wifi_aps_settings_param["5"].security_key = $("#wifi_edit_config_form_password_5g").val();
            enablePassword("_5g");
        } else {
            if (e.currentTarget.id == "wifi_edit_config_form_password_show_5g") {
                wifi_aps_settings_param["5"].security_key = $("#wifi_edit_config_form_password_show_5g").val();
            }
        }
        wifi_aps_settings_param["5"].security_mode = $("#wifi_edit_config_form_security_mode_select_5g").val();
    });
    $("#wifi_edit_config_form_security_mode_select_5g").change(function(e) {
        if ($("#wifi_edit_config_form_security_mode_select_5g").val() != $("#wifi_edit_config_form_original_security_5g").text()) {
            submit_5g_wifi_change = true;
            wifi_aps_settings_param["5"].security_mode = $("#wifi_edit_config_form_security_mode_select_5g").val();
        } else {
            submit_5g_wifi_change = false;
            if (wifi_aps_settings_param["5"].security_mode != undefined) {
                delete wifi_aps_settings_param["5"].security_mode;
            }
        }
        if ($("#wifi_edit_config_form_security_mode_select_5g").val().toLowerCase() == "none") {
            if (wifi_aps_settings_param["5"].security_key != undefined) {
                delete wifi_aps_settings_param["5"].security_key;
            }
            disablePassword("_5g");
            gSSIDSecured_5g = false;
        } else {
            showhideWifiPassword("show", "_5g");
            gSSIDSecured_5g = true;
        }
    });
    $("#wifi_edit_config_form_security_mode_select").change(function(e) {
        if ($("#wifi_edit_config_form_security_mode_select").val() != $("#wifi_edit_config_form_original_security").text()) {
            submit_wifi_change = true;
            wifi_aps_settings_param["2.4"].security_mode = $("#wifi_edit_config_form_security_mode_select").val();
        } else {
            submit_wifi_change = false;
            delete wifi_aps_settings_param["2.4"].security_mode;
        }
        if ($("#wifi_edit_config_form_security_mode_select").val().toLowerCase() == "none") {
            if (wifi_aps_settings_param["2.4"].security_key != undefined) {
                delete wifi_aps_settings_param["2.4"].security_key;
            }
            disablePassword("");
            gSSIDSecured = false;
        } else {
            showhideWifiPassword("show", "");
            gSSIDSecured = true;
        }
    });
    $("#wifi_edit_config_form_password, #wifi_edit_config_form_password_show").keyup(function(e) {
        if (e.keyCode == 13) {
            $("#wifi_settings_container_save_button").click();
        }
    });
    $("#wifi_edit_config_form_activity_network").change(function(e) {
        submit_wifi_change = true;
        submit_5g_wifi_change = true;
        isWifiOn = "true";
        isWifiOn_5g = "true";
        if ($("#wifi_edit_config_form_activity_network").val() == wifi2_4) {
            wifi_aps_settings_param["2.4"].enabled = true;
            wifi_aps_settings_param["5"].enabled = false;
            isWifiOn_5g = "false";
        } else {
            if ($("#wifi_edit_config_form_activity_network").val() == wifi_5) {
                wifi_aps_settings_param["2.4"].enabled = false;
                wifi_aps_settings_param["5"].enabled = true;
                isWifiOn = "false";
            } else {
                wifi_aps_settings_param["2.4"].enabled = true;
                wifi_aps_settings_param["5"].enabled = true;
            }
        }
    });
    $('select[name="wifi_inactivity"]').change(function(e) {
    	$('select[name="wifi_inactivity"]').each(function() {
    		if($(this).val() != inactivityVal){
	    		if ($(this).val() == "Never") {
	            	wifi_aps_configuration_idle_time = "Never";
		        } else {
		            wifi_aps_configuration_idle_time = parseInt($(this).val());
		        }
		    }
		});
    });
    $('select[name="wifi_reconnect"]').change(function(e) {
    	$('select[name="wifi_reconnect"]').each(function() {
    		if($(this).val() != reconnectVal){
	    		if ($(this).val() == "Never") {
	            	wifi_client_configuration_hunt_time = "Never";
		        } else if ($(this).val() == "Always"){
            		wifi_client_configuration_hunt_time = "Always";
        		} else {    
		        	wifi_client_configuration_hunt_time = parseInt($(this).val());
		        }
		    }
		});
    });
    $("#wifi_settings_container_save_button").click(function() {
    	$("#reconnect_network_dialog").closest(".ui-draggable").css({
    		display: "",
    		visibility: "hidden",
			bottom: 1
    	});
        if ($("#wifi_edit_config_form_ipaddress").val() == "") {
            $("#wifi_edit_config_form_ipaddress").val($("#wifi_edit_config_form_original_ipaddress").val());
        }
        if (submit_wifi_change == true && submit_5g_wifi_change == true) {
            sentAPIFreq = "both";
            $("#wifi_settings_forms_tab_form").submit();
        } else {
            if (submit_wifi_change == true) {
                delete wifi_aps_settings_param["5"];
                $("#wifi_settings_forms_tab_form").submit();
            } else {
                if (submit_5g_wifi_change == true) {
                    delete wifi_aps_settings_param["2.4"];
                    sentAPIFreq = "5";
                    $("#wifi_settings_forms_tab_form").submit();
                } else {
                    delete wifi_aps_settings_param["2.4"];
                    delete wifi_aps_settings_param["5"];
                    $("#wifi_settings_container_tabs").dialog("close");
                }
            }
        } 
        putWiFiInactivity(wifi_aps_configuration_idle_time);
        putWiFiReconnect(wifi_client_configuration_hunt_time);
    });
    $("#settings_wireless_name_form").restForm();
    $("#settings_wireless_security_form").restForm();
    $("#wifi_settings_container_tabs").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_settings_container_tabs_title" class="wizard_dialog_title">' + $("#wifi_settings_container_tabs").attr("title") + "</div>",
        open: function() {
            enableIdTag("#wifi_edit_config_form_password");
            $("#wifi_settings_forms_tab_form").find(".display_ssid_password").hide();
            enableIdTag("#wifi_edit_config_form_channel_select");
            enableIdTag("#wifi_edit_config_form_channel_mode");
            $("#mypassport_advanced_content_area").hide();
            $("#mypassport_5G_content_area").hide();
            $("#wifi_dialog_control_buttons").show();
            $("#wifi_edit_config_form_password_container").show();
            $("#wifi_edit_config_form_password_show_container").hide();
            $("#wifi_edit_config_form_show_password_checkbox_off").show();
            enableIdTag("#wifi_edit_config_form_password");
            disableIdTag("#wifi_edit_config_form_password_show");
            $("#wifi_edit_config_form_password_container_5g").show();
            $("#wifi_edit_config_form_password_show_container_5g").hide();
            $("#wifi_edit_config_form_show_password_checkbox_off_5g").show();
            enableIdTag("#wifi_edit_config_form_password_5g");
            disableIdTag("#wifi_edit_config_form_password_show_5g");
            submit_wifi_change = false;
            submit_5g_wifi_change = false;
            wifi_aps_configuration_idle_time = "";
            wifi_client_configuration_hunt_time = "";
            $("#wifi_edit_config_form_activity_network").find("option:first").siblings().remove();
            $("#wifi_edit_config_form_activity_network").find("option:first").remove();
            $("#wifi_settings_forms_tab_form").restForm("refreshForm");
        }
    });
    $("#wifi_settings_forms_tab_form").restForm({
        "refreshDataCallback": function(data) {
            $("#wifi_settings_forms_tab_form").restForm("_refreshData", data);
            var freqLoop;
            //var tabtitle = dictionaryList["wifi_2_4_GHZ_title"];
            if (data != null  && data.wifi_aps != null  && data.wifi_aps.wifi_ap != null ) {
                for (var i in data.wifi_aps.wifi_ap) {
                    freqLoop = data.wifi_aps.wifi_ap[i].ism_band;
                    if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                        freqLoop = "_5g";
                        //tabtitle = dictionaryList["wifi_5_GHZ_title"];
                        $("#wifi_mypassport" + freqLoop).text(dictionaryList["wifi_ap_5_GHZ_title"]);
                    } else {
                        freqLoop = "";
                        $("#wifi_mypassport" + freqLoop).text(dictionaryList["wifi_ap_2_4_GHZ_title"]);
                    }
                    $("#wifi_edit_config_form_ssid" + freqLoop).attr("value", data.wifi_aps.wifi_ap[i].ssid);
                    //$("#wifi_mypassport" + freqLoop).text(data.wifi_aps.wifi_ap[i].ssid + tabtitle);
                    $("#wifi_edit_config_form_mac_address" + freqLoop).text(data.wifi_aps.wifi_ap[i].mac_address);
                    $("#wifi_edit_config_form_original_ipaddress").val(data.wifi_aps.wifi_ap[i].ip);
                    $("#wifi_edit_config_form_netmask" + freqLoop).text(data.wifi_aps.wifi_ap[i].netmask);
                    $("#wifi_edit_config_form_original_security" + freqLoop).text(data.wifi_aps.wifi_ap[i].security_mode);
                    $("#wifi_edit_config_form_enable" + freqLoop).val(data.wifi_aps.wifi_ap[i].enabled);
                    var broadcast = data.wifi_aps.wifi_ap[i].broadcast.toLowerCase();
                    $("#wifi_edit_config_form_original_broadcast_5g").val();
                    //$("#wifi_edit_config_form_original_broadcast" + freqLoop).text(broadcast);
                    if (broadcast == "true") {
                    	$("#wifi_edit_config_form_original_broadcast" + freqLoop).text("false");
                        $("#wifi_edit_config_form_broadcast_toggle" + freqLoop).attr("checked", false);
                        gSSIDNotBroadcasting = false;
                    } else {
                    	$("#wifi_edit_config_form_original_broadcast" + freqLoop).text("true");
                        $("#wifi_edit_config_form_broadcast_toggle" + freqLoop).attr("checked", true);
                        gSSIDNotBroadcasting = true;
                    }
                    var dhcp_enabled = data.wifi_aps.wifi_ap[i].dhcp_enabled.toLowerCase();
                    $("#wifi_edit_config_form_original_enable_dhcp").val(dhcp_enabled);
                    if (dhcp_enabled == "true") {
                        $("#wifi_edit_config_form_enable_dhcp_toggle").attr("checked", true);
                    } else {
                        $("#wifi_edit_config_form_enable_dhcp_toggle").attr("checked", false);
                    }
                    var maxWifiChannel = 11;
                    if (data.wifi_aps.wifi_ap[i].available_channels != null ) {
                        maxWifiChannel = data.wifi_aps.wifi_ap[i].available_channels;
                    }
                    var arrayAvailableChannels = maxWifiChannel.split(", ");
                    $("#wifi_edit_config_form_channel_select" + freqLoop).find("option:first").siblings().remove();
                    for (var j = 0; j <= arrayAvailableChannels.length - 1; j++) {
                        var newOption = $("#wifi_edit_config_form_channel_select" + freqLoop).find("option:first").clone();
                        newOption.val(arrayAvailableChannels[j]);
                        newOption.html(arrayAvailableChannels[j]);
                        newOption.appendTo("#wifi_edit_config_form_channel_select" + freqLoop);
                    }
                    $("#wifi_edit_config_form_channel_select" + freqLoop).selectmenu();
                    if (data.wifi_aps.wifi_ap[i].channel_mode.toLowerCase() == "auto") {
                        $("#wifi_edit_config_form_channel_select" + freqLoop + " option").each(function() {
                            $(this)[0].defaultSelected = false;
                        });
                        $("#wifi_edit_config_form_channel_select" + freqLoop + " option[value=0]").each(function() {
                            $(this)[0].defaultSelected = true;
                            $("#wifi_edit_config_form_channel_select" + freqLoop).selectmenu("value", $(this).val());
                        });
                    } else {
                        $("#wifi_edit_config_form_original_channel_select" + freqLoop).text(data.wifi_aps.wifi_ap[i].channel);
                        $("#wifi_edit_config_form_channel_select" + freqLoop + " option[value=" + data.wifi_aps.wifi_ap[i].channel + "]").each(function() {
                            $(this)[0].defaultSelected = true;
                            $("#wifi_edit_config_form_channel_select" + freqLoop).selectmenu("value", $(this).val());
                        });
                    }
                    if (data.wifi_aps.wifi_ap[i].security_mode.toLowerCase() == "none") {
                        disablePassword(freqLoop);
                        $("#wifi_edit_config_form_password" + freqLoop).attr("data-original", undefined);
                    } else {
                        $("#wifi_edit_config_form_password_container" + freqLoop).show();
                        $("#wifi_edit_config_form_password_show_container" + freqLoop).hide();
                        $("#wifi_edit_config_form_password_top_container" + freqLoop).show();
                        $("#wifi_edit_config_form_password_checkbox" + freqLoop).show();
                        $("#wifi_edit_config_form_password" + freqLoop).attr("data-original", data.wifi_aps.wifi_ap[i].security_key);
                        $("#wifi_edit_config_form_password" + freqLoop).removeClass("NOTEMPTY");
                        $("#wifi_edit_config_form_password" + freqLoop).removeClass("WPA_NETWORK_PASSWORD");
                        $("#wifi_edit_config_form_password_show" + freqLoop).removeClass("NOTEMPTY");
                        $("#wifi_edit_config_form_password_show" + freqLoop).removeClass("WPA_NETWORK_PASSWORD");
                    }
                    $("#wifi_edit_config_form_password_show_container" + freqLoop).hide();
                    $("#wifi_edit_config_form_dhcp").val(data.wifi_aps.wifi_ap[i].dhcp_enabled);
                }
            }
            wifi_aps_settings_param = {
                "2.4": {
                    "enabled": false
                },
                "5": {
                    "enabled": false
                }
            };
            wifi2_4 = $("#wifi_edit_config_form_ssid").val();
            wifi_5 = $("#wifi_edit_config_form_ssid_5g").val()+" ";
            wifi_both = dictionaryList["wifi_both_GHZ_title"];
            if ($("#wifi_edit_config_form_enable").val() == "true") {
                wifi_aps_settings_param["2.4"].enabled = true;
                whichActiveWifi = wifi2_4;
            }
            if ($("#wifi_edit_config_form_enable_5g").val() == "true") {
                wifi_aps_settings_param["5"].enabled = true;
                whichActiveWifi = wifi_5;
            }
            if (wifi_aps_settings_param["2.4"].enabled && wifi_aps_settings_param["5"].enabled) {
                whichActiveWifi = wifi_both;
            }
            var wifiactivitynetworks = {
                0: wifi2_4,
                1: wifi_5
            };
            for (var i = 0; i < 2; i++) {
                //$("<option value='" + wifiactivitynetworks[i] + "'>" + wifiactivitynetworks[i] + "</option>").appendTo("#wifi_edit_config_form_activity_network");
                $("<option>" + wifiactivitynetworks[i] + "</option>").attr("value",wifiactivitynetworks[i]).appendTo("#wifi_edit_config_form_activity_network");
				//bug-434
            }
            $("#wifi_edit_config_form_activity_network").selectmenu().selectmenu("refresh", true);
            $(document).trigger("wifi_details_connectivity::refresh", whichActiveWifi);
        },
        "processFormSuccessCallback": function(data) {
            gSSIDName = $("#wifi_edit_config_form_ssid").val();
            gSSIDNameHighBand = $("#wifi_edit_config_form_ssid_5g").val();
            var broadcast_setting = $("#wifi_edit_config_form_broadcast_value").val();
            if (broadcast_setting == "true") {
                gSSIDNotBroadcasting = false;
            } else {
                gSSIDNotBroadcasting = true;
            }
            $("#wifi_settings_container_tabs").dialog("close");
            $(".wifi_avatar_ssid_name").text(gSSIDName);
            $(".wifi_avatar_ssid_name_5g").text(gSSIDNameHighBand);
            $("#wifi_mypassport").text(gSSIDName);
            $("#wifi_mypassport_5g").text(gSSIDNameHighBand);
            $("#tooltip2_4").show();
            $("#tooltip_5").show();
            if ((isWifiOn_5g == "true") && (isWifiOn == "false")) {
                $("#tooltip2_4").hide();
                gSSIDName = "";
                doUpdateAvatarDevice_with_SSID(gSSIDNameHighBand, gSSIDName, gSSIDSecured, gSSIDSecured_5g, false);
            } else {
                if ((isWifiOn == "true") && (isWifiOn_5g == "false")) {
                    $("#tooltip_5").hide();
                    gSSIDNameHighBand = "";
                    doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, false);
                } else {
                    doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, false);
                }
            }
            doReconnectWirelessNetwork();
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#wifi_settings_forms_tab_form").restForm("processFormComplete", jqXHR, textStatus);
            enableIdTag("#wifi_edit_config_form_password");
            disableIdTag("#wifi_edit_config_form_password_show");
            $("#wifi_edit_config_form_password_show_container").hide();
            $("#wifi_edit_config_form_channel_select").selectmenu();
            $('#wifi_edit_config_form_channel_select option[value="' + $("#wifi_edit_config_form_original_channel_select").text() + '"]').each(function() {
                $("#wifi_edit_config_form_channel_select").selectmenu("value", $(this).val());
            });
            $("#wifi_edit_config_form_channel_select_5g").selectmenu();
            $('#wifi_edit_config_form_channel_select_5g option[value="' + $("#wifi_edit_config_form_original_channel_select_5g").text() + '"]').each(function() {
                $("#wifi_edit_config_form_channel_select_5g").selectmenu("value", $(this).val());
            });
            $("#wifi_edit_config_form_security_mode_select").selectmenu();
            $('#wifi_edit_config_form_security_mode_select option[value="' + $("#wifi_edit_config_form_original_security").text() + '"]').each(function() {
                $("#wifi_edit_config_form_security_mode_select").selectmenu("value", $(this).val());
            });
            $("#wifi_edit_config_form_security_mode_select_5g").selectmenu();
            $('#wifi_edit_config_form_security_mode_select_5g option[value="' + $("#wifi_edit_config_form_original_security_5g").text() + '"]').each(function() {
                $("#wifi_edit_config_form_security_mode_select_5g").selectmenu("value", $(this).val());
            });
            
            getWiFiInactivity();
            getWiFiReconnect();
            		
            $("#wifi_edit_config_form_ipaddress").val($("#wifi_edit_config_form_original_ipaddress").val());
            $("#wifi_edit_config_form_activity_network").val(whichActiveWifi);
            $("#wifi_edit_config_form_activity_network").selectmenu().selectmenu("refresh", true);
            var originalPassword = $("#wifi_edit_config_form_password").attr("data-original");
            if (!(typeof originalPassword === "undefined")) {
                $("#wifi_edit_config_form_password").val($("#wifi_edit_config_form_password").attr("data-original"));
            }
            originalPassword = $("#wifi_edit_config_form_password_5g").attr("data-original");
            if (!(typeof originalPassword === "undefined")) {
                $("#wifi_edit_config_form_password_5g").val($("#wifi_edit_config_form_password_5g").attr("data-original"));
            }
            checkCurrentConnection_chanel()
            
        },
        "beforeProcessForm": function() {
            var channel = $("#wifi_edit_config_form_channel_select option:selected").val();
            if (channel == "0") {
                $("#wifi_edit_config_form_channel_mode").val("auto");
                disableIdTag("#wifi_edit_config_form_channel_select");
            } else {
                $("#wifi_edit_config_form_channel_mode").val("manual");
            }
            channel = $("#wifi_edit_config_form_channel_select_5g option:selected").val();
            if (channel == "0") {
                $("#wifi_edit_config_form_channel_mode_5g").val("auto");
                disableIdTag("#wifi_edit_config_form_channel_select_5g");
            } else {
                $("#wifi_edit_config_form_channel_mode_5g").val("manual");
            }
        },
        "getDataCallback": function() {
            return JSON.stringify(wifi_aps_settings_param);
        }
    });
    $("#wifi_edit_network_settings_config_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_edit_network_settings_config_overlay_title" class="wizard_dialog_title">' + $("#wifi_edit_network_settings_config_overlay").attr("title") + "</div>",
        open: function() {
            $("#wifi_edit_settings_network_mode_dhcp_button").removeClass("button-selected");
            $("#wifi_edit_settings_network_mode_static_button").removeClass("button-selected");
            $("#wifi_network_settings_dhcp_container").hide();
            $("#wifi_network_settings_static_container").hide();
            $("#wifi_edit_network_settings_config_form").restForm("refreshForm");
            $("#network_workgroup_form").restForm("refreshForm");
        }
    });
    $("#wifi_edit_network_settings_config_cancel_button").click(function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            $(".labelAndTooltipSpace").css('left', '');
            $("#wifi_edit_network_settings_config_overlay").dialog("close");
        }
    });
    $("#wifi_edit_network_settings_config_save_button").click(function() {
        if (!$(this).hasClass("ui-state-disabled")) {
            var updateRequired = true;
            var validateRequired = true;
            var displayNetworkModeChangeMsg = true;
            var currentNetworkMode = $("#NetworkModeEditValue").val();
            if ($("#wifi_edit_settings_network_mode_dhcp_button").hasClass("button-selected") && currentNetworkMode == "dhcp_client") {
                updateRequired = false;
                validateRequired = false;
            } else {
                if ($("#wifi_edit_settings_network_mode_static_button").hasClass("button-selected") && currentNetworkMode == "static") {
                    displayNetworkModeChangeMsg = false;
                } else {
                    if ($("#wifi_edit_settings_network_mode_dhcp_button").hasClass("button-selected")) {
                        validateRequired = false;
                    }
                }
            }
            if (updateRequired) {
                if (validateRequired) {
                    if (validate("#wifi_edit_network_settings_config_form")) {
                        if (displayNetworkModeChangeMsg) {
                            $("#wifi_network_mode_confirmation").dialog("open");
                        } else {
                            changeNetworkSettings();
                        }
                    }
                } else {
                    if (updateRequired) {
                        $("#wifi_network_mode_confirmation").dialog("open");
                    }
                }
            }
            putWiFiInactivity(wifi_aps_configuration_idle_time);
            putWiFiReconnect(wifi_client_configuration_hunt_time);
            $(".labelAndTooltipSpace").css('left', '');
            $("#wifi_edit_network_settings_config_overlay").dialog("close");
        }
    });
    $("#wifi_signin_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_overlay_title" class="wizard_dialog_title">' + $("#wifi_signin_overlay").attr("title") + "</div>",
        open: function() {
            callWifiNetworkData();
            enableIdTag("#wifi_signin_form_password");
            enableIdTag("#wifi_signin_form_password_show");
            $("#wifi_signin_form_password_container").show();
            $("#wifi_signin_form_password_show_container").hide();
            disableIdTag("#wifi_signin_wps_pin");
            $("#wifi_signin_wps_pin_container").hide();
            $("#wifi_signin_use_password_button").addClass("button-selected");
            $("#wifi_signin_use_wps_button").removeClass("button-selected");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            if (wifi_signin_ap_remembered) {
                disableIdTag("#wifi_signin_form_default_remember_network");
                enableIdTag("#wifi_signin_form_remember_network");
                $("#wifi_signin_form_forget_network_container").show();
                $("#wifi_signin_form_remember_network").val("true");
                if (wifi_signin_ap_trusted) {
	                $("#wifi_signin_form_trusted_checkbox").attr("checked", true);
	                $("#wifi_signin_form_trusted").val("true");
	            } else {
	                $("#wifi_signin_form_trusted_checkbox").attr("checked", false);
	                $("#wifi_signin_form_trusted").val("false");
	            }
            } else {
                enableIdTag("#wifi_signin_form_default_remember_network");
                disableIdTag("#wifi_signin_form_remember_network");
                $("#wifi_signin_form_forget_network_container").hide();
                $("#wifi_signin_form_remember_network").val("false");
                $("#wifi_signin_form_trusted_checkbox").attr("checked", true);
                $("#wifi_signin_form_trusted").val("true");
            }
            $(".remember_network_show_all").show();
        }
    });
    /*$("#wifi_signin_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_signin_overlay_h").attr("title") + "</div>",
        open: function() {
            callWifiNetworkData_onboarding();
            enableIdTag("#wifi_signin_form_password_h");
            enableIdTag("#wifi_signin_form_password_show_h");
            $("#wifi_signin_form_password_container_h").show();
            $("#wifi_signin_form_password_show_container_h").hide();
            disableIdTag("#wifi_signin_wps_pin_h");
            $("#wifi_signin_wps_pin_container_h").hide();
            $("#wifi_signin_use_password_button_h").addClass("button-selected");
            $("#wifi_signin_use_wps_button_h").removeClass("button-selected");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            if (wifi_signin_ap_remembered) {
                disableIdTag("#wifi_signin_form_default_remember_network_h");
                enableIdTag("#wifi_signin_form_remember_network_h");
                $("#wifi_signin_form_forget_network_container_h").show();
                $("#wifi_signin_form_remember_network_h").val("true");
                if (wifi_signin_ap_trusted) {
	                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", true);
	                $("#wifi_signin_form_trusted_h").val("true");
	            } else {
	                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", false);
	                $("#wifi_signin_form_trusted_h").val("false");
	            }
            } else {
                enableIdTag("#wifi_signin_form_default_remember_network_h");
                disableIdTag("#wifi_signin_form_remember_network_h");
                $("#wifi_signin_form_forget_network_container_h").hide();
                $("#wifi_signin_form_remember_network_h").val("false");
                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", true);
                $("#wifi_signin_form_trusted_h").val("true");
            }
            $(".remember_network_show_all").show();
        }
    });*/
   
    function wifi_signin_overlay_h_show(){
            $("#wifi_signin_overlay_h").css("display","block")
            callWifiNetworkData_onboarding();
            enableIdTag("#wifi_signin_form_password_h");
            enableIdTag("#wifi_signin_form_password_show_h");
            $("#wifi_signin_form_password_container_h").show();
            $("#wifi_signin_form_password_show_container_h").hide();
            disableIdTag("#wifi_signin_wps_pin_h");
            $("#wifi_signin_wps_pin_container_h").hide();
            $("#wifi_signin_use_password_button_h").addClass("button-selected");
            $("#wifi_signin_use_wps_button_h").removeClass("button-selected");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            if (wifi_signin_ap_remembered) {
                disableIdTag("#wifi_signin_form_default_remember_network_h");
                enableIdTag("#wifi_signin_form_remember_network_h");
                $("#wifi_signin_form_forget_network_container_h").show();
                $("#wifi_signin_form_remember_network_h").val("true");
                if (wifi_signin_ap_trusted) {
	                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", true);
	                $("#wifi_signin_form_trusted_h").val("true");
	            } else {
	                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", false);
	                $("#wifi_signin_form_trusted_h").val("false");
	            }
            } else {
                enableIdTag("#wifi_signin_form_default_remember_network_h");
                disableIdTag("#wifi_signin_form_remember_network_h");
                $("#wifi_signin_form_forget_network_container_h").hide();
                $("#wifi_signin_form_remember_network_h").val("false");
                $("#wifi_signin_form_trusted_checkbox_h").attr("checked", true);
                $("#wifi_signin_form_trusted_h").val("true");
            }
            $(".remember_network_show_all").show();
            
    }
    function wifi_signin_overlay_h_hide(){
      $("#wifi_signin_overlay_h").hide()
    }
    $("#wifi_modify_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_modify_overlay_title" class="wizard_dialog_title">' + $("#wifi_modify_overlay").attr("title") + "</div>",
        open: function() {
            callWifiNetworkData();
            $("#wifi_modify_form_mac_address").val($("#wifi_signin_form_mac_address").val());
            if (gTrustedNetwork) {
                $("#wifi_modify_form_trusted_checkbox").attr("checked", true);
                $("#wifi_modify_form_trusted").val("true");
            } else {
                $("#wifi_modify_form_trusted_checkbox").attr("checked", false);
                $("#wifi_modify_form_trusted").val("false");
            }
            $("#wifi_modify_form_forget_network_checkbox").attr("checked", false);
            $("#wifi_modify_form_remember_network").val("true");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            $(".remember_network_show_all").show();
        }
    });
    /*$("#wifi_modify_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_modify_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_modify_overlay_h").attr("title") + "</div>",
        open: function() {
            callWifiNetworkData_onboarding();
            $("#wifi_modify_form_mac_address_h").val($("#wifi_signin_form_mac_address_h").val());
            if (gTrustedNetwork) {
                $("#wifi_modify_form_trusted_checkbox_h").attr("checked", true);
                $("#wifi_modify_form_trusted_h").val("true");
            } else {
                $("#wifi_modify_form_trusted_checkbox_h").attr("checked", false);
                $("#wifi_modify_form_trusted_h").val("false");
            }
            $("#wifi_modify_form_forget_network_checkbox_h").attr("checked", false);
            $("#wifi_modify_form_remember_network_h").val("true");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            $(".remember_network_show_all").show();
        }
    });*/
    function wifi_modify_overlay_h_show(){
          $("#wifi_modify_overlay_h").show();
          callWifiNetworkData_onboarding();
            $("#wifi_modify_form_mac_address_h").val($("#wifi_signin_form_mac_address_h").val());
            if (gTrustedNetwork) {
                $("#wifi_modify_form_trusted_checkbox_h").attr("checked", true);
                $("#wifi_modify_form_trusted_h").val("true");
            } else {
                $("#wifi_modify_form_trusted_checkbox_h").attr("checked", false);
                $("#wifi_modify_form_trusted_h").val("false");
            }
            $("#wifi_modify_form_forget_network_checkbox_h").attr("checked", false);
            $("#wifi_modify_form_remember_network_h").val("true");
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
            $(".remember_network_show_all").show();
    }
    function wifi_modify_overlay_h_hide(){
        $("#wifi_modify_overlay_h").hide();
    }
    $("#wifi_signin_to_other_network_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_to_other_network_overlay_title" class="wizard_dialog_title">' + $("#wifi_signin_to_other_network_overlay").attr("title") + "</div>",
        open: function() {
            enableIdTag("#wifi_signin_to_other_network_form_password");
            enableIdTag("#wifi_signin_to_other_network_form_password_show");
            $("#wifi_signin_to_other_network_form").find(".display_ssid_password").hide();
            $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").hide();
            wifi_signin_other_password_required = false;
            $("#wifi_signin_to_other_network_form_password_container").show();
            $("#wifi_signin_to_other_network_form_password_show_container").hide();
            $("#wifi_signin_to_other_network_form_trusted_checkbox").attr("checked", true);
            $("#wifi_signin_to_other_network_form_trusted").val("true");
            $(".settings_mac_clone").show();
            $(".wifi_network_settings_mac_address").html(gMacAddress);
            $(".wifi_network_settings_device_name").html(gDeviceName);
        }
    });
    
    /*$("#wifi_signin_to_other_network_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_to_other_network_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_signin_to_other_network_overlay_h").attr("title") + "</div>",
        open: function() {
            enableIdTag("#wifi_signin_to_other_network_form_password_h");
            enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
            $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").hide();
            $("#wifi_signin_to_other_network_form_h").find(".display_wifi_encryption").hide();
            wifi_signin_other_password_required = false;
            $("#wifi_signin_to_other_network_form_password_container_h").show();
            $("#wifi_signin_to_other_network_form_password_show_container_h").hide();
            $("#wifi_signin_to_other_network_form_trusted_h").val("false");
            $(".settings_mac_clone").show();
            $(".wifi_network_settings_mac_address_h").html(gMacAddress);
            $(".wifi_network_settings_device_name_h").html(gDeviceName);
        }
    });*/
    function wifi_signin_to_other_network_overlay_h_show(){
            $("#wifi_signin_to_other_network_overlay_h").show();
            enableIdTag("#wifi_signin_to_other_network_form_password_h");
            enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
            $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").hide();
            $("#wifi_signin_to_other_network_form_h").find(".display_wifi_encryption").hide();
            wifi_signin_other_password_required = false;
            $("#wifi_signin_to_other_network_form_password_container_h").show();
            $("#wifi_signin_to_other_network_form_password_show_container_h").hide();
            $("#wifi_signin_to_other_network_form_trusted_h").val("false");
            $(".settings_mac_clone").show();
            $(".wifi_network_settings_mac_address_h").html(gMacAddress);
            $(".wifi_network_settings_device_name_h").html(gDeviceName);
    }
    function wifi_signin_to_other_network_overlay_h_hide(){
            $("#wifi_signin_to_other_network_overlay_h").hide();
    }
    $("#wifi_signin_confirmation_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_confirmation_overlay_title" class="wizard_dialog_title">' + $("#wifi_signin_confirmation_overlay").attr("title") + "</div>",
        open: function() {
            $("#wifi_signin_confirmation_overlay_save_button").focus();
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_signin_network_changing_msg"].replace("{0}", waname);
            $("#wifi_signin_network_changing_msg").html(msg);
        }
    });
    $("#wifi_static_change_confirmation_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_static_change_confirmation_overlay_title" class="wizard_dialog_title">' + $("#wifi_static_change_confirmation_overlay").attr("title") + "</div>",
        open: function() {
          console.log("gWANSSIDNam:"+gWANSSIDName+";"+dictionaryList["wifi_signin_network_changing_msg"])
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            
            msg = dictionaryList["wifi_signin_network_changing_msg"].replace("{0}", waname);
            //console.log("msg:"+msg)
            $("#wifi_static_change_confirmation_msg").html(msg);
        }
    });
    /*$("#wifi_signin_confirmation_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_signin_confirmation_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_signin_confirmation_overlay_h").attr("title") + "</div>",
        open: function() {
            $("#wifi_signin_confirmation_overlay_save_button_h").focus();
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_signin_network_changing_msg"].replace("{0}", waname);
            $("#wifi_signin_network_changing_msg_h").html(msg);
        }
    });*/
    function wifi_signin_confirmation_overlay_h_show(){
        $("#wifi_signin_confirmation_overlay_h").show();
        $("#wifi_signin_confirmation_overlay_save_button_h").focus();
        var waname = "<b><i>" + gWANSSIDName + "</i></b>";
        msg = dictionaryList["wifi_signin_network_changing_msg"].replace("{0}", waname);
        $("#wifi_signin_network_changing_msg_h").html(msg);
   }
   function wifi_signin_confirmation_overlay_h_hide(){
      $("#wifi_signin_confirmation_overlay_h").hide();
   }
    $("#wifi_signin_confirmation_overlay_cancel_button").click(function() {
        $(".wifi_ap_list_item").removeClass("selected");
        $("#wifi_signin_confirmation_overlay").dialog("close");
    });
     $("#wifi_signin_confirmation_overlay_cancel_button_h").click(function() {
        $(".wifi_ap_list_item").removeClass("selected");
        //$("#wifi_signin_confirmation_overlay").dialog("close");
        wifi_signin_confirmation_overlay_h_hide();
        $("#connect_home_network_container").show();
    });
    $("#wifi_signin_confirmation_overlay_save_button").click(function() {
        $("#wifi_signin_confirmation_overlay").dialog("close");
        if (signInToOtherNetwork) {
            before_wifi_signin_to_other_network_form_submit();
            $("#wifi_signin_to_other_network_form").submit();
        } else {
            before_wifi_signin_form_submit();
            $("#wifi_signin_form").submit();
        }
    });
    $("#wifi_signin_confirmation_overlay_save_button_h").click(function() {
        //$("#wifi_signin_confirmation_overlay_h").dialog("close");
        wifi_signin_confirmation_overlay_h_hide();
        if (signInToOtherNetwork) {
            before_wifi_signin_to_other_network_form_submit_onboarding();
            $("#wifi_signin_to_other_network_form_h").submit();
        } else {
            before_wifi_signin_form_submit_onboarding();
            $("#wifi_signin_form_h").submit();
        }
    });
    $("#wifi_modify_confirmation_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_modify_confirmation_overlay_title" class="wizard_dialog_title">' + $("#wifi_modify_confirmation_overlay").attr("title") + "</div>",
        open: function() {
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_modify_network_changing_msg"].replace("{0}", waname);
            $("#wifi_modify_network_changing_msg").html(msg);
        }
    });
    $("#wifi_modify_confirmation_overlay_cancel_button").click(function(e) {
        e.preventDefault();
        $(".wifi_ap_list_item").removeClass("selected");
        $("#wifi_modify_confirmation_overlay").dialog("close");
    });
    $("#wifi_modify_confirmation_overlay_save_button").click(function() {
        $("#wifi_modify_confirmation_overlay").dialog("close");
        $("#wifi_modify_form").submit();
    });
    $("#wifi_signin_complete_message_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        closeOnEscape: false,
        title: '<div id="wifi_signin_complete_message_overlay_title" class="wizard_dialog_title">' + $("#wifi_signin_complete_message_overlay").attr("title") + "</div>"
    });
    $("#wifi_signin_complete_message_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        closeOnEscape: false,
        title: '<div id="wifi_signin_complete_message_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_signin_complete_message_overlay_h").attr("title") + "</div>"
    });
    $("#wifi_disable_confirmation_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_disable_confirmation_overlay_title" class="wizard_dialog_title">' + $("#wifi_disable_confirmation_overlay").attr("title") + "</div>",
        open: function() {
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_disable_confirmation"].replace("{0}", waname);
            $("#wifi_disable_confirmation").html(msg);
        }
    });
    $("#wifi_disable_confirmation_overlay").bind("dialogclose", function(e) {
        if (e.keyCode == 27) {
            $("#WifiEnableToggle").attr("checked", true);
            $("#WifiEnableValue").val("false");
        }
    });
    $("#wifi_disable_confirmation_overlay_cancel_button").click(function() {
        $("#WifiEnableToggle").attr("checked", true);
        $("#WifiEnableValue").val("false");
        $("#wifi_disable_confirmation_overlay").dialog("close");
    });
    $("#wifi_disable_confirmation_overlay_save_button").click(function() {
        $("#wifi_enabled_form").submit();
        $("#wifi_disable_confirmation_overlay").dialog("close");
    });
    $("#wifi_disconnect_confirmation_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_disconnect_confirmation_overlay_title" class="wizard_dialog_title">' + $("#wifi_disconnect_confirmation_overlay").attr("title") + "</div>",
        open: function() {
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_disconnect_network_changing_msg"].replace("{0}", waname);
            $("#wifi_disconnect_network_changing_msg").html(msg);
        }
    });
    /*$("#wifi_disconnect_confirmation_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="wifi_disconnect_confirmation_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_disconnect_confirmation_overlay_h").attr("title") + "</div>",
        open: function() {
            var waname = "<b><i>" + gWANSSIDName + "</i></b>";
            msg = dictionaryList["wifi_disconnect_network_changing_msg"].replace("{0}", waname);
            $("#wifi_disconnect_network_changing_msg_h").html(msg);
        }
    });*/
    function wifi_disconnect_confirmation_overlay_h_show(){
      $("#wifi_disconnect_confirmation_overlay_h").show();
      var waname = "<b><i>" + gWANSSIDName + "</i></b>";
          msg = dictionaryList["wifi_disconnect_network_changing_msg"].replace("{0}", waname);
          $("#wifi_disconnect_network_changing_msg_h").html(msg);
    }
    function wifi_disconnect_confirmation_overlay_h_hide(){
      $("#wifi_disconnect_confirmation_overlay_h").hide();
    }
    $("#wifi_disconnect_confirmation_overlay_cancel_button").click(function() {
        $("#wifi_disconnect_confirmation_overlay").dialog("close");
    });
    $("#wifi_disconnect_confirmation_overlay_cancel_button_h").click(function() {
        //$("#wifi_disconnect_confirmation_overlay_h").dialog("close");
        wifi_disconnect_confirmation_overlay_h_hide();
    });
    $("#wifi_disconnect_confirmation_overlay_save_button").click(function() {
        $("#wifi_disconnect_confirmation_overlay").dialog("close");
        var mac_address = $("#wifi_modify_form_mac_address").val();
        forgetThisCurrentConnection(mac_address);
    });
    $("#wifi_disconnect_confirmation_overlay_save_button_h").click(function() {
        //$("#wifi_disconnect_confirmation_overlay_h").dialog("close");
        wifi_disconnect_confirmation_overlay_h_hide();
        $("#connect_home_network_container").show();
        var mac_address = $("#wifi_modify_form_mac_address_h").val();
        forgetThisCurrentConnection_onboarding(mac_address);
    });
    $("#wifi_disable_disconnect_complete_message_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        closeOnEscape: false,
        title: '<div id="wifi_disable_disconnect_complete_message_overlay_title" class="wizard_dialog_title">' + $("#wifi_disable_disconnect_complete_message_overlay").attr("title") + "</div>"
    });
    $("#wifi_disable_disconnect_complete_message_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: 700,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        closeOnEscape: false,
        title: '<div id="wifi_disable_disconnect_complete_message_overlay_title_h" class="wizard_dialog_title">' + $("#wifi_disable_disconnect_complete_message_overlay_h").attr("title") + "</div>"
    });
    $("#wifi_modify_form").restForm({
        "dialogName": "wifi_modify_overlay",
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            $("#wifi_modify_overlay").dialog("close");
            modifyCurrentNetwork = true;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter();
            } else {
                verifyCurrentWifiClientConnection();
            }
        }
    });
    $("#wifi_modify_form_h").restForm({
        //"dialogName": "wifi_modify_overlay_h",
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            //$("#wifi_modify_overlay_h").dialog("close");
            wifi_modify_overlay_h_hide();
            modifyCurrentNetwork = true;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter_onboarding();
            } else {
                verifyCurrentWifiClientConnection_onboarding();
            }
        }
    });
    $("#wifi_signin_form").restForm({
        "dialogName": "wifi_signin_overlay",
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            $("#wifi_signin_overlay").dialog("close");
            modifyCurrentNetwork = false;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter();
            } else {
                verifyCurrentWifiClientConnection();
            }
            disableIdTag("#wifi_signin_wps_pin");
            $("#wifi_signin_use_password_button").addClass("button-selected");
            $("#wifi_signin_use_wps_button").removeClass("button-selected");
            enableIdTag("#wifi_signin_form_password");
            enableIdTag("#wifi_signin_form_password_show");
            frequency_channel = 0
            if (data.current_wifi_client_connection.Frequency != null) {
                frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
            }
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#wifi_signin_form").restForm("processFormComplete", jqXHR, textStatus);
        }
    });
    $("#wifi_signin_form_h").restForm({
        //"dialogName": "wifi_signin_overlay_h",
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            //$("#wifi_signin_overlay_h").dialog("close");
            wifi_signin_overlay_h_hide()
            modifyCurrentNetwork = false;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter_onboarding();
            } else {
                verifyCurrentWifiClientConnection_onboarding();
            }
            disableIdTag("#wifi_signin_wps_pin_h");
            $("#wifi_signin_use_password_button_h").addClass("button-selected");
            $("#wifi_signin_use_wps_button_h").removeClass("button-selected");
            enableIdTag("#wifi_signin_form_password_h");
            enableIdTag("#wifi_signin_form_password_show_h");
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#wifi_signin_form_h").restForm("processFormComplete", jqXHR, textStatus);
        }
    });
    $("#wifi_signin_to_other_network_form").restForm({
        "dialogName": "wifi_signin_to_other_network_overlay",
        "beforeProcessForm": function() {
            var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select option:selected").val();
            if (security_mode.toLowerCase() == "none") {
                $("#wifi_signin_to_other_network_form_security_mode").val("NONE");
            } else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_security_mode").val("WEP");
                } else {
                    var encryption = $("#wifi_signin_to_other_network_form_encryption_select option:selected").val();
                    $("#wifi_signin_to_other_network_form_security_mode").val(security_mode + "/" + encryption);
                }
            }
        },
        "setDefaultFormDataCallback": function(data) {},
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
        	frequency_channel = 0
            modifyCurrentNetwork = false;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter();
            } else {
                verifyCurrentWifiClientConnection();
            }
            if (data.current_wifi_client_connection.Frequency != null) {
                frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
            }
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#wifi_signin_to_other_network_form").restForm("processFormComplete", jqXHR, textStatus);
            $("#wifi_signin_to_other_network_overlay").dialog("close");
        }
    });
    $("#wifi_signin_to_other_network_form_h").restForm({
        //"dialogName": "wifi_signin_to_other_network_overlay_h",
        "beforeProcessForm": function() {
            var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select_h option:selected").val();
            if (security_mode.toLowerCase() == "none") {
                $("#wifi_signin_to_other_network_form_security_mode_h").val("NONE");
            } else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_security_mode_h").val("WEP");
                } else {
                    var encryption = $("#wifi_signin_to_other_network_form_encryption_select_h option:selected").val();
                    $("#wifi_signin_to_other_network_form_security_mode_h").val(security_mode + "/" + encryption);
                }
            }
        },
        "setDefaultFormDataCallback": function(data) {},
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            modifyCurrentNetwork = false;
            if (connectToNewNetwork && !gFoundMe) {
                verifyCurrentWifiClientConnectionFromHomeRouter_onboarding();
            } else {
                verifyCurrentWifiClientConnection_onboarding();
            }
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#wifi_signin_to_other_network_form_h").restForm("processFormComplete", jqXHR, textStatus);
            //$("#wifi_signin_to_other_network_overlay_h").dialog("close");
            wifi_signin_to_other_network_overlay_h_hide();
        }
    });
    $("#verify_wifi_signin_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="verify_wifi_signin_overlay_title" class="wizard_dialog_title">' + $("#verify_wifi_signin_overlay").attr("title") + "</div>",
        open: function() {
            $("#verify_wifi_signin_overlay").find(".verify_wifi_signin_status").hide();
            $("#verify_wifi_signin_overlay").find(".dialog_form_controls").hide();
            $("#verify_wifi_signin_overlay").find(".connecting").show();
        }
    });
    /*$("#verify_wifi_signin_overlay_h").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div id="verify_wifi_signin_overlay_title_h" class="wizard_dialog_title">' + $("#verify_wifi_signin_overlay_h").attr("title") + "</div>",
        open: function() {
            $("#verify_wifi_signin_overlay_h").find(".verify_wifi_signin_status").hide();
            $("#verify_wifi_signin_overlay_h").find(".dialog_form_controls").hide();
            $("#verify_wifi_signin_overlay_h").find(".connecting").show();
        }
    });*/
    /*function verify_wifi_signin_overlay_h_show(){
          $("#verify_wifi_signin_overlay_h").show()
          $("#verify_wifi_signin_overlay_h").find(".verify_wifi_signin_status").hide();
          $("#verify_wifi_signin_overlay_h").find(".dialog_form_controls").hide();
          $("#verify_wifi_signin_overlay_h").find(".connecting").show();
    }
    function verify_wifi_signin_overlay_h_hide(){
          $("#verify_wifi_signin_overlay_h").hide()
    }*/
    
    $("#verify_wifi_signin_overlay_close_button").live("click", function() {
        $("#verify_wifi_signin_overlay").dialog("close");
    });
    $("#verify_wifi_signin_overlay_close_button_h").live("click", function() {
        //$("#verify_wifi_signin_overlay_h").dialog("close");
        $("#connect_home_network_container").show();
        verify_wifi_signin_overlay_h_hide();
    });
    $("#wifi_edit_network_settings_config_form").restForm({
        "beforeProcessForm": function() {
            $("#wifi_edit_network_settings_config_form").attr("action", $("#wifi_edit_network_settings_config_default_form").attr("action"));
        },
        "refreshDataCallback": function(data) {
            $("#wifi_edit_network_settings_config_form").restForm("_refreshData", data);
            if (data != null  && data.network_configuration != null  && data.network_configuration.ip != null ) {
                if (data.network_configuration.proto.toLowerCase() == "static") {
                    networkModeIsStatic = true;
                    $("#wifi_edit_settings_network_mode_static_button").addClass("button-selected");
                    $("#wifi_network_settings_static_container").show();
                    $("#wifi_network_settings_dhcp_container").hide();
                } else {
                    networkModeIsStatic = false;
                    $("#wifi_edit_settings_network_mode_dhcp_button").addClass("button-selected");
                    $("#wifi_network_settings_dhcp_ip_address").html(data.network_configuration.ip);
                    $("#wifi_network_settings_dhcp_container").show();
                }
            }
            $("#wifi_edit_network_settings_mac_address").html(gMacAddress);
            $("#wifi_edit_network_settings_device_name").html(gDeviceName);
            $("#wifi_edit_network_settings_ssid_name").html(gSSIDName);
            getWiFiInactivity();
            getWiFiReconnect();
        }
    });
    $("#wifi_edit_config_form_security_mode_select_5g").change(function() {
        var security_mode = $("#wifi_edit_config_form_security_mode_select_5g option:selected").val();
        $("#wifi_edit_config_form_5g").find(".display_ssid_password").show();
        if (security_mode.toLowerCase() == "none") {
            $("#wifi_edit_config_form_5g").find(".display_ssid_password").hide();
        }
    });
    $("#wifi_signin_to_other_network_form_security_mode_select").change(function() {
        var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select option:selected").val();
        $("#wifi_signin_to_other_network_form").find(".display_ssid_password").hide();
        $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").hide();
        wifi_signin_other_password_required = false;
        if (security_mode.toLowerCase() == "none") {} else {
            if (security_mode.toLowerCase() == "wep") {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                wifi_signin_other_password_required = true;
            } else {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").show();
                wifi_signin_other_password_required = true;
            }
        }
    });
    $("#wifi_signin_to_other_network_form_security_mode_select_h").change(function() {
        var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select_h option:selected").val();
        $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").hide();
        $("#wifi_signin_to_other_network_form_h").find(".display_wifi_encryption").hide();
        wifi_signin_other_password_required = false;
        if (security_mode.toLowerCase() == "none") {} else {
            if (security_mode.toLowerCase() == "wep") {
                $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").show();
                wifi_signin_other_password_required = true;
            } else {
                $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").show();
                $("#wifi_signin_to_other_network_form_h").find(".display_wifi_encryption").show();
                wifi_signin_other_password_required = true;
            }
        }
    });
    $("#wifi_signin_to_other_network_form_security_mode_select").change(function() {
        var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select option:selected").val();
        $("#wifi_signin_to_other_network_form").find(".display_ssid_password").hide();
        $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").hide();
        wifi_signin_other_password_required = false;
        if (security_mode.toLowerCase() == "none") {} else {
            if (security_mode.toLowerCase() == "wep") {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                wifi_signin_other_password_required = true;
            } else {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").show();
                wifi_signin_other_password_required = true;
            }
        }
    });
    $("#wifi_edit_network_settings_config_form").restForm({
        "beforeProcessForm": function() {
            $("#wifi_edit_network_settings_config_form").attr("action", $("#wifi_edit_network_settings_config_default_form").attr("action"));
        },
        "refreshDataCallback": function(data) {
            $("#wifi_edit_network_settings_config_form").restForm("_refreshData", data);
            if (data != null  && data.network_configuration != null  && data.network_configuration.ip != null ) {
                if (data.network_configuration.proto.toLowerCase() == "static") {
                    networkModeIsStatic = true;
                    $("#wifi_edit_settings_network_mode_static_button").addClass("button-selected");
                    $("#wifi_network_settings_static_container").show();
                    $("#wifi_network_settings_dhcp_container").hide();
                } else {
                    networkModeIsStatic = false;
                    $("#wifi_edit_settings_network_mode_dhcp_button").addClass("button-selected");
                    $("#wifi_network_settings_dhcp_ip_address").html(data.network_configuration.ip);
                    $("#wifi_network_settings_dhcp_container").show();
                }
            }
            $("#wifi_edit_network_settings_mac_address").html(gMacAddress);
            $("#wifi_edit_network_settings_device_name").html(gDeviceName);
            $("#wifi_edit_network_settings_ssid_name").html(gSSIDName);
        }
    });
    $("#wifi_signin_to_other_network_form_security_mode_select").change(function() {
        var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select option:selected").val();
        $("#wifi_signin_to_other_network_form").find(".display_ssid_password").hide();
        $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").hide();
        wifi_signin_other_password_required = false;
        if (security_mode.toLowerCase() == "none") {} else {
            if (security_mode.toLowerCase() == "wep") {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                wifi_signin_other_password_required = true;
            } else {
                $("#wifi_signin_to_other_network_form").find(".display_ssid_password").show();
                $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").show();
                wifi_signin_other_password_required = true;
            }
        }
    });
    $("#reconnect_network_form").restForm({
        "timeout": ajaxTimeoutPolling,
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            reconnectWirelessInProgress = false;
            if (data.system_state.status == "ready") {
                $("#reconnect_network_dialog").dialog("close");
                return;
            }
            var reconnectWirelessCurrentTimeStamp = new Date().getTime();
            if ((reconnectWirelessCurrentTimeStamp - reconnectWirelessStartTimeStamp) > reconnectWirelessTimeOutMax) {
                if (status == "ready") {
                    $("#reconnect_network_dialog").dialog("close");
                } else {
                    showReconnectWirelessTimeout();
                }
                return;
            }
            setTimeout("reconnectWirelessNetwork();", pingInterval);
        },
        "processFormErrorCallback": function() {
            reconnectWirelessInProgress = false;
            var reconnectWirelessCurrentTimeStamp = new Date().getTime();
            if ((reconnectWirelessCurrentTimeStamp - reconnectWirelessStartTimeStamp) > reconnectWirelessTimeOutMax) {
                showReconnectWirelessTimeout();
                return;
            }
            setTimeout("reconnectWirelessNetwork();", pingInterval);
        }
    });
    $("#wifi_access_point_edit").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled") && !$(this).parent().parent().hasClass("ui-state-disabled")) {
            $("#wifi_settings_container_tabs").dialog("open");
            $("#mypassport_advanced_content_area").hide();
            $("#mypassport_5G_content_area").hide();
            $("#wifi_advanced").removeClass("selected");
            $("#wifi_mypassport_5g").removeClass("selected");
            $("#wifi_mypassport").addClass("selected");
            $("#mypassport_content_area").show();
        }
    });
    $("#wifi_network_settings_edit").live("click", function() {
        if (!$(this).hasClass("ui-state-disabled") && !$(this).parent().parent().hasClass("ui-state-disabled")) {
            $("#wifi_edit_network_settings_config_form").attr("action", $("#wifi_edit_network_settings_config_default_form").attr("action"));
            $(".labelAndTooltipSpace").css({
                left: "48.5%"
            });
            $("#wifi_edit_network_settings_config_overlay").dialog("open");
        }
    });
    $("#wifi_edit_settings_network_mode_static_button").click(function() {
        if (!$("#wifi_edit_settings_network_mode_static_button").hasClass("button-selected")) {
            $("#wifi_edit_settings_network_mode_dhcp_button").removeClass("button-selected");
            $(this).addClass("button-selected");
            enableIdTag("#wifi_edit_network_settings_config_save_button");
            $("#wifi_network_settings_dhcp_container").hide();
            $("#wifi_network_settings_static_container").show();
        }
    });
    $("#wifi_edit_settings_network_mode_dhcp_button").click(function() {
        if (!$("#wifi_edit_settings_network_mode_dhcp_button").hasClass("button-selected")) {
            $("#wifi_edit_settings_network_mode_static_button").removeClass("button-selected");
            $(this).addClass("button-selected");
            enableIdTag("#wifi_edit_network_settings_config_save_button");
            $("#wifi_network_settings_dhcp_container").show();
            $("#wifi_network_settings_static_container").hide();
        }
    });
    $("#wifi_network_mode_confirmation").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#wifi_network_mode_confirmation").attr("title") + "</div>"
    });
    $("#wifi_network_mode_confirmation_close_button").click(function() {
        $("#wifi_network_mode_confirmation").dialog("close");
    });
    $("#wifi_network_mode_confirmation_ok_button").click(function() {
        $("#wifi_network_mode_confirmation").dialog("close");
        changeNetworkSettings();
    });
    $("#wifi_signin_form_show_password_checkbox").click(function() {
        if ($("#wifi_signin_form_show_password_checkbox").is(":checked")) {
            $("#wifi_signin_form_password").val($("#wifi_signin_form_password_show").val());
            $("#wifi_signin_form_password_container").show();
            $("#wifi_signin_form_password_show_container").hide();
            enableIdTag("#wifi_signin_form_password");
            disableIdTag("#wifi_signin_form_password_show");
        } else {
            $("#wifi_signin_form_password_show").val($("#wifi_signin_form_password").val());
            $("#wifi_signin_form_password_container").hide();
            $("#wifi_signin_form_password_show_container").show();
            disableIdTag("#wifi_signin_form_password");
            enableIdTag("#wifi_signin_form_password_show");
            if ($("#wifi_signin_form_password_show").val() != "") {
                $("#wifi_signin_form_password_show_container").find(".deletebutton").show();
            } else {
                $("#wifi_signin_form_password_show_container").find(".deletebutton").hide();
            }
        }
    });
    $("#wifi_signin_form_show_password_checkbox_h").click(function() {
        if ($("#wifi_signin_form_show_password_checkbox_h").is(":checked")) {
            $("#wifi_signin_form_password_h").val($("#wifi_signin_form_password_show_h").val());
            $("#wifi_signin_form_password_container_h").show();
            $("#wifi_signin_form_password_show_container_h").hide();
            enableIdTag("#wifi_signin_form_password_h");
            disableIdTag("#wifi_signin_form_password_show_h");
        } else {
            $("#wifi_signin_form_password_show_h").val($("#wifi_signin_form_password_h").val());
            $("#wifi_signin_form_password_container_h").hide();
            $("#wifi_signin_form_password_show_container_h").show();
            disableIdTag("#wifi_signin_form_password_h");
            enableIdTag("#wifi_signin_form_password_show_h");
            if ($("#wifi_signin_form_password_show_h").val() != "") {
                $("#wifi_signin_form_password_show_container_h").find(".deletebutton").show();
            } else {
                $("#wifi_signin_form_password_show_container_h").find(".deletebutton").hide();
            }
        }
    });
    $("#wifi_edit_config_form_show_password_checkbox_off").click(function() {
        $("#wifi_edit_config_form_password_show").val($("#wifi_edit_config_form_password").val());
        enableShowPassword("");
        if ($("#wifi_edit_config_form_password_show").val() != "") {
            $("#wifi_edit_config_form_password_show_container").find(".deletebutton").show();
        } else {
            $("#wifi_edit_config_form_password_show_container").find(".deletebutton").hide();
        }
        if (!$("#wifi_edit_config_form_password_show_container .deleteicon").find(".deletebutton").hasClass("addmarginright40")) {
            $("#wifi_edit_config_form_password_show_container .deleteicon").find(".deletebutton").addClass("addmarginright40");
        }
        $(this).hide();
    });
    $("#wifi_edit_config_form_show_password_checkbox_on").click(function() {
        $("#wifi_edit_config_form_password").val($("#wifi_edit_config_form_password_show").val());
        enablePassword("");
        $(this).hide();
    });
    $("#wifi_edit_config_form_show_password_checkbox_off_5g").click(function() {
        $("#wifi_edit_config_form_password_show_5g").val($("#wifi_edit_config_form_password_5g").val());
        enableShowPassword("_5g");
        if ($("#wifi_edit_config_form_password_show_5g").val() != "") {
            $("#wifi_edit_config_form_password_show_container_5g").find(".deletebutton").show();
        } else {
            $("#wifi_edit_config_form_password_show_container_5g").find(".deletebutton").hide();
        }
        if (!$("#wifi_edit_config_form_password_show_container_5g .deleteicon").find(".deletebutton").hasClass("addmarginright40")) {
            $("#wifi_edit_config_form_password_show_container_5g .deleteicon").find(".deletebutton").addClass("addmarginright40");
        }
        $(this).hide();
    });
    $("#wifi_edit_config_form_show_password_checkbox_on_5g").click(function() {
        $("#wifi_edit_config_form_password_5g").val($("#wifi_edit_config_form_password_show_5g").val());
        enablePassword("_5g");
        $(this).hide();
    });
    $("#wifi_signin_to_other_network_form_show_password_checkbox").click(function() {
        if ($("#wifi_signin_to_other_network_form_show_password_checkbox").is(":checked")) {
            $("#wifi_signin_to_other_network_form_password").val($("#wifi_signin_to_other_network_form_password_show").val());
            $("#wifi_signin_to_other_network_form_password_container").show();
            $("#wifi_signin_to_other_network_form_password_show_container").hide();
            enableIdTag("#wifi_signin_to_other_network_form_password");
            disableIdTag("#wifi_signin_to_other_network_form_password_show");
        } else {
            $("#wifi_signin_to_other_network_form_password_show").val($("#wifi_signin_to_other_network_form_password").val());
            $("#wifi_signin_to_other_network_form_password_container").hide();
            $("#wifi_signin_to_other_network_form_password_show_container").show();
            disableIdTag("#wifi_signin_to_other_network_form_password");
            enableIdTag("#wifi_signin_to_other_network_form_password_show");
            if ($("#wifi_signin_to_other_network_form_password_show").val() != "") {
                $("#wifi_signin_to_other_network_form_password_show_container").find(".deletebutton").show();
            } else {
                $("#wifi_signin_to_other_network_form_password_show_container").find(".deletebutton").hide();
            }
        }
    });
    $("#wifi_signin_to_other_network_form_show_password_checkbox_h").click(function() {
        if ($("#wifi_signin_to_other_network_form_show_password_checkbox_h").is(":checked")) {
            $("#wifi_signin_to_other_network_form_password_h").val($("#wifi_signin_to_other_network_form_password_show_h").val());
            $("#wifi_signin_to_other_network_form_password_container_h").show();
            $("#wifi_signin_to_other_network_form_password_show_container_h").hide();
            enableIdTag("#wifi_signin_to_other_network_form_password_h");
            disableIdTag("#wifi_signin_to_other_network_form_password_show_h");
        } else {
            $("#wifi_signin_to_other_network_form_password_show_h").val($("#wifi_signin_to_other_network_form_password_h").val());
            $("#wifi_signin_to_other_network_form_password_container_h").hide();
            $("#wifi_signin_to_other_network_form_password_show_container_h").show();
            disableIdTag("#wifi_signin_to_other_network_form_password_h");
            enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
            if ($("#wifi_signin_to_other_network_form_password_show_h").val() != "") {
                $("#wifi_signin_to_other_network_form_password_show_container_h").find(".deletebutton").show();
            } else {
                $("#wifi_signin_to_other_network_form_password_show_container_h").find(".deletebutton").hide();
            }
        }
    });
    $(".wifi_ap_list_item").live("click", function(e) {
        e.preventDefault();
        var ssid = $(this).find(".wireless_ap_ssid").text();
        var mac = $(this).find(".wireless_ap_mac").text();
        var security_mode = $(this).find(".wireless_ap_security_mode").text();
        var wps_enabled = $(this).find(".wireless_info").hasClass("ap_wps");
        var dhcp_disabled = $(this).find(".wireless_info").hasClass("dhcp_disabled");
        var ap_remembered = $(this).find(".wireless_info").hasClass("ap_remembered");
        var ap_trusted = $(this).find(".wireless_info").hasClass("ap_trusted");
        var secured = $(this).find(".wireless_info").hasClass("ap_secured");
        var wifi_connected = $(this).find(".wireless_label_text").hasClass("ap_connected");
        var mac_cloned = $(this).find(".wireless_info").hasClass("mac_cloned");
        $(this).addClass("selected");
        $(this).siblings().removeClass("selected");
        if (gConnectedNetwork) {
            connectToNewNetwork = true;
        } else {
            connectToNewNetwork = false;
        }
        if (ssid == "" && mac == "") {
            signInToOtherNetwork = true;
            $("#wifi_signin_to_other_network_form").restForm("reset");
        } else {
            signInToOtherNetwork = false;
            $("#wifi_signin_form").restForm("reset");
        }
        $("#wifi_signin_form_ssid").text(ssid);
        $("#wifi_signin_form_mac_address").val(mac);
        $("#wifi_signin_form_security_mode").val(security_mode);
        wifi_signin_with_wps_pin = false;
        $("#wifi_signin_form").find(".display_ssid_password").hide();
        wifi_signin_ap_remembered = ap_remembered;
        wifi_signin_ap_trusted = ap_trusted;
        if (signInToOtherNetwork) {
            $("#wifi_signin_to_other_network_form").find(".display_ssid_password").hide();
            $("#wifi_signin_to_other_network_form").find(".display_wifi_encryption").hide();
            wifi_signin_other_password_required = false;
        } else {
            if (wifi_connected || ap_remembered) {
                $("#wifi_signin_wps_toggle_container").hide();
            } else {
                if (wps_enabled) {
                    $("#wifi_signin_wps_toggle_container").show();
                } else {
                    $("#wifi_signin_wps_toggle_container").hide();
                }
            }
            if (ap_remembered) {
                wifi_signin_password_required = false;
                $(".show_checkbox_separator").hide();
            } else {
                if (secured == false) {
                    wifi_signin_password_required = false;
                    $(".show_checkbox_separator").hide();
                } else {
                    $("#wifi_signin_form").find(".display_ssid_password").show();
                    wifi_signin_password_required = true;
                    $(".show_checkbox_separator").show();
                }
            }
        }
        if (wifiApListAutoClickFlag) {
            $("#wifi_client_ap_submit_btn").click();
        }
        $(".wifi_settings_ip").val($(this).find(".wireless_client_ip").text());
        $(".wifi_settings_netmask").val($(this).find(".wireless_client_netmask").text());
        $(".wifi_settings_gateway").val($(this).find(".wireless_client_gateway").text());
        $(".wifi_settings_dns0").val($(this).find(".wireless_client_dns0").text());
        $(".wifi_settings_dns1").val($(this).find(".wireless_client_dns1").text());
        $(".wifi_settings_dns2").val($(this).find(".wireless_client_dns2").text());
        if (dhcp_disabled) {
            $(".wifi_settings_network_mode_static_button").addClass("button-selected");
            $(".wifi_settings_network_mode_dhcp_button").removeClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("false");
            $(".wifi_client_network_settings_dhcp_container").hide();
            $(".wifi_client_network_settings_static_container").show();
        } else {
            $(".wifi_settings_network_mode_static_button").removeClass("button-selected");
            $(".wifi_settings_network_mode_dhcp_button").addClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("true");
            var client_ip = $(this).find(".wireless_client_ip").text();
            if (client_ip == "") {
                client_ip = $(".wifi_avatar_device_ip_address").text();
            }
            $(".wifi_network_settings_dhcp_ip_address").text(client_ip);
            $(".wifi_client_network_settings_dhcp_container").show();
            $(".wifi_client_network_settings_static_container").hide();
        }
        if (mac_cloned) {
            $(".mac_clone_value").val("true");
            $(".mac_clone_toggle").attr("checked", true);
        } else {
            $(".mac_clone_value").val("false");
            $(".mac_clone_toggle").attr("checked", false);
        }
    });
    $(".wifi_ap_list_item_h").live("click", function(e) {
        e.preventDefault();
        var ssid = $(this).find(".wireless_ap_ssid").text();
        var mac = $(this).find(".wireless_ap_mac").text();
        var security_mode = $(this).find(".wireless_ap_security_mode").text();
        var wps_enabled = $(this).find(".wireless_info").hasClass("ap_wps");
        var dhcp_disabled = $(this).find(".wireless_info").hasClass("dhcp_disabled");
        var ap_remembered = $(this).find(".wireless_info").hasClass("ap_remembered");
        var ap_trusted = $(this).find(".wireless_info").hasClass("ap_trusted");
        var secured = $(this).find(".wireless_info").hasClass("ap_secured");
        var wifi_connected = $(this).find(".wireless_label_text").hasClass("ap_connected");
        var mac_cloned = $(this).find(".wireless_info").hasClass("mac_cloned");
        $(this).addClass("selected");
        $(this).siblings().removeClass("selected");
        if (gConnectedNetwork) {
            connectToNewNetwork = true;
        } else {
            connectToNewNetwork = false;
        }
        if (ssid == "" && mac == "") {
            signInToOtherNetwork = true;
            $("#wifi_signin_to_other_network_form_h").restForm("reset");
        } else {
            signInToOtherNetwork = false;
            $("#wifi_signin_form_h").restForm("reset");
        }
        $("#wifi_signin_form_ssid_h").text(ssid);
        $("#wifi_signin_form_mac_address_h").val(mac);
        $("#wifi_signin_form_security_mode_h").val(security_mode);
        wifi_signin_with_wps_pin = false;
        $("#wifi_signin_form_h").find(".display_ssid_password").hide();
        wifi_signin_ap_remembered = ap_remembered;
        wifi_signin_ap_trusted = ap_trusted;
        if (signInToOtherNetwork) {
            $("#wifi_signin_to_other_network_form_h").find(".display_ssid_password").hide();
            $("#wifi_signin_to_other_network_form_h").find(".display_wifi_encryption").hide();
            wifi_signin_other_password_required = false;
        } else {
            if (wifi_connected || ap_remembered) {
                $("#wifi_signin_wps_toggle_container_h").hide();
            } else {
                if (wps_enabled) {
                    $("#wifi_signin_wps_toggle_container_h").show();
                } else {
                    $("#wifi_signin_wps_toggle_container_h").hide();
                }
            }
            if (ap_remembered) {
                wifi_signin_password_required = false;
                $(".show_checkbox_separator").hide();
            } else {
                if (secured == false) {
                    wifi_signin_password_required = false;
                    $(".show_checkbox_separator").hide();
                } else {
                    $("#wifi_signin_form_h").find(".display_ssid_password").show();
                    wifi_signin_password_required = true;
                    $(".show_checkbox_separator").show();
                }
            }
        }
        if (wifiApListAutoClickFlag) {
            $("#wifi_client_ap_submit_btn_h").click();
        }
        $(".wifi_settings_ip").val($(this).find(".wireless_client_ip").text());
        $(".wifi_settings_netmask").val($(this).find(".wireless_client_netmask").text());
        $(".wifi_settings_gateway").val($(this).find(".wireless_client_gateway").text());
        $(".wifi_settings_dns0").val($(this).find(".wireless_client_dns0").text());
        $(".wifi_settings_dns1").val($(this).find(".wireless_client_dns1").text());
        $(".wifi_settings_dns2").val($(this).find(".wireless_client_dns2").text());
        if (dhcp_disabled) {
            $(".wifi_settings_network_mode_static_button").addClass("button-selected");
            $(".wifi_settings_network_mode_dhcp_button").removeClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("false");
            $(".wifi_client_network_settings_dhcp_container").hide();
            $(".wifi_client_network_settings_static_container").show();
        } else {
            $(".wifi_settings_network_mode_static_button").removeClass("button-selected");
            $(".wifi_settings_network_mode_dhcp_button").addClass("button-selected");
            $(".wifi_settings_dhcp_enabled").val("true");
            var client_ip = $(this).find(".wireless_client_ip").text();
            if (client_ip == "") {
                client_ip = $(".wifi_avatar_device_ip_address").text();
            }
            $(".wifi_network_settings_dhcp_ip_address").text(client_ip);
            $(".wifi_client_network_settings_dhcp_container").show();
            $(".wifi_client_network_settings_static_container").hide();
        }
        if (mac_cloned) {
            $(".mac_clone_value").val("true");
            $(".mac_clone_toggle").attr("checked", true);
        } else {
            $(".mac_clone_value").val("false");
            $(".mac_clone_toggle").attr("checked", false);
        }
        
        getWiFiInactivity();
        getWiFiReconnect();
    });
    $("#wifi_signin_use_password_button").click(function() {
        $("#wifi_signin_wps_pin_container").hide();
        disableIdTag("#wifi_signin_wps_pin");
        wifi_signin_with_wps_pin = false;
        $("#wifi_signin_use_password_button").addClass("button-selected");
        $("#wifi_signin_use_wps_button").removeClass("button-selected");
        if (wifi_signin_password_required) {
            $("#wifi_signin_form").find(".display_ssid_password").show();
        }
    });
    $("#wifi_signin_use_wps_button").click(function() {
        $("#wifi_signin_wps_pin_container").show();
        enableIdTag("#wifi_signin_wps_pin");
        wifi_signin_with_wps_pin = true;
        $("#wifi_signin_use_password_button").removeClass("button-selected");
        $("#wifi_signin_use_wps_button").addClass("button-selected");
        if (wifi_signin_password_required) {
            $("#wifi_signin_form").find(".display_ssid_password").hide();
        }
    });
    $("#wifi_signin_form_trusted_checkbox").click(function() {
        if ($("#wifi_signin_form_trusted_checkbox").is(":checked")) {
            $("#wifi_signin_form_trusted").val("false");
        } else {
            $("#wifi_signin_form_trusted").val("true");
        }
    });
    $("#wifi_signin_form_trusted_checkbox_h").click(function() {
        if ($("#wifi_signin_form_trusted_checkbox_h").is(":checked")) {
            $("#wifi_signin_form_trusted_h").val("false");
        } else {
            $("#wifi_signin_form_trusted_h").val("true");
        }
    });
    $("#wifi_modify_form_trusted_checkbox").click(function() {
        if ($("#wifi_modify_form_trusted_checkbox").is(":checked")) {
            $("#wifi_modify_form_trusted").val("false");
        } else {
            $("#wifi_modify_form_trusted").val("true");
        }
    });
    $("#wifi_modify_form_trusted_checkbox_h").click(function() {
        if ($("#wifi_modify_form_trusted_checkbox_h").is(":checked")) {
            $("#wifi_modify_form_trusted_h").val("false");
        } else {
            $("#wifi_modify_form_trusted_h").val("true");
        }
    });
    $("#wifi_signin_to_other_network_form_trusted_checkbox").click(function() {
        if ($("#wifi_signin_to_other_network_form_trusted_checkbox").is(":checked")) {
            $("#wifi_signin_to_other_network_form_trusted").val("false");
        } else {
            $("#wifi_signin_to_other_network_form_trusted").val("true");
        }
    });
    $("#wifi_modify_form_forget_network_checkbox").click(function() {
        if ($("#wifi_modify_form_forget_network_checkbox").is(":checked")) {
            $("#wifi_modify_form_remember_network").val("true");
            $(".remember_network_show_all").show();
        } else {
            $("#wifi_modify_form_remember_network").val("false");
            $(".remember_network_show_all").hide();
        }
    });
    $("#wifi_modify_form_forget_network_checkbox_h").click(function() {
        if ($("#wifi_modify_form_forget_network_checkbox_h").is(":checked")) {
            $("#wifi_modify_form_remember_network_h").val("true");
            //console.log("homeNetwork-36467"+$("#wifi_modify_form_remember_network_h").val())
            $(".remember_network_show_all").show();
        } else {
            $("#wifi_modify_form_remember_network_h").val("false");
            //console.log("homeNetwork-36467"+$("#wifi_modify_form_remember_network_h").val())
            $(".remember_network_show_all").hide();
        }
    });
    $("#wifi_signin_form_forget_network_checkbox").click(function() {
        if ($("#wifi_signin_form_forget_network_checkbox").is(":checked")) {
            $("#wifi_signin_form_remember_network").val("true");
            $(".remember_network_show_all").show();
        } else {
            $("#wifi_signin_form_remember_network").val("false");
            $(".remember_network_show_all").hide();
        }
    });
    $(".show_advanced_options").live("click", function(e) {
        e.preventDefault();
        if($('#wifi_signin_overlay_h, #wifi_modify_overlay_h, #wifi_signin_to_other_network_overlay_h').is(":visible")) {
        	$(".advanced_options_container").hide();
        	$(".wifi_advanced_options_container").show();
        }
        else {
        	$(".advanced_options_container").show();
        	$(".wifi_advanced_options_container").hide();
        }
        //$(".advanced_options_container").show();
        $(".show_advanced_options").hide();
        $(".hide_advanced_options").show();
    });
    $(".hide_advanced_options").live("click", function(e) {
        e.preventDefault();
        $(".advanced_options_container").hide();
        $(".wifi_advanced_options_container").hide();
        $(".show_advanced_options").show();
        $(".hide_advanced_options").hide();
    });
    $("#reconnect_network_dialog").dialog({
        autoOpen: false,
        resizable: false,
        closeOnEscape: false,
        position: "center",
        width: 710,
        minHeight: dialogMinHeight,
        zIndex: 2000,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#reconnect_network_dialog").attr("title") + "</div>",
        open: function() {
        	$("#reconnect_network_dialog").closest(".ui-draggable").css({
				visibility: "visible",
				bottom: ""
			});
            var msg;
            var ssidname = "";
            var showOtherNetwork = false;
            if(gWANSSIDName == "-" || gWANSSIDName == "" || gRestoreReconnectFlag){
	            if(gconnectingBand == 2){
	            	if(isWifiOn == "false"){
	            		ssidname += "<b><i>" + gSSIDNameHighBand + "</i></b>";
	            		if(gSSIDNotBroadcasting_5g) {
		            		showOtherNetwork = true;
		            	}
	            	}
	            	else{
		            	ssidname += "<b><i>" + gSSIDName + "</i></b>";
		            	if(gSSIDNotBroadcasting) {
		            		showOtherNetwork = true;
		            	}
		            }
	            }
	            else {
	            	if(isWifiOn_5g == "false"){
	            		ssidname += "<b><i>" + gSSIDName + "</i></b>";
	            		if(gSSIDNotBroadcasting) {
		            		showOtherNetwork = true;
		            	}
	            	}
	            	else{
		            	ssidname += "<b><i>" + gSSIDNameHighBand + "</i></b>";
		            	if(gSSIDNotBroadcasting_5g) {
		            		showOtherNetwork = true;
		            	}
		            }
	            }
	            $(".wired_connection_to_router").hide();
	            gRestoreReconnectFlag = false;
	        }
	        else {
	        	ssidname += "<b><i>" + gWANSSIDName + "</i></b>";
	        	$(".wired_connection_to_router").show();
	        }
            msg = dictionaryList["find_wifi"].replace("{0}", ssidname);
            $("#connect_msg_find_wifi_network").find(".connect_network_msg_title").html(msg);
            msg = dictionaryList["connect_wifi"].replace("{0}", ssidname);
            $("#connect_msg_select_wifi_network").find(".connect_network_msg_title").html(msg);
            if ((navigator.appVersion.indexOf("Mac") != -1) || (navigator.platform.toLowerCase() == "ipad") || (navigator.platform.toLowerCase() == "iphone")) {
                $("#connect_msg_find_wifi_network").find(".icon").removeClass("pc_icon");
                $("#connect_msg_select_wifi_network").find(".icon").removeClass("pc_icon");
            } else {
                $("#connect_msg_find_wifi_network").find(".icon").addClass("pc_icon");
                $("#connect_msg_select_wifi_network").find(".icon").addClass("pc_icon");
            }

            if (!showOtherNetwork) {
                $("#ssid_broadcasting").show();
                $("#ssid_not_broadcasting").hide();
                msg = dictionaryList["select_avatar_wifi"].replace("{0}", ssidname);
                $("#connect_msg_select_wifi_network").find(".connect_network_msg_details").html(msg);
            } else {
                $("#ssid_broadcasting").hide();
                $("#ssid_not_broadcasting").show();
                msg = dictionaryList["connect_wifi"].replace("{0}", ssidname);
                $("#connect_msg_select_other_network").find(".connect_network_msg_title").html(msg);
                msg = dictionaryList["select_other_network"].replace("{0}", ssidname);
                $("#connect_msg_select_other_network").find(".connect_network_msg_details").html(msg);
            }
            var deviceNameURL = getDeviceNameURL(gDeviceName);
            msg = dictionaryList["devicename_url"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
            $("#connect_network_msg_refresh_browser").find(".connect_network_msg_details").html(msg);
        },
        close: function() {
        	$("#reconnect_network_dialog").closest(".ui-draggable").css({
				display: "none",
				visibility: ""
			});
        }
    });
    $("#reconnect_network_timeout_dialog").dialog({
        autoOpen: false,
        resizable: false,
        closeOnEscape: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        zIndex: 2000,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#reconnect_network_timeout_dialog").attr("title") + "</div>"
    });
    $("#wifi_settings_network_dhcp_renew_button").click(function(e) {
        e.preventDefault();
        displayLoading();
        $.ajaxAPI({
            "url": "network_configuration",
            "type": "PUT",
            "data": {
                "proto": "dhcp_client",
                "dhcp_mode": "renew"
            },
            "timeout": ajaxTimeoutNetwork,
            "success": function(data, textStatus, jqXHR) {},
            "error": function(request, status, error) {},
            "complete": function(jqXHR, textStatus) {
                hideLoading();
            }
        });
    });
    $(".mac_clone_toggle").bind("toggle", function(event) {
        if ($(this).is(":checked")) {
            $(".mac_clone_value").val("true");
        } else {
            $(".mac_clone_value").val("false");
        }
    });
    $("#wifi_enabled_form").restForm({
        "refreshDataCallback": function(data) {
            if (data != null  && data.wifi_client_configuration != null ) {
                if (data.wifi_client_configuration.enabled.toLowerCase() == "true") {
                    $("#wifi_enabled_form").find("#WifiEnableToggle").attr("checked", true);
                    $("#WifiEnableValue").val("true");
                    $("#wifi_ap_list_content").show();
                    $("#wifi_ap_list_off").hide();
                    gWiFiEnabled = true;
                    showWifiClientAccessPointListContainer();
                } else {
                    $("#wifi_enabled_form").find("#WifiEnableToggle").attr("checked", false);
                    $("#WifiEnableValue").val("false");
                    $("#wifi_ap_list_content").hide();
                    $("#wifi_ap_list_off").show();
                    gWiFiEnabled = false;
                }
                checkCurrentWifiClientConnection();
            }
        },
        "beforeProcessForm": function() {
            if (gTrustedNetwork && !gFoundMe) {
                $("#wifi_ap_list_off").show();
                $("#wifi_ap_list_content").hide();
                $(".wifi_ap_list_item.default").siblings().remove();
                disableIdTag(".network_separator2");
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#WifiEnableValue").val() == "true") {
                gWiFiEnabled = true;
                checkCurrentWifiClientConnection();
                showWifiClientAccessPointListContainer();
                $("#wifi_ap_list_off").hide();
                $("#wifi_ap_list_content").show();
            } else {
                gWiFiEnabled = false;
                $("#wifi_ap_list_off").show();
                $("#wifi_ap_list_content").hide();
                $(".wifi_ap_list_item.default").siblings().remove();
                disableIdTag(".network_separator2");
            }
        },
        "processFormErrorCallback": function() {
            if (gTrustedNetwork && !gFoundMe) {
                gWiFiEnabled = false;
                displayDisableDisconnectCompleteMessage();
            }
        }
    });
    $("#WifiEnableToggle").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#WifiEnableValue").val("true");
            $("#wifi_enabled_form").submit();
            setTimeout("checkCurrentWifiClientConnection();", 20000);
        } else {
            $("#WifiEnableValue").val("false");
            frequency_channel = 0
            if (!gFoundMe && gTrustedNetwork) {
                $("#wifi_disable_confirmation_overlay").dialog("open");
            } else {
                $("#wifi_enabled_form").submit();
            }
        }
    });
    $("#wifi_mypassport").click(function(e) {
        e.preventDefault();
        $("#mypassport_advanced_content_area").hide();
        $("#mypassport_5G_content_area").hide();
        $("#wifi_advanced").removeClass("selected");
        $("#wifi_mypassport_5g").removeClass("selected");
        $("#wifi_mypassport").addClass("selected");
        $("#mypassport_content_area").show();
    });
    $("#wifi_mypassport_5g").click(function(e) {
        e.preventDefault();
        $("#mypassport_advanced_content_area").hide();
        $("#mypassport_content_area").hide();
        $("#wifi_advanced").removeClass("selected");
        $("#wifi_mypassport").removeClass("selected");
        $("#wifi_mypassport_5g").addClass("selected");
        $("#mypassport_5G_content_area").show();
    });
    $("#wifi_advanced").click(function(e) {
        e.preventDefault();
        $("#mypassport_5G_content_area").hide();
        $("#mypassport_content_area").hide();
        $("#wifi_mypassport_5g").removeClass("selected");
        $("#wifi_mypassport").removeClass("selected");
        $("#wifi_advanced").addClass("selected");
        $("#mypassport_advanced_content_area").show();
    });
});
  
/**dialogStart***/
function verify_wifi_signin_overlay_h_show(){
    var link_text = $("#verify_wifi_signin_overlay_title_h").html();
    $("#verify_wifi_signin_overlay_h").attr("title",link_text).show();
    
    $("#verify_wifi_signin_overlay_h").find(".verify_wifi_signin_status").hide();
    $("#verify_wifi_signin_overlay_h").find(".dialog_form_controls").hide();
    $("#verify_wifi_signin_overlay_h").find(".connecting").show();
}
function verify_wifi_signin_overlay_h_hide(){
    $("#verify_wifi_signin_overlay_h").hide()
}

function wifi_signin_success_overlay_h_show(rssid){
	checkInternetConnectivityCount++;
    $.ajaxAPI({
        "url": "internet_access",
        "success": function(data) {
            if (data != null  && data.internet_access != null ) {
                if (data.internet_access.connectivity.toLowerCase() == "true") {
                    gInternetAccess = true;
                } else {
                    gInternetAccess = false;
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            if (!gInternetAccess || checkInternetConnectivityCount < maxCheckInternetConnectivityCount) {
                setTimeout(function () {
                    wifi_signin_success_overlay_h_show(rssid);
                }, 2000);
            } else {
                $("#verify_wifi_signin_overlay_h").hide()
                $("#wifi_signin_success_overlay_h").show();
                var msg = dictionaryList["home_mode_reconnect_intro"].replace("{0}", rssid);
                $("#onboarding_wifi_signin_success").text(msg);
            }
        }
    });
}

function wifi_signin_success_overlay_h_hide(){
  $("#wifi_signin_success_overlay_h").hide();
}
/*****/
function showhideWifiPassword(actionFunction, freq) {
    if (actionFunction == "hide") {
        $("#wifi_edit_config_form_password_top_container" + freq).hide();
        $("#wifi_edit_config_form_password_checkbox" + freq).hide();
        enableShowPassword(freq);
    } else {
        $("#wifi_edit_config_form_password_top_container" + freq).show();
        $("#wifi_edit_config_form_password_checkbox" + freq).show();
        enablePassword(freq);
    }
}
function enableShowPassword(freq) {
    $("#wifi_edit_config_form_password_container" + freq).hide();
    $("#wifi_edit_config_form_password_show_container" + freq).show();
    $("#wifi_edit_config_form_show_password_checkbox_on" + freq).show();
    $("#wifi_edit_config_form_show_password_checkbox_off" + freq).hide();
    enableIdTag("#wifi_edit_config_form_password_show" + freq);
    $("#wifi_edit_config_form_password_show" + freq).addClass("NOTEMPTY");
    $("#wifi_edit_config_form_password_show" + freq).addClass("WPA_NETWORK_PASSWORD");
    $("#wifi_edit_config_form_password" + freq).removeClass("NOTEMPTY");
    $("#wifi_edit_config_form_password" + freq).removeClass("WPA_NETWORK_PASSWORD");
    disableIdTag("#wifi_edit_config_form_password" + freq);
}
function enablePassword(freq) {
    $("#wifi_edit_config_form_password_container" + freq).show();
    $("#wifi_edit_config_form_password_show_container" + freq).hide();
    $("#wifi_edit_config_form_show_password_checkbox_on" + freq).hide();
    $("#wifi_edit_config_form_show_password_checkbox_off" + freq).show();
    enableIdTag("#wifi_edit_config_form_password" + freq);
    $("#wifi_edit_config_form_password" + freq).addClass("NOTEMPTY");
    $("#wifi_edit_config_form_password" + freq).addClass("WPA_NETWORK_PASSWORD");
    $("#wifi_edit_config_form_password_show" + freq).removeClass("NOTEMPTY");
    $("#wifi_edit_config_form_password_show" + freq).removeClass("WPA_NETWORK_PASSWORD");
    disableIdTag("#wifi_edit_config_form_password_show" + freq);
}
function disablePassword(freq) {
    $("#wifi_edit_config_form_password_container" + freq).hide();
    $("#wifi_edit_config_form_password_show_container" + freq).hide();
    $("#wifi_edit_config_form_password_top_container" + freq).hide();
    $("#wifi_edit_config_form_password_checkbox" + freq).hide();
    $("#wifi_edit_config_form_password" + freq).removeClass("NOTEMPTY");
    $("#wifi_edit_config_form_password" + freq).removeClass("WPA_NETWORK_PASSWORD");
    $("#wifi_edit_config_form_password_show" + freq).removeClass("NOTEMPTY");
    $("#wifi_edit_config_form_password_show" + freq).removeClass("WPA_NETWORK_PASSWORD");
}
function before_wifi_signin_to_other_network_form_submit() {
    disableIdTag("#wifi_signin_to_other_network_form_password");
    $("#wifi_signin_to_other_network_form_password").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_to_other_network_form_password_show");
    $("#wifi_signin_to_other_network_form_password_show").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select option:selected").val();
    if (wifi_signin_other_password_required) {
        if ($("#wifi_signin_to_other_network_form_show_password_checkbox").is(":checked")) {
            enableIdTag("#wifi_signin_to_other_network_form_password_show");
            $("#wifi_signin_to_other_network_form_password_show").addClass("NOTEMPTY");
            if (security_mode.toLowerCase() == "none") {} else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_password_show").addClass("WEP_NETWORK_PASSWORD");
                } else {
                    $("#wifi_signin_to_other_network_form_password_show").addClass("WPA_NETWORK_PASSWORD");
                }
            }
        } else {
            enableIdTag("#wifi_signin_to_other_network_form_password");
            $("#wifi_signin_to_other_network_form_password").addClass("NOTEMPTY");
            if (security_mode.toLowerCase() == "none") {} else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_password").addClass("WEP_NETWORK_PASSWORD");
                } else {
                    $("#wifi_signin_to_other_network_form_password").addClass("WPA_NETWORK_PASSWORD");
                }
            }
        }
    }
    if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
        $("#wifi_signin_to_other_SettingIp").removeClass("IPADDRESS");
        $("#wifi_signin_to_other_SettingNetmask").removeClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("true");
        disableIdTag(".wifi_static_network_settings");
    } else {
        $("#wifi_signin_to_other_SettingIp").addClass("IPADDRESS");
        $("#wifi_signin_to_other_SettingNetmask").addClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("false");
        enableIdTag(".wifi_static_network_settings");
    }
    if ($("#wifi_signin_to_other_network_form_trusted").val() == "false") {
        enableIdTag(".mac_clone_value");
        var clone_mac_enable = $(".mac_clone_value").val();
        if (clone_mac_enable == "true") {
            $(".cloned_mac_address").val(gMacAddress);
            enableIdTag(".cloned_mac_address");
        } else {
            disableIdTag(".cloned_mac_address");
        }
    } else {
        disableIdTag(".mac_clone_value");
        disableIdTag(".cloned_mac_address");
    }
}
function before_wifi_signin_to_other_network_form_submit_onboarding() {
    disableIdTag("#wifi_signin_to_other_network_form_password_h");
    $("#wifi_signin_to_other_network_form_password_h").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_to_other_network_form_password_show_h");
    $("#wifi_signin_to_other_network_form_password_show_h").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    var security_mode = $("#wifi_signin_to_other_network_form_security_mode_select_h option:selected").val();
    if (wifi_signin_other_password_required) {
        if ($("#wifi_signin_to_other_network_form_show_password_checkbox_h").is(":checked")) {
            enableIdTag("#wifi_signin_to_other_network_form_password_show_h");
            $("#wifi_signin_to_other_network_form_password_show_h").addClass("NOTEMPTY");
            if (security_mode.toLowerCase() == "none") {} else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_password_show_h").addClass("WEP_NETWORK_PASSWORD");
                } else {
                    $("#wifi_signin_to_other_network_form_password_show_h").addClass("WPA_NETWORK_PASSWORD");
                }
            }
        } else {
            enableIdTag("#wifi_signin_to_other_network_form_password_h");
            $("#wifi_signin_to_other_network_form_password_h").addClass("NOTEMPTY");
            if (security_mode.toLowerCase() == "none") {} else {
                if (security_mode.toLowerCase() == "wep") {
                    $("#wifi_signin_to_other_network_form_password_h").addClass("WEP_NETWORK_PASSWORD");
                } else {
                    $("#wifi_signin_to_other_network_form_password_h").addClass("WPA_NETWORK_PASSWORD");
                }
            }
        }
    }
    if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
        $("#wifi_signin_to_other_SettingIp_h").removeClass("IPADDRESS");
        $("#wifi_signin_to_other_SettingNetmask_h").removeClass("NETMASK");
        $(".wifi_settings_dhcp_enabled_h").val("true");
        disableIdTag(".wifi_static_network_settings");
    } else {
        $("#wifi_signin_to_other_SettingIp_h").addClass("IPADDRESS");
        $("#wifi_signin_to_other_SettingNetmask_h").addClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("false");
        enableIdTag(".wifi_static_network_settings");
    }
    if ($("#wifi_signin_to_other_network_form_trusted_h").val() == "false") {
        enableIdTag(".mac_clone_value");
        var clone_mac_enable = $(".mac_clone_value").val();
        if (clone_mac_enable == "true") {
            $(".cloned_mac_address").val(gMacAddress);
            enableIdTag(".cloned_mac_address");
        } else {
            disableIdTag(".cloned_mac_address");
        }
    } else {
        disableIdTag(".mac_clone_value");
        disableIdTag(".cloned_mac_address");
    }
}
function before_wifi_signin_form_submit() {
    disableIdTag("#wifi_signin_form_password");
    $("#wifi_signin_form_password").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_form_password_show");
    $("#wifi_signin_form_password_show").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_wps_pin");
    $("#wifi_signin_wps_pin").removeClass("NOTEMPTY").removeClass("WPS_PIN");
    disableIdTag("#wifi_signin_form_security_mode");
    var security_mode = $("#wifi_signin_form_security_mode").val();
    if (wifi_signin_ap_remembered) {} else {
        if (wifi_signin_with_wps_pin) {
            enableIdTag("#wifi_signin_wps_pin");
            $("#wifi_signin_wps_pin").addClass("NOTEMPTY").addClass("WPS_PIN");
        } else {
            enableIdTag("#wifi_signin_form_security_mode");
            if (wifi_signin_password_required) {
                if ($("#wifi_signin_form_show_password_checkbox").is(":checked")) {
                    enableIdTag("#wifi_signin_form_password_show");
                    $("#wifi_signin_form_password_show").addClass("NOTEMPTY");
                    if (security_mode.toLowerCase() == "none") {} else {
                        if (security_mode.toLowerCase() == "wep") {
                            $("#wifi_signin_form_password_show").addClass("WEP_NETWORK_PASSWORD");
                        } else {
                            $("#wifi_signin_form_password_show").addClass("WPA_NETWORK_PASSWORD");
                        }
                    }
                } else {
                    enableIdTag("#wifi_signin_form_password");
                    $("#wifi_signin_form_password").addClass("NOTEMPTY");
                    if (security_mode.toLowerCase() == "none") {} else {
                        if (security_mode.toLowerCase() == "wep") {
                            $("#wifi_signin_form_password").addClass("WEP_NETWORK_PASSWORD");
                        } else {
                            $("#wifi_signin_form_password").addClass("WPA_NETWORK_PASSWORD");
                        }
                    }
                }
            }
        }
    }
    if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
        $("#wifi_signin_SettingIp").removeClass("IPADDRESS");
        $("#wifi_signin_SettingNetmask").removeClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("true");
        disableIdTag(".wifi_static_network_settings");
    } else {
        $("#wifi_signin_SettingIp").addClass("IPADDRESS");
        $("#wifi_signin_SettingNetmask").addClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("false");
        enableIdTag(".wifi_static_network_settings");
    }
    if ($("#wifi_signin_form_trusted").val() == "false") {
        enableIdTag(".mac_clone_value");
        var clone_mac_enable = $(".mac_clone_value").val();
        if (clone_mac_enable == "true") {
            $(".cloned_mac_address").val(gMacAddress);
            enableIdTag(".cloned_mac_address");
        } else {
            disableIdTag(".cloned_mac_address");
        }
    } else {
        disableIdTag(".mac_clone_value");
        disableIdTag(".cloned_mac_address");
    }
}
function before_wifi_signin_form_submit_onboarding() {
    disableIdTag("#wifi_signin_form_password_h");
    $("#wifi_signin_form_password_h").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_form_password_show_h");
    $("#wifi_signin_form_password_show_h").removeClass("NOTEMPTY").removeClass("WPA_NETWORK_PASSWORD").removeClass("WEP_NETWORK_PASSWORD");
    disableIdTag("#wifi_signin_wps_pin_h");
    $("#wifi_signin_wps_pin_h").removeClass("NOTEMPTY").removeClass("WPS_PIN");
    disableIdTag("#wifi_signin_form_security_mode_h");
    var security_mode = $("#wifi_signin_form_security_mode_h").val();
    if (wifi_signin_ap_remembered) {} else {
        if (wifi_signin_with_wps_pin) {
            enableIdTag("#wifi_signin_wps_pin_h");
            $("#wifi_signin_wps_pin_h").addClass("NOTEMPTY").addClass("WPS_PIN");
        } else {
            enableIdTag("#wifi_signin_form_security_mode_h");
            if (wifi_signin_password_required) {
                if ($("#wifi_signin_form_show_password_checkbox_h").is(":checked")) {
                    enableIdTag("#wifi_signin_form_password_show_h");
                    $("#wifi_signin_form_password_show_h").addClass("NOTEMPTY");
                    if (security_mode.toLowerCase() == "none") {} else {
                        if (security_mode.toLowerCase() == "wep") {
                            $("#wifi_signin_form_password_show_h").addClass("WEP_NETWORK_PASSWORD");
                        } else {
                            $("#wifi_signin_form_password_show_h").addClass("WPA_NETWORK_PASSWORD");
                        }
                    }
                } else {
                    enableIdTag("#wifi_signin_form_password_h");
                    $("#wifi_signin_form_password_h").addClass("NOTEMPTY");
                    if (security_mode.toLowerCase() == "none") {} else {
                        if (security_mode.toLowerCase() == "wep") {
                            $("#wifi_signin_form_password_h").addClass("WEP_NETWORK_PASSWORD");
                        } else {
                            $("#wifi_signin_form_password_h").addClass("WPA_NETWORK_PASSWORD");
                        }
                    }
                }
            }
        }
    }
    if ($(".wifi_settings_network_mode_dhcp_button").hasClass("button-selected")) {
        $("#wifi_signin_SettingIp_h").removeClass("IPADDRESS");
        $("#wifi_signin_SettingNetmask_h").removeClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("true");
        disableIdTag(".wifi_static_network_settings");
    } else {
        $("#wifi_signin_SettingIp_h").addClass("IPADDRESS");
        $("#wifi_signin_SettingNetmask_h").addClass("NETMASK");
        $(".wifi_settings_dhcp_enabled").val("false");
        enableIdTag(".wifi_static_network_settings");
    }
    if ($("#wifi_signin_form_trusted_h").val() == "false") {
        enableIdTag(".mac_clone_value");
        var clone_mac_enable = $(".mac_clone_value").val();
        if (clone_mac_enable == "true") {
            $(".cloned_mac_address").val(gMacAddress);
            enableIdTag(".cloned_mac_address");
        } else {
            disableIdTag(".cloned_mac_address");
        }
    } else {
        disableIdTag(".mac_clone_value");
        disableIdTag(".cloned_mac_address");
    }
}
function showWifiClientAccessPointListContainer() {
    var wifi_ap_count = 0;
    $("#wifi_ap_list_content ul li").each(function(i) {
        wifi_ap_count++;
    });
    if (wifi_ap_count > 1) {
        $(".wifi_list_please_wait").hide();
    } else {
        $(".wifi_list_please_wait").show();
    }
}
function updateWifiClientAccessPointList() {
    var wifi_ap_found_count = 0;
    var wifi_ap_list = {};
    var empty_flag = true;
    $("#wifi_ap_list_content ul li").each(function(i) {
        if (!$(this).hasClass(".default")) {
            var mac = $(this).find(".wireless_ap_mac").text();
            var ssid = $(this).find(".wireless_label_text").text();
            if (mac != "") {
                wifi_ap_list[mac] = ssid;
                empty_flag = false;
            }
        }
    });
    if (wifi_client_access_points_inprogress) {
        return;
    }
    wifi_client_access_points_inprogress = true;
    if (gConnectedNetwork == false)
    	setTimeout("updateWifiClientAccessPointList();", 10000);
    //console.log("updateWifiClientAccessPointList-update");
    $.ajaxAPI({
        "url": "wifi_client_access_points",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_client_access_points != null  && data.wifi_client_access_points.wifi_ap_client_access_point != null ) {
                if (Object.prototype.toString.call(data.wifi_client_access_points.wifi_ap_client_access_point) != "[object Array]") {
                    data.wifi_client_access_points.wifi_ap_client_access_point = $.makeArray(data.wifi_client_access_points.wifi_ap_client_access_point);
                }
                $.each(data.wifi_client_access_points.wifi_ap_client_access_point, function(index, value) {
                    if (value.ssid != "") {
                        var newItem = $("#wifi_ap_container .wifi_ap_list_item.default").clone();
                        var ssidName = value.ssid;
                        var ap_connected = false;
                        var newItemIdName = value.ssid;
                        var signal_strength = parseInt(value.signal_strength);
                        if (value.connected.toLowerCase() == "true") {
                            ap_connected = true;
                            newItem.find(".wireless_label_text").addClass("ap_connected");
                            newItem.find(".wifi_ap_list_item_icon").addClass("icon_ap_connected");
                            newItem.addClass("connected");
                        }
                        if ((value.wps_enabled != null ) && (value.wps_enabled.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_wps");
                        }
                        if ((value.remembered != null ) && (value.remembered.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_remembered");
                            if ((value.trusted != null ) && (value.trusted.toLowerCase() == "true")) {
                                newItem.find(".wireless_info").addClass("ap_trusted");
                            }
                        }
                        if (value.dhcp_enabled.toLowerCase() == "false") {
                            newItem.find(".wireless_info").addClass("dhcp_disabled");
                        }
                        if (value.mac_clone_enable.toLowerCase() == "true") {
                            newItem.find(".wireless_info").addClass("mac_cloned");
                        }
                        if (value.dns0 == "--dns1") {
                            value.dns0 = "";
                        }
                        if (value.dns1 == "--dns2") {
                            value.dns1 = "";
                        }
                        if (value.dns2 == "--dns3") {
                            value.dns2 = "";
                        }
                        newItem.find(".wireless_client_ip").text(value.ip);
                        newItem.find(".wireless_client_netmask").text(value.netmask);
                        newItem.find(".wireless_client_gateway").text(value.gateway);
                        newItem.find(".wireless_client_dns0").text(value.dns0);
                        newItem.find(".wireless_client_dns1").text(value.dns1);
                        newItem.find(".wireless_client_dns2").text(value.dns2);
                        newItem.find(".wireless_label_text").text(ssidName);
                        newItem.removeClass("default");
                        newItem.find(".wireless_ap_ssid").text(value.ssid);
                        newItem.find(".wireless_ap_mac").text(value.mac);
                        newItem.find(".wireless_ap_security_mode").text(value.security_mode);
                        if ((value.secured != null ) && (value.secured.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_secured");
                        } else {
                            newItem.find(".wireless_lock").addClass("wireless_unlock").removeClass("wireless_lock");
                        }
                        if (signal_strength > 90) {
                            newItem.find(".wireless_strength").addClass("wireless_strength_5bars");
                        } else {
                            if (signal_strength > 70) {
                                newItem.find(".wireless_strength").addClass("wireless_strength_4bars");
                            } else {
                                if (signal_strength > 50) {
                                    newItem.find(".wireless_strength").addClass("wireless_strength_3bars");
                                } else {
                                    if (signal_strength > 30) {
                                        newItem.find(".wireless_strength").addClass("wireless_strength_2bars");
                                    } else {
                                        if (signal_strength > 10) {
                                            newItem.find(".wireless_strength").addClass("wireless_strength_1bars");
                                        } else {
                                            if (signal_strength > 0) {
                                                newItem.find(".wireless_strength").addClass("wireless_strength_0bars");
                                            } else {
                                                return;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (ap_connected) {
                            newItemIdName = "connected_" + newItemIdName;
                        } else {
                            newItemIdName = "new_" + newItemIdName;
                        }
                        newItemIdName = newItemIdName.replace(/[.]/g, "_").replace(/\s/g, "_");
                        newItem.attr("id", newItemIdName);
                        if (wifi_ap_list[value.mac] != null ) {
                            $("#wifi_ap_list_content ul li").each(function(i) {
                                if ($(this).find(".wireless_ap_mac").text() == value.mac) {
                                    $(this).remove();
                                    delete wifi_ap_list[value.mac];
                                    return;
                                }
                            });
                        }
                        $("#wifi_ap_list").append(newItem);
                        wifi_ap_found_count++;
                    }
                });
                for (var mac in wifi_ap_list) {
                    if (wifi_ap_list[mac] != null ) {
                        $("#wifi_ap_list_content ul li").each(function(i) {
                            if ($(this).find(".wireless_ap_mac").text() == mac) {
                                $(this).remove();
                                delete wifi_ap_list[mac];
                                wifi_ap_found_count--;
                                return;
                            }
                        });
                    }
                }
                $("#wifi_ap_list_content ul li").tsort({
                    attr: "id",
                    order: "asc"
                });
            }
        },
        "error": function(request, status, error) {},
        "complete": function(jqXHR, textStatus) {
            if (empty_flag && !$("#wifi_ap_list #other_network").length) {
                wifi_ap_found_count++;
                var newItem = $("#wifi_ap_container .wifi_ap_list_item.default").clone();
                newItem.find(".wireless_label_text").text(dictionaryList["other_network"]);
                newItem.find(".wireless_ap_mac").text("");
                newItem.find(".wireless_ap_security_mode").text("");
                newItem.removeClass("default");
                newItem.attr("id", "other_network");
                newItem.find(".wireless_lock").addClass("wireless_unlock").removeClass("wireless_lock");
                $("#wifi_ap_list").append(newItem);
            }
            $("#wifi_ap_container .wifi_ap_list_item").each(function(i) {
                if (i == 0) {
                    return;
                }
                if (i % 2 === 0) {
                    $(this).addClass("alt_row_bg");
                } else {
                    $(this).removeClass("alt_row_bg");
                }
            });
            if (wifi_ap_found_count > 4) {
                $("#wifi_ap_list_content").addClass("wifi_ap_content_scroll_width");
            } else {
                $("#wifi_ap_list_content").removeClass("wifi_ap_content_scroll_width");
            }
            wifi_client_access_points_inprogress = false;
            $("#wifi_ap_container .wifi_list_please_wait").hide();
            $("#wifi_ap_list_content").scrollTop(0);
        }
    });
}
function checkCurrentWifiClientConnection() {
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
        	frequency_channel = 0
            gConnectedNetwork = false;
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
                gWANSSIDName = data.current_wifi_client_connection.ssid;
                gConnectedNetwork = true;
                if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                    gTrustedNetwork = true;
                } else {
                    gTrustedNetwork = false;
                }
                enableIdTag(".network_separator2");
                if (data.current_wifi_client_connection.Frequency != null) {
                    frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
                }
            }
            updateWifiClientConnection(false);
        },
        "error": function(request, status, error) {}
    });
}
function updateWifiClientConnection(firstTime) {
    resetNetworkPage();
    if (!gConnectedNetwork) {
        updateAvatarDevice_with_SSID(false);
    } else {
        if (firstTime) {
            setTimeout("getNetworkSettings();", 1000);
        } else {
            getNetworkSettings();
        }
    }
    if (gWiFiEnabled) {
        updateWifiClientAccessPointList();
    }
}
function resetNetworkPage() {
    $(".network_mode").hide();
    $(".wifi_buttons").hide();
    if (!gConnectedNetwork) {
        $(".mode_direct_connection").show();
        $(".wifi_access_point_setting_up_buttons").show();
        $(".wifi_access_point_profile_list_buttons").show();
    } else {
        $(".wifi_access_point_setting_up_buttons").show();
        $(".wifi_access_point_profile_list_buttons").show();
        $("#selected_wireless_network_image").removeClass("home_network_image");
        if (gTrustedNetwork) {
            if (gConnectedDevices) {
                $(".mode_trusted_network").show();
                $("#selected_wireless_network_image").addClass("home_network_image");
                if (gFoundMe) {
                    updateAvatarDevice_with_SSID(false);
                } else {
                    updateAvatarDevice_with_DeviceName();
                }
            } else {
                $(".mode_trusted_network").show();
                updateAvatarDevice_with_DeviceName();
                $("#selected_wireless_network_image").addClass("home_network_image");
            }
        } else {
            updateAvatarDevice_with_SSID(false);
            $(".mode_network_hotspot").show();
        }
    }
}
function doReconnectWirelessNetwork() {
    var msg;
    var advanced_settings_changed = false;
    var new_dhcp_setting = $("#wifi_edit_config_form_enable_dhcp_value").val();
    var old_dhcp_setting = $("#wifi_edit_config_form_original_enable_dhcp").val();
    var new_broadcast_setting = $("#wifi_edit_config_form_broadcast_value").val();
    var old_broadcast_setting = $("#wifi_edit_config_form_original_broadcast").text();
    var new_ip_setting = $("#wifi_edit_config_form_ipaddress").val();
    var old_ip_setting = $("#wifi_edit_config_form_original_ipaddress").val();
    var new_security_setting = $("#wifi_edit_config_form_security_mode_select option:selected").val();
    var old_security_setting = $("#wifi_edit_config_form_original_security").text();
    $("#reconnect_wireless_network_msg_container").hide();
    $("#reconnect_wireless_network_ipaddress_msg").hide();
    $("#reconnect_wireless_network_dhcp_msg").hide();
    $("#reconnect_wireless_network_ssid_broadcast_msg").hide();
    $("#reconnect_wireless_network_security_msg").hide();
    if (new_security_setting != old_security_setting) {
        advanced_settings_changed = true;
        if (new_security_setting == "NONE") {
            msg = dictionaryList["ap_security_off"];
        } else {
            msg = dictionaryList["ap_security_on"];
        }
        $("#reconnect_wireless_network_security_msg").text(msg);
        $("#reconnect_wireless_network_security_msg").show();
    } else {
        if (new_security_setting != "NONE") {
            advanced_settings_changed = true;
            msg = dictionaryList["ap_security_password_changed"];
            $("#reconnect_wireless_network_security_msg").text(msg);
            $("#reconnect_wireless_network_security_msg").show();
        }
    }
    if (new_dhcp_setting != old_dhcp_setting) {
        advanced_settings_changed = true;
        if (new_dhcp_setting == "true") {
            msg = dictionaryList["ap_dhcp_on_msg"];
        } else {
            msg = dictionaryList["ap_dhcp_off_msg"];
        }
        $("#reconnect_wireless_network_dhcp_msg").text(msg);
        $("#reconnect_wireless_network_dhcp_msg").show();
    }
    if (new_broadcast_setting != old_broadcast_setting) {
        if (new_broadcast_setting == "false") {
            advanced_settings_changed = true;
            msg = dictionaryList["ap_ssid_broadcast_off_msg"].replace("{0}", "<b><i>" + gSSIDName + "</i></b>");
            $("#reconnect_wireless_network_ssid_broadcast_msg").text(msg);
            $("#reconnect_wireless_network_ssid_broadcast_msg").show();
        }
    }
    if (new_ip_setting != old_ip_setting) {
        advanced_settings_changed = true;
        msg = dictionaryList["ap_ipaddress_changed_msg"].replace("{0}", "<b>" + $("#wifi_edit_config_form_ipaddress").val() + "</b>");
        $("#reconnect_wireless_network_ipaddress_msg").html(msg);
        $("#reconnect_wireless_network_ipaddress_msg").show();
    }
    if (advanced_settings_changed) {
        $("#reconnect_wireless_network_msg_container").show();
    }
    reconnectWirelessStartTimeStamp = new Date().getTime();
	$.ajaxAPI({
		"url": "current_wifi_client_connection",
		"timeout": ajaxTimeout,
		"success": function(data, textStatus, jqXHR) {
			frequency_channel = 0
			if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
				gWANSSIDName = data.current_wifi_client_connection.ssid;
				
				if (data.current_wifi_client_connection.Frequency != null) {
					frequency_channel = parseInt(data.current_wifi_client_connection.Frequency);
				}
			}
			else {
				gWANSSIDName = "";
			}
		},
		"error": function(request, status, error) {},
		"complete": function(jqXHR, textStatus) {
			$("#reconnect_network_dialog").dialog("open");
    		setTimeout("reconnectWirelessNetwork();", startReconnectWirelessDelay);
		}
	});
	
}
function reconnectWirelessNetwork() {
    if (reconnectWirelessInProgress) {
        return;
    }
    reconnectWirelessInProgress = true;
    $("#reconnect_network_form").submit();
}
function showReconnectWirelessTimeout() {
    $("#reconnect_network_dialog").dialog("close");
    $("#reconnect_network_timeout_dialog").dialog("open");
}
function updateAvatarDevice_with_DeviceName() {
    if (gDeviceName == "") {
        setTimeout("updateAvatarDevice_with_DeviceName();", 1500);
    } else {
        doUpdateAvatarDevice_with_DeviceName(gDeviceName);
    }
}
function doUpdateAvatarDevice_with_DeviceName(DeviceName) {
    $("#wifi_access_point_name").text(DeviceName);
    $("#wifi_access_point_tooltip").show();
    $("#wifi_connected_tooltip").hide();
    $("#avatar_icon_tooltip").show();
    $("#wifi_access_point_ssid_lock").hide();
    $("#wifi_access_point_ssid_lock_2").hide();
    $("#wifi_avatar_access_point_name_container").show();
    $("#wifi_access_point_edit").hide();
    $("#wifi_network_settings_edit").show();
    $("#wifi_access_point_edit_container").show();
}
function updateAvatarDevice_with_SSID(showTooltip) {
    if (gSSIDName == "") {
        $.ajaxAPI({
            "url": "wifi_aps",
            "timeout": ajaxTimeout,
            "success": function(data, textStatus, jqXHR) {
                gSSIDNameHighBand = "";
                if (data != null  && data.wifi_aps != null  && data.wifi_aps.wifi_ap != null ) {
                    for (var i in data.wifi_aps.wifi_ap) {
                        if (data.wifi_aps.wifi_ap[i].ism_band == "2.4") {
                            isWifiOn = data.wifi_aps.wifi_ap[i].enabled;
                            gSSIDName = data.wifi_aps.wifi_ap[i].ssid;
                            if (data.wifi_aps.wifi_ap[i].is_secured.toLowerCase() == "true") {
                                gSSIDSecured = true;
                            } else {
                                gSSIDSecured = false;
                            }
                            if (data.wifi_aps.wifi_ap[i].broadcast.toLowerCase() == "true") {
                                gSSIDNotBroadcasting = false;
                            } else {
                                gSSIDNotBroadcasting = true;
                            }
                        } else {
                            if (data.wifi_aps.wifi_ap[i].ism_band == "5") {
                                isWifiOn_5g = data.wifi_aps.wifi_ap[i].enabled;
                                gSSIDNameHighBand = data.wifi_aps.wifi_ap[i].ssid;
                                if (data.wifi_aps.wifi_ap[i].is_secured.toLowerCase() == "true") {
                                    gSSIDSecured_5g = true;
                                } else {
                                    gSSIDSecured_5g = false;
                                }
                            }
                        }
                    }
                }
            },
            "error": function(request, status, error) {},
            "complete": function(jqXHR, textStatus) {
                $(".wifi_avatar_ssid_name").text(gSSIDName);
                $(".wifi_avatar_ssid_name_5g").text(gSSIDNameHighBand);
                $("#tooltip2_4").show();
                $("#tooltip_5").show();
                if ((isWifiOn_5g == "true") && (isWifiOn == "false")) {
                    $("#tooltip2_4").hide();
                    gSSIDName = "";
                    doUpdateAvatarDevice_with_SSID(gSSIDNameHighBand, gSSIDName, gSSIDSecured, gSSIDSecured_5g, showTooltip);
                } else {
                    if ((isWifiOn == "true") && (isWifiOn_5g == "false")) {
                        $("#tooltip_5").hide();
                        gSSIDNameHighBand = "";
                        doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, showTooltip);
                    } else {
                        doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, showTooltip);
                    }
                }
            }
        });
    } else {
        $(".wifi_avatar_ssid_name").text(gSSIDName);
        $(".wifi_avatar_ssid_name_5g").text(gSSIDNameHighBand);
        $("#tooltip2_4").show();
        $("#tooltip_5").show();
        if ((isWifiOn_5g == "true") && (isWifiOn == "false")) {
            $("#tooltip2_4").hide();
            gSSIDName = "";
            doUpdateAvatarDevice_with_SSID(gSSIDNameHighBand, gSSIDName, gSSIDSecured, gSSIDSecured_5g, showTooltip);
        } else {
            if ((isWifiOn == "true") && (isWifiOn_5g == "false")) {
                $("#tooltip_5").hide();
                gSSIDNameHighBand = "";
                doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, showTooltip);
            } else {
                doUpdateAvatarDevice_with_SSID(gSSIDName, gSSIDNameHighBand, gSSIDSecured, gSSIDSecured_5g, showTooltip);
            }
        }
    }
}
function doUpdateAvatarDevice_with_SSID(SSIDName, SSIDName_2, SSIDSecured, SSIDSecured2, showTooltip) {
    $("#wifi_access_point_name").text(SSIDName);
    $("#wifi_access_point_name_2").text(SSIDName_2);
    if (showTooltip) {
        $("#wifi_access_point_tooltip").show();
        $("#wifi_connected_tooltip").hide();
    } else {
        $("#wifi_access_point_tooltip").hide();
        $("#wifi_connected_tooltip").show();
    }
    $("#avatar_icon_tooltip").show();
    if (SSIDSecured && SSIDName) {
        $("#wifi_access_point_ssid_lock").show();
    } else {
        $("#wifi_access_point_ssid_lock").hide();
    }
    if (SSIDSecured2 && SSIDName_2) {
        $("#wifi_access_point_ssid_lock_2").show();
    } else {
        $("#wifi_access_point_ssid_lock_2").hide();
    }
    $("#wifi_avatar_access_point_name_container").show();
    $("#wifi_access_point_edit").show();
    $("#wifi_network_settings_edit").hide();
    $("#wifi_access_point_edit_container").show();
}
function getNetworkSettings() {
    var ipaddress;
    $.ajaxAPI({
        "url": "network_configuration",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.network_configuration != null  && data.network_configuration.ip != null ) {
                ipaddress = data.network_configuration.ip;
                $(".selected_wireless_network_gateway").text(data.network_configuration.gateway);
                $(".wifi_avatar_device_name").text(gDeviceName);
                $(".wifi_avatar_device_ip_address").text(data.network_configuration.ip);
                $(".wifi_avatar_device_netmask").text(data.network_configuration.netmask);
                $(".wifi_avatar_device_gateway").text(data.network_configuration.gateway);
                $(".wifi_avatar_device_dns").text(data.network_configuration.dns0);
                if (data.network_configuration.proto == "static") {
                    populateWifiSettingValues(data.network_configuration);
                    dhcp_disabled = false;
                } else {
                    $(".wifi_network_settings_dhcp_ip_address").text(data.network_configuration.ip);
                }
            }
        },
        "error": function(request, status, error) {},
        "complete": function(jqXHR, textStatus) {
            if (ipaddress == "") {
                setTimeout("getNetworkSettings();", 5000);
            } else {
                checkInternetConnectivityCount = 0;
                getInternetConnectivity();
            }
        }
    });
}
function changeNetworkSettings() {
    displayLoading();
    $.ajaxAPI({
        "url": "system_state",
        "timeout": ajaxTimeoutNetwork,
        "error": function(request, status, error) {
            showError("edit_network_lan_configuration_form_internal_error");
        },
        "success": function(data) {
            if ($("#wifi_edit_settings_network_mode_dhcp_button").hasClass("button-selected")) {
                changeNetworkSettingsToDHCP();
            } else {
                changeNetworkSettingsToStatic();
            }
        },
        "complete": function(jqXHR, textStatus) {}
    });
}
function changeNetworkSettingsToDHCP() {
    var gateway_mac_address = $("#wifi_network_settings_gateway_mac_address").val();
    $.ajaxAPI({
        "url": "network_configuration",
        "type": "PUT",
        "data": {
            "proto": "dhcp_client",
            "gateway_mac_address": gateway_mac_address
        },
        "timeout": ajaxTimeoutNetwork,
        "success": function(data, textStatus, jqXHR) {
            hideLoading();
            updateWifiClientAccessPointList();
            $("#wifi_static_change_confirmation_overlay").dialog("open");
        },
        "error": function(request, status, error) {
            if (error == "timeout") {
                var hostname = $("#wifi_edit_network_settings_device_name").text();
                stopPolling();
                window.location = "http://" + hostname;
            } else {
                processAndDisplayError(request.responseText, "put_network_configuration", request.status);
                hideLoading();
            }
        }
    });
}
function changeNetworkSettingsToStatic() {
    var workname = $("#SettingWorkgroupName").val();
    $.ajaxAPI({
        "url": "network_workgroup",
        "type": "PUT",
        "data": {
            "workname": workname
        },
        "timeout": ajaxTimeoutNetwork,
        "complete": function(jqXHR, textStatus) {
            updateStaticNetworkSettings();
            $("#wifi_static_change_confirmation_overlay").dialog("open");
        }
    });
}
function updateStaticNetworkSettings() {
    var ip = $("#SettingIp").val();
    var netmask = $("#SettingNetmask").val();
    var gateway = $("#SettingGateway").val();
    var dns0 = $("#SettingDns0").val();
    var dns1 = $("#SettingDns1").val();
    var dns2 = $("#SettingDns2").val();
    var gateway_mac_address = $("#wifi_network_settings_gateway_mac_address").val();
    $.ajaxAPI({
        "url": "network_configuration",
        "type": "PUT",
        "data": {
            "proto": "static",
            "ip": ip,
            "netmask": netmask,
            "gateway": gateway,
            "dns0": dns0,
            "dns1": dns1,
            "dns2": dns2,
            "gateway_mac_address": gateway_mac_address
        },
        "timeout": ajaxTimeoutNetwork,
        "success": function(data, textStatus, jqXHR) {
            if (ip != gIPAddress) {
                stopPolling();
                window.location = "http://" + ip;
            } else {
                hideLoading();
                updateWifiClientAccessPointList();
            }
        },
        "error": function(request, status, error) {
            if (error == "timeout") {
                stopPolling();
                window.location = "http://" + ip;
            } else {
                processAndDisplayError(request.responseText, "put_network_configuration", request.status);
                hideLoading();
            }
        }
    });
}
function verifyCurrentWifiClientConnection() {
    signInWifiStartTimeStamp = new Date().getTime();
    var dialogTitle = dictionaryList["connecting_to_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid").val());
    } else {
        var ssidName = $("#wifi_signin_form_ssid").text();
        if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
            dialogTitle = dictionaryList["modifying_wifi_network_title"];
        }
        dialogTitle = dialogTitle.replace("{0}", ssidName);
    }
    $("#verify_wifi_signin_overlay_title").text(dialogTitle);
    $("#verify_wifi_signin_overlay").dialog("open");
    setTimeout("doVerifyCurrentWifiClientConnection();", signInWifiDelay);
}
function verifyCurrentWifiClientConnection_onboarding() {
    signInWifiStartTimeStamp = new Date().getTime();
    var dialogTitle = dictionaryList["connecting_to_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid_h").val());
    } else {
        var ssidName = $("#wifi_signin_form_ssid_h").text();
        if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
            dialogTitle = dictionaryList["modifying_wifi_network_title"];
        }
        dialogTitle = dialogTitle.replace("{0}", ssidName);
    }
    $("#verify_wifi_signin_overlay_title_h").text(dialogTitle);
    //$("#verify_wifi_signin_overlay_h").dialog("open");
    verify_wifi_signin_overlay_h_show();
    setTimeout("doVerifyCurrentWifiClientConnection_onboarding();", signInWifiDelay);
}

function doVerifyCurrentWifiClientConnection() {
    if (signInWifiInProgress) {
        return;
    }
    signInWifiInProgress = true;
    var router_ssid = $("#wifi_signin_form_ssid").text();
    var mac_address = $("#wifi_signin_form_mac_address").val();
    var new_trusted = ($("#wifi_signin_form_trusted").val());
    if (modifyCurrentNetwork) {
        router_ssid = gWANSSIDName;
        new_trusted = ($("#wifi_modify_form_trusted").val());
        mac_address = $("#wifi_modify_form_mac_address").val();
    } else {
        if (signInToOtherNetwork) {
            router_ssid = $("#wifi_signin_to_other_network_form_ssid").val();
            new_trusted = ($("#wifi_signin_to_other_network_form_trusted").val());
            mac_address = "";
        }
    }
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeoutFast,
        "success": function(data, textStatus, jqXHR) {
        	frequency_channel = 0
            gConnectedNetwork = false;
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.connected != null ) {
                if (data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {

                    if (data.current_wifi_client_connection.Frequency != null) {
				                   frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
				            }
                    if ((router_ssid == data.current_wifi_client_connection.ssid) && (new_trusted == data.current_wifi_client_connection.trusted) && ((signInToOtherNetwork) || (mac_address == data.current_wifi_client_connection.mac))) {
                        gWANSSIDName = data.current_wifi_client_connection.ssid;
                        gConnectedNetwork = true;
                        if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                            gTrustedNetwork = true;
                        } else {
                            gTrustedNetwork = false;
                        }
                        signinCompletfromDirectConnect(router_ssid);
                        return;
                    }
                } else {
                    if (data.current_wifi_client_connection.code != null  && data.current_wifi_client_connection.code != "") {
                        var code = data.current_wifi_client_connection.code;
                        if (code != 5) {
                            $("#verify_wifi_signin_overlay").dialog("close");
                            if (code == 10 && wifi_signin_with_wps_pin) {
                                showError("current_wifi_client_connection_" + code + "_wps_pin");
                            }else{
                              if(code == 10){
                                $(".wifi_ap_list_item.selected").find(".wireless_info").removeClass("ap_remembered");
                              }
                              showError("current_wifi_client_connection_" + code);
                            }
                            wifiApListAutoClickFlag = false;
                            $(".wifi_ap_list_item.selected").click();
                            wifiApListAutoClickFlag = true;
                            $(".wifi_ap_list_item").removeClass("selected");
                            return;
                        }
                    }
                }
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnection();", signInWifiDelay);
        },
        "error": function(request, status, error) {
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnection();", signInWifiDelay);
        },
        "complete": function(jqXHR, textStatus) {
            signInWifiInProgress = false;
        }
    });
}
function doVerifyCurrentWifiClientConnection_onboarding() {
    if (signInWifiInProgress) {
        return;
    }
    signInWifiInProgress = true;
    var router_ssid = $("#wifi_signin_form_ssid_h").text();
    var mac_address = $("#wifi_signin_form_mac_address_h").val();
    var new_trusted = ($("#wifi_signin_form_trusted_h").val());
    if (modifyCurrentNetwork) {
        router_ssid = gWANSSIDName;
        new_trusted = ($("#wifi_modify_form_trusted_h").val());
        mac_address = $("#wifi_modify_form_mac_address_h").val();
    } else {
        if (signInToOtherNetwork) {
            router_ssid = $("#wifi_signin_to_other_network_form_ssid_h").val();
            new_trusted = ($("#wifi_signin_to_other_network_form_trusted_h").val());
            mac_address = "";
        }
    }
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeoutFast,
        "success": function(data, textStatus, jqXHR) {
            gConnectedNetwork = false;
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.connected != null ) {
                if (data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
                    if ((router_ssid == data.current_wifi_client_connection.ssid) && (new_trusted == data.current_wifi_client_connection.trusted) && ((signInToOtherNetwork) || (mac_address == data.current_wifi_client_connection.mac))) {
                        gWANSSIDName = data.current_wifi_client_connection.ssid;
                        gConnectedNetwork = true;
                        if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                            gTrustedNetwork = true;
                        } else {
                            gTrustedNetwork = false;
                        }
                        $("#connect_home_network_container").hide();
                        wifi_signin_success_overlay_h_show(router_ssid);
                        //signinCompletfromDirectConnect_onboarding(router_ssid);
                        return;
                    }
                } else {
                    if (data.current_wifi_client_connection.code != null  && data.current_wifi_client_connection.code != "") {
                        var code = data.current_wifi_client_connection.code;
                        if (code != 5) {
                            //$("#verify_wifi_signin_overlay_h").dialog("close");
                            $("#connect_home_network_container").show();
                            verify_wifi_signin_overlay_h_hide()
                            if (code == 10 && wifi_signin_with_wps_pin) {
                                showError("current_wifi_client_connection_" + code + "_wps_pin");
                            } else {
                                showError("current_wifi_client_connection_" + code);
                            }
                            wifiApListAutoClickFlag = false;
                            $(".wifi_ap_list_item_h.selected").click();
                            wifiApListAutoClickFlag = true;
                            $(".wifi_ap_list_item_h").removeClass("selected");
                            return;
                        }
                    }
                }
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
              showVerifyCurrentWifiClientConnectionTimeout_onboarding();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnection_onboarding();", signInWifiDelay);
        },
        "error": function(request, status, error) {
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout_onboarding();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnection_onboarding();", signInWifiDelay);
        },
        "complete": function(jqXHR, textStatus) {
            signInWifiInProgress = false;
        }
    });
}


function verifyCurrentWifiClientConnectionFromHomeRouter() {
    signInWifiStartTimeStamp = new Date().getTime();
    var dialogTitle = dictionaryList["connecting_to_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid").val());
    } else {
        var ssidName = $("#wifi_signin_form_ssid").text();
        if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
            dialogTitle = dictionaryList["modifying_wifi_network_title"];
        }
        dialogTitle = dialogTitle.replace("{0}", ssidName);
    }
    $("#verify_wifi_signin_overlay_title").text(dialogTitle);
    $("#verify_wifi_signin_overlay").dialog("open");
    setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter();", signInWifiDelay);
}
function verifyCurrentWifiClientConnectionFromHomeRouter_onboarding() {
    signInWifiStartTimeStamp = new Date().getTime();
    var dialogTitle = dictionaryList["connecting_to_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid_h").val());
    } else {
        var ssidName = $("#wifi_signin_form_ssid_h").text();
        if ((connectToNewNetwork) && (ssidName == gWANSSIDName)) {
            dialogTitle = dictionaryList["modifying_wifi_network_title"];
        }
        dialogTitle = dialogTitle.replace("{0}", ssidName);
    }
    $("#verify_wifi_signin_overlay_title_h").text(dialogTitle);
    //$("#verify_wifi_signin_overlay_h").dialog("open");
    verify_wifi_signin_overlay_h_show()
    setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter_onboarding();", signInWifiDelay);
}
function doVerifyCurrentWifiClientConnectionFromHomeRouter() {
    if (signInWifiInProgress) {
        return;
    }
    signInWifiInProgress = true;
    var router_ssid = $("#wifi_signin_form_ssid").text();
    var mac_address = $("#wifi_signin_form_mac_address").val();
    var new_trusted = ($("#wifi_signin_form_trusted").val());
    if (modifyCurrentNetwork) {
        router_ssid = gWANSSIDName;
        new_trusted = ($("#wifi_modify_form_trusted").val());
        mac_address = $("#wifi_modify_form_mac_address").val();
    } else {
        if (signInToOtherNetwork) {
            router_ssid = $("#wifi_signin_to_other_network_form_ssid").val();
            new_trusted = ($("#wifi_signin_to_other_network_form_trusted").val());
            mac_address = "";
        }
    }
    gConnectedNetwork = false;
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeoutFast,
        "success": function(data, textStatus, jqXHR) {
        		frequency_channel = 0
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.connected != null ) {
                if (data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
                    if ((router_ssid == data.current_wifi_client_connection.ssid) && (mac_address == data.current_wifi_client_connection.mac) && (new_trusted == data.current_wifi_client_connection.trusted)) {
                        gConnectedNetwork = true;
                        gWANSSIDName = data.current_wifi_client_connection.ssid;
                        if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                            gTrustedNetwork = true;
                        } else {
                            gTrustedNetwork = false;
                        }
                    }
                    if (data.current_wifi_client_connection.Frequency != null) {
				    	frequency_channel = parseInt(data.current_wifi_client_connection.Frequency);
				    }
                   
                } else {
                    if (data.current_wifi_client_connection.code != null  && data.current_wifi_client_connection.code != "") {
                        var code = data.current_wifi_client_connection.code;
                        if (code != 5) {
                            $("#verify_wifi_signin_overlay").dialog("close");
                            if (code == 10 && wifi_signin_with_wps_pin) {
                                showError("current_wifi_client_connection_" + code + "_wps_pin");
                            } else {
                                showError("current_wifi_client_connection_" + code);
                            }
                            wifiApListAutoClickFlag = false;
                            $(".wifi_ap_list_item.selected").click();
                            wifiApListAutoClickFlag = true;
                            $(".wifi_ap_list_item").removeClass("selected");
                            return;
                        }
                    }
                }
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter();", signInWifiDelay);
        },
        "error": function(request, status, error) {
            if (!gFoundMe) {
                $("#verify_wifi_signin_overlay").dialog("close");
                if (new_trusted == "true") {
                    processSignInTrustedCompletefromHomeRouter(router_ssid, gDeviceName);
                } else {
                    processSignInUnTrustedCompletefromHomeRouter(router_ssid, gDeviceName, gSSIDName);
                }
                return;
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter();", signInWifiDelay);
        },
        "complete": function(jqXHR, textStatus) {
            signInWifiInProgress = false;
        }
    });
}
function doVerifyCurrentWifiClientConnectionFromHomeRouter_onboarding() {
    if (signInWifiInProgress) {
        return;
    }
    signInWifiInProgress = true;
    var router_ssid = $("#wifi_signin_form_ssid_h").text();
    var mac_address = $("#wifi_signin_form_mac_address_h").val();
    var new_trusted = ($("#wifi_signin_form_trusted_h").val());
    if (modifyCurrentNetwork) {
        router_ssid = gWANSSIDName;
        new_trusted = ($("#wifi_modify_form_trusted_h").val());
        mac_address = $("#wifi_modify_form_mac_address_h").val();
    } else {
        if (signInToOtherNetwork) {
            router_ssid = $("#wifi_signin_to_other_network_form_ssid_h").val();
            new_trusted = ($("#wifi_signin_to_other_network_form_trusted_h").val());
            mac_address = "";
        }
    }
    gConnectedNetwork = false;
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeoutFast,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.connected != null ) {
                if (data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
                    if ((router_ssid == data.current_wifi_client_connection.ssid) && (mac_address == data.current_wifi_client_connection.mac) && (new_trusted == data.current_wifi_client_connection.trusted)) {
                        gConnectedNetwork = true;
                        gWANSSIDName = data.current_wifi_client_connection.ssid;
                        if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                            gTrustedNetwork = true;
                        } else {
                            gTrustedNetwork = false;
                        }
                    }
                } else {
                    if (data.current_wifi_client_connection.code != null  && data.current_wifi_client_connection.code != "") {
                        var code = data.current_wifi_client_connection.code;
                        if (code != 5) {
                            //$("#verify_wifi_signin_overlay_h").dialog("close");
                            verify_wifi_signin_overlay_h_hide();
                            $("#connect_home_network_container").show();
                            if (code == 10 && wifi_signin_with_wps_pin) {
                                showError("current_wifi_client_connection_" + code + "_wps_pin");
                            } else {
                                showError("current_wifi_client_connection_" + code);
                            }
                            wifiApListAutoClickFlag = false;
                            $(".wifi_ap_list_item_h.selected").click();
                            wifiApListAutoClickFlag = true;
                            $(".wifi_ap_list_item_h").removeClass("selected");
                            return;
                        }
                    }
                }
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
             
                showVerifyCurrentWifiClientConnectionTimeout_onboarding();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter_onboarding();", signInWifiDelay);
        },
        "error": function(request, status, error) {
            if (!gFoundMe) {
                //$("#verify_wifi_signin_overlay_h").dialog("close");
                verify_wifi_signin_overlay_h_hide();
                $("#connect_home_network_container").show();  
                if (new_trusted == "true") {
                    processSignInTrustedCompletefromHomeRouter_onboarding(router_ssid, gDeviceName);
                } else {
                    processSignInUnTrustedCompletefromHomeRouter_onboarding(router_ssid, gDeviceName, gSSIDName);
                }
                return;
            }
            var signInWifiCurrentTimeStamp = new Date().getTime();
            if ((signInWifiCurrentTimeStamp - signInWifiStartTimeStamp) > signInWifiTimeOutMax) {
                showVerifyCurrentWifiClientConnectionTimeout_onboarding();
                return;
            }
            setTimeout("doVerifyCurrentWifiClientConnectionFromHomeRouter_onboarding();", signInWifiDelay);
        },
        "complete": function(jqXHR, textStatus) {
            signInWifiInProgress = false;
        }
    });
}
function signinCompletfromDirectConnect(router_ssid) {
    $(".wifi_ap_list_item").removeClass("selected");
    $("#verify_wifi_signin_overlay").dialog("close");
    enableIdTag(".network_separator2");
    removeOldWiFiConnectedInfo();
    var connected_wifi_mac = $("#wifi_signin_form_mac_address").val();
    $("#wifi_ap_list_content ul li").each(function(i) {
        if ($(this).find(".wireless_ap_mac").text() == connected_wifi_mac) {
        		//console.log(connected_wifi_mac+";"+ $(this).find(".wireless_ap_mac").text());
            //$(this).addClass("connected").find(".wifi_ap_list_item_icon").addClass("icon_ap_connected");
            return;
        }
    });
    updateWifiClientConnection(true);
    updateWifiClientConnection_onboarding(true);
    //console.log("wifItem-36666");
    
    updateWifiClientAccessPointList();
    updateWifiClientAccessPointList_onboarding();//delete or not
}
function signinCompletfromDirectConnect_onboarding(router_ssid) {
    $(".wifi_ap_list_item_h").removeClass("selected");
    //$("#verify_wifi_signin_overlay_h").dialog("close");
    verify_wifi_signin_overlay_h_hide();
    $("#connect_home_network_container").show();  
    enableIdTag(".network_separator2");
    removeOldWiFiConnectedInfo();
    var connected_wifi_mac = $("#wifi_signin_form_mac_address_h").val();
    $("#wifi_ap_list_content ul li").each(function(i) {
        if ($(this).find(".wireless_ap_mac").text() == connected_wifi_mac) {
        		//console.log(connected_wifi_mac+";"+ $(this).find(".wireless_ap_mac").text());
            //$(this).addClass("connected").find(".wifi_ap_list_item_icon").addClass("icon_ap_connected");
            return;
        }
    });
    //updateWifiClientConnection(true);
    updateWifiClientConnection_onboarding(true);
    //console.log("wifItem-36666");
    
    //updateWifiClientAccessPointList();
    updateWifiClientAccessPointList_onboarding();
}
function processSignInTrustedCompletefromHomeRouter(router_ssid, devicename) {
    var deviceNameURL = getDeviceNameURL(devicename);
    var router_ssid_bold = "<b><i>" + router_ssid + "</i></b>";
    var msg = dictionaryList["home_mode_reconnect_intro"].replace("{0}", router_ssid_bold);
    $("#home_network_reconnect_intro").html(msg);
    msg = dictionaryList["home_network_reconnect_tip_1"].replace("{0}", router_ssid_bold);
    $("#home_network_reconnect_tip_1").html(msg);
    msg = dictionaryList["home_network_reconnect_tip_2"].replace("{0}", router_ssid_bold);
    msg = msg.replace("{1}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#home_network_reconnect_tip_2").html(msg);
    $("#signin_complete_message_to_home_mode").show();
    $("#signin_complete_message_to_hotspot").hide();
    resetNetworkConnectionDiagram("mode_trusted_network");
    $(".connection_text").text(router_ssid);
    $(".device_text").text(devicename);
    $("#wifi_signin_complete_message_overlay").dialog("open");
}
function processSignInTrustedCompletefromHomeRouter_onboarding(router_ssid, devicename) {
    var deviceNameURL = getDeviceNameURL(devicename);
    var router_ssid_bold = "<b><i>" + router_ssid + "</i></b>";
    var msg = dictionaryList["home_mode_reconnect_intro"].replace("{0}", router_ssid_bold);
    $("#home_network_reconnect_intro_h").html(msg);
    msg = dictionaryList["home_network_reconnect_tip_1"].replace("{0}", router_ssid_bold);
    $("#home_network_reconnect_tip_1_h").html(msg);
    msg = dictionaryList["home_network_reconnect_tip_2"].replace("{0}", router_ssid_bold);
    msg = msg.replace("{1}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#home_network_reconnect_tip_2_h").html(msg);
    $("#signin_complete_message_to_home_mode_h").show();
    $("#signin_complete_message_to_hotspot_h").hide();
    resetNetworkConnectionDiagram("mode_trusted_network");
    $(".connection_text").text(router_ssid);
    $(".device_text").text(devicename);
    $("#wifi_signin_complete_message_overlay_h").dialog("open");
}
function processSignInUnTrustedCompletefromHomeRouter(router_ssid, devicename, avatar_ssid) {
    var deviceNameURL = getDeviceNameURL(devicename);
    var router_ssid_bold = "<b><i>" + router_ssid + "</i></b>";
    var avatar_ssid_bold = "<b><i>" + avatar_ssid + "</i></b>";
    var msg = dictionaryList["hotspot_direct_connection_reconnect_tip_1"].replace("{0}", avatar_ssid_bold);
    $("#hotspot_connection_reconnect_tip_1").html(msg);
    msg = dictionaryList["hotspot_direct_connection_reconnect_tip_2"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#hotspot_connection_reconnect_tip_2").html(msg);
    $("#signin_complete_message_to_home_mode").hide();
    $("#signin_complete_message_to_hotspot").show();
    resetNetworkConnectionDiagram("mode_network_hotspot");
    $(".connection_text").text(avatar_ssid);
    $(".device_text").text(router_ssid);
    $("#wifi_signin_complete_message_overlay").dialog("open");
}
function processSignInUnTrustedCompletefromHomeRouter_onboarding(router_ssid, devicename, avatar_ssid) {
    var deviceNameURL = getDeviceNameURL(devicename);
    var router_ssid_bold = "<b><i>" + router_ssid + "</i></b>";
    var avatar_ssid_bold = "<b><i>" + avatar_ssid + "</i></b>";
    var msg = dictionaryList["hotspot_direct_connection_reconnect_tip_1"].replace("{0}", avatar_ssid_bold);
    $("#hotspot_connection_reconnect_tip_1_h").html(msg);
    msg = dictionaryList["hotspot_direct_connection_reconnect_tip_2"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#hotspot_connection_reconnect_tip_2_h").html(msg);
    $("#signin_complete_message_to_home_mode_h").hide();
    $("#signin_complete_message_to_hotspot_h").show();
    resetNetworkConnectionDiagram("mode_network_hotspot");
    $(".connection_text").text(avatar_ssid);
    $(".device_text").text(router_ssid);
    $("#wifi_signin_complete_message_overlay_h").dialog("open");
}
function showVerifyCurrentWifiClientConnectionTimeout() {
    var dialogTitle = dictionaryList["unable_to_connect_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid").val());
    } else {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_form_ssid").text());
    }
    $("#verify_wifi_signin_overlay_title").text(dialogTitle);
    $("#verify_wifi_signin_overlay").find(".verify_wifi_signin_status").hide();
    if (wifi_signin_with_wps_pin) {
        $("#verify_wifi_signin_overlay").find(".wps_failed").show();
    } else {
        $("#verify_wifi_signin_overlay").find(".password_failed").show();
    }
    $("#verify_wifi_signin_overlay").find(".dialog_form_controls").show();
}
function showVerifyCurrentWifiClientConnectionTimeout_onboarding() {
    var dialogTitle = dictionaryList["unable_to_connect_title"];
    if (signInToOtherNetwork) {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_to_other_network_form_ssid_h").val());
    } else {
        dialogTitle = dialogTitle.replace("{0}", $("#wifi_signin_form_ssid_h").text());
    }
    $("#verify_wifi_signin_overlay_title_h").text(dialogTitle);
    $("#verify_wifi_signin_overlay_h").find(".verify_wifi_signin_status").hide();
    if (wifi_signin_with_wps_pin) {
        $("#verify_wifi_signin_overlay_h").find(".wps_failed").show();
    } else {
        $("#verify_wifi_signin_overlay_h").find(".password_failed").show();
    }
    $("#verify_wifi_signin_overlay_h").find(".dialog_form_controls").show();
}
function getInternetConnectivity() {
    checkInternetConnectivityCount++;
    $.ajaxAPI({
        "url": "internet_access",
        "success": function(data) {
            if (data != null  && data.internet_access != null ) {
                if (data.internet_access.connectivity.toLowerCase() == "true") {
                    $("#no_internet_access").hide();
                    gInternetAccess = true;
                    getPlexNewVersion();
                } else {
                    gInternetAccess = false;
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            if (!gInternetAccess) {
                if (checkInternetConnectivityCount < maxCheckInternetConnectivityCount) {
                    setTimeout("getInternetConnectivity();", 2000);
                } else {
                    if (gConnectedNetwork) {
                        $("#no_internet_access").show();
                    }
                }
            }
        }
    });
}
function getSSIDName() {
    $.ajaxAPI({
        "url": "wifi_aps",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_aps != null  && data.wifi_aps.wifi_ap.ssid != null ) {
                gSSIDName = data.wifi_aps.wifi_ap.ssid;
            }
        },
        "error": function(request, status, error) {}
    });
}
function forgetThisCurrentConnection(mac_address) {
    displayLoading();
    $.ajaxAPI({
        "url": "current_wifi_client_connection" + "/" + mac_address,
        "type": "DELETE",
        "success": function(data, textStatus, jqXHR) {
        	frequency_channel = 0
            hideLoading();
            gTrustedNetwork = false;
            gConnectedNetwork = false;
            wifi_client_access_points_inprogress = false;
            $(".wifi_ap_list_item").removeClass("selected");
            disableIdTag(".network_separator2");
            removeOldWiFiConnectedInfo();
            if (gTrustedNetwork && !gFoundMe) {
                displayDisableDisconnectCompleteMessage();
            } else {
            	setTimeout("updateWifiClientConnection();", 1000);
                setTimeout("updateWifiClientAccessPointList();", 1000);
            }
            if (data.current_wifi_client_connection.Frequency != null) {
		frequency_channel = parseInt(data.current_wifi_client_connection.Frequency)
	    }
           	hideLoading();
        },
        "error": function(request, status, error) {
            hideLoading();
            if (gTrustedNetwork && !gFoundMe) {
                displayDisableDisconnectCompleteMessage();
            }
        }
    });
}
function forgetThisCurrentConnection_onboarding(mac_address) {
    //displayLoading();
    $.ajaxAPI({
        "url": "current_wifi_client_connection" + "/" + mac_address,
        "type": "DELETE",
        "success": function(data, textStatus, jqXHR) {
           // hideLoading();
            
            gTrustedNetwork = false;
            gConnectedNetwork = false;
            wifi_client_access_points_inprogress = false;
            $(".wifi_ap_list_item_h").removeClass("selected");
            disableIdTag(".network_separator2");
            removeOldWiFiConnectedInfo_onboarding();
            if (gTrustedNetwork && !gFoundMe) {
                displayDisableDisconnectCompleteMessage_onboarding();
            } else {
                updateWifiClientConnection_onboarding();
                updateWifiClientAccessPointList_onboarding();
            }
        },
        "error": function(request, status, error) {
            hideLoading();
            if (gTrustedNetwork && !gFoundMe) {
                displayDisableDisconnectCompleteMessage_onboarding();
            }
        }
    });
}
function forgetThisRememberedNetwork(mac_address) {
    displayLoading();
    $.ajaxAPI({
        "url": "wifi_client_access_points" + "/" + mac_address,
        "type": "PUT",
        "data": {
            "remember_network": "false"
        },
        "success": function(data, textStatus, jqXHR) {
        	wifi_client_access_points_inprogress = false;
            $("#wifi_enabled_form").restForm("refreshForm");
        },
        "error": function(request, status, error) {},
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function forgetThisRememberedNetwork_onboarding(mac_address) {
    displayLoading();
    $.ajaxAPI({
        "url": "wifi_client_access_points" + "/" + mac_address,
        "type": "PUT",
        "data": {
            "remember_network": "false"
        },
        "success": function(data, textStatus, jqXHR) {
        	wifi_client_access_points_inprogress = false;
            $("#wifi_enabled_form_h").restForm("refreshForm");
        },
        "error": function(request, status, error) {
        		wifi_client_access_points_inprogress = false;
            $("#wifi_enabled_form_h").restForm("refreshForm");
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
            wifi_signin_confirmation_overlay_h_hide();
            
        }
    });
}
function displayDisableDisconnectCompleteMessage() {
    var deviceNameURL = getDeviceNameURL(gDeviceName);
    var ssidname = "<b><i>" + gSSIDName + "</i></b>";
    var msg = dictionaryList["hotspot_direct_connection_reconnect_tip_1"].replace("{0}", ssidname);
    $("#direct_connection_reconnect_tip_1").html(msg);
    msg = dictionaryList["hotspot_direct_connection_reconnect_tip_2"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#direct_connection_reconnect_tip_2").html(msg);
    resetNetworkConnectionDiagram("mode_direct_connection");
    $(".connection_text").text("");
    $(".device_text").text(gSSIDName);
    $("#wifi_disable_disconnect_complete_message_overlay").dialog("open");
    gTrustedNetwork = false;
    gConnectedNetwork = false;
}
function displayDisableDisconnectCompleteMessage_onboarding() {
    var deviceNameURL = getDeviceNameURL(gDeviceName);
    var ssidname = "<b><i>" + gSSIDName + "</i></b>";
    var msg = dictionaryList["hotspot_direct_connection_reconnect_tip_1"].replace("{0}", ssidname);
    $("#direct_connection_reconnect_tip_1_h").html(msg);
    msg = dictionaryList["hotspot_direct_connection_reconnect_tip_2"].replace("{0}", '<a href="' + deviceNameURL + '">' + deviceNameURL + "</a>");
    $("#direct_connection_reconnect_tip_2_h").html(msg);
    resetNetworkConnectionDiagram("mode_direct_connection");
    $(".connection_text").text("");
    $(".device_text").text(gSSIDName);
    $("#wifi_disable_disconnect_complete_message_overlay_h").dialog("open");
    gTrustedNetwork = false;
    gConnectedNetwork = false;
}
function removeOldWiFiConnectedInfo() {
    $(".wifi_ap_list_item.connected").find(".wifi_ap_list_item_icon").removeClass("icon_ap_connected");
    $(".wifi_ap_list_item.connected").find(".wireless_label_text").removeClass("ap_connected");
    $(".wifi_ap_list_item.connected").find(".wireless_info").removeClass("ap_remembered").removeClass("ap_trusted");
    $(".wifi_ap_list_item").removeClass("connected");
}
function removeOldWiFiConnectedInfo_onboarding() {
    $(".wifi_ap_list_item_h.connected").find(".wifi_ap_list_item_icon").removeClass("icon_ap_connected");
    $(".wifi_ap_list_item_h.connected").find(".wireless_label_text").removeClass("ap_connected");
    $(".wifi_ap_list_item_h.connected").find(".wireless_info").removeClass("ap_remembered").removeClass("ap_trusted");
    $(".wifi_ap_list_item_h").removeClass("connected");
}
function checkWiFiEnabled() {
    disableIdTag(".network_separator2");
    $("#wifi_enabled_form").restForm("refreshForm");
}
function callWifiNetworkData() {
    $.ajaxAPI({
        "url": "wifi_client_access_points/" + $("#wifi_signin_form_mac_address").val(),
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_client_access_points != null  && data.wifi_client_access_points.wifi_ap_client_access_point != null ) {
                if (Object.prototype.toString.call(data.wifi_client_access_points.wifi_ap_client_access_point) != "[object Array]") {
                    data.wifi_client_access_points.wifi_ap_client_access_point = $.makeArray(data.wifi_client_access_points.wifi_ap_client_access_point);
                }
                $.each(data.wifi_client_access_points.wifi_ap_client_access_point, function(index, value) {
                    if (value.dhcp_enabled == "false") {
                        $(".wifi_settings_network_mode_static_button").addClass("button-selected");
                        $(".wifi_settings_network_mode_dhcp_button").removeClass("button-selected");
                        enableIdTag(".wifi_static_network_settings");
                        $(".wifi_settings_dhcp_enabled").val("false");
                        $(".wifi_client_network_settings_dhcp_container").hide();
                        $(".wifi_client_network_settings_static_container").show();
                        populateWifiSettingValues(value);
                    } else {
                        $(".wifi_settings_network_mode_static_button").removeClass("button-selected");
                        $(".wifi_settings_network_mode_dhcp_button").addClass("button-selected");
                        $(".wifi_settings_dhcp_enabled").val("true");
                        var client_ip = $(this).find(".wireless_client_ip").text();
                        if (client_ip == "") {
                            client_ip = $(".wifi_avatar_device_ip_address").text();
                        }
                        $(".wifi_network_settings_dhcp_ip_address").text(client_ip);
                        $(".wifi_client_network_settings_dhcp_container").show();
                        $(".wifi_client_network_settings_static_container").hide();
                    }
                });
            }
        }
    });
}
function callWifiNetworkData_onboarding() {
    $.ajaxAPI({
        "url": "wifi_client_access_points/" + $("#wifi_signin_form_mac_address_h").val(),
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_client_access_points != null  && data.wifi_client_access_points.wifi_ap_client_access_point != null ) {
                if (Object.prototype.toString.call(data.wifi_client_access_points.wifi_ap_client_access_point) != "[object Array]") {
                    data.wifi_client_access_points.wifi_ap_client_access_point = $.makeArray(data.wifi_client_access_points.wifi_ap_client_access_point);
                }
                $.each(data.wifi_client_access_points.wifi_ap_client_access_point, function(index, value) {
                    if (value.dhcp_enabled == "false") {
                        $(".wifi_settings_network_mode_static_button").addClass("button-selected");
                        $(".wifi_settings_network_mode_dhcp_button").removeClass("button-selected");
                        enableIdTag(".wifi_static_network_settings");
                        $(".wifi_settings_dhcp_enabled").val("false");
                        $(".wifi_client_network_settings_dhcp_container").hide();
                        $(".wifi_client_network_settings_static_container").show();
                        populateWifiSettingValues(value);
                    } else {
                        $(".wifi_settings_network_mode_static_button").removeClass("button-selected");
                        $(".wifi_settings_network_mode_dhcp_button").addClass("button-selected");
                        $(".wifi_settings_dhcp_enabled").val("true");
                        var client_ip = $(this).find(".wireless_client_ip").text();
                        if (client_ip == "") {
                            client_ip = $(".wifi_avatar_device_ip_address").text();
                        }
                        $(".wifi_network_settings_dhcp_ip_address").text(client_ip);
                        $(".wifi_client_network_settings_dhcp_container").show();
                        $(".wifi_client_network_settings_static_container").hide();
                    }
                });
            }
        }
    });
}
function populateWifiSettingValues(wifiSettingsData) {
    $(".wifi_settings_ip").val(wifiSettingsData.ip);
    $(".wifi_settings_netmask").val(wifiSettingsData.netmask);
    $(".wifi_settings_gateway").val(wifiSettingsData.gateway);
    $(".wifi_settings_dns0").val(wifiSettingsData.dns0);
    $(".wifi_settings_dns1").val(wifiSettingsData.dns1);
    $(".wifi_settings_dns2").val(wifiSettingsData.dns2);
}
$(document).ready(function() {
    var parameterOptions;
    $("#wifi_network_settings_enable_button").click(function(e) {
        e.preventDefault();
        if (!$(this).hasClass("button-selected")) {
            parameterOptions = {
                "2.4": {
                    "enabled": true
                },
                "5": {
                    "enabled": false
                }
            };
            $("#wifi_network_settings_enable_button").addClass("button-selected");
            $("#wifi_network_settings_enable_button_5g").removeClass("button-selected");
            $("#wifi_network_settings_enable_both_freq_button").removeClass("button-selected");
            doReconnectWirelessNetworkEnable("2.4");
            callWiFiAPS(parameterOptions);
        }
    });
    $("#wifi_network_settings_enable_button_5g").click(function(e) {
        e.preventDefault();
        if (!$(this).hasClass("button-selected")) {
            parameterOptions = {
                "2.4": {
                    "enabled": false
                },
                "5": {
                    "enabled": true
                }
            };
            $("#wifi_network_settings_enable_button_5g").addClass("button-selected");
            $("#wifi_network_settings_enable_button").removeClass("button-selected");
            $("#wifi_network_settings_enable_both_freq_button").removeClass("button-selected");
            doReconnectWirelessNetworkEnable("5");
            callWiFiAPS(parameterOptions);
        }
    });
    $("#wifi_network_settings_enable_both_freq_button").click(function(e) {
        e.preventDefault();
        if (!$(this).hasClass("button-selected")) {
            parameterOptions = {
                "2.4": {
                    "enabled": true
                },
                "5": {
                    "enabled": true
                }
            };
            $("#wifi_network_settings_enable_both_freq_button").addClass("button-selected");
            $("#wifi_network_settings_enable_button").removeClass("button-selected");
            $("#wifi_network_settings_enable_button_5g").removeClass("button-selected");
            doReconnectWirelessNetworkEnable("both");
            callWiFiAPS(parameterOptions);
        }
    });
});
function callWiFiAPS(parameterOptions) {
    $.ajaxAPI({
        "url": "wifi_aps",
        "data": JSON.stringify(parameterOptions),
        "type": "PUT",
        "dataType": "json",
        "contentType": "application/json; charset=UTF-8",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "wifi_aps", request.status);
        }
    });
}
function doReconnectWirelessNetworkEnable(sentAPIFreq) {
    if (sentAPIFreq != undefined) {
        if (sentAPIFreq == "both") {
            gSSIDName = gSSIDName + " & " + gSSIDNameHighBand;
        } else {
            if (sentAPIFreq == "5") {
                gSSIDName = gSSIDNameHighBand;
            }
        }
        doReconnectWirelessNetwork();
    }
}
$(document).ready(function() {
    $("#head_settings_nav_admin_link").navItem({
        "contentId": "admin_user_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_admin_link");
            $("#user_detail_password_checkbox").removeAttr("checked");
            $("#user_detail_password_checkbox").attr("disabled", "disabled");
            $("#user_detail_password_edit_section").hide();
            $("#settings_device_name_form").restForm("refreshForm");
            $("#settings_device_language_form").restForm("refreshForm");
            $("#ssh_form").restForm("refreshForm");
            $("#network_ftp_form").restForm("refreshForm");
            $.ajaxAPI({
                "url": "users",
                "timeout": ajaxTimeout,
                "success": function(data, textStatus, jqXHR) {
                    if (data != null  && data.users != null  && data.users.user != null ) {
                        if (Object.prototype.toString.call(data.users.user) != "[object Array]") {
                            data.users.user = $.makeArray(data.users.user);
                        }
                        for (var i in data.users.user) {
                            if (data.users.user[i].is_admin.toLowerCase() == "true") {
                                $("#settings_admin_user_username").text(data.users.user[i].username);
                                $("#settings_admin_user_form").attr("action", $("#settings_admin_user_form_default").attr("action") + "/" + data.users.user[i].username);
                                if (data.users.user[i].is_password.toLowerCase() == "true") {
                                    $("#user_detail_password_checkbox").attr("checked", "checked");
                                } else {
                                    $("#user_detail_password_checkbox").removeAttr("checked");
                                }
                                $("#edit_admin_user_password_form").attr("action", $("#edit_admin_user_password_form").attr("action") + "/" + data.users.user[i].username);
                                $("#edit_admin_user_password_form").find(".username").text(data.users.user[i].username);
                                $("#edit_admin_user_password_form").find(".user_id").text(data.users.user[i].user_id);
                                $("#edit_admin_user_password_form").find(".is_admin").text(data.users.user[i].is_admin);
                                $("#edit_admin_user_password_form").find(".fullname").text(data.users.user[i].fullname);
                                break;
                            }
                        }
                    }
                },
                "error": function(request, status, error) {},
                "complete": function(jqXHR, textStatus) {
                    $("#user_detail_password_checkbox").removeAttr("disabled");
                    if ($("#user_detail_password_checkbox").is(":checked")) {
                        $("#user_detail_password_edit_section").show();
                    } else {
                        $("#user_detail_password_edit_section").hide();
                    }
                }
            });
        }
    });
    $("#settings_admin_user_form").restForm({
        "refreshDataCallback": function(data) {
            $("#settings_admin_user_form").restForm("_refreshData", data);
        },
        "refreshDataComplete": function() {
            $("#settings_admin_user_form").restForm("reset");
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#settings_admin_user_form").restForm("reset");
            $("#settings_admin_user_form").restForm("processFormComplete", jqXHR, textStatus);
        },
        "beforeProcessForm": function() {
            var password = $("#settings_admin_user_form_password").val();
            $("#settings_admin_user_password_encoded").val($.base64.encode(password));
        },
        "validateFormCallback": function() {
            $("#settings_admin_user_form").restForm("_validateForm");
        }
    });
    $("#edit_admin_user_password_form").restForm({
        "validateFormCallback": function() {
            if ($("#user_detail_password_checkbox").is(":checked")) {
                $("#edit_admin_user_password_form").restForm("_validateForm");
            } else {
                $("#edit_admin_user_password_form").data("validForm", true);
            }
        },
        "processFormSuccessCallback": function(data) {
            $("#edit_admin_user_password_form").restForm("reset");
            $("#user_password_overlay").dialog("close");
            if ($("#user_detail_password_checkbox").is(":checked")) {
                $("#user_detail_password_edit_section").show();
            } else {
                $("#user_detail_password_edit_section").hide();
            }
        },
        "beforeProcessForm": function() {
            var password;
            if ($("#edit_user_password_form_show_password_checkbox").is(":checked")) {
                password = $("#edit_user_password_show").val();
            } else {
                password = $("#edit_user_password").val();
            }
            $("#edit_admin_user_password_encoded").val($.base64.encode(password));
            $("#edit_admin_user_password_form").find('input[name="username"]').val($("#edit_admin_user_password_form").find(".username").text());
            $("#edit_admin_user_password_form").find('input[name="user_id"]').val($("#edit_admin_user_password_form").find(".user_id").text());
            $("#edit_admin_user_password_form").find('input[name="is_admin"]').val($("#edit_admin_user_password_form").find(".is_admin").text());
            $("#edit_admin_user_password_form").find('input[name="fullname"]').val($("#edit_admin_user_password_form").find(".fullname").text());
        }
    });
    $("#user_detail_password_checkbox").live("toggle", function(e) {
        e.preventDefault();
        if ($("#user_detail_password_checkbox").is(":checked")) {
            $("#user_password_overlay").dialog("option", "title", '<div class="wizard_dialog_title">' + dictionaryList["create_admin_password"] + "</div>");
            $("#user_password_overlay").dialog("open");
        } else {
            $("#edit_admin_user_password_form").restForm("reset");
            $("#edit_admin_user_password_form").submit();
        }
    });
    $("#user_detail_password_edit_link").click(function(e) {
        e.preventDefault();
        $("#user_password_overlay").dialog("option", "title", '<div class="wizard_dialog_title">' + dictionaryList["edit_admin_password"] + "</div>");
        $("#user_password_overlay").dialog("open");
    });
    $("#user_password_overlay").dialog({
        autoOpen: false,
        resizable: false,
        width: "auto",
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_user",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#user_password_overlay").attr("title") + "</div>",
        open: function(event, ui) {
            $("#edit_admin_user_password_form")[0].reset();
            resetEditUserPasswordForm();
        }
    });
    $("#user_password_overlay").bind("dialogclose", function(e) {
        if (e.keyCode == 27) {
            if (!$("#user_detail_password_edit_link").is(":visible")) {
                $("#user_detail_password_checkbox").removeAttr("checked");
            }
        }
    });
    $("#edit_user_password_close_button").click(function() {
        $("#user_password_overlay").dialog("close");
        if (!$("#user_detail_password_edit_link").is(":visible")) {
            $("#user_detail_password_checkbox").removeAttr("checked");
        }
    });
    $("#user_detail_password_checkbox").checkbox();
    $("#edit_user_password_form_show_password_checkbox_container > .jquery-checkbox2").live("keydown", function(event) {
        if (event.keyCode == 13) {
            $("#edit_user_password_form_show_password_checkbox").toggle();
            event.preventDefault();
            event.stopPropagation();
        }
    });
    $("#edit_user_password_form_show_password_checkbox").click(function() {
        if ($("#edit_user_password_form_show_password_checkbox").is(":checked")) {
            $("#edit_user_password").val($("#edit_user_password_show").val());
            resetEditUserPasswordForm();
        } else {
            $("#edit_user_password_show").val($("#edit_user_password").val());
            $("#edit_user_password_form_password_container").hide();
            $("#edit_user_password_form_password_show_container").show();
            $("#edit_user_password_form_password_confirm_container").hide();
            $("#edit_user_password").removeClass("PASSWORD").removeClass("NOTEMPTY");
            $("#edit_user_password_confirm").removeClass("CONFIRM_PASSWORD");
            $("#edit_user_password_show").addClass("PASSWORD").addClass("NOTEMPTY");
            if ($("#edit_user_password_show").val() != "") {
                $("#edit_user_password_form_password_show_container").find(".deletebutton").show();
            } else {
                $("#edit_user_password_form_password_show_container").find(".deletebutton").hide();
            }
            disableIdTag("#edit_user_password");
            enableIdTag("#edit_user_password_show");
        }
    });
});
function resetEditUserPasswordForm() {
    $("#edit_user_password_form_password_container").show();
    $("#edit_user_password_form_password_show_container").hide();
    $("#edit_user_password_form_password_confirm_container").show();
    $("#edit_user_password").addClass("PASSWORD").addClass("NOTEMPTY");
    $("#edit_user_password_confirm").addClass("CONFIRM_PASSWORD");
    $("#edit_user_password_show").removeClass("PASSWORD").removeClass("NOTEMPTY");
    enableIdTag("#edit_user_password");
    disableIdTag("#edit_user_password_show");
}
$(document).ready(function() {
    $("#settings_drive_lock_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
            if (data.device_security.locked.toLowerCase() == "true") {
                $("#settings_drive_lock_form").find("#DriveLockToggle").attr("checked", true);
                $("#DriveLockValue").val("true");
            } else {
                $("#settings_drive_lock_form").find("#DriveLockToggle").attr("checked", false);
                $("#DriveLockValue").val("false");
            }
        }
    });
    $("#DriveLockToggle").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#DriveLockValue").val("true");
        } else {
            $("#DriveLockValue").val("false");
        }
        $("#settings_drive_lock_form").submit();
    });
});
$(document).ready(function() {
    $("#ssh_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
            if (data.ssh_configuration.enablessh.toLowerCase() == "true") {
                $("#ssh_form").find("#SettingDiagnosticsSSHToggle").attr("checked", true);
                $("#SettingDiagnosticsSSHValue").val("true");
                $("#ssh_password_configer").css("display","inline-block");              
            } else {
                $("#ssh_form").find("#SettingDiagnosticsSSHToggle").attr("checked", false);
                $("#SettingDiagnosticsSSHValue").val("false");
                $("#ssh_password_configer").css("display","none");
            }
        }
    });
    $("#ssh_confirmation").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        open: function(event, ui) {
            $("#SettingsSshIAgreeToggle").attr("checked", false);
            $("#ssh_pwd").val("");
            $("#ssh_comfirm_pwd").val("");
            $("#SshPass_section").css("display","none");
            $(".sshOkButton").attr("disabled", true);
            $(".sshOkButton").addClass("ui-state-disabled");
        },
        title: '<div class="wizard_dialog_title">' + $("#ssh_confirmation").attr("title") + "</div>"
    });
    $("#ssh_confirmation").bind("dialogclose", function(e) {
        if (e.keyCode == 27) {
            $("#SettingDiagnosticsSSHToggle").attr("checked", false);
            $("#SettingDiagnosticsSSHValue").val("false");
            $("#ssh_password_configer").css("display","none");
        }
    });
    $("#ssh_confirmation_close_button").click(function() {
        $("#SettingDiagnosticsSSHToggle").attr("checked", false);
        $("#SettingDiagnosticsSSHValue").val("false");
        $("#ssh_password_configer").css("display","none");
        $("#ssh_pass_erro").html("");
        $("#ssh_confirmation").dialog("close");
    });
    $("#ssh_confirmation_ok_button").click(function() {
        var invail_string = "/[@:/\\%\']/",
        warnString_maxLength = dictionaryList["ssh_password_maxlength"],
        warnString_minLength = dictionaryList["ssh_password_minlength"],
        warnString_specailChar = dictionaryList["ssh_password_special_char"],
        warnString_comfirm = dictionaryList["create_user_confirm_password"],
        warnString_empty = dictionaryList["enter_password"];
        var get_pwd = $("#ssh_pwd").val(),
            get_comfirm_pwd = $("#ssh_comfirm_pwd").val(),
            printString = "",
            warnIO = false;
       $("#ssh_pass_erro").html("");
       if(get_pwd == "" || get_comfirm_pwd == ""){
          printString = warnString_empty;
          warnIO = true;
       }else if(get_pwd.length > 16){
          printString = warnString_maxLength;
          warnIO = true;
       }else if(get_pwd.length < 5){
          printString = warnString_minLength;
          warnIO = true;
       }else if(get_pwd.match(/[@:/\\%\']/)){
          printString = warnString_specailChar;
          warnIO = true;
       }else if(get_pwd != get_comfirm_pwd){
           printString = warnString_comfirm;
           warnIO = true;
       }
       $("#ssh_pass_erro").html(printString);
       if(warnIO == true){
          return; 
       }
       $("#SettingSSHPassword").val(get_pwd);
       $("#ssh_confirmation").dialog("close");
       $("#SettingDiagnosticsSSHValue").val("true");
       $("#ssh_password_configer").css("display","inline-block");
       $("#ssh_form").submit();
    });
    $("#ssh_renew_confirmation_ok_button").click(function() {
        var invail_string = "/[@:/\\%\']/",
        warnString_maxLength = dictionaryList["ssh_password_maxlength"],
        warnString_minLength = dictionaryList["ssh_password_minlength"],
        warnString_specailChar = dictionaryList["ssh_password_special_char"],
        warnString_comfirm = dictionaryList["create_user_confirm_password"],
        warnString_empty = dictionaryList["enter_password"];
        var get_pwd = $("#ssh_renew_pwd").val(),
            get_comfirm_pwd = $("#ssh_renew_comfirm_pwd").val(),
            printString = "",
            warnIO = false;
       $("#ssh_renew_pass_erro").html("");
       if(get_pwd == "" || get_comfirm_pwd == ""){
          printString = warnString_empty;
          warnIO = true;
       }else if(get_pwd.length > 16){
          printString = warnString_maxLength;
          warnIO = true;
       }else if(get_pwd.length < 5){
          printString = warnString_minLength;
          warnIO = true;
       }else if(get_pwd.match(/[@:/\\%\']/)){
          printString = warnString_specailChar;
          warnIO = true;
       }else if(get_pwd != get_comfirm_pwd){
           printString = warnString_comfirm;
           warnIO = true;
       }
       $("#ssh_renew_pass_erro").html(printString);
       if(warnIO == true){
          return; 
       }
       $("#SettingSSHPassword").val(get_pwd);
       $("#SettingDiagnosticsSSHValue").val("true");
       $("#ssh_password_configer").css("display","inline-block");
       $("#ssh_password_configer_pop").dialog("close");
       $("#ssh_form").submit();
    });
});
$(document).ready(function() {
    if (gIsMobile) {
        disableIdTag("#create_and_save_btn");
    }
    $("#head_settings_nav_support_link").navItem({
        "contentId": "support_container",
        "refreshDataCall": function() {
            resetNavigationSelection("#head_settings_nav_support_link");
            $("#diagnostics_tests_form").restForm("refreshForm");
            $("#product_improvement_form").restForm("refreshForm");
            supportRegister_load();
        }
    });
    $("#no_internet_access_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#no_internet_access_dialog").attr("title") + "</div>",
        open: function() {
            $("#no_internet_access_ok_button").focus();
        }
    });
    $("#popup_blocked_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#popup_blocked_dialog").attr("title") + "</div>"
    });
    $("#popup_blocked_ok_button").click(function() {
        $("#popup_blocked_dialog").dialog("close");
    });
    $("#support_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#support_dialog").attr("title") + "</div>"
    });
    $("#support_dialog_close_button").click(function() {
        $("#support_dialog").dialog("close");
    });
    $("#request_automated_support_form").restForm();
    $("#create_and_save_btn").click(function(e) {
        e.preventDefault();
        createAndSaveSystemLog();
    });
    $("#support_run_request_support_button").click(function(e) {
        e.preventDefault();
        requestAutomatedSupport();
        $("#support_dialog").dialog("close");
    });
    $("#request_support_btn").click(function(e) {
        e.preventDefault();
        $.ajaxAPI({
            "url": "internet_access",
            "type": "GET",
            "success": function(data) {
                if (data != null  && data.internet_access != null  && data.internet_access.connectivity != null ) {
                    if (data.internet_access.connectivity == "true") {
                        $("#request_automated_support_form")[0].reset();
                        disableIdTag("#support_run_request_support_button");
                        if (gIsMobile) {
                            $("#support_run_report_button").attr("disabled", true);
                            $("#support_run_report_button").addClass("ui-state-disabled");
                        }
                        $("#support_dialog").dialog("open");
                    } else {
                        $("#no_internet_access_dialog").dialog("open");
                    }
                }
            },
            "complete": function(jqXHR, textStatus) {}
        });
    });
    $("#no_internet_access_ok_button").click(function() {
        $("#no_internet_access_dialog").dialog("close");
    });
    $("#product_improvement_dialog_form").restForm({
        "processFormSuccessCallback": function() {
            $("#product_improvement_form").find("#PrivacyOptionToggle").attr("checked", true);
            $("#PrivacyOptionValue").val("true");
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#product_improvement_dialog_form").restForm("processFormComplete", jqXHR, textStatus);
            updatePIPDialogs();
        }
    });
    $("#request_automated_support").click(function() {
        if ($(this).is(":checked")) {
            disableIdTag("#support_run_request_support_button");
        } else {
            enableIdTag("#support_run_request_support_button");
        }
    });
    $("#product_improvement_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 600,
        minHeight: 240,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#product_improvement_dialog").attr("title") + "</div>",
        open: function() {
            $("#product_improvement_dialog_ok_button").focus();
        }
    });
    $("#product_improvement_dialog_cancel_button").click(function() {
        $("#product_improvement_dialog").dialog("close");
    });
    $("#product_improvement_dialog_ok_button").click(function() {
        $("#product_improvement_dialog").dialog("close");
        $("#product_improvement_dialog_form").submit();
    });
    $("#product_improvement_dialog_close_button").click(function() {
        $("#product_improvement_dialog").dialog("close");
    });
    $("#product_improvement_form").restForm({
        "refreshDataCallback": function(data) {
            if (data != null  && data.privacy_options != null ) {
                if (data.privacy_options.send_serial_number.toLowerCase() == "true") {
                    $("#product_improvement_form").find("#PrivacyOptionToggle").attr("checked", true);
                    $("#PrivacyOptionValue").val("true");
                } else {
                    $("#product_improvement_form").find("#PrivacyOptionToggle").attr("checked", false);
                    $("#PrivacyOptionValue").val("false");
                }
            } else {}
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#product_improvement_form").restForm("processFormComplete", jqXHR, textStatus);
            updatePIPDialogs();
        }
    });
    $("#PrivacyOptionToggle").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#PrivacyOptionValue").val("true");
        } else {
            $("#PrivacyOptionValue").val("false");
        }
        $("#product_improvement_form").submit();
    });
    $("#product_improvement_more_info").click(function(e) {
        e.preventDefault();
        $("#product_improvement_dialog").dialog("open");
    });
});
function requestAutomatedSupport() {
    displayLoading();
    $.ajaxAPI({
        "url": "system_log",
        "type": "POST",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "post_system_log", request.status);
        },
        "success": function(data) {
            var logfilename = data.system_log.logfilename;
            var nastype = gModelNumber;
            $("#quick_support_form").find("#devlang").val(gLanguage3Letter);
            $("#quick_support_form").find("#devsn").val(gSerialNumber);
            $("#quick_support_form").find("#devmodel").val(gModelNumber);
            $("#quick_support_form").find("#devnastype").val(nastype);
            $("#quick_support_form").find("#devfw").val(VERSION);
            $("#quick_support_form").find("#devhash").val(logfilename);
            $("#quick_support_form").submit();
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}
function createAndSaveSystemLog() {
    var url = apiUrlPrefix + "system_log?attach_file=true";
    displayLoading();
    downloadInIframe(url);
}
function updatePIPDialogs() {
    if ($("#PrivacyOptionToggle").is(":checked")) {
        $("#product_improvement_dialog_cancel_button").hide();
        $("#product_improvement_dialog_ok_button").hide();
        $("#product_improvement_dialog_close_button").show();
        $("#product_improvement_dialog_participate").hide();
    } else {
        $("#product_improvement_dialog_close_button").hide();
        $("#product_improvement_dialog_cancel_button").show();
        $("#product_improvement_dialog_ok_button").show();
        $("#product_improvement_dialog_participate").show();
    }
}
window.Modernizr = (function(window, document, undefined) {
    var version = "2.7.1", Modernizr = {}, enableClasses = true, docElement = document.documentElement, mod = "modernizr", modElem = document.createElement(mod), mStyle = modElem.style, inputElem = document.createElement("input"), smile = ":)", toString = {}.toString, prefixes = " -webkit- -moz- -o- -ms- ".split(" "), omPrefixes = "Webkit Moz O ms", cssomPrefixes = omPrefixes.split(" "), domPrefixes = omPrefixes.toLowerCase().split(" "), tests = {}, inputs = {}, attrs = {}, classes = [], slice = classes.slice, featureName, injectElementWithStyles = function(rule, callback, nodes, testnames) {
        var style, ret, node, docOverflow, div = document.createElement("div"), body = document.body, fakeBody = body || document.createElement("body");
        if (parseInt(nodes, 10)) {
            while (nodes--) {
                node = document.createElement("div");
                node.id = testnames ? testnames[nodes] : mod + (nodes + 1);
                div.appendChild(node);
            }
        }
        style = ["&#173;", '<style id="s', mod, '">', rule, "</style>"].join("");
        div.id = mod;
        (body ? div : fakeBody).innerHTML += style;
        fakeBody.appendChild(div);
        if (!body) {
            fakeBody.style.background = "";
            fakeBody.style.overflow = "hidden";
            docOverflow = docElement.style.overflow;
            docElement.style.overflow = "hidden";
            docElement.appendChild(fakeBody);
        }
        ret = callback(div, rule);
        if (!body) {
            fakeBody.parentNode.removeChild(fakeBody);
            docElement.style.overflow = docOverflow;
        } else {
            div.parentNode.removeChild(div);
        }
        return !!ret;
    }
    , isEventSupported = (function() {
        var TAGNAMES = {
            "select": "input",
            "change": "input",
            "submit": "form",
            "reset": "form",
            "error": "img",
            "load": "img",
            "abort": "img"
        };
        function isEventSupported(eventName, element) {
            element = element || document.createElement(TAGNAMES[eventName] || "div");
            eventName = "on" + eventName;
            var isSupported = eventName in element;
            if (!isSupported) {
                if (!element.setAttribute) {
                    element = document.createElement("div");
                }
                if (element.setAttribute && element.removeAttribute) {
                    element.setAttribute(eventName, "");
                    isSupported = is(element[eventName], "function");
                    if (!is(element[eventName], "undefined")) {
                        element[eventName] = undefined;
                    }
                    element.removeAttribute(eventName);
                }
            }
            element = null ;
            return isSupported;
        }
        return isEventSupported;
    })(), _hasOwnProperty = ({}).hasOwnProperty, hasOwnProp;
    if (!is(_hasOwnProperty, "undefined") && !is(_hasOwnProperty.call, "undefined")) {
        hasOwnProp = function(object, property) {
            return _hasOwnProperty.call(object, property);
        }
        ;
    } else {
        hasOwnProp = function(object, property) {
            return ( (property in object) && is(object.constructor.prototype[property], "undefined")) ;
        }
        ;
    }
    if (!Function.prototype.bind) {
        Function.prototype.bind = function bind(that) {
            var target = this;
            if (typeof target != "function") {
                throw new TypeError();
            }
            var args = slice.call(arguments, 1)
              , bound = function() {
                if (this instanceof bound) {
                    var F = function() {}
                    ;
                    F.prototype = target.prototype;
                    var self = new F();
                    var result = target.apply(self, args.concat(slice.call(arguments)));
                    if (Object(result) === result) {
                        return result;
                    }
                    return self;
                } else {
                    return target.apply(that, args.concat(slice.call(arguments)));
                }
            }
            ;
            return bound;
        }
        ;
    }
    function setCss(str) {
        mStyle.cssText = str;
    }
    function setCssAll(str1, str2) {
        return setCss(prefixes.join(str1 + ";") + (str2 || ""));
    }
    function is(obj, type) {
        return typeof obj === type;
    }
    function contains(str, substr) {
        return !!~("" + str).indexOf(substr);
    }
    function testProps(props, prefixed) {
        for (var i in props) {
            var prop = props[i];
            if (!contains(prop, "-") && mStyle[prop] !== undefined) {
                return prefixed == "pfx" ? prop : true;
            }
        }
        return false;
    }
    function testDOMProps(props, obj, elem) {
        for (var i in props) {
            var item = obj[props[i]];
            if (item !== undefined) {
                if (elem === false) {
                    return props[i];
                }
                if (is(item, "function")) {
                    return item.bind(elem || obj);
                }
                return item;
            }
        }
        return false;
    }
    function testPropsAll(prop, prefixed, elem) {
        var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1)
          , props = (prop + " " + cssomPrefixes.join(ucProp + " ") + ucProp).split(" ");
        if (is(prefixed, "string") || is(prefixed, "undefined")) {
            return testProps(props, prefixed);
        } else {
            props = (prop + " " + (domPrefixes).join(ucProp + " ") + ucProp).split(" ");
            return testDOMProps(props, prefixed, elem);
        }
    }
    tests["canvas"] = function() {
        var elem = document.createElement("canvas");
        return !!(elem.getContext && elem.getContext("2d"));
    }
    ;
    tests["canvastext"] = function() {
        return !!(Modernizr["canvas"] && is(document.createElement("canvas").getContext("2d").fillText, "function"));
    }
    ;
    tests["touch"] = function() {
        var bool;
        if (("ontouchstart" in window) || window.DocumentTouch && document instanceof DocumentTouch) {
            bool = true;
        } else {
            injectElementWithStyles(["@media (", prefixes.join("touch-enabled),("), mod, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(node) {
                bool = node.offsetTop === 9;
            });
        }
        return bool;
    }
    ;
    tests["rgba"] = function() {
        setCss("background-color:rgba(150,255,150,.5)");
        return contains(mStyle.backgroundColor, "rgba");
    }
    ;
    tests["multiplebgs"] = function() {
        setCss("background:url(https://),url(https://),red url(https://)");
        return (/(url\s*\(.*?){3}/).test(mStyle.background);
    }
    ;
    tests["backgroundsize"] = function() {
        return testPropsAll("backgroundSize");
    }
    ;
    tests["borderradius"] = function() {
        return testPropsAll("borderRadius");
    }
    ;
    tests["boxshadow"] = function() {
        return testPropsAll("boxShadow");
    }
    ;
    tests["textshadow"] = function() {
        return document.createElement("div").style.textShadow === "";
    }
    ;
    tests["opacity"] = function() {
        setCssAll("opacity:.55");
        return (/^0.55$/).test(mStyle.opacity);
    }
    ;
    tests["cssanimations"] = function() {
        return testPropsAll("animationName");
    }
    ;
    tests["cssgradients"] = function() {
        var str1 = "background-image:"
          , str2 = "gradient(linear,left top,right bottom,from(#9f9),to(white));"
          , str3 = "linear-gradient(left top,#9f9, white);";
        setCss((str1 + "-webkit- ".split(" ").join(str2 + str1) + prefixes.join(str3 + str1)).slice(0, -str1.length));
        return contains(mStyle.backgroundImage, "gradient");
    }
    ;
    tests["generatedcontent"] = function() {
        var bool;
        injectElementWithStyles(["#", mod, "{font:0/0 a}#", mod, ':after{content:"', smile, '";visibility:hidden;font:3px/1 a}'].join(""), function(node) {
            bool = node.offsetHeight >= 3;
        });
        return bool;
    }
    ;
    function webforms() {
        Modernizr["input"] = (function(props) {
            for (var i = 0, len = props.length; i < len; i++) {
                attrs[props[i]] = !!(props[i] in inputElem);
            }
            if (attrs.list) {
                attrs.list = !!(document.createElement("datalist") && window.HTMLDataListElement);
            }
            return attrs;
        })("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "));
        Modernizr["inputtypes"] = (function(props) {
            for (var i = 0, bool, inputElemType, defaultView, len = props.length; i < len; i++) {
                inputElem.setAttribute("type", inputElemType = props[i]);
                bool = inputElem.type !== "text";
                if (bool) {
                    inputElem.value = smile;
                    inputElem.style.cssText = "position:absolute;visibility:hidden;";
                    if (/^range$/.test(inputElemType) && inputElem.style.WebkitAppearance !== undefined) {
                        docElement.appendChild(inputElem);
                        defaultView = document.defaultView;
                        bool = defaultView.getComputedStyle && defaultView.getComputedStyle(inputElem, null ).WebkitAppearance !== "textfield" && (inputElem.offsetHeight !== 0);
                        docElement.removeChild(inputElem);
                    } else {
                        if (/^(search|tel)$/.test(inputElemType)) {} else {
                            if (/^(url|email)$/.test(inputElemType)) {
                                bool = inputElem.checkValidity && inputElem.checkValidity() === false;
                            } else {
                                bool = inputElem.value != smile;
                            }
                        }
                    }
                }
                inputs[props[i]] = !!bool;
            }
            return inputs;
        })("search tel url email datetime date month week time datetime-local number range color".split(" "));
    }
    for (var feature in tests) {
        if (hasOwnProp(tests, feature)) {
            featureName = feature.toLowerCase();
            Modernizr[featureName] = tests[feature]();
            classes.push((Modernizr[featureName] ? "" : "no-") + featureName);
        }
    }
    Modernizr.input || webforms();
    Modernizr.addTest = function(feature, test) {
        if (typeof feature == "object") {
            for (var key in feature) {
                if (hasOwnProp(feature, key)) {
                    Modernizr.addTest(key, feature[key]);
                }
            }
        } else {
            feature = feature.toLowerCase();
            if (Modernizr[feature] !== undefined) {
                return Modernizr;
            }
            test = typeof test == "function" ? test() : test;
            if (typeof enableClasses !== "undefined" && enableClasses) {
                docElement.className += " " + (test ? "" : "no-") + feature;
            }
            Modernizr[feature] = test;
        }
        return Modernizr;
    }
    ;
    setCss("");
    modElem = inputElem = null ;
    Modernizr._version = version;
    Modernizr._prefixes = prefixes;
    Modernizr._domPrefixes = domPrefixes;
    Modernizr._cssomPrefixes = cssomPrefixes;
    Modernizr.hasEvent = isEventSupported;
    Modernizr.testProp = function(prop) {
        return testProps([prop]);
    }
    ;
    Modernizr.testAllProps = testPropsAll;
    Modernizr.testStyles = injectElementWithStyles;
    Modernizr.prefixed = function(prop, obj, elem) {
        if (!obj) {
            return testPropsAll(prop, "pfx");
        } else {
            return testPropsAll(prop, obj, elem);
        }
    }
    ;
    docElement.className = docElement.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (enableClasses ? " js " + classes.join(" ") : "");
    return Modernizr;
})(this, this.document);
(function(a, b, c) {
    function d(a) {
        return "[object Function]" == o.call(a);
    }
    function e(a) {
        return "string" == typeof a;
    }
    function f() {}
    function g(a) {
        return !a || "loaded" == a || "complete" == a || "uninitialized" == a;
    }
    function h() {
        var a = p.shift();
        q = 1,
        a ? a.t ? m(function() {
            ("c" == a.t ? B.injectCss : B.injectJs)(a.s, 0, a.a, a.x, a.e, 1);
        }, 0) : (a(),
        h()) : q = 0;
    }
    function i(a, c, d, e, f, i, j) {
        function k(b) {
            if (!o && g(l.readyState) && (u.r = o = 1,
            !q && h(),
            l.onload = l.onreadystatechange = null ,
            b)) {
                "img" != a && m(function() {
                    t.removeChild(l);
                }, 50);
                for (var d in y[c]) {
                    y[c].hasOwnProperty(d) && y[c][d].onload();
                }
            }
        }
        var j = j || B.errorTimeout
          , l = b.createElement(a)
          , o = 0
          , r = 0
          , u = {
            t: d,
            s: c,
            e: f,
            a: i,
            x: j
        };
        1 === y[c] && (r = 1,
        y[c] = []),
        "object" == a ? l.data = c : (l.src = c,
        l.type = a),
        l.width = l.height = "0",
        l.onerror = l.onload = l.onreadystatechange = function() {
            k.call(this, r);
        }
        ,
        p.splice(e, 0, u),
        "img" != a && (r || 2 === y[c] ? (t.insertBefore(l, s ? null  : n),
        m(k, j)) : y[c].push(l));
    }
    function j(a, b, c, d, f) {
        return q = 0,
        b = b || "j",
        e(a) ? i("c" == b ? v : u, a, b, this.i++, c, d, f) : (p.splice(this.i++, 0, a),
        1 == p.length && h()),
        this;
    }
    function k() {
        var a = B;
        return a.loader = {
            load: j,
            i: 0
        },
        a;
    }
    var l = b.documentElement, m = a.setTimeout, n = b.getElementsByTagName("script")[0], o = {}.toString, p = [], q = 0, r = "MozAppearance" in l.style, s = r && !!b.createRange().compareNode, t = s ? l : n.parentNode, l = a.opera && "[object Opera]" == o.call(a.opera), l = !!b.attachEvent && !l, u = r ? "object" : l ? "script" : "img", v = l ? "script" : u, w = Array.isArray || function(a) {
        return "[object Array]" == o.call(a);
    }
    , x = [], y = {}, z = {
        timeout: function(a, b) {
            return b.length && (a.timeout = b[0]),
            a;
        }
    }, A, B;
    B = function(a) {
        function b(a) {
            var a = a.split("!"), b = x.length, c = a.pop(), d = a.length, c = {
                url: c,
                origUrl: c,
                prefixes: a
            }, e, f, g;
            for (f = 0; f < d; f++) {
                g = a[f].split("="),
                (e = z[g.shift()]) && (c = e(c, g));
            }
            for (f = 0; f < b; f++) {
                c = x[f](c);
            }
            return c;
        }
        function g(a, e, f, g, h) {
            var i = b(a)
              , j = i.autoCallback;
            i.url.split(".").pop().split("?").shift(),
            i.bypass || (e && (e = d(e) ? e : e[a] || e[g] || e[a.split("/").pop().split("?")[0]]),
            i.instead ? i.instead(a, e, f, g, h) : (y[i.url] ? i.noexec = !0 : y[i.url] = 1,
            f.load(i.url, i.forceCSS || !i.forceJS && "css" == i.url.split(".").pop().split("?").shift() ? "c" : c, i.noexec, i.attrs, i.timeout),
            (d(e) || d(j)) && f.load(function() {
                k(),
                e && e(i.origUrl, h, g),
                j && j(i.origUrl, h, g),
                y[i.url] = 2;
            })));
        }
        function h(a, b) {
            function c(a, c) {
                if (a) {
                    if (e(a)) {
                        c || (j = function() {
                            var a = [].slice.call(arguments);
                            k.apply(this, a),
                            l();
                        }
                        ),
                        g(a, j, b, 0, h);
                    } else {
                        if (Object(a) === a) {
                            for (n in m = function() {
                                var b = 0, c;
                                for (c in a) {
                                    a.hasOwnProperty(c) && b++;
                                }
                                return b;
                            }(),
                            a) {
                                a.hasOwnProperty(n) && (!c && !--m && (d(j) ? j = function() {
                                    var a = [].slice.call(arguments);
                                    k.apply(this, a),
                                    l();
                                }
                                 : j[n] = function(a) {
                                    return function() {
                                        var b = [].slice.call(arguments);
                                        a && a.apply(this, b),
                                        l();
                                    }
                                    ;
                                }(k[n])),
                                g(a[n], j, b, n, h));
                            }
                        }
                    }
                } else {
                    !c && l();
                }
            }
            var h = !!a.test, i = a.load || a.both, j = a.callback || f, k = j, l = a.complete || f, m, n;
            c(h ? a.yep : a.nope, !!i),
            i && c(i);
        }
        var i, j, l = this.yepnope.loader;
        if (e(a)) {
            g(a, 0, l, 0);
        } else {
            if (w(a)) {
                for (i = 0; i < a.length; i++) {
                    j = a[i],
                    e(j) ? g(j, 0, l, 0) : w(j) ? B(j) : Object(j) === j && h(j, l);
                }
            } else {
                Object(a) === a && h(a, l);
            }
        }
    }
    ,
    B.addPrefix = function(a, b) {
        z[a] = b;
    }
    ,
    B.addFilter = function(a) {
        x.push(a);
    }
    ,
    B.errorTimeout = 10000,
    null  == b.readyState && b.addEventListener && (b.readyState = "loading",
    b.addEventListener("DOMContentLoaded", A = function() {
        b.removeEventListener("DOMContentLoaded", A, 0),
        b.readyState = "complete";
    }
    , 0)),
    a.yepnope = k(),
    a.yepnope.executeStack = h,
    a.yepnope.injectJs = function(a, c, d, e, i, j) {
        var k = b.createElement("script"), l, o, e = e || B.errorTimeout;
        k.src = a;
        for (o in d) {
            k.setAttribute(o, d[o]);
        }
        c = j ? h : c || f,
        k.onreadystatechange = k.onload = function() {
            !l && g(k.readyState) && (l = 1,
            c(),
            k.onload = k.onreadystatechange = null );
        }
        ,
        m(function() {
            l || (l = 1,
            c(1));
        }, e),
        i ? k.onload() : n.parentNode.insertBefore(k, n);
    }
    ,
    a.yepnope.injectCss = function(a, c, d, e, g, i) {
        var e = b.createElement("link"), j, c = i ? h : c || f;
        e.href = a,
        e.rel = "stylesheet",
        e.type = "text/css";
        for (j in d) {
            e.setAttribute(j, d[j]);
        }
        g || (n.parentNode.insertBefore(e, n),
        m(c, 0));
    }
    ;
})(this, document);
Modernizr.load = function() {
    yepnope.apply(window, [].slice.call(arguments, 0));
}
;
Modernizr.addTest("ie8compat", function() {
    return ( !window.addEventListener && document.documentMode && document.documentMode === 7) ;
});
Modernizr.addTest("lastchild", function() {
    return Modernizr.testStyles("#modernizr div {width:100px} #modernizr :last-child{width:200px;display:block}", function(elem) {
        return elem.lastChild.offsetWidth > elem.firstChild.offsetWidth;
    }, 2);
});
$(document).ready(function() {
    if (!Modernizr.input.placeholder) {
        $("[placeholder]").focus(function() {
            var input = $(this);
            if (input.val() == input.attr("placeholder")) {
                input.val("");
                input.removeClass("placeholder");
            }
        }).blur(function() {
            var input = $(this);
            if (input.val() == "" || input.val() == input.attr("placeholder")) {
                input.addClass("placeholder");
                input.val(input.attr("placeholder"));
            }
        }).blur();
        $("[placeholder]").parents("form").submit(function() {
            $(this).find("[placeholder]").each(function() {
                var input = $(this);
                if (input.val() == input.attr("placeholder")) {
                    input.val("");
                }
            });
        });
        $("[placeholder]").parents("form").bind("reset", function(e) {
            $(this).find("[placeholder]").each(function() {
                var input = $(this);
                setTimeout(function() {
                    if (input.val() == "" || input.val() == input.attr("placeholder")) {
                        input.addClass("placeholder");
                        input.val(input.attr("placeholder"));
                    }
                }, 100);
            });
        });
    }
});
$(document).ready(function() {
    authenticationHandler.addItemToProcessAfterAuth(function() {
        hideSplash();
        $("#page").fadeIn();
        checkForDeviceReady();
        initDashboard();
        var useQueue = new Array(true);
        dashboardHandler.callHandler("updateMobileDeviceCount", useQueue);
        checkForFirmwareUpdate(true);
        dashboardHandler.callHandler("updateStorage", useQueue);
        dashboardHandler.callHandler("wifiNameAndSignal", useQueue);
        dashboardHandler.callHandler("updateBatteryPercent", useQueue);
        initAlerts(true);
        ajaxQueue.process();
        initPolling();
        initDeviceTitle();
        //updateConnectedDevices();
    });
    $("#splash_content h2").text(dictionaryList["splashConfiguration"]);
    authenticationHandler.checkEula();
});
var automaticUsbImport = false;
var usbJobInProgress = false;
var usbJobPollInProgress = false;
var usbJobCompletedFlag = false;
var usbData = new Array();
var currentUSBCopyMoveDevice = 0;
var usbDevices = 0;
$(document).ready(function() {
    $("#usb_transfer_cancel").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            $("#usb_transfer_cancel").attr("action", $("#usb_transfer_progress_default_form").attr("action") + "/" + usbData[currentUSBCopyMoveDevice].jobID);
        },
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            $("#cancel_usb_transfer_button").removeClass("ui-state-disabled");
            $("#usb_copy_move_now_button").removeClass("ui-state-disabled");
            hideLoading();
            currentUSBCopyMoveDevice = 0;
        },
        "processFormErrorCallback": function(request, status, error) {
            $("#cancel_usb_transfer_button").removeClass("ui-state-disabled");
            $("#usb_copy_move_now_button").removeClass("ui-state-disabled");
            hideLoading();
        }
    });
    $(document).on("external_devices::refresh", function(event, data) {
        usbData.length = 0;
        usbDevices = 0;
        if (data != null  && data.usb_drives != null ) {
            if (data.usb_drives.usb_drive != null  && data.usb_drives.usb_drive.name != null ) {
                addUSBtoList(data.usb_drives.usb_drive);
            } else {
                for (var i in data.usb_drives.usb_drive) {
                    addUSBtoList(data.usb_drives.usb_drive[i]);
                }
            }
        }
    });
    $("#usb_after_transfer_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.usb.transfer_mode == "copy") {
                $("#settings_usb_transfer_copy_mode_button").addClass("button-selected");
                $("#settings_usb_transfer_move_mode_button").removeClass("button-selected");
                $("#usb_copy_move_now_button").val(dictionaryList["copy_now"]);
            } else {
                $("#settings_usb_transfer_move_mode_button").addClass("button-selected");
                $("#settings_usb_transfer_copy_mode_button").removeClass("button-selected");
                $("#usb_copy_move_now_button").val(dictionaryList["move_now"]);
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#settings_usb_transfer_mode").val() == "copy") {
                $("#settings_usb_transfer_copy_mode_button").addClass("button-selected");
                $("#settings_usb_transfer_move_mode_button").removeClass("button-selected");
                $("#usb_copy_move_now_button").val(dictionaryList["copy_now"]);
            } else {
                $("#settings_usb_transfer_move_mode_button").addClass("button-selected");
                $("#settings_usb_transfer_copy_mode_button").removeClass("button-selected");
                $("#usb_copy_move_now_button").val(dictionaryList["move_now"]);
            }
        }
    });
    $("#settings_usb_transfer_copy_mode_button").click(function() {
        $("#settings_usb_transfer_mode").val("copy");
        $("#usb_after_transfer_form").submit();
    });
    $("#settings_usb_transfer_move_mode_button").click(function() {
        $("#settings_usb_transfer_mode").val("move");
        $("#usb_after_transfer_form").submit();
    });
    $("#usb_automatic_transfer_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            if (!$("#usb_automatic_transfer_switch").is(":checked")) {
                $("#usb_auto_transfer_field").val("true");
                $("#usb_transfer_now_button_container").hide()
            } else {
                $("#usb_auto_transfer_field").val("false");
                $("#usb_transfer_now_button_container").show()
            }
        },
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.usb.auto_transfer == "true") {
                $("#usb_automatic_transfer_switch").attr("checked", true);
                automaticUsbImport = true;
            } else {
                $("#usb_automatic_transfer_switch").attr("checked", false);
                automaticUsbImport = false;
            }
            showHideUSBImportNowButton()
        },
        "processFormSuccessCallback": function(data) {
            if ($("#usb_automatic_transfer_switch").is(":checked")) {
                automaticUsbImport = true;
            } else {
                automaticUsbImport = false;
            }
            showHideUSBImportNowButton();
        }
    });
    $("#usb_automatic_transfer_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            if (!$("#usb_automatic_transfer_switch").is(":checked")) {
                $("#usb_auto_transfer_field").val("true");
                $("#usb_transfer_now_button_container").hide()
            } else {
                $("#usb_auto_transfer_field").val("false");
                $("#usb_transfer_now_button_container").show()
            }
        },
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.usb.auto_transfer == "true") {
                $("#usb_automatic_transfer_switch").attr("checked", true);
                automaticUsbImport = true;
            } else {
                $("#usb_automatic_transfer_switch").attr("checked", false);
                automaticUsbImport = false;
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#usb_automatic_transfer_switch").is(":checked")) {
                automaticUsbImport = true;
            } else {
                automaticUsbImport = false;
            }
            showHideUsbImportNowButton();
        }
    });
    $("#usb_transfer_now").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            var transferAction = $("#usb_transfer_now").find('input[id="usb_auto_transfer_action_value"]').val();
            $("#usb_transfer_now").attr("action", transferAction + "/" + usbData[currentUSBCopyMoveDevice].shareName);
        },
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            hideLoading();
            var transferAction = $("#usb_transfer_now").find('input[id="usb_auto_transfer_action_value"]').val();
            $("#usb_transfer_now").attr("action", transferAction);
            if (data != null  && data.storage_active_transfer != null  && data.storage_active_transfer.job_id != null ) {
                usbData[currentUSBCopyMoveDevice].jobID = data.storage_active_transfer.job_id;
                setTimeout(checkUSBTransferStarted, 10);
            }
        },
        "processFormErrorCallback": function(request, status, error) {
            hideLoading();
            $("#usb_copy_move_now_button").removeClass("ui-state-disabled");
            $("#usb_transfer_now").restForm("processFormError", request, status, error);
        },
        "hideProcessingCallback": function() {}
    });
    $("#usb_transfer_progress_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            usbJobPollInProgress = true;
            if ((usbData[currentUSBCopyMoveDevice].jobID != null ) && (usbData[currentUSBCopyMoveDevice].jobID != "" )){
                $("#usb_transfer_progress_form").attr("action", $("#usb_transfer_progress_default_form").attr("action") + "/" + usbData[currentUSBCopyMoveDevice].jobID);
            } else if (usbData[currentUSBCopyMoveDevice].jobID != "" ){
                $("#usb_transfer_progress_form").attr("action", $("#usb_transfer_progress_default_form").attr("action"));
            } else {
                $("#usb_transfer_progress_form").attr("action", $("#usb_transfer_progress_default_form").attr("action"));
            }
        },
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            if (data != null  && data.jobs != null ) {
                if (Object.prototype.toString.call(data.jobs.job) != "[object Array]") {
                    data.jobs.job = $.makeArray(data.jobs.job);
                }
                if (usbJobInProgress) {
                    for (var i in data.jobs.job) {
                        var status = data.jobs.job[i].status.toLowerCase();
                        if (status == "running" || status == "waiting") {
                        	$("#copy_move_now_button").addClass("ui-state-disabled");
                        	usbrunning = true;
                        	updateUSBTransferProgress(data.jobs.job[i]);
                            if ($("#usb_media_transfer").is(":visible")) {
                                setTimeout(checkUsbTransferProgress, 5000);
                            }
                        } else {  	
                            if ((status == "completed") && (!usbJobCompletedFlag)) {
		                    	currentUSBCopyMoveDevice++;
								if (typeof usbData[currentUSBCopyMoveDevice] !== "undefined" && 
									usbData[currentUSBCopyMoveDevice].shareName != "") {
									$("#usb_copy_move_now_button").submit();
								}
								else{
	                                usbJobCompletedFlag = true;
	                                $("#usb_copy_move_now_button").removeClass("ui-state-disabled");
	                                $("#copy_move_now_button").removeClass("ui-state-disabled");
	                                var complete_work = 0;
	                                if (data.jobs.job[i].complete_work != null  && data.jobs.job[i].complete_work != "") {
	                                    complete_work = parseInt(data.jobs.job[i].complete_work);
	                                }
	                                var msg = dictionaryList["successful_import_x_bytes"].replace("{0}", ByteSize(complete_work));
	                                $("#usb_transfer_progressbar_completed_result").text(msg);
	                                $("#usb_transfer_completed_container").show();
	                                $("#usb_transfer_inprogress_container").hide();
	                                currentUSBCopyMoveDevice = 0;
	                            }
                                if ($("#usb_media_transfer").is(":visible")) {
                                    setTimeout(checkUsbTransferProgress, 5000);
                                }
                            } 
                            else {
                               	if (status == "canceled") {
                                	$("#cancel_usb_transfer_button").click();
                                	$("#copy_move_now_button").removeClass("ui-state-disabled");
        						}
                                $("#usb_transfer_in_progress_container").hide();
                                usbJobInProgress = false;
                                //usbJobCompletedFlag = false;
                                usbData[currentUSBCopyMoveDevice].jobID = null ;                                
                                if (status == "failed" && usbrunning == true) {
                                	usbrunning = false;
                                    showUsbTransferFailed(data.jobs.job[i]);
                                }
                                showHideUSBImportNowButton();
                                if (($("#usb_media_transfer").is(":visible")) && (usbJobCompletedFlag)) {
                                	usbJobCompletedFlag = false;
	                                setTimeout(checkUsbTransferProgress, 5000);
	                            }
                                setTimeout(checkSDCardTransferProgress, 1000);
                            }
                        }
                        //currentUSBCopyMoveDevice = 0;
                    }
                } else {
                    var last_complete_time = 0;
                    var complete_time = 0;
                    for (var i in data.jobs.job) {
                        var status = data.jobs.job[i].status.toLowerCase();
                        var usbSrcPath = "/" + usbData[currentUSBCopyMoveDevice].shareName;
                        if (typeof (data.jobs.job[i].task_details.src_path) != "undefined") {
                            var currentSrcPath = data.jobs.job[i].task_details.src_path;
                            if (currentSrcPath === usbSrcPath) {
                                if (status == "running" || status == "waiting") {
                                    usbData[currentUSBCopyMoveDevice].jobID = data.jobs.job[i].job_id;
                                } else {
                                    if (data.jobs.job[i].complete_time != null  && data.jobs.job[i].complete_time != "") {
                                        complete_time = parseInt(data.jobs.job[i].complete_time);
                                    }
                                    if (complete_time > last_complete_time) {
                                        last_complete_time = complete_time;
                                    }
                                }
                            }
                        }
                    }
                    if (usbData[currentUSBCopyMoveDevice].jobID == null ) {
                        $("#usb_transfer_in_progress_container").hide();
                        if (last_complete_time != 0) {
                            $("#usb_last_import_timestamp_container").show();
                            var timestamp = getTimeStamp(last_complete_time);
                            $("#last_usb_import_date_value").text(timestamp);
                            $("#last_usb_import_time_value").text(timestamp);
                            localizeTimeStamp("#last_usb_import_date_value", "d");
                            localizeTimeStamp("#last_usb_import_time_value", "t");
                        } else {
                            $("#usb_last_import_timestamp_container").hide();
                        }
                    } else {
                        usbJobInProgress = false;
                        var usbSrcPath = "/" + usbData[currentUSBCopyMoveDevice].shareName;
                        for (var i in data.jobs.job) {
                            var status = data.jobs.job[i].status.toLowerCase();
                            if (typeof (data.jobs.job[i].task_details.src_path) != undefined) {
                                var currentSrcPath = data.jobs.job[i].task_details.src_path;
                                if (currentSrcPath === usbSrcPath) {
                                    if (status != "completed") {
                                        usbJobInProgress = true;
                                    }
                                }
                            }
                        }
                        if (usbJobInProgress) {
                            $("#usb_transfer_in_progress_container").show();
                            updateUSBTransferProgress(data.jobs.job[i]);
                            if ($("#usb_media_transfer").is(":visible")) {
                                setTimeout(checkUsbTransferProgress, 1000);
                            }
                        }
                    }
                    showHideUSBImportNowButton();
                }
            }
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            usbJobPollInProgress = false;
            $("#usb_transfer_progress_form").restForm("processFormComplete", jqXHR, textStatus);
        }
    });
    $("#importing_usb_content_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 530,
        minHeight: 240,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#importing_usb_content_dialog").attr("title") + "</div>"
    });
    $("#usb_automatic_transfer_switch").click(function() {
        $("#usb_automatic_transfer_form").submit();
    });
    $("#importing_usb_content_dialog_ok_button").click(function() {
        $("#importing_usb_content_dialog").dialog("close");
    });
    $("#usb_copy_move_now_button").click(function() {
        var r = $.Deferred();
 		//updateCountHandler.startPolling();
 			if (typeof usbData[currentUSBCopyMoveDevice] !== "undefined") {
	            if (usbData[currentUSBCopyMoveDevice].shareName === "") {
	                showError("no_usb_error")
	            } else {
	                $("#usb_copy_move_now_button").submit()
	            }
	        } else {
	            showError("no_usb_error")
	        }
	        r.resolve();
    });
    $("#cancel_usb_transfer_button").click(function() {
        if (usbJobInProgress && usbData[currentUSBCopyMoveDevice].jobID != null ) {
            $("#cancel_usb_transfer_button").addClass("ui-state-disabled");
            $("#usb_transfer_cancel").submit();
        }
    });
    var usb_location = dictionaryList["usb_location"].replace("{0}", "<b><i>USB Imports</i></b>");
    $("#usb_transfer_location").html(usb_location.replace());
    initUSB();
});
function showUsbTransferFailed(data) {
    if (data.error_code != null  && data.error_code != "") {
        showError("get_jobs_" + data.error_code);
    } else {
        if (data.error_message != null  && data.error_message != "") {
            showError("", data.error_message);
        } else {
            showError("get_jobs_unk");
        }
    }
}
function checkUsbTransferProgress() {
	if (usbJobPollInProgress || (typeof usbData[currentUSBCopyMoveDevice] === "undefined")) {
		$("#usb_last_import_timestamp_container").hide();
        return;
    }
    $("#usb_transfer_progress_form").submit();
}
function updateUSBTransferProgress(data) {
    $("#usb_transfer_now_button_container").hide();
    $("#usb_transfer_in_progress_container").show();
    $("#usb_transfer_completed_container").hide();
    $("#usb_transfer_inprogress_container").show();
    var complete_work = 0;
    var total_work = 0;
    var progressPercent = 0;
    if (data.complete_work != null  && data.complete_work != "") {
        complete_work = parseInt(data.complete_work);
    }
    if (data.total_work != null  && data.total_work != "") {
        total_work = parseInt(data.total_work);
    }
    if (total_work > 0) {
        progressPercent = Math.round(complete_work / total_work * 100);
    }
    $("#usb_transfer_progressbar").progressbar("value", progressPercent);
    var progressTxt = dictionaryList["importing_x_of_y"].replace("{0}", ByteSize(complete_work));
    progressTxt = progressTxt.replace("{1}", ByteSize(total_work));
    $("#usb_transfer_progress").html(progressTxt);
}
function initUSBTransferProgress() {
    if (typeof usbData[currentUSBCopyMoveDevice] !== "undefined") {
        usbData[currentUSBCopyMoveDevice].jobID = null ;
    }
    usbJobInProgress = false;
    usbJobCompletedFlag = false;
    $("#usb_transfer_in_progress_container").hide();
    $("#usb_transfer_now_button_container").hide();
    $("#usb_transfer_progressbar").progressbar({
        value: 0
    });
    var progressTxt = dictionaryList["importing_x_of_y"].replace("{0}", "0");
    progressTxt = progressTxt.replace("{1}", "0");
    $("#usb_transfer_progress").html(progressTxt);
    checkUsbTransferProgress();
    showHideUSBImportNowButton();
}
function showHideUSBImportNowButton() {
    if (automaticUsbImport == false && usbJobInProgress == false) {
        $("#usb_transfer_now_button_container").show();
    } else {
        $("#usb_transfer_now_button_container").hide();
    }
}
function checkUSBTransferStarted() {
    var status;
    $.ajaxAPI({
        "url": "jobs" + "/" + usbData[currentUSBCopyMoveDevice].jobID,
        "success": function(data) {
        	if (data != null && data.jobs != null ) {
                if (Object.prototype.toString.call(data.jobs.job) != "[object Array]") {
                    data.jobs.job = $.makeArray(data.jobs.job);
                }
                for (var i in data.jobs.job) {
                    status = data.jobs.job[i].status.toLowerCase();
                    var usbSrcPath = "/" + usbData[currentUSBCopyMoveDevice].shareName;
                    if (typeof (data.jobs.job[i].task_details.src_path) != "undefined") {
                        var currentSrcPath = data.jobs.job[i].task_details.src_path;
                        if (currentSrcPath === usbSrcPath) {
                            if (status == "running") {
                                usbJobInProgress = true;
                                $("#importing_usb_content_dialog").dialog("open");
                                setTimeout(checkUsbTransferProgress, 2500);
                            } else {
                                if (status == "waiting") {
                                    setTimeout(checkUSBTransferStarted, 5000);
                                } else {
                                    if (status == "completed") {
                                        usbData[currentUSBCopyMoveDevice].jobID = null ;
                                        showHideUSBImportNowButton();
                                    } else {
                                        if (status == "failed") {
                                            usbData[currentUSBCopyMoveDevice].jobID = null ;
                                            showUsbTransferFailed(data.jobs.job[i]);
                                            showHideUSBImportNowButton();
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return;
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            if (status != "waiting") {
                hideLoading();
                $("#usb_copy_move_now_button").removeClass("ui-state-disabled");
            }
        }
    });
}
function addUSBtoList(data) {
    var storageType;
    if (data.volumes.volume.shares != undefined) {
        storageType = data.volumes.volume.storage_type.toLowerCase();
        if (storageType == "usb") {
            usbData[usbDevices] = {
                "shareName": data.volumes.volume.shares.share,
                "jobID": ""
            };
            usbDevices++;
        }
    } else {
        for (var volume = 0; volume < data.volumes.volume.length; volume++) {
            storageType = data.volumes.volume[0].storage_type.toLowerCase();
            if (storageType == "usb") {
                usbData[usbDevices] = {
                    "shareName": data.volumes.volume[volume].shares.share,
                    "jobID": ""
                };
                usbDevices++;
            }
        }
    }
}
function initUSB(useQueue) {
    if (updateCountHandler != null ) {
        updateCountHandler.subscribe("usb_update_count", function() {
            $("#external_devices_form").restForm("refreshForm", false);
        });
    }
    usbData[currentUSBCopyMoveDevice] = {
        "shareName": "",
        "jobID": ""
    };
}
var sdAutomaticImport = false;
var sdJobPollInProgress = false;
var sdcardJobInProgress = false;
var sdJobCompletedFlag = false;
var sdcardrunning = false;
var sdcardData = new Array();
var currentSDCopyMoveDevice = 0;
var sdCardDevices = 0;
$(document).ready(function() {
    $("#sdcard_transfer_cancel").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            $("#sdcard_transfer_cancel").attr("action", $("#sdcard_transfer_progress_default_form").attr("action") + "/" + sdcardData[currentSDCopyMoveDevice].jobID);
        },
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            hideLoading();
            $("#cancel_sdcard_transfer_button").show();
            setTimeout(checkSDCardTransferProgress, 1);
            currentSDCopyMoveDevice = 0;
        },
        "processFormErrorCallback": function(request, status, error) {
            hideLoading();
            $("#cancel_sdcard_transfer_button").show();
        }
    });
    $("#sdcard_automatic_transfer_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            if (!$("#sdcard_automatic_transfer_switch").is(":checked")) {
                $("#scard_auto_transfer_field").val("true");
                $("#scard_transfer_now_button_container").hide()
            } else {
                $("#scard_auto_transfer_field").val("false");
                $("#scard_transfer_now_button_container").show()
            }
        },
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.sdcard.auto_transfer == "true") {
                $("#sdcard_automatic_transfer_switch").attr("checked", true);
                sdAutomaticImport = true;
            } else {
                $("#sdcard_automatic_transfer_switch").attr("checked", false);
                sdAutomaticImport = false;
            }
            showHideImportNowButton()
        },
        "processFormSuccessCallback": function(data) {
            if ($("#sdcard_automatic_transfer_switch").is(":checked")) {
                sdAutomaticImport = true;
            } else {
                sdAutomaticImport = false;
            }
            showHideImportNowButton();
        }
    });
    $("#sdcard_automatic_transfer_onboarding_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            if (!$("#sdcard_automatic_transfer_onboarding_switch").is(":checked")) {
                $("#scard_auto_transfer_onboarding_field").val("true");
            } else {
                $("#scard_auto_transfer_onboarding_field").val("false");
            }
        },
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.sdcard.auto_transfer == "true") {
                $("#scard_auto_transfer_onboarding_field").val("true");
                $("#sdcard_automatic_transfer_onboarding_switch").attr("checked", true);
                sdAutomaticImport = true;
            } else {
                $("#scard_auto_transfer_onboarding_field").val("false");
                $("#sdcard_automatic_transfer_onboarding_switch").attr("checked", false);
                sdAutomaticImport = false;
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#sdcard_automatic_transfer_onboarding_switch").is(":checked")) {
                sdAutomaticImport = true;
            } else {
                sdAutomaticImport = false;
            }
        }
    });
    $("#sdcard_after_transfer_form").restForm({
        "useStubs": false,
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.sdcard.transfer_mode == "copy") {
                $("#settings_sdcard_transfer_copy_mode_button").addClass("button-selected");
                $("#settings_sdcard_transfer_move_mode_button").removeClass("button-selected");
                $("#copy_move_now_button").val(dictionaryList["copy_now"]);
            } else {
                $("#settings_sdcard_transfer_move_mode_button").addClass("button-selected");
                $("#settings_sdcard_transfer_copy_mode_button").removeClass("button-selected");
                $("#copy_move_now_button").val(dictionaryList["move_now"]);
            }
        },
        "processFormSuccessCallback": function(data) {
            if ($("#settings_sdcard_transfer_mode").val() == "copy") {
                $("#settings_sdcard_transfer_copy_mode_button").addClass("button-selected");
                $("#settings_sdcard_transfer_move_mode_button").removeClass("button-selected");
                $("#copy_move_now_button").val(dictionaryList["copy_now"]);
            } else {
                $("#settings_sdcard_transfer_move_mode_button").addClass("button-selected");
                $("#settings_sdcard_transfer_copy_mode_button").removeClass("button-selected");
                $("#copy_move_now_button").val(dictionaryList["move_now"]);
            }
        }
    });
    $("#settings_sdcard_transfer_copy_mode_button").click(function() {
        $("#settings_sdcard_transfer_mode").val("copy");
        $("#sdcard_after_transfer_form").submit();
    });
    $("#settings_sdcard_transfer_move_mode_button").click(function() {
        $("#settings_sdcard_transfer_mode").val("move");
        $("#sdcard_after_transfer_form").submit();
    });
    $("#sdcard_transfer_now").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            var transferAction = $("#sdcard_transfer_now").find('input[id="sdcard_auto_transfer_action_value"]').val();
            $("#sdcard_transfer_now").attr("action", transferAction + "/" + sdcardData[currentSDCopyMoveDevice].shareName);
        },
        "processFormSuccessCallback": function(data, textStatus, jqXHR) {
            hideLoading();
            var transferAction = $("#sdcard_transfer_now").find('input[id="sdcard_auto_transfer_action_value"]').val();
            $("#sdcard_transfer_now").attr("action", transferAction);
            if (data != null  && data.storage_active_transfer != null  && data.storage_active_transfer.job_id != null ) {
                sdcardData[currentSDCopyMoveDevice].jobID = data.storage_active_transfer.job_id;
                setTimeout(checkSDCardTransferStarted, 10);
            }
        },
        "processFormErrorCallback": function(request, status, error) {
            hideLoading();
            $("#copy_move_now_button").removeClass("ui-state-disabled");
            $("#sdcard_transfer_now").restForm("processFormError", request, status, error);
        },
        "hideProcessingCallback": function() {}
    });
    $("#sdcard_automatic_transfer_switch").click(function() {
        $("#sdcard_automatic_transfer_form").submit();
    });
    $("#sdcard_automatic_transfer_onboarding_switch").click(function() {
        $("#sdcard_automatic_transfer_onboarding_form").submit();
    });
    $("#sdcard_transfer_progress_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            sdJobPollInProgress = true;
            if ((sdcardData[currentSDCopyMoveDevice].jobID != null ) && (sdcardData[currentSDCopyMoveDevice].jobID != "" )) {
                $("#sdcard_transfer_progress_form").attr("action", $("#sdcard_transfer_progress_default_form").attr("action") + "/" + sdcardData[currentSDCopyMoveDevice].jobID);
            } else if (sdcardData[currentSDCopyMoveDevice].jobID != "" ) {
            	$("#sdcard_transfer_progress_form").attr("action", $("#sdcard_transfer_progress_default_form").attr("action"));
            } else {
            	$("#sdcard_transfer_progress_form").attr("action", $("#sdcard_transfer_progress_default_form").attr("action"));
            }
        },
        "showProcessingCallback": function() {},
        "hideProcessingCallback": function() {},
        "setDefaultFormDataCallback": function(data) {
            if (data != null  && data.jobs != null ) {
                if (Object.prototype.toString.call(data.jobs.job) != "[object Array]") {
                    data.jobs.job = $.makeArray(data.jobs.job);
                }
                if (sdcardJobInProgress) {
                    for (var i in data.jobs.job) {
                        var status = data.jobs.job[i].status.toLowerCase();
                        if (status == "running" || status == "waiting") {
                        	sdcardrunning = true;
                        	$("#usb_copy_move_now_button").addClass("ui-state-disabled");
                            updateSDCardTransferProgress(data.jobs.job[i]);
                            if ($("#sd_card_media_transfer").is(":visible")) {
                                setTimeout(checkSDCardTransferProgress, 5000);
                            }
                        } else {
                            if ((status == "completed") && (!sdJobCompletedFlag)) {
                            	currentSDCopyMoveDevice++;
                            	if (typeof sdcardData[currentSDCopyMoveDevice] !== "undefined" &&
									sdcardData[currentSDCopyMoveDevice].shareName != "") {
									$("#sdcard_transfer_now").submit();
								}
								else { 
	                            	$("#usb_copy_move_now_button").removeClass("ui-state-disabled");
	                                sdJobCompletedFlag = true;
	                                var complete_work = 0;
	                                if (data.jobs.job[i].complete_work != null  && data.jobs.job[i].complete_work != "") {
	                                    complete_work = parseInt(data.jobs.job[i].complete_work);
	                                }
	                                var msg = dictionaryList["successful_import_x_bytes"].replace("{0}", ByteSize(complete_work));
	                                $("#sdcard_transfer_progressbar_completed_result").text(msg);
	                                $("#sdcard_transfer_completed_container").show();
	                                $("#sdcard_transfer_inprogress_container").hide();
	                                currentSDCopyMoveDevice = 0;
	                            }
                                if ($("#sd_card_media_transfer").is(":visible")) {
                                    setTimeout(checkSDCardTransferProgress, 5000);
                                }
                            } else {
                            	if (status == "canceled") {
            						$("#cancel_sdcard_transfer_button").click();
            						$("#usb_copy_move_now_button").removeClass("ui-state-disabled");
        						}
                                $("#sdcard_transfer_in_progress_container").hide();
                                sdcardJobInProgress = false;
                                //sdJobCompletedFlag = false;
                                sdcardData[currentSDCopyMoveDevice].jobID = null ;
                                if (status == "failed" && sdcardrunning == true) {
                                	sdcardrunning = false;
                                    showSDCardTransferFailed(data.jobs.job[i]);
                                }
                                
                                showHideImportNowButton();
                                
                                if (($("#sd_card_media_transfer").is(":visible")) && (sdJobCompletedFlag)) {
                                	sdJobCompletedFlag = false;
	                                setTimeout(checkSDCardTransferProgress, 5000);
	                            }
                                setTimeout(checkUsbTransferProgress, 1000);
                            }
                        }
                    }
                } else {
                    var last_complete_time = 0;
                    var complete_time = 0;
                    for (var i in data.jobs.job) {
                        var status = data.jobs.job[i].status.toLowerCase();
                        var sdcardSrcPath = "/" + sdcardData[currentSDCopyMoveDevice].shareName;
                        if (typeof (data.jobs.job[i].task_details.src_path) != "undefined") {
                            var currentSrcPath = data.jobs.job[i].task_details.src_path;
                            if (currentSrcPath === sdcardSrcPath) {
                                if (status == "running" || status == "waiting") {
                                    sdcardData[currentSDCopyMoveDevice].jobID = data.jobs.job[i].job_id;
                                } else {
                                    if (data.jobs.job[i].complete_time != null  && data.jobs.job[i].complete_time != "") {
                                        complete_time = parseInt(data.jobs.job[i].complete_time);
                                    }
                                    if (complete_time > last_complete_time) {
                                        last_complete_time = complete_time;
                                    }
                                }
                            }
                        }
                    }
                    if (sdcardData[currentSDCopyMoveDevice].jobID == null ) {
                        $("#sdcard_transfer_in_progress_container").hide();
                        if (last_complete_time != 0) {
                            $("#last_import_timestamp_container").show();
                            var timestamp = getTimeStamp(last_complete_time);
                            $("#last_import_date_value").text(timestamp);
                            $("#last_import_time_value").text(timestamp);
                            localizeTimeStamp("#last_import_date_value", "d");
                            localizeTimeStamp("#last_import_time_value", "t");
                        } else {
                            $("#last_import_timestamp_container").hide();
                        }
                    } else {
                        sdcardJobInProgress = false;
                        var sdcardSrcPath = "/" + sdcardData[currentSDCopyMoveDevice].shareName;
                        for (var i in data.jobs.job) {
                            var status = data.jobs.job[i].status.toLowerCase();
                            if (typeof (data.jobs.job[i].task_details.src_path) != "undefined") {
                                var currentSrcPath = data.jobs.job[i].task_details.src_path;
                                if (currentSrcPath === sdcardSrcPath) {
                                    if (status != "completed") {
                                        sdcardJobInProgress = true;
                                    }
                                }
                            }
                        }
                        if (sdcardJobInProgress) {
                            $("#sdcard_transfer_in_progress_container").show();
                            updateSDCardTransferProgress(data.jobs.job[i]);
                            if ($("#sd_card_media_transfer").is(":visible")) {
                                setTimeout(checkSDCardTransferProgress, 1000);
                            }
                        }
                    }
                    showHideImportNowButton();
                }
            }
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            sdJobPollInProgress = false;
            $("#sdcard_transfer_progress_form").restForm("processFormComplete", jqXHR, textStatus);
        }
    });
    $(document).on("external_devices::refresh", function(event, data) {
        sdcardData.length = 0;
        sdCardDevices = 0;
        if (data != null  && data.usb_drives != null ) {
            if (data.usb_drives.usb_drive != null  && data.usb_drives.usb_drive.name != null ) {
                addSdCardtoList(data.usb_drives.usb_drive);
            } else {
                for (var i in data.usb_drives.usb_drive) {
                    addSdCardtoList(data.usb_drives.usb_drive[i]);
                }
            }
        }
    });
    $("#importing_sdcard_content_dialog").dialog({
        autoOpen: false,
        resizable: false,
        width: 530,
        minHeight: 240,
        dialogClass: "mochi_dialog mochi_dialog_support",
        modal: true,
        stack: false,
        title: '<div class="wizard_dialog_title">' + $("#importing_sdcard_content_dialog").attr("title") + "</div>"
    });
    $("#importing_sdcard_content_dialog_ok_button").click(function() {
        $("#importing_sdcard_content_dialog").dialog("close");
    });
    $("#copy_move_now_button").click(function() {
        var r = $.Deferred();
 		//updateCountHandler.startPolling();
			if (typeof sdcardData[currentSDCopyMoveDevice] !== "undefined") {
				if (sdcardData[currentSDCopyMoveDevice].shareName === "") {
					showError("no_sd_card_error")
				} else {
					$("#sdcard_transfer_now").submit()
				}
			} else {
				showError("no_sd_card_error")
			}
	        r.resolve();
    });
    $("#cancel_sdcard_transfer_button").click(function() {
        if (sdcardJobInProgress && sdcardData[currentSDCopyMoveDevice].jobID != null ) {
            $("#cancel_sdcard_transfer_button").hide();
            $("#sdcard_transfer_cancel").submit();
        }
    });
    var sd_card_location = dictionaryList["sd_card_location"].replace("{0}", "<b><i>SD Card Imports</i></b>");
    $("#sdcard_transfer_location").html(sd_card_location.replace());
    $(document).on("media::navigation", function(event) {
        initSDCardTransferProgress();
    });
    initSDCard();
});
function addSdCardtoList(data) {
    var storageType;
    if (data.volumes.volume.shares != undefined) {
        storageType = data.volumes.volume.storage_type.toLowerCase(); 
        if (storageType == "sdcard") {
            sdcardData[sdCardDevices] = {
                "shareName": data.volumes.volume.shares.share,
                "jobID": ""
            };
            sdCardDevices++;
        }
    } else {
        for (var volume = 0; volume < data.volumes.volume.length; volume++) {
            storageType = data.volumes.volume[0].storage_type.toLowerCase();
            if (storageType == "sdcard") {
                sdcardData[sdCardDevices] = {
                    "shareName": data.volumes.volume[volume].shares.share,
                    "jobID": ""
                };
                sdCardDevices++;
            }
        }
    }
}
function checkSDCardTransferProgress() {
    if (sdJobPollInProgress || (typeof sdcardData[currentSDCopyMoveDevice] === "undefined")) {
    	$("#last_import_timestamp_container").hide();
        return;
    }
    $("#sdcard_transfer_progress_form").submit();
}
function checkSDCardTransferStarted() {
    var status;
    $.ajaxAPI({
        "url": "jobs" + "/" + sdcardData[currentSDCopyMoveDevice].jobID,
        "success": function(data) {
            if (data != null  && data.jobs != null ) {
                if (Object.prototype.toString.call(data.jobs.job) != "[object Array]") {
                    data.jobs.job = $.makeArray(data.jobs.job);
                }
                for (var i in data.jobs.job) {
                    status = data.jobs.job[i].status.toLowerCase();
                    var sdcardSrcPath = "/" + sdcardData[currentSDCopyMoveDevice].shareName;
                    if (typeof (data.jobs.job[i].task_details.src_path) != "undefined") {
                        var currentSrcPath = data.jobs.job[i].task_details.src_path;
                        if (currentSrcPath === sdcardSrcPath) {
                            if (status == "running") {
                                sdcardJobInProgress = true;
                                $("#importing_sdcard_content_dialog").dialog("open");
                                setTimeout(checkSDCardTransferProgress, 500);
                            } else {
                                if (status == "waiting") {
                                    setTimeout(checkSDCardTransferStarted, 5000);
                                } else {
                                    if (status == "completed") {
                                        sdcardData[currentSDCopyMoveDevice].jobID = null ;
                                        showHideImportNowButton();
                                    } else {
                                        if (status == "failed") {
                                            sdcardData[currentSDCopyMoveDevice].jobID = null ;
                                            showSDCardTransferFailed(data.jobs.job[i]);
                                            showHideImportNowButton();
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return;
                }
            }
        },
        "complete": function(jqXHR, textStatus) {
            if (status != "waiting") {
                hideLoading();
                $("#copy_move_now_button").removeClass("ui-state-disabled");
            }
        }
    });
}
function showSDCardTransferFailed(data) {
    if (data.error_code != null  && data.error_code != "") {
        showError("get_jobs_" + data.error_code);
    } else {
        if (data.error_message != null  && data.error_message != "") {
            showError("", data.error_message);
        } else {
            showError("get_jobs_unk");
        }
    }
}
function initSDCardTransferProgress() {
    if (typeof sdcardData[currentSDCopyMoveDevice] !== "undefined") {
        sdcardData[currentSDCopyMoveDevice].jobID = null ;
    }
    sdcardJobInProgress = false;
    sdJobCompletedFlag = false;
    $("#sdcard_transfer_in_progress_container").hide();
    $("#sdcard_transfer_now_button_container").hide();
    $("#sdcard_transfer_progressbar").progressbar({
        value: 0
    });
    var progressTxt = dictionaryList["importing_x_of_y"].replace("{0}", "0");
    progressTxt = progressTxt.replace("{1}", "0");
    $("#sdcard_transfer_progress").html(progressTxt);
    checkSDCardTransferProgress();
    showHideImportNowButton();
}
function updateSDCardTransferProgress(data) {
    $("#sdcard_transfer_now_button_container").hide();
    $("#sdcard_transfer_in_progress_container").show();
    $("#sdcard_transfer_completed_container").hide();
    $("#sdcard_transfer_inprogress_container").show();
    var complete_work = 0;
    var total_work = 0;
    var progressPercent = 0;
    if (data.complete_work != null  && data.complete_work != "") {
        complete_work = parseInt(data.complete_work);
    }
    if (data.total_work != null  && data.total_work != "") {
        total_work = parseInt(data.total_work);
    }
    if (total_work > 0) {
        progressPercent = Math.round(complete_work / total_work * 100);
    }
    $("#sdcard_transfer_progressbar").progressbar("value", progressPercent);
    var progressTxt = dictionaryList["importing_x_of_y"].replace("{0}", ByteSize(complete_work));
    progressTxt = progressTxt.replace("{1}", ByteSize(total_work));
    $("#sdcard_transfer_progress").html(progressTxt);
}
function showHideImportNowButton() {
    if (sdAutomaticImport == false && sdcardJobInProgress == false) {
        $("#sdcard_transfer_now_button_container").show();
        currentSDCopyMoveDevice = 0;
    } else {
        $("#sdcard_transfer_now_button_container").hide();
    }
}
function initSDCard(useQueue) {	
    if (updateCountHandler != null ) {
        updateCountHandler.subscribe("sd_card_update_count", function() {
            $("#external_devices_form").restForm("refreshForm", false);
        });
    }
    sdcardData[currentSDCopyMoveDevice] = {
        "shareName": "",
        "jobID": ""
    };
}
$(document).ready(function() {
    $("#external_devices_form").restForm({
        "refreshDataCallback": function(data) {
            $("#external_devices_form").restForm("_refreshData", data);
            $(document).trigger("external_devices::refresh", data);
        	if($('#media_container').is(":visible")) {
        		setTimeout(function() {
		            checkSDCardTransferProgress();
		            checkUsbTransferProgress();
	            }, 6000);
			} 
        }
    });
    initExternalDevices();
});
function initExternalDevices(useQueue, refreshData) {
    $("#external_devices_form").restForm("refreshForm", refreshData);
}
$(document).ready(function() {
    $(document).on("wifi_details_connectivity::refresh", function(event, selectedWifi) {
        var wifi_both = dictionaryList["wifi_both_GHZ_title"];
        $("<option value='" + wifi_both + "'>" + wifi_both + "</option>").appendTo("#wifi_edit_config_form_activity_network");
        $("#wifi_edit_config_form_activity_network").selectmenu();
        var legal_selectedWifi = selectedWifi.replace(/\"|\'|\+/);
        //selector_string.replace(/(\(|\))/g,"\\$1??;
        $('#wifi_edit_config_form_activity_network option[value="' + legal_selectedWifi + '"]').each(function() {
            $("#wifi_edit_config_form_security_mode_select").selectmenu("value", selectedWifi);
        });
    });
});
$(document).ready(function() {
    var copyProgressItem = "";
    var currentJobId = 0;
    $(document).on("external_devices::refresh", function(event, data) {
        var usbDevices = 0;
        if (data != null  && data.usb_drives != null ) {
        	$("ul#usb_device_list li").not("li:first").remove();
            if (data.usb_drives.usb_drive != null  && data.usb_drives.usb_drive.name != null ) {
                if ($("#usb_handle_" + data.usb_drives.usb_drive.handle).length == 0) {
                    addAllVolumestoList(data.usb_drives.usb_drive);
                }
                usbDevices++;
            } else {
                for (var i in data.usb_drives.usb_drive) {
                    if ($("#usb_handle_" + data.usb_drives.usb_drive[i].handle).length == 0) {
                        addAllVolumestoList(data.usb_drives.usb_drive[i]);
                    }
                    usbDevices++;
                }
            }
            if (usbDevices == 0) {
                $("#no_usb_devices_found_container").show();
                //$("#devices_link").addClass("usb_devices_none");
            } else {
                $("#no_usb_devices_found_container").hide();
                //$("#devices_link").removeClass("usb_devices_none");
            }
        }
    });
    $("#unlock_usb_device_form").restForm();
    $("#devices_link").click(function(e) {
        e.preventDefault();
        e.stopPropagation();
        checkOtherToolbarItems("devices_link");
        deviceButtonSelected();
        if ($("#devices_link").hasClass("selected")) {
            $("#devices_link").removeClass("selected");
        } else {
            $("#devices_link").addClass("selected");
        }
    });
    toolbarItems.devices_link = function() {
        deviceButtonSelected();
        $("#devices_link").removeClass("selected");
    }
    ;
    $(document).click(function(event) {
        if ($(event.target).parents().index($("#usb_device_list_container")) == -1 && $("#devices_link").hasClass("selected")) {
            deviceButtonSelected();
            $("#devices_link").removeClass("selected");
        }
    });
    $(".usb_device_info").live("click", function(e) {
        e.preventDefault();
        deviceContainerSelected($(this).parent().parent());
        return false;
    });
    $(".usb_device_unlock").live("click", function(e) {
        e.preventDefault();
        usb_id = $(this).parent().attr("rel");
        password_hint = $(this).parent().parent().find(".usb_password_hint").html();
        $("#usb_handle").val(usb_id);
        $("#usb_password_hint").html(password_hint);
        $("#usb_password_hint_link").show();
        $("#usb_password_hint_container").hide();
        $("#unlock_usb").dialog("open");
        return false;
    });
    $(".usb_device_eject").live("click", function(e) {
        e.preventDefault();
        usb_id = $(this).parent().attr("rel");
        var multi_partition_check = $("li[id=usb_handle_" + usb_id + "]").length;
        var external_device_share_name = $(this).parents("li").find(".usb_model").text();
        $("#confirm_eject_usb").data("usb_id", usb_id).dialog("open");
        if(multi_partition_check > 1)
            $("#multi_partition_note").show();
        else
            $("#multi_partition_note").hide();
        $("#eject_external_device_title").text(dictionaryList["ejectExternalDeviceTitle"].replace("{0}", external_device_share_name));
        $("#ejectDriveHeader").text(dictionaryList["ejectExternalDeviceHeader"].replace("{0}", external_device_share_name));
        return false;
    });
    $("#confirm_eject_usb").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 400,
        minHeight: 301,
        dialogClass: "mochi_dialog mochi_dialog_warning",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title" id="eject_external_device_title">' + $("#confirm_eject_usb").attr("title") + "</div>"
    });
    $("#confirm_eject_usb_cancel_button").click(function() {
        $("#confirm_eject_usb").dialog("close");
    });
    $("#confirm_eject_usb_ok_button").click(function() {
        $("#confirm_eject_usb").dialog("close");
        ejectUSB($("#confirm_eject_usb").data("usb_id"));
    });
    $("#usb_details_dialog").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 600,
        minHeight: 300,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#usb_details_dialog").attr("title") + "</div>"
    });
    $("#usb_details_cancel_button").click(function() {
        $("#usb_details_dialog").dialog("close");
    });
    $("#unlock_usb").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: 600,
        minHeight: 300,
        dialogClass: "mochi_dialog mochi_dialog_info",
        modal: true,
        stack: true,
        title: '<div class="wizard_dialog_title">' + $("#unlock_usb").attr("title") + "</div>"
    });
    $("#unlock_usb_cancel_button").click(function() {
        $("#unlock_usb").dialog("close");
    });
    $("#unlock_usb_ok_button").click(function() {
        unlockUSB();
        $("#unlock_usb").dialog("close");
    });
    $("#usb_password_hint_link").live("click", function() {
        $("#usb_password_hint_container").show();
        $("#usb_password_hint_link").hide();
    });
    $("#usb_device_list").on("click", ".devices_copy_link", function(e) {
        var copySharename = $(this);
        copyProgressItem = copySharename.parents().find("#usb_device_container_" + copySharename.attr("data-volume-id"));
        $.ajaxAPI({
            "url": "storage_active_transfer/" + copySharename.attr("data-sharename"),
            "data": {
                "async": true
            },
            "type": "POST",
            "timeout": ajaxTimeout,
            "success": function(data, textStatus, jqXHR) {
                currentJobId = data.storage_active_transfer.job_id;
                copySharename.attr("data-jobid", currentJobId);
                var checkExternalDeviceJobProgress = checkExternalDevicesTransferProgress(copyProgressItem, currentJobId);
                //setTimeout(checkExternalDevicesTransferProgress(copyProgressItem, currentJobId), 5000);                
            },
            "complete": function() {
                setCopyNowProgress(copyProgressItem);
            }
        });
    });
    $("#usb_device_list").on("click", ".external_device_transfer_cancel_button", function(e) {
        $.ajaxAPI({
            "url": "jobs/" + currentJobId,
            "data": {
                "action": "cancel"
            },
            "type": "PUT",
            "timeout": ajaxTimeout,
            "complete": function() {
                generalDropdownIdleState();
            }
        });
    });
    $("#plex_automatic_transfer_onboarding_switch").attr("value",true);
});
function generalDropdownIdleState() {
    $(".devices_copy_link").show();
    $(".external_device_transfer_completed_container_dropdown").hide();
    $(".external_device_transfer_inprogress_container_dropdown").hide();
    $(".usb_functions_container").show();
    $(".external_device_copy_now_progress_container").hide();
}
function returnDropdownIdleState(externalDeviceItem) {
    $(".devices_copy_link").show();
    externalDeviceItem.find(".external_device_transfer_completed_container_dropdown").hide();
    externalDeviceItem.find(".external_device_transfer_inprogress_container_dropdown").hide();
    externalDeviceItem.find(".usb_functions_container").show();
    externalDeviceItem.find(".external_device_copy_now_progress_container").hide();
    currentJobId = 0;
    copyProgressItem = "";
}
function deviceButtonSelected() {
    $("#usb_device_list_container").toggle();
    if (($("#device_button")).hasClass("selected")) {
        $("#device_button").removeClass("selected");
    } else {
        $("#device_button").addClass("selected");
    }
}
function deviceContainerSelected(selectedUsb) {
    $("#details_usb_name").html(selectedUsb.find(".usb_device_name").html());
    $("#details_usb_manufacturer").html(selectedUsb.find(".usb_manufacturer").html());
    $("#details_usb_model").html(selectedUsb.find(".usb_model").html());
    $("#details_usb_serial_number").html(selectedUsb.find(".usb_serial_number").html());
    $("#details_usb_size").html(selectedUsb.find(".usb_size").html());
    $("#usb_details_dialog").dialog("open");
    deviceButtonSelected();
    if ($("#devices_link").hasClass("selected")) {
        $("#devices_link").removeClass("selected");
    } else {
        $("#devices_link").addClass("selected");
    }
}
function addAllVolumestoList(data) {
    if (data.volumes.volume.shares != undefined) {
        var newUSB = setupListDetails(data);
        newUSB.find(".devices_copy_link").attr("data-sharename", data.volumes.volume.shares.share);
        newUSB.find(".devices_copy_link").attr("data-volume-id", data.volumes.volume.volume_id);
        newUSB.find(".usb_device_container").attr("id", "usb_device_container_" + data.volumes.volume.volume_id);
        newUSB.find(".usb_device_icon").addClass(data.volumes.volume.storage_type.toLowerCase());
        addListDetails(newUSB, data);
    } else {
        for (var volume = 0; volume < data.volumes.volume.length; volume++) {
            var newUSB = setupListDetails(data, volume);
            newUSB.find(".devices_copy_link").attr("data-sharename", data.volumes.volume[volume].shares.share);
            newUSB.find(".devices_copy_link").attr("data-volume-id", data.volumes.volume[volume].volume_id);
            newUSB.find(".usb_device_container").attr("id", "usb_device_container_" + data.volumes.volume[volume].volume_id);
            newUSB.find(".usb_device_icon").addClass(data.volumes.volume[volume].storage_type.toLowerCase());
            addListDetails(newUSB, data, volume);
        }
    }
}
function setupListDetails(data, volumeLength) {
    var newUSB = $("#usb_devices").find("ul#usb_device_list li:first").clone();
    newUSB.removeAttr("style");
    newUSB.attr("id", "usb_handle_" + data.handle);
    newUSB.find(".usb_functions_container").attr("rel", data.handle);
    if(volumeLength != null)
    	newUSB.find(".usb_device_name").html(data.volumes.volume[volumeLength].shares.share);
    else
    	newUSB.find(".usb_device_name").html(data.name);
    return newUSB;
}
function addListDetails(newUSB, data, volumeLength) {
    var capacityStr = ByteSize(data.capacity * BYTE_DIVISOR * BYTE_DIVISOR);
    if (data.lock_state.toLowerCase() == "locked") {
        newUSB.find(".usb_device_capacity_free").html(dictionaryList["DriveLockedTxt"]);
        newUSB.find(".usb_device_unlock").removeAttr("style");
        capacityStr = "Unknown (device locked)";
    } else {
		if(volumeLength != null) {
			var usageBytes = ByteSizeRound(data.volumes.volume[volumeLength].usage * BYTE_DIVISOR * BYTE_DIVISOR);
			var capacityBytes = ByteSizeRound(data.volumes.volume[volumeLength].capacity * BYTE_DIVISOR * BYTE_DIVISOR);
		}
		else {
			var usageBytes = ByteSizeRound(data.usage * BYTE_DIVISOR * BYTE_DIVISOR);
			var capacityBytes = ByteSizeRound(data.capacity * BYTE_DIVISOR * BYTE_DIVISOR);
		}
        var capacityFreeStr = ByteSize(capacityBytes - usageBytes);
		if(volumeLength != null)
			newUSB.find(".usb_device_capacity_free").html(capacityFreeStr + "&nbsp;" + dictionaryList["FreeOfTxt"] + "&nbsp;" + ByteSize(capacityBytes));
		else
			newUSB.find(".usb_device_capacity_free").html(capacityFreeStr + "&nbsp;" + dictionaryList["FreeOfTxt"] + "&nbsp;" + capacityStr);
		newUSB.find(".usb_device_unlock").hide();
	}
	
    var percentUsage = 0;
    if (data.capacity > 0) {
        percentUsage = ByteSizeRound(usageBytes / capacityBytes * 100);
    }
    newUSB.find(".usb_usage_value_bar").attr("style", "width:" + percentUsage + "%");
    newUSB.find(".usb_manufacturer").html(data.vendor);
    newUSB.find(".usb_model").html(data.model);
    newUSB.find(".usb_serial_number").html(data.serial_number);
    if(volumeLength != null)
    	newUSB.find(".usb_size").html(ByteSize(capacityBytes));
    else
    	newUSB.find(".usb_size").html(capacityStr);
    if (data.password_hint != null ) {
        newUSB.find(".usb_password_hint").html(data.password_hint);
    }
    newUSB.appendTo("#usb_device_list");
}
function unlockUSB() {
    if (validate("#unlock_usb_device_form")) {
        var password = $("#usb_password").val();
        var savePassword = false;
        var handle = $("#usb_handle").val();
        if ($("#usb_remember_password").is(":checked")) {
            savePassword = true;
        }
        displayLoading();
        $.ajaxAPI({
            "url": "usb_drive/" + handle,
            "data": {
                "drive_password": $.base64.encode(password),
                "save": savePassword,
                "encoding": "base64"
            },
            "type": "put",
            "error": function(request, status, error) {
                processAndDisplayError(request.responseText, "put_usb_drive", request.status);
            },
            "success": function(data) {
                $("#usb_devices_form").restForm("refreshForm");
            },
            "complete": function(jqXHR, textStatus) {
                hideLoading();
            }
        });
    }
}
function ejectUSB(handle) {
    displayLoading();
    $.ajaxAPI({
        "url": "usb_drive/" + handle,
        "type": "delete",
        "error": function(request, status, error) {
            processAndDisplayError(request.responseText, "delete_usb_drive", request.status);
        },
        "success": function(data) {
            $("#usb_handle_" + handle).remove();
            if ($("#usb_devices ul li:first-child").siblings().length == 0) {
                $("#no_usb_devices_found_container").show();
                //$("#devices_link").addClass("usb_devices_none");
            }
        },
        "complete": function(jqXHR, textStatus) {
            hideLoading();
        }
    });
}

var PollingData_1;
var jobData_1;
function checkTimeoutFlag() 
{
	var checkExternalDeviceJobDone = checkExternalDevicesTransferProgress(PollingData_1, jobData_1 );	
}

function checkExternalDevicesTransferProgress(externalDeviceItem, jobIDRequest) {
    var checkingExternalDevicePollingData = externalDeviceItem;
    var jobIDRequestData = jobIDRequest;
    $.ajaxAPI({
        "url": "jobs/" + jobIDRequest,
        "type": "GET",
        "success": function(data) {
            if (data != null  && data.jobs != null ) {
                if (Object.prototype.toString.call(data.jobs.job) != "[object Array]") {
                    data.jobs.job = $.makeArray(data.jobs.job);
                }
                for (var i in data.jobs.job) {
                    var status = data.jobs.job[i].status.toLowerCase();
                    if (status == "running" || status == "waiting") {
                        var complete_work = 0;
                        var total_work = 0;
                        var progressPercent = 0;
                        if (data.jobs.job[i].complete_work != null  && data.jobs.job[i].complete_work != "") {
                            complete_work = parseInt(data.jobs.job[i].complete_work);
                        }
                        if (data.jobs.job[i].total_work != null  && data.jobs.job[i].total_work != "") {
                            total_work = parseInt(data.jobs.job[i].total_work);
                        }
                        if (total_work > 0) {
                            progressPercent = Math.round(complete_work / total_work * 100);
                        }
                        setProgressBar_CopyNow(checkingExternalDevicePollingData, progressPercent);
                        PollingData_1 = checkingExternalDevicePollingData;
		 				jobData_1 = jobIDRequestData;
                        setTimeout(checkTimeoutFlag, 3000);
                        //var checkExternalDeviceJobDone = checkExternalDevicesTransferProgress(checkingExternalDevicePollingData, jobIDRequestData);
                        //setTimeout(checkExternalDevicesTransferProgress(checkingExternalDevicePollingData, jobIDRequestData), 20000);
                    } else {
                        if (status == "completed") {
                            completeCopyNowProgress(checkingExternalDevicePollingData, dictionaryList["copyingfilescompleted"]);
                        } else {
                            if (status == "failed") {
                                completeCopyNowProgress(checkingExternalDevicePollingData, dictionaryList["copyingfilesfailed"]);
                            }
                        }
                    }
                }
            } else {
                generalDropdownIdleState();
            }
        }
    });
}
function completeCopyNowProgress(deviceContainer_copyNow, statusString) {
    deviceContainer_copyNow.find(".external_device_transfer_completed_container_dropdown").text(statusString);
    deviceContainer_copyNow.find(".external_device_transfer_completed_container_dropdown").show();
    deviceContainer_copyNow.find(".external_device_transfer_inprogress_container_dropdown").hide();
    var checkExternalDeviceJobDone = returnDropdownIdleState(deviceContainer_copyNow);
    setTimeout(checkExternalDeviceJobDone, 5000);
}
function setCopyNowProgress(deviceContainer_copyNow) {
    $(".devices_copy_link").hide();
    deviceContainer_copyNow.find(".usb_functions_container").hide();
    deviceContainer_copyNow.find(".external_device_copy_now_progress_container").show();
    deviceContainer_copyNow.find(".external_device_transfer_inprogress_container_dropdown").show();
    setProgressBar_CopyNow(deviceContainer_copyNow, 0);
}
function setProgressBar_CopyNow(deviceContainer_copyNow, percentage) {
    deviceContainer_copyNow.find(".external_device_transfer_value_bar").attr("style", "width:" + percentage + "%");
    deviceContainer_copyNow.find(".external_device_transfer_inprogress_container_dropdown").text(dictionaryList["copyingfilesprogress"].replace("{0}", percentage.toString()));
}
$(document).ready(function() {
    $("#auto_system_updates_form").restForm();
    $("#enable_auto_update_toggle").bind("toggle", function(event) {
        if ($(this).is(":checked")) {
            $("#firmware_settings_setup_enable_auto_update_field").val("true");
            $("#enable_auto_update_toggle").attr("checked", true);
        } else {
            $("#firmware_settings_setup_enable_auto_update_field").val("false");
            $("#enable_auto_update_toggle").attr("checked", false);
        }
        $("#auto_system_updates_form").submit();
    });
    $("#auto_system_updates_form").restForm("refreshForm");
});
/****/

$("#create_network_password_ok_button_h, #create_network_password_skip_button_h").live("click",function(){
	$("#connect_home_network_container").hide()
	showSetupSdAutoSlurp();
});
$("#wifi_signin_success_overlay_next_button_h").on("click",function(){
      $("#wifi_signin_success_overlay_h").hide()
	      showSetupSdAutoSlurp();
})
$("#create_network_password_back_button_h").on("click",function(){
		$("#connect_home_network_container").hide();
		/*$("#create_network_security_container").show();*/
     delete_eula_grayOut();
     $("#eula_container").show();
     $("#language_toolbar").show();
})
/*plex
$("#plex_automatic_transfer_onboarding_switch").live("toggle", function() {
        if ($(this).is(":checked")) {
            $(this).siblings(".false").attr("disabled", true).addClass("ui-state-disabled");
            gMediaServerEnable = true;
            //$("#settings_dlna_database_container").show();
            //enableIdTag("#dlna_mediadb_rescan_button");
            //enableIdTag("#dlna_mediadb_rebuild_button");
        } else {
            gMediaServerEnable = false;
            $("#settings_dlna_database_container").hide();
            disableIdTag("#dlna_mediadb_rescan_button");
            disableIdTag("#dlna_mediadb_rebuild_button");
        }
        console.log("plex-39354:"+$(this.form).toString());
        $(this.form).submit();
    });
/*$("#create_network_password_ok_button_h,#create_network_password_skip_button_h").on("click",function(){
	hideCreateHomeNetwork()
	});
function hideCreateHomeNetwork() {
    $("#connect_home_network_container").hide();
    
    //showSetupPlex();//chage home network
}*/

$("#WifiEnableToggle_h").live("toggle", function(e) {
			//console.log("wifSwitch-39316");
    	
        if ($(this).is(":checked")) {
            $("#WifiEnableValue_h").val("true");
            $("#wifi_enabled_form_h").submit();
            
        } else {
            $("#WifiEnableValue_h").val("false");
            if (!gFoundMe && gTrustedNetwork) {
                $("#wifi_disable_confirmation_overlay").dialog("open");
            } else {
                $("#wifi_enabled_form_h").submit();
            }
        }
    });
function reflash_wifiListData(){
            //pollingHandler.poll();
            //updateConnectedDevices();
            //console.log("wifob-39308");
            checkWiFiEnabled_onboarding();//goto
            if (gSSIDName == "") {
                getSSIDName();
            }	
}


function checkWiFiEnabled_onboarding() {
	//console.log("wifob-39314");
    //disableIdTag(".network_separator2");
    $("#wifi_enabled_form_h").restForm("refreshForm");
    //console.log("36736");
}
function checkCurrentWifiClientConnection_onboarding() {
	//console.log("wifob-39321");
    $.ajaxAPI({
        "url": "current_wifi_client_connection",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            gConnectedNetwork = false;
            if (data != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection != null  && data.current_wifi_client_connection.ssid != null  && data.current_wifi_client_connection.ssid != "") {
                gWANSSIDName = data.current_wifi_client_connection.ssid;
                gConnectedNetwork = true;
                if (data.current_wifi_client_connection.trusted.toLowerCase() == "true") {
                    gTrustedNetwork = true;
                } else {
                    gTrustedNetwork = false;
                }
                enableIdTag(".network_separator2");
            }
            updateWifiClientConnection_onboarding(false);//goto
        },
        "error": function(request, status, error) {}
    });
}
function updateWifiClientConnection_onboarding(firstTime) {
	//console.log("wflob-39342");
    resetNetworkPage();
    //console.log("wflob-39345");
    if (!gConnectedNetwork) {
    		//console.log("wflob-39347");
        updateAvatarDevice_with_SSID(false);
    } else {
        if (firstTime) {
        	//console.log("wflob-39351");
            setTimeout("getNetworkSettings();", 5000);
        } else {
        	//console.log("wflob-39354");
            getNetworkSettings();
        }
    }
    //if (gWiFiEnabled_h) {//check wifi enable
    	//console.log("wflob-39359");
        updateWifiClientAccessPointList_onboarding();
    //}
}
function updateWifiClientAccessPointList_onboarding() {
	//console.log("wflob-39359");
    var wifi_ap_found_count = 0;
    var wifi_ap_list = {};
    var empty_flag = true;
    $("#wifi_ap_list_content_h ul li").each(function(i) {
        if (!$(this).hasClass(".default")) {
        	//console.log("wifItem-39422");
            var mac = $(this).find(".wireless_ap_mac").text();
            var ssid = $(this).find(".wireless_label_text").text();
            if (mac != "") {
                wifi_ap_list[mac] = ssid;
                empty_flag = false;
            }
        }
    });
    if (wifi_client_access_points_inprogress) {
    		//console.log("wifItem-39432");
        return;
    }
    wifi_client_access_points_inprogress = true;
    $.ajaxAPI({
        "url": "wifi_client_access_points",
        "timeout": ajaxTimeout,
        "success": function(data, textStatus, jqXHR) {
            if (data != null  && data.wifi_client_access_points != null  && data.wifi_client_access_points.wifi_ap_client_access_point != null ) {
                if (Object.prototype.toString.call(data.wifi_client_access_points.wifi_ap_client_access_point) != "[object Array]") {
                    data.wifi_client_access_points.wifi_ap_client_access_point = $.makeArray(data.wifi_client_access_points.wifi_ap_client_access_point);
                }
                $.each(data.wifi_client_access_points.wifi_ap_client_access_point, function(index, value) {
                	//console.log("wflob-39387")
                    if (value.ssid != "") {
                        var newItem = $("#wifi_ap_container_h .wifi_ap_list_item_h.default").clone();
                        var ssidName = value.ssid;
                        var ap_connected = false;
                        var newItemIdName = value.ssid;
                        var signal_strength = parseInt(value.signal_strength);
                        if (value.connected.toLowerCase() == "true") {
                            ap_connected = true;
                            newItem.find(".wireless_label_text").addClass("ap_connected");
                            newItem.find(".wifi_ap_list_item_icon").addClass("icon_ap_connected");
                            newItem.addClass("connected");
                        }
                        if ((value.wps_enabled != null ) && (value.wps_enabled.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_wps");
                        }
                        if ((value.remembered != null ) && (value.remembered.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_remembered");
                            if ((value.trusted != null ) && (value.trusted.toLowerCase() == "true")) {
                                newItem.find(".wireless_info").addClass("ap_trusted");
                            }
                        }
                        if (value.dhcp_enabled.toLowerCase() == "false") {
                            newItem.find(".wireless_info").addClass("dhcp_disabled");
                        }
                        if (value.mac_clone_enable.toLowerCase() == "true") {
                            newItem.find(".wireless_info").addClass("mac_cloned");
                        }
                        if (value.dns0 == "--dns1") {
                            value.dns0 = "";
                        }
                        if (value.dns1 == "--dns2") {
                            value.dns1 = "";
                        }
                        if (value.dns2 == "--dns3") {
                            value.dns2 = "";
                        }
                        newItem.find(".wireless_client_ip").text(value.ip);
                        newItem.find(".wireless_client_netmask").text(value.netmask);
                        newItem.find(".wireless_client_gateway").text(value.gateway);
                        newItem.find(".wireless_client_dns0").text(value.dns0);
                        newItem.find(".wireless_client_dns1").text(value.dns1);
                        newItem.find(".wireless_client_dns2").text(value.dns2);
                        newItem.find(".wireless_label_text").text(ssidName);
                        newItem.removeClass("default");
                        newItem.find(".wireless_ap_ssid").text(value.ssid);
                        newItem.find(".wireless_ap_mac").text(value.mac);
                        newItem.find(".wireless_ap_security_mode").text(value.security_mode);
                        if ((value.secured != null ) && (value.secured.toLowerCase() == "true")) {
                            newItem.find(".wireless_info").addClass("ap_secured");
                        } else {
                            newItem.find(".wireless_lock").addClass("wireless_unlock").removeClass("wireless_lock");
                        }
                        if (signal_strength > 90) {
                            newItem.find(".wireless_strength").addClass("wireless_strength_5bars");
                        } else {
                            if (signal_strength > 70) {
                                newItem.find(".wireless_strength").addClass("wireless_strength_4bars");
                            } else {
                                if (signal_strength > 50) {
                                    newItem.find(".wireless_strength").addClass("wireless_strength_3bars");
                                } else {
                                    if (signal_strength > 30) {
                                        newItem.find(".wireless_strength").addClass("wireless_strength_2bars");
                                    } else {
                                        if (signal_strength > 10) {
                                            newItem.find(".wireless_strength").addClass("wireless_strength_1bars");
                                        } else {
                                            if (signal_strength > 0) {
                                                newItem.find(".wireless_strength").addClass("wireless_strength_0bars");
                                            } else {
                                                return;
                                            }
                                        }
                                    }
                                }
                            }
                        }
                        if (ap_connected) {
                            newItemIdName = "connected_" + newItemIdName;
                        } else {
                            newItemIdName = "new_" + newItemIdName;
                        }
                        newItemIdName = newItemIdName.replace(/[.]/g, "_").replace(/\s/g, "_");
                        newItem.attr("id", newItemIdName);
                        if (wifi_ap_list[value.mac] != null ) {
                            $("#wifi_ap_list_content_h ul li").each(function(i){
                                if ($(this).find(".wireless_ap_mac").text() == value.mac) {
                                    $(this).remove();
                                    delete wifi_ap_list[value.mac];
                                    return;
                                }
                            });//change
                        }
                         $("#wifi_ap_list_h").append(newItem);//change
                        wifi_ap_found_count++;
                    }
                });
                for (var mac in wifi_ap_list) {
                    if (wifi_ap_list[mac] != null ) {
                        $("#wifi_ap_list_content_h ul li").each(function(i) {
                            if ($(this).find(".wireless_ap_mac").text() == mac) {
                                $(this).remove();
                                delete wifi_ap_list[mac];
                                wifi_ap_found_count--;
                                return;
                            }
                        });//change
                    }
                }
                $("#wifi_ap_list_content_h ul li").tsort({
                    attr: "id",
                    order: "asc"
                });//change
            }
        },
        "error": function(request, status, error) {
        	//console.log("wifItem-39562");
        	},
        "complete": function(jqXHR, textStatus) {
        	//console.log("wflob-39505")
            if (empty_flag) {
                wifi_ap_found_count++;
                var newItem = $("#wifi_ap_container_h .wifi_ap_list_item_h.default").clone();
                newItem.find(".wireless_label_text").text(dictionaryList["other_network"]);
                newItem.find(".wireless_ap_mac").text("");
                newItem.find(".wireless_ap_security_mode").text("");
                newItem.removeClass("default");
                newItem.attr("id", "other_network");
                newItem.find(".wireless_lock").addClass("wireless_unlock").removeClass("wireless_lock");
                $("#wifi_ap_list_h").append(newItem);//change
            }
            $("#wifi_ap_container_h .wifi_ap_list_item_h").each(function(i) {
                if (i == 0) {
                    return;
                }
                if (i % 2 === 0) {
                    $(this).addClass("alt_row_bg");
                } else {
                    $(this).removeClass("alt_row_bg");
                }
            });
            if (wifi_ap_found_count > 4) {
                 $("#wifi_ap_list_content_h").addClass("wifi_ap_content_scroll_width");//change
            } else {
                $("#wifi_ap_list_content_h").removeClass("wifi_ap_content_scroll_width");//change
            }
            wifi_client_access_points_inprogress = false;
            $("#wifi_ap_container_h .wifi_list_please_wait").hide();
            $("#wifi_ap_list_content_h").scrollTop(0);//change
            $("#wifi_ap_list_h").show();
        }
    });
}
var gWiFiEnabled_h = false;
$(document).ready(function() {
	$("#wifi_broadcast_popup").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        open: function(event, ui) {
            
        },
        title: '<div class="wizard_dialog_title">' + $("#wifi_broadcast_popup").attr("title") + "</div>"
  });
	$("#wifi_enabled_form_h").restForm({
        "refreshDataCallback": function(data) {
        	//console.log("wflob-39542");
            if (data != null  && data.wifi_client_configuration != null ) {
                if (data.wifi_client_configuration.enabled.toLowerCase() == "true") {
                    $("#wifi_enabled_form_h").find("#WifiEnableToggle_h").attr("checked", true);
                    $("#WifiEnableValue_h").val("true");
                    $("#wifi_ap_list_content_h").show();
                    $("#wifi_ap_list_off_h").hide();
                    gWiFiEnabled_h = true;
                    showWifiClientAccessPointListContainer();
                } else {
                    $("#wifi_enabled_form_h").find("#WifiEnableToggle_h").attr("checked", false);
                    $("#WifiEnableValue_h").val("false");
                    //$("#wifi_ap_list_content_h").hide();
                    $("#wifi_ap_list_content_h").show();
                    //$("#wifi_ap_list_off_h").show();
                    $("#wifi_ap_list_off_h").hide();
                    gWiFiEnabled_h = false;
                }
                checkCurrentWifiClientConnection_onboarding();
            }
        },
        "beforeProcessForm": function() {
            if (gTrustedNetwork && !gFoundMe) {
                $("#wifi_ap_list_off_h").show();
                $("#wifi_ap_list_content_h").hide();
                $(".wifi_ap_list_item_h.default").siblings().remove();
                disableIdTag(".network_separator2");
            }
        },
        "processFormSuccessCallback": function(data) {
        	//console.log("wifSwitch-39575");
            if ($("#WifiEnableValue_h").val() == "true") {
                gWiFiEnabled_h = true;
                checkCurrentWifiClientConnection_onboarding();
                //showWifiClientAccessPointListContainer();
                $("#wifi_ap_list_off_h").hide();
                $("#wifi_ap_list_content_h").show();
            } else {
                gWiFiEnabled_h = false;
                $("#wifi_ap_list_off_h").show();
                $("#wifi_ap_list_content_h").hide();
                $("#wifi_ap_container_h .wifi_ap_list_item_h.default").siblings().remove();
                disableIdTag(".network_separator2");
            }
        },
        "processFormErrorCallback": function() {
            if (gTrustedNetwork && !gFoundMe) {
                gWiFiEnabled_h = false;
                displayDisableDisconnectCompleteMessage();
            }
        }
    });
    $("#eula_check_form").restForm();
    $("#eula_checkbox").attr("checked", false);
 
    $("#setup_plex_onboarding_form").restForm();
    
    $("#usb_automatic_transfer_onboarding_form").restForm({
        "useStubs": false,
        "beforeProcessForm": function() {
            if (!$("#usb_automatic_transfer_onboarding_switch").is(":checked")) {
                $("#usb_auto_transfer_onboarding_field").val("true");
                //$("#usb_transfer_now_button_container").hide()
            } else {
                $("#usb_auto_transfer_onboarding_field").val("false");
                //$("#usb_transfer_now_button_container").show()
            }
        },
        "refreshDataCallback": function(data) {
            if (data.storage_transfer.usb.auto_transfer == "true") {
                $("#usb_automatic_transfer_onboarding_switch").attr("checked", true);
                automaticUsbImport = true;
            } else {
                $("#usb_automatic_transfer_onboarding_switch").attr("checked", false);
                automaticUsbImport = false;
            }
            //showHideUSBImportNowButton()
        },
        "processFormSuccessCallback": function(data) {
            if ($("#usb_automatic_transfer_onboarding_switch").is(":checked")) {
                automaticUsbImport = true;
            } else {
                automaticUsbImport = false;
            }
            //showHideUSBImportNowButton();
        }
    });
    $("#usb_automatic_transfer_onboarding_form").restForm("refreshForm");
    $("#product_improvement_onboarding_form").restForm({
        "refreshDataCallback": function(data) {
            if (data != null  && data.privacy_options != null ) {
                if (data.privacy_options.send_serial_number.toLowerCase() == "true") {
                    $("#product_improvement_onboarding_form").find("#PrivacyOptionToggle_onboarding").attr("checked", true);
                    $("#PrivacyOptionValue_onboarding").val("true");
                } else {
                    $("#product_improvement_onboarding_form").find("#PrivacyOptionToggle_onboarding").attr("checked", false);
                    $("#PrivacyOptionValue_onboarding").val("false");
                }
            } else {}
        },
        "processFormCompleteCallback": function(jqXHR, textStatus) {
            $("#product_improvement_onboarding_form").restForm("processFormComplete", jqXHR, textStatus);
            updatePIPDialogs();
        }
    });
    $("#product_improvement_onboading_form").restForm("refreshForm");
    $("#shortcut_form").restForm();
    $("#register_onboarding_form").restForm({
       "processFormSuccessCallback":function(data){
         //console.log("regist-39814");
         //console.log("regist-39840:"+data.device_registration.status)
          showOnboardingAllSet()
        },
        "processFormErrorCallback":function(request, status, error){
          //console.log("regist-39842");
          var xotree = new XML.ObjTree();
          var data = xotree.parseXML(request.responseText);
          var error_code = data.device_registration.error_code;
          var get_string = "";
          
          if(data.device_registration.error_message!=null||data.device_registration.error_message!=""){
              get_string = errorsList["error_id_" + data.device_registration.error_id].split("(")[0];
          }else{
              get_string = $("#register_error_massage").attr("error"+error_code);
          }
          $("#register_error_massage").show().addClass("support_warn");
          var refister_fail = errorsList["registertion_failed"]
          refister_fail = refister_fail.replace(/register.wdc.com/,"<a href='http://support.wdc.com'>support.wdc.com</a>")
          $("#register_error_massage").html(get_string+"<br />"+ refister_fail);
          

          var _first = $("#register_onboarding_first").attr("orig");
          var _last = $("#register_onboarding_last").attr("orig");
          var _email = $("#register_onboarding_email").attr("orig");
          $("#register_onboarding_first").val(_first)
          $("#register_onboarding_last").val(_last)
          $("#register_onboarding_email").val(_email)
          //showOnboardingAllSet()
          //alert("register-error:"+status)
        }
    });
    
    $("#support_register_form").restForm({
		"refreshDataCallback":function(data){
			supportRegister_load();
			var _first = $("#support_register_first").attr("orig");
			var _last = $("#support_register_last").attr("orig");
			var _email = $("#support_register_email").attr("orig");
			$("#support_register_first").val(_first)
			$("#support_register_last").val(_last)
			$("#support_register_email").val(_email)
			$("#support_register_error_massage").html("").hide();
		},
		"processFormSuccessCallback":function(data){
			$("#support_register_error_massage").html(dictionaryList["registration_success"]).show();
		},
		"processFormErrorCallback":function(request, status, error){
			var xotree = new XML.ObjTree();
			var data = xotree.parseXML(request.responseText);
			var error_code = data.device_registration.error_code;
			var get_string = "";
		  
			if(data.device_registration.error_message!=null||data.device_registration.error_message!=""){
				get_string = errorsList["error_id_" + data.device_registration.error_id].split("(")[0];
			}else{
				get_string = $("#support_register_error_massage").attr("error"+error_code);
			}
		
			$("#support_register_error_massage").show().addClass("support_warn");
			var refister_fail = errorsList["registertion_failed"]
			refister_fail = refister_fail.replace(/register.wdc.com/,"<a href='http://support.wdc.com'>support.wdc.com</a>")
			$("#support_register_error_massage").html(get_string+"<br />"+ refister_fail);
			
			var _first = $("#support_register_first").attr("orig");
			var _last = $("#support_register_last").attr("orig");
			var _email = $("#support_register_email").attr("orig");
			$("#support_register_first").val(_first)
			$("#support_register_last").val(_last)
			$("#support_register_email").val(_email)
		}
    });
    $("#ssh_password_configer_pop").dialog({
        autoOpen: false,
        resizable: false,
        position: "center",
        width: dialogWidth,
        minHeight: dialogMinHeight,
        dialogClass: "mochi_dialog mochi_dialog_network",
        modal: true,
        stack: false,
        open: function(event, ui) { 
            $("#ssh_renew_pwd").val("");
            $("#ssh_renew_comfirm_pwd").val("");
        },
        title: '<div class="wizard_dialog_title">' + $("#ssh_password_configer_pop").attr("title") + "</div>"
    });
    
});
$("#ssh_renew_confirmation_close_button").click(function() {
	$("#ssh_renew_pass_erro").html("");
    $("#ssh_password_configer_pop").dialog("close");
});
$("#ssh_password_configer").live("click",function(){
    $("#ssh_password_configer_pop").dialog("open");
});
$("#wifi_broadcast_ok_button").live("click", function(){
	 $("#wifi_broadcast_popup").dialog("close");
})
/*$("#wifi_edit_config_form_broadcast_toggle").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#ssh_confirmation").dialog("open");
            return;
        } else {
            $("#SettingDiagnosticsSSHValue").val("false");
        }
        $("#ssh_form").submit();
    });*/


$("#usb_automatic_transfer_onboarding_switch").click(function() {
        $("#usb_automatic_transfer_onboarding_form").submit();
});

$("#PrivacyOptionToggle_onboarding").live("toggle", function(e) {
        if ($(this).is(":checked")) {
            $("#PrivacyOptionValue_onboarding").val("true");
        } else {
            $("#PrivacyOptionValue_onboarding").val("false");
        }
        $("#product_improvement_onboarding_form").submit();
});

function showSetupHomeNetwork() {
    $(".toolbar_item").css("display", "none");
    $("#language_toolbar").hide();
    //$("#wifi_enabled_form_h").restForm("refreshForm");
    $("#connect_home_network_container").show();
    $("#main_nav_container").hide();
    $("#page").show();
    reflash_wifiListData()
}

function registerPost(){
    $("#register_onboarding_option").val("yes")
    $("#register_onboarding_country").val(gLanguage.substr( 3, 5));
    $("#register_onboarding_lang").val(gLanguage3Letter.toUpperCase());
    $("#register_onboarding_form").submit();
}
function showOnboardingAllSet(){
      $("#setup_auto_firmware_update_container").hide();
      $("#onboarding_all_set_container").show();
}
function checkInternetConnect(callback){
        $.ajaxAPI({
            "url": "internet_access",
            "type": "GET",
            "success": function(data) {
                if (data != null  && data.internet_access != null  && data.internet_access.connectivity != null ) {
                    if (data.internet_access.connectivity == "true") {
                        /*if (gPopupBlocker) {
                            if (isPopupBlockerEnabled()) {
                                gPopupBlocker = true;
                                $("#popup_blocked_dialog").dialog("open");
                            } else {
                                gPopupBlocker = false;
                            }
                        }
                        window.open(external_link, target_window);
                        $("#no_internet_access").hide();*/
                        //console.log("register-39883");
                        callback(data.internet_access.connectivity);
                        //return true;
                        
                    } else {
                        //console.log("register-39885");
                        callback(data.internet_access.connectivity);

                       /* $("#no_internet_access_dialog").dialog("open");
                        if (gConnectedNetwork) {
                            $("#no_internet_access").show();
                        }*/
                        //return false;
                    }
                }
            }
        });
}

$("#eulaAcceptBtn").on("click",function(){
		if(!$("#eula_checkbox").is(":checked")){
			$("#eula_checkbox").attr("checked",true);
			$("#eulaAgreeLink").removeClass("gray_out");
		}
		
		
		$("#eula_iframe_block").hide();
		$("#eula_main_block").show();
});
$("#eula_checkbox").on("toggle",function(){
	if($(this).is(":checked")){
		$("#eulaAgreeLink").removeClass("gray_out");
		authenticationHandler.flagStartOnboarding();
	}else{
		authenticationHandler.finishOnboarding();//set false
		$("#eulaAgreeLink").addClass("gray_out");
	}
});
$("#eulaPrintBtn").on("click",function(){
	var frm = document.getElementById("eula_iframe").contentWindow;
            frm.focus();// focus on contentWindow is needed on some ie versions
            frm.print();
});
$("#eulaCancelBtn").on("click",function(){
	$("#eula_iframe_block").hide();
		$("#eula_main_block").show();
});
$("#setup_plex_auto_slurp_back_button").on("click",function(){
  $("#setup_plex_container").hide();
  //$("#setup_sd_auto_slurp_container").show();
  showSetupSdAutoSlurp();
});
$("#setup_plex_auto_slurp_ok_button").on("click",function(){
  /*if($("#plex_automatic_transfer_onboarding_switch").is(":checked")){
      $.get('views/media/partial/plexsettings/start_plex_download.php'); 
   }*/
  
  $("#setup_plex_container").hide();
  showSetupFirmwareUpdate();
 });


 $("#setup_plex_auto_slurp_skip_button").on("click",function(){
  $("#setup_plex_container").hide();
  showSetupFirmwareUpdate();
 });
$("#create_network_password_back_button").on("click",function(){
    $("#create_network_security_container").hide();
     delete_eula_grayOut();
     $("#eula_container").show();
     $("#language_toolbar").show();
});
$("#setup_auto_firmware_update_back_button").on("click",function(){
    $("#setup_auto_firmware_update_container").hide();
    $("#setup_sd_auto_slurp_container").hide();
      if(gInternetAccess){
        $("#setup_plex_container").show();
       }else{
        showSetupSdAutoSlurp();
       }
    
});
$("#setup_auto_firmware_update_skip_button").on("click", function(){
    $("#setup_auto_firmware_update_container").hide();
    $("#onboarding_all_set_container").show();
    
});
$("#onboarding_all_set_ok_button").on("click",function(){
  if($("#setup_enable_shutcut_checkbox").is(":checked"))
      window.location = "/UI/shortcut";

		authenticationHandler.acceptEula();
    $("#onboarding_all_set_container").hide()
    onboardingAllSetFinish();
    pollingHandler.poll();
    dashboardHandler.updateAll();

  
});
$("#onboarding_all_set_back_button").on("click",function(){
  $("#onboarding_all_set_container").hide();
  showSetupFirmwareUpdate();
});
$("#wifi_ap_list_onboarding_btn").on("click", function(){
  $(".wifi_list_please_wait").show();
  $("#wifi_ap_list_h").hide();
  $("#wifi_ap_container_h .wifi_ap_list_item_h.default").siblings().remove();
   checkCurrentWifiClientConnection_onboarding(); 
 });
function add_eula_grayOut(){
	var gray_html = '<div id="eula_greyOut"></div>'	;
	$("body").append(gray_html);
	$("#eula_greyOut").fadeIn(400);
}
function delete_eula_grayOut(){
	 $("#eula_greyOut").fadeOut(400,function(){
	 		$(this).remove();
	 	});
}
function showSetupPlex() {
    /*$(".toolbar_item").hide();
    $("#language_toolbar").hide();*/
    $("#plex_automatic_transfer_onboarding_switch").attr("checked",true)
    $("#main_nav_container").hide();
    $("#page").show();
    $("#setup_plex_container").show();
    
}
function onboarding_start_preload(){
  $("#sdcard_automatic_transfer_onboarding_form").restForm("refreshForm");
  $("#setup_auto_firmware_update_form").restForm("refreshForm");
  
}

function checkCurrentConnection_chanel() {
	if(frequency_channel == 2){
		$("#wifi_edit_config_form_channel_select").addClass("ui-state-disabled").selectmenu("disable");
		$("#wifi_edit_config_form_channel_select_5g").removeClass("ui-state-disabled");
		$("#wifi_edit_config_form_channel_select_5g").removeAttr("disabled");
		$("#wifi_edit_config_form_channel_select_5g").selectmenu("enable");
	}else if(frequency_channel == 5){
		$("#wifi_edit_config_form_channel_select_5g").addClass("ui-state-disabled").selectmenu("disable");
		$("#wifi_edit_config_form_channel_select").removeClass("ui-state-disabled");
		$("#wifi_edit_config_form_channel_select").removeAttr("disabled");
		$("#wifi_edit_config_form_channel_select").selectmenu("enable");
	}else{
		$("#wifi_edit_config_form_channel_select_5g").removeClass("ui-state-disabled");
		$("#wifi_edit_config_form_channel_select_5g").removeAttr("disabled");
		$("#wifi_edit_config_form_channel_select_5g").selectmenu("enable");
		$("#wifi_edit_config_form_channel_select").removeClass("ui-state-disabled");
		$("#wifi_edit_config_form_channel_select").removeAttr("disabled");
		$("#wifi_edit_config_form_channel_select").selectmenu("enable");
	} 
}

